var _se=Object.defineProperty;var LD=e=>{throw TypeError(e)};var jse=(e,t,n)=>t in e?_se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pC=(e,t,n)=>jse(e,typeof t!="symbol"?t+"":t,n),gC=(e,t,n)=>t.has(e)||LD("Cannot "+n);var Me=(e,t,n)=>(gC(e,t,"read from private field"),n?n.call(e):t.get(e)),Kn=(e,t,n)=>t.has(e)?LD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),fn=(e,t,n,r)=>(gC(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),vs=(e,t,n)=>(gC(e,t,"access private method"),n);var iw=(e,t,n,r)=>({set _(a){fn(e,t,a,n)},get _(){return Me(e,t,r)}});function U6(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function V6(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var z6={exports:{}},U1={},H6={exports:{}},Tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0=Symbol.for("react.element"),Sse=Symbol.for("react.portal"),Nse=Symbol.for("react.fragment"),kse=Symbol.for("react.strict_mode"),Cse=Symbol.for("react.profiler"),Ase=Symbol.for("react.provider"),Ese=Symbol.for("react.context"),Tse=Symbol.for("react.forward_ref"),Pse=Symbol.for("react.suspense"),Ose=Symbol.for("react.memo"),Ise=Symbol.for("react.lazy"),FD=Symbol.iterator;function Rse(e){return e===null||typeof e!="object"?null:(e=FD&&e[FD]||e["@@iterator"],typeof e=="function"?e:null)}var W6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q6=Object.assign,K6={};function $g(e,t,n){this.props=e,this.context=t,this.refs=K6,this.updater=n||W6}$g.prototype.isReactComponent={};$g.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function G6(){}G6.prototype=$g.prototype;function GO(e,t,n){this.props=e,this.context=t,this.refs=K6,this.updater=n||W6}var YO=GO.prototype=new G6;YO.constructor=GO;q6(YO,$g.prototype);YO.isPureReactComponent=!0;var BD=Array.isArray,Y6=Object.prototype.hasOwnProperty,QO={current:null},Q6={key:!0,ref:!0,__self:!0,__source:!0};function X6(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Y6.call(t,r)&&!Q6.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:P0,type:e,key:i,ref:o,props:a,_owner:QO.current}}function $se(e,t){return{$$typeof:P0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function XO(e){return typeof e=="object"&&e!==null&&e.$$typeof===P0}function Mse(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var UD=/\/+/g;function vC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Mse(""+e.key):t.toString(36)}function l_(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case P0:case Sse:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+vC(o,0):r,BD(a)?(n="",e!=null&&(n=e.replace(UD,"$&/")+"/"),l_(a,t,n,"",function(u){return u})):a!=null&&(XO(a)&&(a=$se(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(UD,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",BD(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+vC(i,l);o+=l_(i,t,n,c,a)}else if(c=Rse(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+vC(i,l++),o+=l_(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ow(e,t,n){if(e==null)return e;var r=[],a=0;return l_(e,r,"","",function(i){return t.call(n,i,a++)}),r}function Dse(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Js={current:null},c_={transition:null},Lse={ReactCurrentDispatcher:Js,ReactCurrentBatchConfig:c_,ReactCurrentOwner:QO};function J6(){throw Error("act(...) is not supported in production builds of React.")}Tn.Children={map:ow,forEach:function(e,t,n){ow(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ow(e,function(){t++}),t},toArray:function(e){return ow(e,function(t){return t})||[]},only:function(e){if(!XO(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Tn.Component=$g;Tn.Fragment=Nse;Tn.Profiler=Cse;Tn.PureComponent=GO;Tn.StrictMode=kse;Tn.Suspense=Pse;Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lse;Tn.act=J6;Tn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=q6({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=QO.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Y6.call(t,c)&&!Q6.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:P0,type:e.type,key:a,ref:i,props:r,_owner:o}};Tn.createContext=function(e){return e={$$typeof:Ese,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ase,_context:e},e.Consumer=e};Tn.createElement=X6;Tn.createFactory=function(e){var t=X6.bind(null,e);return t.type=e,t};Tn.createRef=function(){return{current:null}};Tn.forwardRef=function(e){return{$$typeof:Tse,render:e}};Tn.isValidElement=XO;Tn.lazy=function(e){return{$$typeof:Ise,_payload:{_status:-1,_result:e},_init:Dse}};Tn.memo=function(e,t){return{$$typeof:Ose,type:e,compare:t===void 0?null:t}};Tn.startTransition=function(e){var t=c_.transition;c_.transition={};try{e()}finally{c_.transition=t}};Tn.unstable_act=J6;Tn.useCallback=function(e,t){return Js.current.useCallback(e,t)};Tn.useContext=function(e){return Js.current.useContext(e)};Tn.useDebugValue=function(){};Tn.useDeferredValue=function(e){return Js.current.useDeferredValue(e)};Tn.useEffect=function(e,t){return Js.current.useEffect(e,t)};Tn.useId=function(){return Js.current.useId()};Tn.useImperativeHandle=function(e,t,n){return Js.current.useImperativeHandle(e,t,n)};Tn.useInsertionEffect=function(e,t){return Js.current.useInsertionEffect(e,t)};Tn.useLayoutEffect=function(e,t){return Js.current.useLayoutEffect(e,t)};Tn.useMemo=function(e,t){return Js.current.useMemo(e,t)};Tn.useReducer=function(e,t,n){return Js.current.useReducer(e,t,n)};Tn.useRef=function(e){return Js.current.useRef(e)};Tn.useState=function(e){return Js.current.useState(e)};Tn.useSyncExternalStore=function(e,t,n){return Js.current.useSyncExternalStore(e,t,n)};Tn.useTransition=function(){return Js.current.useTransition()};Tn.version="18.3.1";H6.exports=Tn;var g=H6.exports;const V=Zn(g),JO=U6({__proto__:null,default:V},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fse=g,Bse=Symbol.for("react.element"),Use=Symbol.for("react.fragment"),Vse=Object.prototype.hasOwnProperty,zse=Fse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hse={key:!0,ref:!0,__self:!0,__source:!0};function Z6(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Vse.call(t,r)&&!Hse.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Bse,type:e,key:i,ref:o,props:a,_owner:zse.current}}U1.Fragment=Use;U1.jsx=Z6;U1.jsxs=Z6;z6.exports=U1;var s=z6.exports,eV={exports:{}},to={},tV={exports:{}},nV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,K){var X=F.length;F.push(K);e:for(;0<X;){var se=X-1>>>1,D=F[se];if(0<a(D,K))F[se]=K,F[X]=D,X=se;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var K=F[0],X=F.pop();if(X!==K){F[0]=X;e:for(var se=0,D=F.length,Y=D>>>1;se<Y;){var ue=2*(se+1)-1,xe=F[ue],Ne=ue+1,oe=F[Ne];if(0>a(xe,X))Ne<D&&0>a(oe,xe)?(F[se]=oe,F[Ne]=X,se=Ne):(F[se]=xe,F[ue]=X,se=ue);else if(Ne<D&&0>a(oe,X))F[se]=oe,F[Ne]=X,se=Ne;else break e}}return K}function a(F,K){var X=F.sortIndex-K.sortIndex;return X!==0?X:F.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var K=n(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=F)r(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(u)}}function N(F){if(x=!1,w(F),!v)if(n(c)!==null)v=!0,G(k);else{var K=n(u);K!==null&&U(N,K.startTime-F)}}function k(F,K){v=!1,x&&(x=!1,_(P),P=-1),p=!0;var X=m;try{for(w(K),h=n(c);h!==null&&(!(h.expirationTime>K)||F&&!$());){var se=h.callback;if(typeof se=="function"){h.callback=null,m=h.priorityLevel;var D=se(h.expirationTime<=K);K=e.unstable_now(),typeof D=="function"?h.callback=D:h===n(c)&&r(c),w(K)}else r(c);h=n(c)}if(h!==null)var Y=!0;else{var ue=n(u);ue!==null&&U(N,ue.startTime-K),Y=!1}return Y}finally{h=null,m=X,p=!1}}var C=!1,A=null,P=-1,O=5,T=-1;function $(){return!(e.unstable_now()-T<O)}function L(){if(A!==null){var F=e.unstable_now();T=F;var K=!0;try{K=A(!0,F)}finally{K?z():(C=!1,A=null)}}else C=!1}var z;if(typeof j=="function")z=function(){j(L)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,B=W.port2;W.port1.onmessage=L,z=function(){B.postMessage(null)}}else z=function(){b(L,0)};function G(F){A=F,C||(C=!0,z())}function U(F,K){P=b(function(){F(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,G(k))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(F){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var X=m;m=K;try{return F()}finally{m=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=m;m=F;try{return K()}finally{m=X}},e.unstable_scheduleCallback=function(F,K,X){var se=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?se+X:se):X=se,F){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=X+D,F={id:d++,callback:K,priorityLevel:F,startTime:X,expirationTime:D,sortIndex:-1},X>se?(F.sortIndex=X,t(u,F),n(c)===null&&F===n(u)&&(x?(_(P),P=-1):x=!0,U(N,X-se))):(F.sortIndex=D,t(c,F),v||p||(v=!0,G(k))),F},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(F){var K=m;return function(){var X=m;m=K;try{return F.apply(this,arguments)}finally{m=X}}}})(nV);tV.exports=nV;var Wse=tV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qse=g,Ji=Wse;function Xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rV=new Set,rx={};function Df(e,t){Dp(e,t),Dp(e+"Capture",t)}function Dp(e,t){for(rx[e]=t,e=0;e<t.length;e++)rV.add(t[e])}var Yc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hE=Object.prototype.hasOwnProperty,Kse=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VD={},zD={};function Gse(e){return hE.call(zD,e)?!0:hE.call(VD,e)?!1:Kse.test(e)?zD[e]=!0:(VD[e]=!0,!1)}function Yse(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Qse(e,t,n,r){if(t===null||typeof t>"u"||Yse(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zs(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ls={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ls[e]=new Zs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ls[t]=new Zs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ls[e]=new Zs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ls[e]=new Zs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ls[e]=new Zs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ls[e]=new Zs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ls[e]=new Zs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ls[e]=new Zs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ls[e]=new Zs(e,5,!1,e.toLowerCase(),null,!1,!1)});var ZO=/[\-:]([a-z])/g;function e2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ZO,e2);ls[t]=new Zs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ZO,e2);ls[t]=new Zs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ZO,e2);ls[t]=new Zs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ls[e]=new Zs(e,1,!1,e.toLowerCase(),null,!1,!1)});ls.xlinkHref=new Zs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ls[e]=new Zs(e,1,!1,e.toLowerCase(),null,!0,!0)});function t2(e,t,n,r){var a=ls.hasOwnProperty(t)?ls[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Qse(t,n,a,r)&&(n=null),r||a===null?Gse(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var uu=qse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lw=Symbol.for("react.element"),qm=Symbol.for("react.portal"),Km=Symbol.for("react.fragment"),n2=Symbol.for("react.strict_mode"),fE=Symbol.for("react.profiler"),aV=Symbol.for("react.provider"),sV=Symbol.for("react.context"),r2=Symbol.for("react.forward_ref"),mE=Symbol.for("react.suspense"),pE=Symbol.for("react.suspense_list"),a2=Symbol.for("react.memo"),Wu=Symbol.for("react.lazy"),iV=Symbol.for("react.offscreen"),HD=Symbol.iterator;function Zv(e){return e===null||typeof e!="object"?null:(e=HD&&e[HD]||e["@@iterator"],typeof e=="function"?e:null)}var Gr=Object.assign,yC;function Sy(e){if(yC===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yC=t&&t[1]||""}return`
`+yC+e}var xC=!1;function bC(e,t){if(!e||xC)return"";xC=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{xC=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Sy(e):""}function Xse(e){switch(e.tag){case 5:return Sy(e.type);case 16:return Sy("Lazy");case 13:return Sy("Suspense");case 19:return Sy("SuspenseList");case 0:case 2:case 15:return e=bC(e.type,!1),e;case 11:return e=bC(e.type.render,!1),e;case 1:return e=bC(e.type,!0),e;default:return""}}function gE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Km:return"Fragment";case qm:return"Portal";case fE:return"Profiler";case n2:return"StrictMode";case mE:return"Suspense";case pE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sV:return(e.displayName||"Context")+".Consumer";case aV:return(e._context.displayName||"Context")+".Provider";case r2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case a2:return t=e.displayName||null,t!==null?t:gE(e.type)||"Memo";case Wu:t=e._payload,e=e._init;try{return gE(e(t))}catch{}}return null}function Jse(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gE(t);case 8:return t===n2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oV(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zse(e){var t=oV(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cw(e){e._valueTracker||(e._valueTracker=Zse(e))}function lV(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=oV(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function O_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vE(e,t){var n=t.checked;return Gr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function WD(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kd(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cV(e,t){t=t.checked,t!=null&&t2(e,"checked",t,!1)}function yE(e,t){cV(e,t);var n=kd(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xE(e,t.type,n):t.hasOwnProperty("defaultValue")&&xE(e,t.type,kd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qD(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function xE(e,t,n){(t!=="number"||O_(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ny=Array.isArray;function dp(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kd(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function bE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Gr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function KD(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Xe(92));if(Ny(n)){if(1<n.length)throw Error(Xe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kd(n)}}function uV(e,t){var n=kd(t.value),r=kd(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function GD(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dV(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dV(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uw,hV=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uw=uw||document.createElement("div"),uw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ax(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $y={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eie=["Webkit","ms","Moz","O"];Object.keys($y).forEach(function(e){eie.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$y[t]=$y[e]})});function fV(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$y.hasOwnProperty(e)&&$y[e]?(""+t).trim():t+"px"}function mV(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=fV(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var tie=Gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _E(e,t){if(t){if(tie[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Xe(62))}}function jE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SE=null;function s2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var NE=null,hp=null,fp=null;function YD(e){if(e=R0(e)){if(typeof NE!="function")throw Error(Xe(280));var t=e.stateNode;t&&(t=q1(t),NE(e.stateNode,e.type,t))}}function pV(e){hp?fp?fp.push(e):fp=[e]:hp=e}function gV(){if(hp){var e=hp,t=fp;if(fp=hp=null,YD(e),t)for(e=0;e<t.length;e++)YD(t[e])}}function vV(e,t){return e(t)}function yV(){}var wC=!1;function xV(e,t,n){if(wC)return e(t,n);wC=!0;try{return vV(e,t,n)}finally{wC=!1,(hp!==null||fp!==null)&&(yV(),gV())}}function sx(e,t){var n=e.stateNode;if(n===null)return null;var r=q1(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Xe(231,t,typeof n));return n}var kE=!1;if(Yc)try{var ey={};Object.defineProperty(ey,"passive",{get:function(){kE=!0}}),window.addEventListener("test",ey,ey),window.removeEventListener("test",ey,ey)}catch{kE=!1}function nie(e,t,n,r,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var My=!1,I_=null,R_=!1,CE=null,rie={onError:function(e){My=!0,I_=e}};function aie(e,t,n,r,a,i,o,l,c){My=!1,I_=null,nie.apply(rie,arguments)}function sie(e,t,n,r,a,i,o,l,c){if(aie.apply(this,arguments),My){if(My){var u=I_;My=!1,I_=null}else throw Error(Xe(198));R_||(R_=!0,CE=u)}}function Lf(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bV(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function QD(e){if(Lf(e)!==e)throw Error(Xe(188))}function iie(e){var t=e.alternate;if(!t){if(t=Lf(e),t===null)throw Error(Xe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return QD(a),e;if(i===r)return QD(a),t;i=i.sibling}throw Error(Xe(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(Xe(189))}}if(n.alternate!==r)throw Error(Xe(190))}if(n.tag!==3)throw Error(Xe(188));return n.stateNode.current===n?e:t}function wV(e){return e=iie(e),e!==null?_V(e):null}function _V(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_V(e);if(t!==null)return t;e=e.sibling}return null}var jV=Ji.unstable_scheduleCallback,XD=Ji.unstable_cancelCallback,oie=Ji.unstable_shouldYield,lie=Ji.unstable_requestPaint,fa=Ji.unstable_now,cie=Ji.unstable_getCurrentPriorityLevel,i2=Ji.unstable_ImmediatePriority,SV=Ji.unstable_UserBlockingPriority,$_=Ji.unstable_NormalPriority,uie=Ji.unstable_LowPriority,NV=Ji.unstable_IdlePriority,V1=null,Jl=null;function die(e){if(Jl&&typeof Jl.onCommitFiberRoot=="function")try{Jl.onCommitFiberRoot(V1,e,void 0,(e.current.flags&128)===128)}catch{}}var gl=Math.clz32?Math.clz32:mie,hie=Math.log,fie=Math.LN2;function mie(e){return e>>>=0,e===0?32:31-(hie(e)/fie|0)|0}var dw=64,hw=4194304;function ky(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function M_(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=ky(l):(i&=o,i!==0&&(r=ky(i)))}else o=n&~a,o!==0?r=ky(o):i!==0&&(r=ky(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-gl(t),a=1<<n,r|=e[n],t&=~a;return r}function pie(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gie(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-gl(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=pie(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function AE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kV(){var e=dw;return dw<<=1,!(dw&4194240)&&(dw=64),e}function _C(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function O0(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gl(t),e[t]=n}function vie(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-gl(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function o2(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gl(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var or=0;function CV(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var AV,l2,EV,TV,PV,EE=!1,fw=[],fd=null,md=null,pd=null,ix=new Map,ox=new Map,Yu=[],yie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JD(e,t){switch(e){case"focusin":case"focusout":fd=null;break;case"dragenter":case"dragleave":md=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":ix.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ox.delete(t.pointerId)}}function ty(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=R0(t),t!==null&&l2(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function xie(e,t,n,r,a){switch(t){case"focusin":return fd=ty(fd,e,t,n,r,a),!0;case"dragenter":return md=ty(md,e,t,n,r,a),!0;case"mouseover":return pd=ty(pd,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return ix.set(i,ty(ix.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ox.set(i,ty(ox.get(i)||null,e,t,n,r,a)),!0}return!1}function OV(e){var t=zh(e.target);if(t!==null){var n=Lf(t);if(n!==null){if(t=n.tag,t===13){if(t=bV(n),t!==null){e.blockedOn=t,PV(e.priority,function(){EV(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function u_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=TE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);SE=r,n.target.dispatchEvent(r),SE=null}else return t=R0(n),t!==null&&l2(t),e.blockedOn=n,!1;t.shift()}return!0}function ZD(e,t,n){u_(e)&&n.delete(t)}function bie(){EE=!1,fd!==null&&u_(fd)&&(fd=null),md!==null&&u_(md)&&(md=null),pd!==null&&u_(pd)&&(pd=null),ix.forEach(ZD),ox.forEach(ZD)}function ny(e,t){e.blockedOn===t&&(e.blockedOn=null,EE||(EE=!0,Ji.unstable_scheduleCallback(Ji.unstable_NormalPriority,bie)))}function lx(e){function t(a){return ny(a,e)}if(0<fw.length){ny(fw[0],e);for(var n=1;n<fw.length;n++){var r=fw[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fd!==null&&ny(fd,e),md!==null&&ny(md,e),pd!==null&&ny(pd,e),ix.forEach(t),ox.forEach(t),n=0;n<Yu.length;n++)r=Yu[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yu.length&&(n=Yu[0],n.blockedOn===null);)OV(n),n.blockedOn===null&&Yu.shift()}var mp=uu.ReactCurrentBatchConfig,D_=!0;function wie(e,t,n,r){var a=or,i=mp.transition;mp.transition=null;try{or=1,c2(e,t,n,r)}finally{or=a,mp.transition=i}}function _ie(e,t,n,r){var a=or,i=mp.transition;mp.transition=null;try{or=4,c2(e,t,n,r)}finally{or=a,mp.transition=i}}function c2(e,t,n,r){if(D_){var a=TE(e,t,n,r);if(a===null)OC(e,t,r,L_,n),JD(e,r);else if(xie(a,e,t,n,r))r.stopPropagation();else if(JD(e,r),t&4&&-1<yie.indexOf(e)){for(;a!==null;){var i=R0(a);if(i!==null&&AV(i),i=TE(e,t,n,r),i===null&&OC(e,t,r,L_,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else OC(e,t,r,null,n)}}var L_=null;function TE(e,t,n,r){if(L_=null,e=s2(r),e=zh(e),e!==null)if(t=Lf(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bV(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return L_=e,null}function IV(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cie()){case i2:return 1;case SV:return 4;case $_:case uie:return 16;case NV:return 536870912;default:return 16}default:return 16}}var ad=null,u2=null,d_=null;function RV(){if(d_)return d_;var e,t=u2,n=t.length,r,a="value"in ad?ad.value:ad.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return d_=a.slice(e,1<r?1-r:void 0)}function h_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mw(){return!0}function eL(){return!1}function no(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mw:eL,this.isPropagationStopped=eL,this}return Gr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mw)},persist:function(){},isPersistent:mw}),t}var Mg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d2=no(Mg),I0=Gr({},Mg,{view:0,detail:0}),jie=no(I0),jC,SC,ry,z1=Gr({},I0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:h2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ry&&(ry&&e.type==="mousemove"?(jC=e.screenX-ry.screenX,SC=e.screenY-ry.screenY):SC=jC=0,ry=e),jC)},movementY:function(e){return"movementY"in e?e.movementY:SC}}),tL=no(z1),Sie=Gr({},z1,{dataTransfer:0}),Nie=no(Sie),kie=Gr({},I0,{relatedTarget:0}),NC=no(kie),Cie=Gr({},Mg,{animationName:0,elapsedTime:0,pseudoElement:0}),Aie=no(Cie),Eie=Gr({},Mg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tie=no(Eie),Pie=Gr({},Mg,{data:0}),nL=no(Pie),Oie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $ie(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rie[e])?!!t[e]:!1}function h2(){return $ie}var Mie=Gr({},I0,{key:function(e){if(e.key){var t=Oie[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=h_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Iie[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:h2,charCode:function(e){return e.type==="keypress"?h_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?h_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Die=no(Mie),Lie=Gr({},z1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rL=no(Lie),Fie=Gr({},I0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:h2}),Bie=no(Fie),Uie=Gr({},Mg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vie=no(Uie),zie=Gr({},z1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hie=no(zie),Wie=[9,13,27,32],f2=Yc&&"CompositionEvent"in window,Dy=null;Yc&&"documentMode"in document&&(Dy=document.documentMode);var qie=Yc&&"TextEvent"in window&&!Dy,$V=Yc&&(!f2||Dy&&8<Dy&&11>=Dy),aL=" ",sL=!1;function MV(e,t){switch(e){case"keyup":return Wie.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DV(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gm=!1;function Kie(e,t){switch(e){case"compositionend":return DV(t);case"keypress":return t.which!==32?null:(sL=!0,aL);case"textInput":return e=t.data,e===aL&&sL?null:e;default:return null}}function Gie(e,t){if(Gm)return e==="compositionend"||!f2&&MV(e,t)?(e=RV(),d_=u2=ad=null,Gm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $V&&t.locale!=="ko"?null:t.data;default:return null}}var Yie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Yie[e.type]:t==="textarea"}function LV(e,t,n,r){pV(r),t=F_(t,"onChange"),0<t.length&&(n=new d2("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ly=null,cx=null;function Qie(e){YV(e,0)}function H1(e){var t=Xm(e);if(lV(t))return e}function Xie(e,t){if(e==="change")return t}var FV=!1;if(Yc){var kC;if(Yc){var CC="oninput"in document;if(!CC){var oL=document.createElement("div");oL.setAttribute("oninput","return;"),CC=typeof oL.oninput=="function"}kC=CC}else kC=!1;FV=kC&&(!document.documentMode||9<document.documentMode)}function lL(){Ly&&(Ly.detachEvent("onpropertychange",BV),cx=Ly=null)}function BV(e){if(e.propertyName==="value"&&H1(cx)){var t=[];LV(t,cx,e,s2(e)),xV(Qie,t)}}function Jie(e,t,n){e==="focusin"?(lL(),Ly=t,cx=n,Ly.attachEvent("onpropertychange",BV)):e==="focusout"&&lL()}function Zie(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return H1(cx)}function eoe(e,t){if(e==="click")return H1(t)}function toe(e,t){if(e==="input"||e==="change")return H1(t)}function noe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _l=typeof Object.is=="function"?Object.is:noe;function ux(e,t){if(_l(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!hE.call(t,a)||!_l(e[a],t[a]))return!1}return!0}function cL(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uL(e,t){var n=cL(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cL(n)}}function UV(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UV(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function VV(){for(var e=window,t=O_();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=O_(e.document)}return t}function m2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function roe(e){var t=VV(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&UV(n.ownerDocument.documentElement,n)){if(r!==null&&m2(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=uL(n,i);var o=uL(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var aoe=Yc&&"documentMode"in document&&11>=document.documentMode,Ym=null,PE=null,Fy=null,OE=!1;function dL(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;OE||Ym==null||Ym!==O_(r)||(r=Ym,"selectionStart"in r&&m2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fy&&ux(Fy,r)||(Fy=r,r=F_(PE,"onSelect"),0<r.length&&(t=new d2("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ym)))}function pw(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qm={animationend:pw("Animation","AnimationEnd"),animationiteration:pw("Animation","AnimationIteration"),animationstart:pw("Animation","AnimationStart"),transitionend:pw("Transition","TransitionEnd")},AC={},zV={};Yc&&(zV=document.createElement("div").style,"AnimationEvent"in window||(delete Qm.animationend.animation,delete Qm.animationiteration.animation,delete Qm.animationstart.animation),"TransitionEvent"in window||delete Qm.transitionend.transition);function W1(e){if(AC[e])return AC[e];if(!Qm[e])return e;var t=Qm[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zV)return AC[e]=t[n];return e}var HV=W1("animationend"),WV=W1("animationiteration"),qV=W1("animationstart"),KV=W1("transitionend"),GV=new Map,hL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fd(e,t){GV.set(e,t),Df(t,[e])}for(var EC=0;EC<hL.length;EC++){var TC=hL[EC],soe=TC.toLowerCase(),ioe=TC[0].toUpperCase()+TC.slice(1);Fd(soe,"on"+ioe)}Fd(HV,"onAnimationEnd");Fd(WV,"onAnimationIteration");Fd(qV,"onAnimationStart");Fd("dblclick","onDoubleClick");Fd("focusin","onFocus");Fd("focusout","onBlur");Fd(KV,"onTransitionEnd");Dp("onMouseEnter",["mouseout","mouseover"]);Dp("onMouseLeave",["mouseout","mouseover"]);Dp("onPointerEnter",["pointerout","pointerover"]);Dp("onPointerLeave",["pointerout","pointerover"]);Df("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Df("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Df("onBeforeInput",["compositionend","keypress","textInput","paste"]);Df("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Df("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Df("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ooe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cy));function fL(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sie(r,t,void 0,e),e.currentTarget=null}function YV(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;fL(a,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;fL(a,l,u),i=c}}}if(R_)throw e=CE,R_=!1,CE=null,e}function Tr(e,t){var n=t[DE];n===void 0&&(n=t[DE]=new Set);var r=e+"__bubble";n.has(r)||(QV(t,e,2,!1),n.add(r))}function PC(e,t,n){var r=0;t&&(r|=4),QV(n,e,r,t)}var gw="_reactListening"+Math.random().toString(36).slice(2);function dx(e){if(!e[gw]){e[gw]=!0,rV.forEach(function(n){n!=="selectionchange"&&(ooe.has(n)||PC(n,!1,e),PC(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gw]||(t[gw]=!0,PC("selectionchange",!1,t))}}function QV(e,t,n,r){switch(IV(t)){case 1:var a=wie;break;case 4:a=_ie;break;default:a=c2}n=a.bind(null,t,n,e),a=void 0,!kE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function OC(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=zh(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}xV(function(){var u=i,d=s2(n),h=[];e:{var m=GV.get(e);if(m!==void 0){var p=d2,v=e;switch(e){case"keypress":if(h_(n)===0)break e;case"keydown":case"keyup":p=Die;break;case"focusin":v="focus",p=NC;break;case"focusout":v="blur",p=NC;break;case"beforeblur":case"afterblur":p=NC;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=tL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Nie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Bie;break;case HV:case WV:case qV:p=Aie;break;case KV:p=Vie;break;case"scroll":p=jie;break;case"wheel":p=Hie;break;case"copy":case"cut":case"paste":p=Tie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=rL}var x=(t&4)!==0,b=!x&&e==="scroll",_=x?m!==null?m+"Capture":null:m;x=[];for(var j=u,w;j!==null;){w=j;var N=w.stateNode;if(w.tag===5&&N!==null&&(w=N,_!==null&&(N=sx(j,_),N!=null&&x.push(hx(j,N,w)))),b)break;j=j.return}0<x.length&&(m=new p(m,v,null,n,d),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==SE&&(v=n.relatedTarget||n.fromElement)&&(zh(v)||v[Qc]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=u,v=v?zh(v):null,v!==null&&(b=Lf(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(x=tL,N="onMouseLeave",_="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(x=rL,N="onPointerLeave",_="onPointerEnter",j="pointer"),b=p==null?m:Xm(p),w=v==null?m:Xm(v),m=new x(N,j+"leave",p,n,d),m.target=b,m.relatedTarget=w,N=null,zh(d)===u&&(x=new x(_,j+"enter",v,n,d),x.target=w,x.relatedTarget=b,N=x),b=N,p&&v)t:{for(x=p,_=v,j=0,w=x;w;w=_m(w))j++;for(w=0,N=_;N;N=_m(N))w++;for(;0<j-w;)x=_m(x),j--;for(;0<w-j;)_=_m(_),w--;for(;j--;){if(x===_||_!==null&&x===_.alternate)break t;x=_m(x),_=_m(_)}x=null}else x=null;p!==null&&mL(h,m,p,x,!1),v!==null&&b!==null&&mL(h,b,v,x,!0)}}e:{if(m=u?Xm(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var k=Xie;else if(iL(m))if(FV)k=toe;else{k=Zie;var C=Jie}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=eoe);if(k&&(k=k(e,u))){LV(h,k,n,d);break e}C&&C(e,m,u),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&xE(m,"number",m.value)}switch(C=u?Xm(u):window,e){case"focusin":(iL(C)||C.contentEditable==="true")&&(Ym=C,PE=u,Fy=null);break;case"focusout":Fy=PE=Ym=null;break;case"mousedown":OE=!0;break;case"contextmenu":case"mouseup":case"dragend":OE=!1,dL(h,n,d);break;case"selectionchange":if(aoe)break;case"keydown":case"keyup":dL(h,n,d)}var A;if(f2)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Gm?MV(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&($V&&n.locale!=="ko"&&(Gm||P!=="onCompositionStart"?P==="onCompositionEnd"&&Gm&&(A=RV()):(ad=d,u2="value"in ad?ad.value:ad.textContent,Gm=!0)),C=F_(u,P),0<C.length&&(P=new nL(P,e,null,n,d),h.push({event:P,listeners:C}),A?P.data=A:(A=DV(n),A!==null&&(P.data=A)))),(A=qie?Kie(e,n):Gie(e,n))&&(u=F_(u,"onBeforeInput"),0<u.length&&(d=new nL("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=A))}YV(h,t)})}function hx(e,t,n){return{instance:e,listener:t,currentTarget:n}}function F_(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=sx(e,n),i!=null&&r.unshift(hx(e,i,a)),i=sx(e,t),i!=null&&r.push(hx(e,i,a))),e=e.return}return r}function _m(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mL(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=sx(n,i),c!=null&&o.unshift(hx(n,c,l))):a||(c=sx(n,i),c!=null&&o.push(hx(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var loe=/\r\n?/g,coe=/\u0000|\uFFFD/g;function pL(e){return(typeof e=="string"?e:""+e).replace(loe,`
`).replace(coe,"")}function vw(e,t,n){if(t=pL(t),pL(e)!==t&&n)throw Error(Xe(425))}function B_(){}var IE=null,RE=null;function $E(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ME=typeof setTimeout=="function"?setTimeout:void 0,uoe=typeof clearTimeout=="function"?clearTimeout:void 0,gL=typeof Promise=="function"?Promise:void 0,doe=typeof queueMicrotask=="function"?queueMicrotask:typeof gL<"u"?function(e){return gL.resolve(null).then(e).catch(hoe)}:ME;function hoe(e){setTimeout(function(){throw e})}function IC(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),lx(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);lx(t)}function gd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Dg=Math.random().toString(36).slice(2),zl="__reactFiber$"+Dg,fx="__reactProps$"+Dg,Qc="__reactContainer$"+Dg,DE="__reactEvents$"+Dg,foe="__reactListeners$"+Dg,moe="__reactHandles$"+Dg;function zh(e){var t=e[zl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qc]||n[zl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vL(e);e!==null;){if(n=e[zl])return n;e=vL(e)}return t}e=n,n=e.parentNode}return null}function R0(e){return e=e[zl]||e[Qc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Xe(33))}function q1(e){return e[fx]||null}var LE=[],Jm=-1;function Bd(e){return{current:e}}function Ir(e){0>Jm||(e.current=LE[Jm],LE[Jm]=null,Jm--)}function Nr(e,t){Jm++,LE[Jm]=e.current,e.current=t}var Cd={},Ns=Bd(Cd),xi=Bd(!1),hf=Cd;function Lp(e,t){var n=e.type.contextTypes;if(!n)return Cd;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function bi(e){return e=e.childContextTypes,e!=null}function U_(){Ir(xi),Ir(Ns)}function yL(e,t,n){if(Ns.current!==Cd)throw Error(Xe(168));Nr(Ns,t),Nr(xi,n)}function XV(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Xe(108,Jse(e)||"Unknown",a));return Gr({},n,r)}function V_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cd,hf=Ns.current,Nr(Ns,e),Nr(xi,xi.current),!0}function xL(e,t,n){var r=e.stateNode;if(!r)throw Error(Xe(169));n?(e=XV(e,t,hf),r.__reactInternalMemoizedMergedChildContext=e,Ir(xi),Ir(Ns),Nr(Ns,e)):Ir(xi),Nr(xi,n)}var Mc=null,K1=!1,RC=!1;function JV(e){Mc===null?Mc=[e]:Mc.push(e)}function poe(e){K1=!0,JV(e)}function Ud(){if(!RC&&Mc!==null){RC=!0;var e=0,t=or;try{var n=Mc;for(or=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mc=null,K1=!1}catch(a){throw Mc!==null&&(Mc=Mc.slice(e+1)),jV(i2,Ud),a}finally{or=t,RC=!1}}return null}var Zm=[],ep=0,z_=null,H_=0,_o=[],jo=0,ff=null,Bc=1,Uc="";function Th(e,t){Zm[ep++]=H_,Zm[ep++]=z_,z_=e,H_=t}function ZV(e,t,n){_o[jo++]=Bc,_o[jo++]=Uc,_o[jo++]=ff,ff=e;var r=Bc;e=Uc;var a=32-gl(r)-1;r&=~(1<<a),n+=1;var i=32-gl(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Bc=1<<32-gl(t)+a|n<<a|r,Uc=i+e}else Bc=1<<i|n<<a|r,Uc=e}function p2(e){e.return!==null&&(Th(e,1),ZV(e,1,0))}function g2(e){for(;e===z_;)z_=Zm[--ep],Zm[ep]=null,H_=Zm[--ep],Zm[ep]=null;for(;e===ff;)ff=_o[--jo],_o[jo]=null,Uc=_o[--jo],_o[jo]=null,Bc=_o[--jo],_o[jo]=null}var Gi=null,qi=null,Mr=!1,dl=null;function e8(e,t){var n=Co(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bL(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gi=e,qi=gd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gi=e,qi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ff!==null?{id:Bc,overflow:Uc}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Co(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Gi=e,qi=null,!0):!1;default:return!1}}function FE(e){return(e.mode&1)!==0&&(e.flags&128)===0}function BE(e){if(Mr){var t=qi;if(t){var n=t;if(!bL(e,t)){if(FE(e))throw Error(Xe(418));t=gd(n.nextSibling);var r=Gi;t&&bL(e,t)?e8(r,n):(e.flags=e.flags&-4097|2,Mr=!1,Gi=e)}}else{if(FE(e))throw Error(Xe(418));e.flags=e.flags&-4097|2,Mr=!1,Gi=e}}}function wL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gi=e}function yw(e){if(e!==Gi)return!1;if(!Mr)return wL(e),Mr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$E(e.type,e.memoizedProps)),t&&(t=qi)){if(FE(e))throw t8(),Error(Xe(418));for(;t;)e8(e,t),t=gd(t.nextSibling)}if(wL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qi=gd(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qi=null}}else qi=Gi?gd(e.stateNode.nextSibling):null;return!0}function t8(){for(var e=qi;e;)e=gd(e.nextSibling)}function Fp(){qi=Gi=null,Mr=!1}function v2(e){dl===null?dl=[e]:dl.push(e)}var goe=uu.ReactCurrentBatchConfig;function ay(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Xe(309));var r=n.stateNode}if(!r)throw Error(Xe(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Xe(284));if(!n._owner)throw Error(Xe(290,e))}return e}function xw(e,t){throw e=Object.prototype.toString.call(t),Error(Xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _L(e){var t=e._init;return t(e._payload)}function n8(e){function t(_,j){if(e){var w=_.deletions;w===null?(_.deletions=[j],_.flags|=16):w.push(j)}}function n(_,j){if(!e)return null;for(;j!==null;)t(_,j),j=j.sibling;return null}function r(_,j){for(_=new Map;j!==null;)j.key!==null?_.set(j.key,j):_.set(j.index,j),j=j.sibling;return _}function a(_,j){return _=bd(_,j),_.index=0,_.sibling=null,_}function i(_,j,w){return _.index=w,e?(w=_.alternate,w!==null?(w=w.index,w<j?(_.flags|=2,j):w):(_.flags|=2,j)):(_.flags|=1048576,j)}function o(_){return e&&_.alternate===null&&(_.flags|=2),_}function l(_,j,w,N){return j===null||j.tag!==6?(j=UC(w,_.mode,N),j.return=_,j):(j=a(j,w),j.return=_,j)}function c(_,j,w,N){var k=w.type;return k===Km?d(_,j,w.props.children,N,w.key):j!==null&&(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wu&&_L(k)===j.type)?(N=a(j,w.props),N.ref=ay(_,j,w),N.return=_,N):(N=x_(w.type,w.key,w.props,null,_.mode,N),N.ref=ay(_,j,w),N.return=_,N)}function u(_,j,w,N){return j===null||j.tag!==4||j.stateNode.containerInfo!==w.containerInfo||j.stateNode.implementation!==w.implementation?(j=VC(w,_.mode,N),j.return=_,j):(j=a(j,w.children||[]),j.return=_,j)}function d(_,j,w,N,k){return j===null||j.tag!==7?(j=of(w,_.mode,N,k),j.return=_,j):(j=a(j,w),j.return=_,j)}function h(_,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return j=UC(""+j,_.mode,w),j.return=_,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case lw:return w=x_(j.type,j.key,j.props,null,_.mode,w),w.ref=ay(_,null,j),w.return=_,w;case qm:return j=VC(j,_.mode,w),j.return=_,j;case Wu:var N=j._init;return h(_,N(j._payload),w)}if(Ny(j)||Zv(j))return j=of(j,_.mode,w,null),j.return=_,j;xw(_,j)}return null}function m(_,j,w,N){var k=j!==null?j.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:l(_,j,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lw:return w.key===k?c(_,j,w,N):null;case qm:return w.key===k?u(_,j,w,N):null;case Wu:return k=w._init,m(_,j,k(w._payload),N)}if(Ny(w)||Zv(w))return k!==null?null:d(_,j,w,N,null);xw(_,w)}return null}function p(_,j,w,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(w)||null,l(j,_,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case lw:return _=_.get(N.key===null?w:N.key)||null,c(j,_,N,k);case qm:return _=_.get(N.key===null?w:N.key)||null,u(j,_,N,k);case Wu:var C=N._init;return p(_,j,w,C(N._payload),k)}if(Ny(N)||Zv(N))return _=_.get(w)||null,d(j,_,N,k,null);xw(j,N)}return null}function v(_,j,w,N){for(var k=null,C=null,A=j,P=j=0,O=null;A!==null&&P<w.length;P++){A.index>P?(O=A,A=null):O=A.sibling;var T=m(_,A,w[P],N);if(T===null){A===null&&(A=O);break}e&&A&&T.alternate===null&&t(_,A),j=i(T,j,P),C===null?k=T:C.sibling=T,C=T,A=O}if(P===w.length)return n(_,A),Mr&&Th(_,P),k;if(A===null){for(;P<w.length;P++)A=h(_,w[P],N),A!==null&&(j=i(A,j,P),C===null?k=A:C.sibling=A,C=A);return Mr&&Th(_,P),k}for(A=r(_,A);P<w.length;P++)O=p(A,_,P,w[P],N),O!==null&&(e&&O.alternate!==null&&A.delete(O.key===null?P:O.key),j=i(O,j,P),C===null?k=O:C.sibling=O,C=O);return e&&A.forEach(function($){return t(_,$)}),Mr&&Th(_,P),k}function x(_,j,w,N){var k=Zv(w);if(typeof k!="function")throw Error(Xe(150));if(w=k.call(w),w==null)throw Error(Xe(151));for(var C=k=null,A=j,P=j=0,O=null,T=w.next();A!==null&&!T.done;P++,T=w.next()){A.index>P?(O=A,A=null):O=A.sibling;var $=m(_,A,T.value,N);if($===null){A===null&&(A=O);break}e&&A&&$.alternate===null&&t(_,A),j=i($,j,P),C===null?k=$:C.sibling=$,C=$,A=O}if(T.done)return n(_,A),Mr&&Th(_,P),k;if(A===null){for(;!T.done;P++,T=w.next())T=h(_,T.value,N),T!==null&&(j=i(T,j,P),C===null?k=T:C.sibling=T,C=T);return Mr&&Th(_,P),k}for(A=r(_,A);!T.done;P++,T=w.next())T=p(A,_,P,T.value,N),T!==null&&(e&&T.alternate!==null&&A.delete(T.key===null?P:T.key),j=i(T,j,P),C===null?k=T:C.sibling=T,C=T);return e&&A.forEach(function(L){return t(_,L)}),Mr&&Th(_,P),k}function b(_,j,w,N){if(typeof w=="object"&&w!==null&&w.type===Km&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case lw:e:{for(var k=w.key,C=j;C!==null;){if(C.key===k){if(k=w.type,k===Km){if(C.tag===7){n(_,C.sibling),j=a(C,w.props.children),j.return=_,_=j;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wu&&_L(k)===C.type){n(_,C.sibling),j=a(C,w.props),j.ref=ay(_,C,w),j.return=_,_=j;break e}n(_,C);break}else t(_,C);C=C.sibling}w.type===Km?(j=of(w.props.children,_.mode,N,w.key),j.return=_,_=j):(N=x_(w.type,w.key,w.props,null,_.mode,N),N.ref=ay(_,j,w),N.return=_,_=N)}return o(_);case qm:e:{for(C=w.key;j!==null;){if(j.key===C)if(j.tag===4&&j.stateNode.containerInfo===w.containerInfo&&j.stateNode.implementation===w.implementation){n(_,j.sibling),j=a(j,w.children||[]),j.return=_,_=j;break e}else{n(_,j);break}else t(_,j);j=j.sibling}j=VC(w,_.mode,N),j.return=_,_=j}return o(_);case Wu:return C=w._init,b(_,j,C(w._payload),N)}if(Ny(w))return v(_,j,w,N);if(Zv(w))return x(_,j,w,N);xw(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,j!==null&&j.tag===6?(n(_,j.sibling),j=a(j,w),j.return=_,_=j):(n(_,j),j=UC(w,_.mode,N),j.return=_,_=j),o(_)):n(_,j)}return b}var Bp=n8(!0),r8=n8(!1),W_=Bd(null),q_=null,tp=null,y2=null;function x2(){y2=tp=q_=null}function b2(e){var t=W_.current;Ir(W_),e._currentValue=t}function UE(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function pp(e,t){q_=e,y2=tp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vi=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(y2!==e)if(e={context:e,memoizedValue:t,next:null},tp===null){if(q_===null)throw Error(Xe(308));tp=e,q_.dependencies={lanes:0,firstContext:e}}else tp=tp.next=e;return t}var Hh=null;function w2(e){Hh===null?Hh=[e]:Hh.push(e)}function a8(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,w2(t)):(n.next=a.next,a.next=n),t.interleaved=n,Xc(e,r)}function Xc(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qu=!1;function _2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vd(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Un&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Xc(e,n)}return a=r.interleaved,a===null?(t.next=t,w2(r)):(t.next=a.next,a.next=t),r.interleaved=t,Xc(e,n)}function f_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,o2(e,n)}}function jL(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function K_(e,t,n,r){var a=e.updateQueue;qu=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(m=t,p=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(p,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,m=typeof v=="function"?v.call(p,h,m):v,m==null)break e;h=Gr({},h,m);break e;case 2:qu=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);pf|=o,e.lanes=o,e.memoizedState=h}}function SL(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Xe(191,a));a.call(r)}}}var $0={},Zl=Bd($0),mx=Bd($0),px=Bd($0);function Wh(e){if(e===$0)throw Error(Xe(174));return e}function j2(e,t){switch(Nr(px,t),Nr(mx,e),Nr(Zl,$0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wE(t,e)}Ir(Zl),Nr(Zl,t)}function Up(){Ir(Zl),Ir(mx),Ir(px)}function i8(e){Wh(px.current);var t=Wh(Zl.current),n=wE(t,e.type);t!==n&&(Nr(mx,e),Nr(Zl,n))}function S2(e){mx.current===e&&(Ir(Zl),Ir(mx))}var zr=Bd(0);function G_(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $C=[];function N2(){for(var e=0;e<$C.length;e++)$C[e]._workInProgressVersionPrimary=null;$C.length=0}var m_=uu.ReactCurrentDispatcher,MC=uu.ReactCurrentBatchConfig,mf=0,qr=null,$a=null,Ha=null,Y_=!1,By=!1,gx=0,voe=0;function ys(){throw Error(Xe(321))}function k2(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_l(e[n],t[n]))return!1;return!0}function C2(e,t,n,r,a,i){if(mf=i,qr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,m_.current=e===null||e.memoizedState===null?woe:_oe,e=n(r,a),By){i=0;do{if(By=!1,gx=0,25<=i)throw Error(Xe(301));i+=1,Ha=$a=null,t.updateQueue=null,m_.current=joe,e=n(r,a)}while(By)}if(m_.current=Q_,t=$a!==null&&$a.next!==null,mf=0,Ha=$a=qr=null,Y_=!1,t)throw Error(Xe(300));return e}function A2(){var e=gx!==0;return gx=0,e}function Fl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ha===null?qr.memoizedState=Ha=e:Ha=Ha.next=e,Ha}function $o(){if($a===null){var e=qr.alternate;e=e!==null?e.memoizedState:null}else e=$a.next;var t=Ha===null?qr.memoizedState:Ha.next;if(t!==null)Ha=t,$a=e;else{if(e===null)throw Error(Xe(310));$a=e,e={memoizedState:$a.memoizedState,baseState:$a.baseState,baseQueue:$a.baseQueue,queue:$a.queue,next:null},Ha===null?qr.memoizedState=Ha=e:Ha=Ha.next=e}return Ha}function vx(e,t){return typeof t=="function"?t(e):t}function DC(e){var t=$o(),n=t.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=e;var r=$a,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((mf&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,qr.lanes|=d,pf|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,_l(r,t.memoizedState)||(vi=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,qr.lanes|=i,pf|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function LC(e){var t=$o(),n=t.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);_l(i,t.memoizedState)||(vi=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function o8(){}function l8(e,t){var n=qr,r=$o(),a=t(),i=!_l(r.memoizedState,a);if(i&&(r.memoizedState=a,vi=!0),r=r.queue,E2(d8.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ha!==null&&Ha.memoizedState.tag&1){if(n.flags|=2048,yx(9,u8.bind(null,n,r,a,t),void 0,null),Ya===null)throw Error(Xe(349));mf&30||c8(n,t,a)}return a}function c8(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qr.updateQueue,t===null?(t={lastEffect:null,stores:null},qr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function u8(e,t,n,r){t.value=n,t.getSnapshot=r,h8(t)&&f8(e)}function d8(e,t,n){return n(function(){h8(t)&&f8(e)})}function h8(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_l(e,n)}catch{return!0}}function f8(e){var t=Xc(e,1);t!==null&&vl(t,e,1,-1)}function NL(e){var t=Fl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vx,lastRenderedState:e},t.queue=e,e=e.dispatch=boe.bind(null,qr,e),[t.memoizedState,e]}function yx(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=qr.updateQueue,t===null?(t={lastEffect:null,stores:null},qr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function m8(){return $o().memoizedState}function p_(e,t,n,r){var a=Fl();qr.flags|=e,a.memoizedState=yx(1|t,n,void 0,r===void 0?null:r)}function G1(e,t,n,r){var a=$o();r=r===void 0?null:r;var i=void 0;if($a!==null){var o=$a.memoizedState;if(i=o.destroy,r!==null&&k2(r,o.deps)){a.memoizedState=yx(t,n,i,r);return}}qr.flags|=e,a.memoizedState=yx(1|t,n,i,r)}function kL(e,t){return p_(8390656,8,e,t)}function E2(e,t){return G1(2048,8,e,t)}function p8(e,t){return G1(4,2,e,t)}function g8(e,t){return G1(4,4,e,t)}function v8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function y8(e,t,n){return n=n!=null?n.concat([e]):null,G1(4,4,v8.bind(null,t,e),n)}function T2(){}function x8(e,t){var n=$o();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&k2(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function b8(e,t){var n=$o();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&k2(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function w8(e,t,n){return mf&21?(_l(n,t)||(n=kV(),qr.lanes|=n,pf|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vi=!0),e.memoizedState=n)}function yoe(e,t){var n=or;or=n!==0&&4>n?n:4,e(!0);var r=MC.transition;MC.transition={};try{e(!1),t()}finally{or=n,MC.transition=r}}function _8(){return $o().memoizedState}function xoe(e,t,n){var r=xd(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},j8(e))S8(t,n);else if(n=a8(e,t,n,r),n!==null){var a=Qs();vl(n,e,r,a),N8(n,t,r)}}function boe(e,t,n){var r=xd(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(j8(e))S8(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,_l(l,o)){var c=t.interleaved;c===null?(a.next=a,w2(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=a8(e,t,a,r),n!==null&&(a=Qs(),vl(n,e,r,a),N8(n,t,r))}}function j8(e){var t=e.alternate;return e===qr||t!==null&&t===qr}function S8(e,t){By=Y_=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function N8(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,o2(e,n)}}var Q_={readContext:Ro,useCallback:ys,useContext:ys,useEffect:ys,useImperativeHandle:ys,useInsertionEffect:ys,useLayoutEffect:ys,useMemo:ys,useReducer:ys,useRef:ys,useState:ys,useDebugValue:ys,useDeferredValue:ys,useTransition:ys,useMutableSource:ys,useSyncExternalStore:ys,useId:ys,unstable_isNewReconciler:!1},woe={readContext:Ro,useCallback:function(e,t){return Fl().memoizedState=[e,t===void 0?null:t],e},useContext:Ro,useEffect:kL,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,p_(4194308,4,v8.bind(null,t,e),n)},useLayoutEffect:function(e,t){return p_(4194308,4,e,t)},useInsertionEffect:function(e,t){return p_(4,2,e,t)},useMemo:function(e,t){var n=Fl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fl();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xoe.bind(null,qr,e),[r.memoizedState,e]},useRef:function(e){var t=Fl();return e={current:e},t.memoizedState=e},useState:NL,useDebugValue:T2,useDeferredValue:function(e){return Fl().memoizedState=e},useTransition:function(){var e=NL(!1),t=e[0];return e=yoe.bind(null,e[1]),Fl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=qr,a=Fl();if(Mr){if(n===void 0)throw Error(Xe(407));n=n()}else{if(n=t(),Ya===null)throw Error(Xe(349));mf&30||c8(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,kL(d8.bind(null,r,i,e),[e]),r.flags|=2048,yx(9,u8.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Fl(),t=Ya.identifierPrefix;if(Mr){var n=Uc,r=Bc;n=(r&~(1<<32-gl(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gx++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=voe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_oe={readContext:Ro,useCallback:x8,useContext:Ro,useEffect:E2,useImperativeHandle:y8,useInsertionEffect:p8,useLayoutEffect:g8,useMemo:b8,useReducer:DC,useRef:m8,useState:function(){return DC(vx)},useDebugValue:T2,useDeferredValue:function(e){var t=$o();return w8(t,$a.memoizedState,e)},useTransition:function(){var e=DC(vx)[0],t=$o().memoizedState;return[e,t]},useMutableSource:o8,useSyncExternalStore:l8,useId:_8,unstable_isNewReconciler:!1},joe={readContext:Ro,useCallback:x8,useContext:Ro,useEffect:E2,useImperativeHandle:y8,useInsertionEffect:p8,useLayoutEffect:g8,useMemo:b8,useReducer:LC,useRef:m8,useState:function(){return LC(vx)},useDebugValue:T2,useDeferredValue:function(e){var t=$o();return $a===null?t.memoizedState=e:w8(t,$a.memoizedState,e)},useTransition:function(){var e=LC(vx)[0],t=$o().memoizedState;return[e,t]},useMutableSource:o8,useSyncExternalStore:l8,useId:_8,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){t=Gr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function VE(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Gr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Y1={isMounted:function(e){return(e=e._reactInternals)?Lf(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qs(),a=xd(e),i=qc(r,a);i.payload=t,n!=null&&(i.callback=n),t=vd(e,i,a),t!==null&&(vl(t,e,a,r),f_(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qs(),a=xd(e),i=qc(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=vd(e,i,a),t!==null&&(vl(t,e,a,r),f_(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qs(),r=xd(e),a=qc(n,r);a.tag=2,t!=null&&(a.callback=t),t=vd(e,a,r),t!==null&&(vl(t,e,r,n),f_(t,e,r))}};function CL(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!ux(n,r)||!ux(a,i):!0}function k8(e,t,n){var r=!1,a=Cd,i=t.contextType;return typeof i=="object"&&i!==null?i=Ro(i):(a=bi(t)?hf:Ns.current,r=t.contextTypes,i=(r=r!=null)?Lp(e,a):Cd),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Y1,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function AL(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Y1.enqueueReplaceState(t,t.state,null)}function zE(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},_2(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ro(i):(i=bi(t)?hf:Ns.current,a.context=Lp(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(VE(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Y1.enqueueReplaceState(a,a.state,null),K_(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Vp(e,t){try{var n="",r=t;do n+=Xse(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function FC(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function HE(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Soe=typeof WeakMap=="function"?WeakMap:Map;function C8(e,t,n){n=qc(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){J_||(J_=!0,eT=r),HE(e,t)},n}function A8(e,t,n){n=qc(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){HE(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){HE(e,t),typeof r!="function"&&(yd===null?yd=new Set([this]):yd.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function EL(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Soe;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Loe.bind(null,e,t,n),t.then(e,e))}function TL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function PL(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qc(-1,1),t.tag=2,vd(n,t,1))),n.lanes|=1),e)}var Noe=uu.ReactCurrentOwner,vi=!1;function Bs(e,t,n,r){t.child=e===null?r8(t,null,n,r):Bp(t,e.child,n,r)}function OL(e,t,n,r,a){n=n.render;var i=t.ref;return pp(t,a),r=C2(e,t,n,r,i,a),n=A2(),e!==null&&!vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Jc(e,t,a)):(Mr&&n&&p2(t),t.flags|=1,Bs(e,t,r,a),t.child)}function IL(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!L2(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,E8(e,t,i,r,a)):(e=x_(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ux,n(o,r)&&e.ref===t.ref)return Jc(e,t,a)}return t.flags|=1,e=bd(i,r),e.ref=t.ref,e.return=t,t.child=e}function E8(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(ux(i,r)&&e.ref===t.ref)if(vi=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(vi=!0);else return t.lanes=e.lanes,Jc(e,t,a)}return WE(e,t,n,r,a)}function T8(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nr(rp,Di),Di|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nr(rp,Di),Di|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Nr(rp,Di),Di|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Nr(rp,Di),Di|=r;return Bs(e,t,a,n),t.child}function P8(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function WE(e,t,n,r,a){var i=bi(n)?hf:Ns.current;return i=Lp(t,i),pp(t,a),n=C2(e,t,n,r,i,a),r=A2(),e!==null&&!vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Jc(e,t,a)):(Mr&&r&&p2(t),t.flags|=1,Bs(e,t,n,a),t.child)}function RL(e,t,n,r,a){if(bi(n)){var i=!0;V_(t)}else i=!1;if(pp(t,a),t.stateNode===null)g_(e,t),k8(t,n,r),zE(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ro(u):(u=bi(n)?hf:Ns.current,u=Lp(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&AL(t,o,r,u),qu=!1;var m=t.memoizedState;o.state=m,K_(t,r,o,a),c=t.memoizedState,l!==r||m!==c||xi.current||qu?(typeof d=="function"&&(VE(t,n,d,r),c=t.memoizedState),(l=qu||CL(t,n,l,r,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,s8(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:tl(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ro(c):(c=bi(n)?hf:Ns.current,c=Lp(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&AL(t,o,r,c),qu=!1,m=t.memoizedState,o.state=m,K_(t,r,o,a);var v=t.memoizedState;l!==h||m!==v||xi.current||qu?(typeof p=="function"&&(VE(t,n,p,r),v=t.memoizedState),(u=qu||CL(t,n,u,r,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return qE(e,t,n,r,i,a)}function qE(e,t,n,r,a,i){P8(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&xL(t,n,!1),Jc(e,t,i);r=t.stateNode,Noe.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Bp(t,e.child,null,i),t.child=Bp(t,null,l,i)):Bs(e,t,l,i),t.memoizedState=r.state,a&&xL(t,n,!0),t.child}function O8(e){var t=e.stateNode;t.pendingContext?yL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yL(e,t.context,!1),j2(e,t.containerInfo)}function $L(e,t,n,r,a){return Fp(),v2(a),t.flags|=256,Bs(e,t,n,r),t.child}var KE={dehydrated:null,treeContext:null,retryLane:0};function GE(e){return{baseLanes:e,cachePool:null,transitions:null}}function I8(e,t,n){var r=t.pendingProps,a=zr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Nr(zr,a&1),e===null)return BE(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=J1(o,r,0,null),e=of(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=GE(n),t.memoizedState=KE,e):P2(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return koe(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=bd(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=bd(l,i):(i=of(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?GE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=KE,r}return i=e.child,e=i.sibling,r=bd(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function P2(e,t){return t=J1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bw(e,t,n,r){return r!==null&&v2(r),Bp(t,e.child,null,n),e=P2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function koe(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=FC(Error(Xe(422))),bw(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=J1({mode:"visible",children:r.children},a,0,null),i=of(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Bp(t,e.child,null,o),t.child.memoizedState=GE(o),t.memoizedState=KE,i);if(!(t.mode&1))return bw(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Xe(419)),r=FC(i,r,void 0),bw(e,t,o,r)}if(l=(o&e.childLanes)!==0,vi||l){if(r=Ya,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Xc(e,a),vl(r,e,a,-1))}return D2(),r=FC(Error(Xe(421))),bw(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Foe.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,qi=gd(a.nextSibling),Gi=t,Mr=!0,dl=null,e!==null&&(_o[jo++]=Bc,_o[jo++]=Uc,_o[jo++]=ff,Bc=e.id,Uc=e.overflow,ff=t),t=P2(t,r.children),t.flags|=4096,t)}function ML(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),UE(e.return,t,n)}function BC(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function R8(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Bs(e,t,r.children,n),r=zr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ML(e,n,t);else if(e.tag===19)ML(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Nr(zr,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&G_(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),BC(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&G_(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}BC(t,!0,n,null,i);break;case"together":BC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function g_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pf|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Xe(153));if(t.child!==null){for(e=t.child,n=bd(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=bd(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Coe(e,t,n){switch(t.tag){case 3:O8(t),Fp();break;case 5:i8(t);break;case 1:bi(t.type)&&V_(t);break;case 4:j2(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Nr(W_,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Nr(zr,zr.current&1),t.flags|=128,null):n&t.child.childLanes?I8(e,t,n):(Nr(zr,zr.current&1),e=Jc(e,t,n),e!==null?e.sibling:null);Nr(zr,zr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return R8(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Nr(zr,zr.current),r)break;return null;case 22:case 23:return t.lanes=0,T8(e,t,n)}return Jc(e,t,n)}var $8,YE,M8,D8;$8=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};YE=function(){};M8=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Wh(Zl.current);var i=null;switch(n){case"input":a=vE(e,a),r=vE(e,r),i=[];break;case"select":a=Gr({},a,{value:void 0}),r=Gr({},r,{value:void 0}),i=[];break;case"textarea":a=bE(e,a),r=bE(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=B_)}_E(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rx.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rx.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Tr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};D8=function(e,t,n,r){n!==r&&(t.flags|=4)};function sy(e,t){if(!Mr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xs(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Aoe(e,t,n){var r=t.pendingProps;switch(g2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(t),null;case 1:return bi(t.type)&&U_(),xs(t),null;case 3:return r=t.stateNode,Up(),Ir(xi),Ir(Ns),N2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(yw(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dl!==null&&(rT(dl),dl=null))),YE(e,t),xs(t),null;case 5:S2(t);var a=Wh(px.current);if(n=t.type,e!==null&&t.stateNode!=null)M8(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Xe(166));return xs(t),null}if(e=Wh(Zl.current),yw(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[zl]=t,r[fx]=i,e=(t.mode&1)!==0,n){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(a=0;a<Cy.length;a++)Tr(Cy[a],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":WD(r,i),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Tr("invalid",r);break;case"textarea":KD(r,i),Tr("invalid",r)}_E(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&vw(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&vw(r.textContent,l,e),a=["children",""+l]):rx.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Tr("scroll",r)}switch(n){case"input":cw(r),qD(r,i,!0);break;case"textarea":cw(r),GD(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=B_)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dV(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[zl]=t,e[fx]=r,$8(e,t,!1,!1),t.stateNode=e;e:{switch(o=jE(n,r),n){case"dialog":Tr("cancel",e),Tr("close",e),a=r;break;case"iframe":case"object":case"embed":Tr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Cy.length;a++)Tr(Cy[a],e);a=r;break;case"source":Tr("error",e),a=r;break;case"img":case"image":case"link":Tr("error",e),Tr("load",e),a=r;break;case"details":Tr("toggle",e),a=r;break;case"input":WD(e,r),a=vE(e,r),Tr("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Gr({},r,{value:void 0}),Tr("invalid",e);break;case"textarea":KD(e,r),a=bE(e,r),Tr("invalid",e);break;default:a=r}_E(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?mV(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hV(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ax(e,c):typeof c=="number"&&ax(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rx.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Tr("scroll",e):c!=null&&t2(e,i,c,o))}switch(n){case"input":cw(e),qD(e,r,!1);break;case"textarea":cw(e),GD(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kd(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?dp(e,!!r.multiple,i,!1):r.defaultValue!=null&&dp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=B_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xs(t),null;case 6:if(e&&t.stateNode!=null)D8(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Xe(166));if(n=Wh(px.current),Wh(Zl.current),yw(t)){if(r=t.stateNode,n=t.memoizedProps,r[zl]=t,(i=r.nodeValue!==n)&&(e=Gi,e!==null))switch(e.tag){case 3:vw(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vw(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zl]=t,t.stateNode=r}return xs(t),null;case 13:if(Ir(zr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mr&&qi!==null&&t.mode&1&&!(t.flags&128))t8(),Fp(),t.flags|=98560,i=!1;else if(i=yw(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Xe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Xe(317));i[zl]=t}else Fp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xs(t),i=!1}else dl!==null&&(rT(dl),dl=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||zr.current&1?Da===0&&(Da=3):D2())),t.updateQueue!==null&&(t.flags|=4),xs(t),null);case 4:return Up(),YE(e,t),e===null&&dx(t.stateNode.containerInfo),xs(t),null;case 10:return b2(t.type._context),xs(t),null;case 17:return bi(t.type)&&U_(),xs(t),null;case 19:if(Ir(zr),i=t.memoizedState,i===null)return xs(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)sy(i,!1);else{if(Da!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=G_(e),o!==null){for(t.flags|=128,sy(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Nr(zr,zr.current&1|2),t.child}e=e.sibling}i.tail!==null&&fa()>zp&&(t.flags|=128,r=!0,sy(i,!1),t.lanes=4194304)}else{if(!r)if(e=G_(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sy(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Mr)return xs(t),null}else 2*fa()-i.renderingStartTime>zp&&n!==1073741824&&(t.flags|=128,r=!0,sy(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=fa(),t.sibling=null,n=zr.current,Nr(zr,r?n&1|2:n&1),t):(xs(t),null);case 22:case 23:return M2(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Di&1073741824&&(xs(t),t.subtreeFlags&6&&(t.flags|=8192)):xs(t),null;case 24:return null;case 25:return null}throw Error(Xe(156,t.tag))}function Eoe(e,t){switch(g2(t),t.tag){case 1:return bi(t.type)&&U_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Up(),Ir(xi),Ir(Ns),N2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return S2(t),null;case 13:if(Ir(zr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Xe(340));Fp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ir(zr),null;case 4:return Up(),null;case 10:return b2(t.type._context),null;case 22:case 23:return M2(),null;case 24:return null;default:return null}}var ww=!1,js=!1,Toe=typeof WeakSet=="function"?WeakSet:Set,_t=null;function np(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ta(e,t,r)}else n.current=null}function QE(e,t,n){try{n()}catch(r){ta(e,t,r)}}var DL=!1;function Poe(e,t){if(IE=D_,e=VV(),m2(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var p;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++u===a&&(l=o),m===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(RE={focusedElem:e,selectionRange:n},D_=!1,_t=t;_t!==null;)if(t=_t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_t=e;else for(;_t!==null;){t=_t;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,b=v.memoizedState,_=t.stateNode,j=_.getSnapshotBeforeUpdate(t.elementType===t.type?x:tl(t.type,x),b);_.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(N){ta(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,_t=e;break}_t=t.return}return v=DL,DL=!1,v}function Uy(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&QE(t,n,i)}a=a.next}while(a!==r)}}function Q1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function XE(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function L8(e){var t=e.alternate;t!==null&&(e.alternate=null,L8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zl],delete t[fx],delete t[DE],delete t[foe],delete t[moe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function F8(e){return e.tag===5||e.tag===3||e.tag===4}function LL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||F8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function JE(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=B_));else if(r!==4&&(e=e.child,e!==null))for(JE(e,t,n),e=e.sibling;e!==null;)JE(e,t,n),e=e.sibling}function ZE(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ZE(e,t,n),e=e.sibling;e!==null;)ZE(e,t,n),e=e.sibling}var ss=null,il=!1;function $u(e,t,n){for(n=n.child;n!==null;)B8(e,t,n),n=n.sibling}function B8(e,t,n){if(Jl&&typeof Jl.onCommitFiberUnmount=="function")try{Jl.onCommitFiberUnmount(V1,n)}catch{}switch(n.tag){case 5:js||np(n,t);case 6:var r=ss,a=il;ss=null,$u(e,t,n),ss=r,il=a,ss!==null&&(il?(e=ss,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ss.removeChild(n.stateNode));break;case 18:ss!==null&&(il?(e=ss,n=n.stateNode,e.nodeType===8?IC(e.parentNode,n):e.nodeType===1&&IC(e,n),lx(e)):IC(ss,n.stateNode));break;case 4:r=ss,a=il,ss=n.stateNode.containerInfo,il=!0,$u(e,t,n),ss=r,il=a;break;case 0:case 11:case 14:case 15:if(!js&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&QE(n,t,o),a=a.next}while(a!==r)}$u(e,t,n);break;case 1:if(!js&&(np(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ta(n,t,l)}$u(e,t,n);break;case 21:$u(e,t,n);break;case 22:n.mode&1?(js=(r=js)||n.memoizedState!==null,$u(e,t,n),js=r):$u(e,t,n);break;default:$u(e,t,n)}}function FL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Toe),t.forEach(function(r){var a=Boe.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Yo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ss=l.stateNode,il=!1;break e;case 3:ss=l.stateNode.containerInfo,il=!0;break e;case 4:ss=l.stateNode.containerInfo,il=!0;break e}l=l.return}if(ss===null)throw Error(Xe(160));B8(i,o,a),ss=null,il=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){ta(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)U8(t,e),t=t.sibling}function U8(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yo(t,e),Ll(e),r&4){try{Uy(3,e,e.return),Q1(3,e)}catch(x){ta(e,e.return,x)}try{Uy(5,e,e.return)}catch(x){ta(e,e.return,x)}}break;case 1:Yo(t,e),Ll(e),r&512&&n!==null&&np(n,n.return);break;case 5:if(Yo(t,e),Ll(e),r&512&&n!==null&&np(n,n.return),e.flags&32){var a=e.stateNode;try{ax(a,"")}catch(x){ta(e,e.return,x)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&cV(a,i),jE(l,o);var u=jE(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?mV(a,h):d==="dangerouslySetInnerHTML"?hV(a,h):d==="children"?ax(a,h):t2(a,d,h,u)}switch(l){case"input":yE(a,i);break;case"textarea":uV(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?dp(a,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?dp(a,!!i.multiple,i.defaultValue,!0):dp(a,!!i.multiple,i.multiple?[]:"",!1))}a[fx]=i}catch(x){ta(e,e.return,x)}}break;case 6:if(Yo(t,e),Ll(e),r&4){if(e.stateNode===null)throw Error(Xe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){ta(e,e.return,x)}}break;case 3:if(Yo(t,e),Ll(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lx(t.containerInfo)}catch(x){ta(e,e.return,x)}break;case 4:Yo(t,e),Ll(e);break;case 13:Yo(t,e),Ll(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(R2=fa())),r&4&&FL(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(js=(u=js)||d,Yo(t,e),js=u):Yo(t,e),Ll(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(_t=e,d=e.child;d!==null;){for(h=_t=d;_t!==null;){switch(m=_t,p=m.child,m.tag){case 0:case 11:case 14:case 15:Uy(4,m,m.return);break;case 1:np(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){ta(r,n,x)}}break;case 5:np(m,m.return);break;case 22:if(m.memoizedState!==null){UL(h);continue}}p!==null?(p.return=m,_t=p):UL(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=fV("display",o))}catch(x){ta(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){ta(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yo(t,e),Ll(e),r&4&&FL(e);break;case 21:break;default:Yo(t,e),Ll(e)}}function Ll(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(F8(n)){var r=n;break e}n=n.return}throw Error(Xe(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(ax(a,""),r.flags&=-33);var i=LL(e);ZE(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=LL(e);JE(e,l,o);break;default:throw Error(Xe(161))}}catch(c){ta(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ooe(e,t,n){_t=e,V8(e)}function V8(e,t,n){for(var r=(e.mode&1)!==0;_t!==null;){var a=_t,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||ww;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||js;l=ww;var u=js;if(ww=o,(js=c)&&!u)for(_t=a;_t!==null;)o=_t,c=o.child,o.tag===22&&o.memoizedState!==null?VL(a):c!==null?(c.return=o,_t=c):VL(a);for(;i!==null;)_t=i,V8(i),i=i.sibling;_t=a,ww=l,js=u}BL(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,_t=i):BL(e)}}function BL(e){for(;_t!==null;){var t=_t;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:js||Q1(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!js)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:tl(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&SL(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}SL(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&lx(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}js||t.flags&512&&XE(t)}catch(m){ta(t,t.return,m)}}if(t===e){_t=null;break}if(n=t.sibling,n!==null){n.return=t.return,_t=n;break}_t=t.return}}function UL(e){for(;_t!==null;){var t=_t;if(t===e){_t=null;break}var n=t.sibling;if(n!==null){n.return=t.return,_t=n;break}_t=t.return}}function VL(e){for(;_t!==null;){var t=_t;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Q1(4,t)}catch(c){ta(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){ta(t,a,c)}}var i=t.return;try{XE(t)}catch(c){ta(t,i,c)}break;case 5:var o=t.return;try{XE(t)}catch(c){ta(t,o,c)}}}catch(c){ta(t,t.return,c)}if(t===e){_t=null;break}var l=t.sibling;if(l!==null){l.return=t.return,_t=l;break}_t=t.return}}var Ioe=Math.ceil,X_=uu.ReactCurrentDispatcher,O2=uu.ReactCurrentOwner,Eo=uu.ReactCurrentBatchConfig,Un=0,Ya=null,Na=null,os=0,Di=0,rp=Bd(0),Da=0,xx=null,pf=0,X1=0,I2=0,Vy=null,pi=null,R2=0,zp=1/0,Ic=null,J_=!1,eT=null,yd=null,_w=!1,sd=null,Z_=0,zy=0,tT=null,v_=-1,y_=0;function Qs(){return Un&6?fa():v_!==-1?v_:v_=fa()}function xd(e){return e.mode&1?Un&2&&os!==0?os&-os:goe.transition!==null?(y_===0&&(y_=kV()),y_):(e=or,e!==0||(e=window.event,e=e===void 0?16:IV(e.type)),e):1}function vl(e,t,n,r){if(50<zy)throw zy=0,tT=null,Error(Xe(185));O0(e,n,r),(!(Un&2)||e!==Ya)&&(e===Ya&&(!(Un&2)&&(X1|=n),Da===4&&Qu(e,os)),wi(e,r),n===1&&Un===0&&!(t.mode&1)&&(zp=fa()+500,K1&&Ud()))}function wi(e,t){var n=e.callbackNode;gie(e,t);var r=M_(e,e===Ya?os:0);if(r===0)n!==null&&XD(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&XD(n),t===1)e.tag===0?poe(zL.bind(null,e)):JV(zL.bind(null,e)),doe(function(){!(Un&6)&&Ud()}),n=null;else{switch(CV(r)){case 1:n=i2;break;case 4:n=SV;break;case 16:n=$_;break;case 536870912:n=NV;break;default:n=$_}n=Q8(n,z8.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function z8(e,t){if(v_=-1,y_=0,Un&6)throw Error(Xe(327));var n=e.callbackNode;if(gp()&&e.callbackNode!==n)return null;var r=M_(e,e===Ya?os:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ej(e,r);else{t=r;var a=Un;Un|=2;var i=W8();(Ya!==e||os!==t)&&(Ic=null,zp=fa()+500,sf(e,t));do try{Moe();break}catch(l){H8(e,l)}while(!0);x2(),X_.current=i,Un=a,Na!==null?t=0:(Ya=null,os=0,t=Da)}if(t!==0){if(t===2&&(a=AE(e),a!==0&&(r=a,t=nT(e,a))),t===1)throw n=xx,sf(e,0),Qu(e,r),wi(e,fa()),n;if(t===6)Qu(e,r);else{if(a=e.current.alternate,!(r&30)&&!Roe(a)&&(t=ej(e,r),t===2&&(i=AE(e),i!==0&&(r=i,t=nT(e,i))),t===1))throw n=xx,sf(e,0),Qu(e,r),wi(e,fa()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Xe(345));case 2:Ph(e,pi,Ic);break;case 3:if(Qu(e,r),(r&130023424)===r&&(t=R2+500-fa(),10<t)){if(M_(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Qs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ME(Ph.bind(null,e,pi,Ic),t);break}Ph(e,pi,Ic);break;case 4:if(Qu(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-gl(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=fa()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ioe(r/1960))-r,10<r){e.timeoutHandle=ME(Ph.bind(null,e,pi,Ic),r);break}Ph(e,pi,Ic);break;case 5:Ph(e,pi,Ic);break;default:throw Error(Xe(329))}}}return wi(e,fa()),e.callbackNode===n?z8.bind(null,e):null}function nT(e,t){var n=Vy;return e.current.memoizedState.isDehydrated&&(sf(e,t).flags|=256),e=ej(e,t),e!==2&&(t=pi,pi=n,t!==null&&rT(t)),e}function rT(e){pi===null?pi=e:pi.push.apply(pi,e)}function Roe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!_l(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qu(e,t){for(t&=~I2,t&=~X1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gl(t),r=1<<n;e[n]=-1,t&=~r}}function zL(e){if(Un&6)throw Error(Xe(327));gp();var t=M_(e,0);if(!(t&1))return wi(e,fa()),null;var n=ej(e,t);if(e.tag!==0&&n===2){var r=AE(e);r!==0&&(t=r,n=nT(e,r))}if(n===1)throw n=xx,sf(e,0),Qu(e,t),wi(e,fa()),n;if(n===6)throw Error(Xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ph(e,pi,Ic),wi(e,fa()),null}function $2(e,t){var n=Un;Un|=1;try{return e(t)}finally{Un=n,Un===0&&(zp=fa()+500,K1&&Ud())}}function gf(e){sd!==null&&sd.tag===0&&!(Un&6)&&gp();var t=Un;Un|=1;var n=Eo.transition,r=or;try{if(Eo.transition=null,or=1,e)return e()}finally{or=r,Eo.transition=n,Un=t,!(Un&6)&&Ud()}}function M2(){Di=rp.current,Ir(rp)}function sf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uoe(n)),Na!==null)for(n=Na.return;n!==null;){var r=n;switch(g2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&U_();break;case 3:Up(),Ir(xi),Ir(Ns),N2();break;case 5:S2(r);break;case 4:Up();break;case 13:Ir(zr);break;case 19:Ir(zr);break;case 10:b2(r.type._context);break;case 22:case 23:M2()}n=n.return}if(Ya=e,Na=e=bd(e.current,null),os=Di=t,Da=0,xx=null,I2=X1=pf=0,pi=Vy=null,Hh!==null){for(t=0;t<Hh.length;t++)if(n=Hh[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}Hh=null}return e}function H8(e,t){do{var n=Na;try{if(x2(),m_.current=Q_,Y_){for(var r=qr.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Y_=!1}if(mf=0,Ha=$a=qr=null,By=!1,gx=0,O2.current=null,n===null||n.return===null){Da=1,xx=t,Na=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=os,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=TL(o);if(p!==null){p.flags&=-257,PL(p,o,l,i,t),p.mode&1&&EL(i,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){EL(i,u,t),D2();break e}c=Error(Xe(426))}}else if(Mr&&l.mode&1){var b=TL(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),PL(b,o,l,i,t),v2(Vp(c,l));break e}}i=c=Vp(c,l),Da!==4&&(Da=2),Vy===null?Vy=[i]:Vy.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var _=C8(i,c,t);jL(i,_);break e;case 1:l=c;var j=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(yd===null||!yd.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=A8(i,l,t);jL(i,N);break e}}i=i.return}while(i!==null)}K8(n)}catch(k){t=k,Na===n&&n!==null&&(Na=n=n.return);continue}break}while(!0)}function W8(){var e=X_.current;return X_.current=Q_,e===null?Q_:e}function D2(){(Da===0||Da===3||Da===2)&&(Da=4),Ya===null||!(pf&268435455)&&!(X1&268435455)||Qu(Ya,os)}function ej(e,t){var n=Un;Un|=2;var r=W8();(Ya!==e||os!==t)&&(Ic=null,sf(e,t));do try{$oe();break}catch(a){H8(e,a)}while(!0);if(x2(),Un=n,X_.current=r,Na!==null)throw Error(Xe(261));return Ya=null,os=0,Da}function $oe(){for(;Na!==null;)q8(Na)}function Moe(){for(;Na!==null&&!oie();)q8(Na)}function q8(e){var t=Y8(e.alternate,e,Di);e.memoizedProps=e.pendingProps,t===null?K8(e):Na=t,O2.current=null}function K8(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Eoe(n,t),n!==null){n.flags&=32767,Na=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Da=6,Na=null;return}}else if(n=Aoe(n,t,Di),n!==null){Na=n;return}if(t=t.sibling,t!==null){Na=t;return}Na=t=e}while(t!==null);Da===0&&(Da=5)}function Ph(e,t,n){var r=or,a=Eo.transition;try{Eo.transition=null,or=1,Doe(e,t,n,r)}finally{Eo.transition=a,or=r}return null}function Doe(e,t,n,r){do gp();while(sd!==null);if(Un&6)throw Error(Xe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Xe(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(vie(e,i),e===Ya&&(Na=Ya=null,os=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_w||(_w=!0,Q8($_,function(){return gp(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Eo.transition,Eo.transition=null;var o=or;or=1;var l=Un;Un|=4,O2.current=null,Poe(e,n),U8(n,e),roe(RE),D_=!!IE,RE=IE=null,e.current=n,Ooe(n),lie(),Un=l,or=o,Eo.transition=i}else e.current=n;if(_w&&(_w=!1,sd=e,Z_=a),i=e.pendingLanes,i===0&&(yd=null),die(n.stateNode),wi(e,fa()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(J_)throw J_=!1,e=eT,eT=null,e;return Z_&1&&e.tag!==0&&gp(),i=e.pendingLanes,i&1?e===tT?zy++:(zy=0,tT=e):zy=0,Ud(),null}function gp(){if(sd!==null){var e=CV(Z_),t=Eo.transition,n=or;try{if(Eo.transition=null,or=16>e?16:e,sd===null)var r=!1;else{if(e=sd,sd=null,Z_=0,Un&6)throw Error(Xe(331));var a=Un;for(Un|=4,_t=e.current;_t!==null;){var i=_t,o=i.child;if(_t.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(_t=u;_t!==null;){var d=_t;switch(d.tag){case 0:case 11:case 15:Uy(8,d,i)}var h=d.child;if(h!==null)h.return=d,_t=h;else for(;_t!==null;){d=_t;var m=d.sibling,p=d.return;if(L8(d),d===u){_t=null;break}if(m!==null){m.return=p,_t=m;break}_t=p}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}_t=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_t=o;else e:for(;_t!==null;){if(i=_t,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Uy(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,_t=_;break e}_t=i.return}}var j=e.current;for(_t=j;_t!==null;){o=_t;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,_t=w;else e:for(o=j;_t!==null;){if(l=_t,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Q1(9,l)}}catch(k){ta(l,l.return,k)}if(l===o){_t=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,_t=N;break e}_t=l.return}}if(Un=a,Ud(),Jl&&typeof Jl.onPostCommitFiberRoot=="function")try{Jl.onPostCommitFiberRoot(V1,e)}catch{}r=!0}return r}finally{or=n,Eo.transition=t}}return!1}function HL(e,t,n){t=Vp(n,t),t=C8(e,t,1),e=vd(e,t,1),t=Qs(),e!==null&&(O0(e,1,t),wi(e,t))}function ta(e,t,n){if(e.tag===3)HL(e,e,n);else for(;t!==null;){if(t.tag===3){HL(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yd===null||!yd.has(r))){e=Vp(n,e),e=A8(t,e,1),t=vd(t,e,1),e=Qs(),t!==null&&(O0(t,1,e),wi(t,e));break}}t=t.return}}function Loe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Qs(),e.pingedLanes|=e.suspendedLanes&n,Ya===e&&(os&n)===n&&(Da===4||Da===3&&(os&130023424)===os&&500>fa()-R2?sf(e,0):I2|=n),wi(e,t)}function G8(e,t){t===0&&(e.mode&1?(t=hw,hw<<=1,!(hw&130023424)&&(hw=4194304)):t=1);var n=Qs();e=Xc(e,t),e!==null&&(O0(e,t,n),wi(e,n))}function Foe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),G8(e,n)}function Boe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Xe(314))}r!==null&&r.delete(t),G8(e,n)}var Y8;Y8=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xi.current)vi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return vi=!1,Coe(e,t,n);vi=!!(e.flags&131072)}else vi=!1,Mr&&t.flags&1048576&&ZV(t,H_,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;g_(e,t),e=t.pendingProps;var a=Lp(t,Ns.current);pp(t,n),a=C2(null,t,r,e,a,n);var i=A2();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bi(r)?(i=!0,V_(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,_2(t),a.updater=Y1,t.stateNode=a,a._reactInternals=t,zE(t,r,e,n),t=qE(null,t,r,!0,i,n)):(t.tag=0,Mr&&i&&p2(t),Bs(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(g_(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Voe(r),e=tl(r,e),a){case 0:t=WE(null,t,r,e,n);break e;case 1:t=RL(null,t,r,e,n);break e;case 11:t=OL(null,t,r,e,n);break e;case 14:t=IL(null,t,r,tl(r.type,e),n);break e}throw Error(Xe(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:tl(r,a),WE(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:tl(r,a),RL(e,t,r,a,n);case 3:e:{if(O8(t),e===null)throw Error(Xe(387));r=t.pendingProps,i=t.memoizedState,a=i.element,s8(e,t),K_(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Vp(Error(Xe(423)),t),t=$L(e,t,r,n,a);break e}else if(r!==a){a=Vp(Error(Xe(424)),t),t=$L(e,t,r,n,a);break e}else for(qi=gd(t.stateNode.containerInfo.firstChild),Gi=t,Mr=!0,dl=null,n=r8(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fp(),r===a){t=Jc(e,t,n);break e}Bs(e,t,r,n)}t=t.child}return t;case 5:return i8(t),e===null&&BE(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,$E(r,a)?o=null:i!==null&&$E(r,i)&&(t.flags|=32),P8(e,t),Bs(e,t,o,n),t.child;case 6:return e===null&&BE(t),null;case 13:return I8(e,t,n);case 4:return j2(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Bp(t,null,r,n):Bs(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:tl(r,a),OL(e,t,r,a,n);case 7:return Bs(e,t,t.pendingProps,n),t.child;case 8:return Bs(e,t,t.pendingProps.children,n),t.child;case 12:return Bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Nr(W_,r._currentValue),r._currentValue=o,i!==null)if(_l(i.value,o)){if(i.children===a.children&&!xi.current){t=Jc(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qc(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),UE(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Xe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),UE(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Bs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,pp(t,n),a=Ro(a),r=r(a),t.flags|=1,Bs(e,t,r,n),t.child;case 14:return r=t.type,a=tl(r,t.pendingProps),a=tl(r.type,a),IL(e,t,r,a,n);case 15:return E8(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:tl(r,a),g_(e,t),t.tag=1,bi(r)?(e=!0,V_(t)):e=!1,pp(t,n),k8(t,r,a),zE(t,r,a,n),qE(null,t,r,!0,e,n);case 19:return R8(e,t,n);case 22:return T8(e,t,n)}throw Error(Xe(156,t.tag))};function Q8(e,t){return jV(e,t)}function Uoe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Co(e,t,n,r){return new Uoe(e,t,n,r)}function L2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Voe(e){if(typeof e=="function")return L2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===r2)return 11;if(e===a2)return 14}return 2}function bd(e,t){var n=e.alternate;return n===null?(n=Co(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function x_(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")L2(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Km:return of(n.children,a,i,t);case n2:o=8,a|=8;break;case fE:return e=Co(12,n,t,a|2),e.elementType=fE,e.lanes=i,e;case mE:return e=Co(13,n,t,a),e.elementType=mE,e.lanes=i,e;case pE:return e=Co(19,n,t,a),e.elementType=pE,e.lanes=i,e;case iV:return J1(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case aV:o=10;break e;case sV:o=9;break e;case r2:o=11;break e;case a2:o=14;break e;case Wu:o=16,r=null;break e}throw Error(Xe(130,e==null?e:typeof e,""))}return t=Co(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function of(e,t,n,r){return e=Co(7,e,r,t),e.lanes=n,e}function J1(e,t,n,r){return e=Co(22,e,r,t),e.elementType=iV,e.lanes=n,e.stateNode={isHidden:!1},e}function UC(e,t,n){return e=Co(6,e,null,t),e.lanes=n,e}function VC(e,t,n){return t=Co(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zoe(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_C(0),this.expirationTimes=_C(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_C(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function F2(e,t,n,r,a,i,o,l,c){return e=new zoe(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Co(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_2(i),e}function Hoe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qm,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function X8(e){if(!e)return Cd;e=e._reactInternals;e:{if(Lf(e)!==e||e.tag!==1)throw Error(Xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Xe(171))}if(e.tag===1){var n=e.type;if(bi(n))return XV(e,n,t)}return t}function J8(e,t,n,r,a,i,o,l,c){return e=F2(n,r,!0,e,a,i,o,l,c),e.context=X8(null),n=e.current,r=Qs(),a=xd(n),i=qc(r,a),i.callback=t??null,vd(n,i,a),e.current.lanes=a,O0(e,a,r),wi(e,r),e}function Z1(e,t,n,r){var a=t.current,i=Qs(),o=xd(a);return n=X8(n),t.context===null?t.context=n:t.pendingContext=n,t=qc(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=vd(a,t,o),e!==null&&(vl(e,a,o,i),f_(e,a,o)),o}function tj(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function WL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function B2(e,t){WL(e,t),(e=e.alternate)&&WL(e,t)}function Woe(){return null}var Z8=typeof reportError=="function"?reportError:function(e){console.error(e)};function U2(e){this._internalRoot=e}eS.prototype.render=U2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Xe(409));Z1(e,t,null,null)};eS.prototype.unmount=U2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gf(function(){Z1(null,e,null,null)}),t[Qc]=null}};function eS(e){this._internalRoot=e}eS.prototype.unstable_scheduleHydration=function(e){if(e){var t=TV();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yu.length&&t!==0&&t<Yu[n].priority;n++);Yu.splice(n,0,e),n===0&&OV(e)}};function V2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qL(){}function qoe(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=tj(o);i.call(u)}}var o=J8(t,r,e,0,null,!1,!1,"",qL);return e._reactRootContainer=o,e[Qc]=o.current,dx(e.nodeType===8?e.parentNode:e),gf(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=tj(c);l.call(u)}}var c=F2(e,0,!1,null,null,!1,!1,"",qL);return e._reactRootContainer=c,e[Qc]=c.current,dx(e.nodeType===8?e.parentNode:e),gf(function(){Z1(t,c,n,r)}),c}function nS(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=tj(o);l.call(c)}}Z1(t,o,e,a)}else o=qoe(n,t,e,a,r);return tj(o)}AV=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ky(t.pendingLanes);n!==0&&(o2(t,n|1),wi(t,fa()),!(Un&6)&&(zp=fa()+500,Ud()))}break;case 13:gf(function(){var r=Xc(e,1);if(r!==null){var a=Qs();vl(r,e,1,a)}}),B2(e,1)}};l2=function(e){if(e.tag===13){var t=Xc(e,134217728);if(t!==null){var n=Qs();vl(t,e,134217728,n)}B2(e,134217728)}};EV=function(e){if(e.tag===13){var t=xd(e),n=Xc(e,t);if(n!==null){var r=Qs();vl(n,e,t,r)}B2(e,t)}};TV=function(){return or};PV=function(e,t){var n=or;try{return or=e,t()}finally{or=n}};NE=function(e,t,n){switch(t){case"input":if(yE(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=q1(r);if(!a)throw Error(Xe(90));lV(r),yE(r,a)}}}break;case"textarea":uV(e,n);break;case"select":t=n.value,t!=null&&dp(e,!!n.multiple,t,!1)}};vV=$2;yV=gf;var Koe={usingClientEntryPoint:!1,Events:[R0,Xm,q1,pV,gV,$2]},iy={findFiberByHostInstance:zh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Goe={bundleType:iy.bundleType,version:iy.version,rendererPackageName:iy.rendererPackageName,rendererConfig:iy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wV(e),e===null?null:e.stateNode},findFiberByHostInstance:iy.findFiberByHostInstance||Woe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jw.isDisabled&&jw.supportsFiber)try{V1=jw.inject(Goe),Jl=jw}catch{}}to.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Koe;to.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V2(t))throw Error(Xe(200));return Hoe(e,t,null,n)};to.createRoot=function(e,t){if(!V2(e))throw Error(Xe(299));var n=!1,r="",a=Z8;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=F2(e,1,!1,null,null,n,!1,r,a),e[Qc]=t.current,dx(e.nodeType===8?e.parentNode:e),new U2(t)};to.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Xe(188)):(e=Object.keys(e).join(","),Error(Xe(268,e)));return e=wV(t),e=e===null?null:e.stateNode,e};to.flushSync=function(e){return gf(e)};to.hydrate=function(e,t,n){if(!tS(t))throw Error(Xe(200));return nS(null,e,t,!0,n)};to.hydrateRoot=function(e,t,n){if(!V2(e))throw Error(Xe(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=Z8;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=J8(t,null,e,1,n??null,a,!1,i,o),e[Qc]=t.current,dx(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new eS(t)};to.render=function(e,t,n){if(!tS(t))throw Error(Xe(200));return nS(null,e,t,!1,n)};to.unmountComponentAtNode=function(e){if(!tS(e))throw Error(Xe(40));return e._reactRootContainer?(gf(function(){nS(null,null,e,!1,function(){e._reactRootContainer=null,e[Qc]=null})}),!0):!1};to.unstable_batchedUpdates=$2;to.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!tS(n))throw Error(Xe(200));if(e==null||e._reactInternals===void 0)throw Error(Xe(38));return nS(e,t,n,!1,r)};to.version="18.3.1-next-f1338f8080-20240426";function ez(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ez)}catch(e){console.error(e)}}ez(),eV.exports=to;var Ff=eV.exports;const tz=Zn(Ff);var nz,KL=Ff;nz=KL.createRoot,KL.hydrateRoot;var rS=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aS=typeof window>"u"||"Deno"in globalThis;function nl(){}function Yoe(e,t){return typeof e=="function"?e(t):e}function Qoe(e){return typeof e=="number"&&e>=0&&e!==1/0}function Xoe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function aT(e,t){return typeof e=="function"?e(t):e}function Joe(e,t){return typeof e=="function"?e(t):e}function GL(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==z2(o,t.options))return!1}else if(!wx(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function YL(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(bx(t.options.mutationKey)!==bx(i))return!1}else if(!wx(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function z2(e,t){return((t==null?void 0:t.queryKeyHashFn)||bx)(e)}function bx(e){return JSON.stringify(e,(t,n)=>sT(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function wx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>wx(e[n],t[n])):!1}function rz(e,t){if(e===t)return e;const n=QL(e)&&QL(t);if(n||sT(e)&&sT(t)){const r=n?e:Object.keys(e),a=r.length,i=n?t:Object.keys(t),o=i.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=rz(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function QL(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function sT(e){if(!XL(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!XL(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function XL(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zoe(e){return new Promise(t=>{setTimeout(t,e)})}function ele(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?rz(e,t):t}function tle(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function nle(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var H2=Symbol();function az(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===H2?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Zh,Zu,Ep,I6,rle=(I6=class extends rS{constructor(){super();Kn(this,Zh);Kn(this,Zu);Kn(this,Ep);fn(this,Ep,t=>{if(!aS&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Me(this,Zu)||this.setEventListener(Me(this,Ep))}onUnsubscribe(){var t;this.hasListeners()||((t=Me(this,Zu))==null||t.call(this),fn(this,Zu,void 0))}setEventListener(t){var n;fn(this,Ep,t),(n=Me(this,Zu))==null||n.call(this),fn(this,Zu,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Me(this,Zh)!==t&&(fn(this,Zh,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Me(this,Zh)=="boolean"?Me(this,Zh):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Zh=new WeakMap,Zu=new WeakMap,Ep=new WeakMap,I6),sz=new rle,Tp,ed,Pp,R6,ale=(R6=class extends rS{constructor(){super();Kn(this,Tp,!0);Kn(this,ed);Kn(this,Pp);fn(this,Pp,t=>{if(!aS&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Me(this,ed)||this.setEventListener(Me(this,Pp))}onUnsubscribe(){var t;this.hasListeners()||((t=Me(this,ed))==null||t.call(this),fn(this,ed,void 0))}setEventListener(t){var n;fn(this,Pp,t),(n=Me(this,ed))==null||n.call(this),fn(this,ed,t(this.setOnline.bind(this)))}setOnline(t){Me(this,Tp)!==t&&(fn(this,Tp,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Me(this,Tp)}},Tp=new WeakMap,ed=new WeakMap,Pp=new WeakMap,R6),nj=new ale;function sle(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function ile(e){return Math.min(1e3*2**e,3e4)}function iz(e){return(e??"online")==="online"?nj.isOnline():!0}var oz=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function zC(e){return e instanceof oz}function lz(e){let t=!1,n=0,r=!1,a;const i=sle(),o=x=>{var b;r||(m(new oz(x)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>sz.isFocused()&&(e.networkMode==="always"||nj.isOnline())&&e.canRun(),d=()=>iz(e.networkMode)&&e.canRun(),h=x=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,x),a==null||a(),i.resolve(x))},m=x=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,x),a==null||a(),i.reject(x))},p=()=>new Promise(x=>{var b;a=_=>{(r||u())&&x(_)},(b=e.onPause)==null||b.call(e)}).then(()=>{var x;a=void 0,r||(x=e.onContinue)==null||x.call(e)}),v=()=>{if(r)return;let x;const b=n===0?e.initialPromise:void 0;try{x=b??e.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(h).catch(_=>{var C;if(r)return;const j=e.retry??(aS?0:3),w=e.retryDelay??ile,N=typeof w=="function"?w(n,_):w,k=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,_);if(t||!k){m(_);return}n++,(C=e.onFail)==null||C.call(e,n,_),Zoe(N).then(()=>u()?void 0:p()).then(()=>{t?m(_):v()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),i)}}var ole=e=>setTimeout(e,0);function lle(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=ole;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var zs=lle(),ef,$6,cz=($6=class{constructor(){Kn(this,ef)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qoe(this.gcTime)&&fn(this,ef,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(aS?1/0:5*60*1e3))}clearGcTimeout(){Me(this,ef)&&(clearTimeout(Me(this,ef)),fn(this,ef,void 0))}},ef=new WeakMap,$6),Op,tf,bo,nf,ws,E0,rf,al,Oc,M6,cle=(M6=class extends cz{constructor(t){super();Kn(this,al);Kn(this,Op);Kn(this,tf);Kn(this,bo);Kn(this,nf);Kn(this,ws);Kn(this,E0);Kn(this,rf);fn(this,rf,!1),fn(this,E0,t.defaultOptions),this.setOptions(t.options),this.observers=[],fn(this,nf,t.client),fn(this,bo,Me(this,nf).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,fn(this,Op,dle(this.options)),this.state=t.state??Me(this,Op),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Me(this,ws))==null?void 0:t.promise}setOptions(t){this.options={...Me(this,E0),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Me(this,bo).remove(this)}setData(t,n){const r=ele(this.state.data,t,this.options);return vs(this,al,Oc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){vs(this,al,Oc).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=Me(this,ws))==null?void 0:r.promise;return(a=Me(this,ws))==null||a.cancel(t),n?n.then(nl).catch(nl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Me(this,Op))}isActive(){return this.observers.some(t=>Joe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===H2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>aT(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Xoe(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Me(this,ws))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Me(this,ws))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Me(this,bo).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Me(this,ws)&&(Me(this,rf)?Me(this,ws).cancel({revert:!0}):Me(this,ws).cancelRetry()),this.scheduleGc()),Me(this,bo).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||vs(this,al,Oc).call(this,{type:"invalidate"})}fetch(t,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Me(this,ws))return Me(this,ws).continueRetry(),Me(this,ws).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(fn(this,rf,!0),r.signal)})},i=()=>{const m=az(this.options,n),v=(()=>{const x={client:Me(this,nf),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return fn(this,rf,!1),this.options.persister?this.options.persister(m,v,this):m(v)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Me(this,nf),state:this.state,fetchFn:i};return a(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),fn(this,tf,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&vs(this,al,Oc).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var p,v,x,b;zC(m)&&m.silent||vs(this,al,Oc).call(this,{type:"error",error:m}),zC(m)||((v=(p=Me(this,bo).config).onError)==null||v.call(p,m,this),(b=(x=Me(this,bo).config).onSettled)==null||b.call(x,this.state.data,m,this)),this.scheduleGc()};return fn(this,ws,lz({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var p,v,x,b;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(_){c(_);return}(v=(p=Me(this,bo).config).onSuccess)==null||v.call(p,m,this),(b=(x=Me(this,bo).config).onSettled)==null||b.call(x,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{vs(this,al,Oc).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{vs(this,al,Oc).call(this,{type:"pause"})},onContinue:()=>{vs(this,al,Oc).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Me(this,ws).start()}},Op=new WeakMap,tf=new WeakMap,bo=new WeakMap,nf=new WeakMap,ws=new WeakMap,E0=new WeakMap,rf=new WeakMap,al=new WeakSet,Oc=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ule(r.data,this.options),fetchMeta:t.meta??null};case"success":return fn(this,tf,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return zC(a)&&a.revert&&Me(this,tf)?{...Me(this,tf),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),zs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Me(this,bo).notify({query:this,type:"updated",action:t})})},M6);function ule(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:iz(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function dle(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Bl,D6,hle=(D6=class extends rS{constructor(t={}){super();Kn(this,Bl);this.config=t,fn(this,Bl,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??z2(a,n);let o=this.get(i);return o||(o=new cle({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Me(this,Bl).has(t.queryHash)||(Me(this,Bl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Me(this,Bl).get(t.queryHash);n&&(t.destroy(),n===t&&Me(this,Bl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){zs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Me(this,Bl).get(t)}getAll(){return[...Me(this,Bl).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>GL(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>GL(t,r)):n}notify(t){zs.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){zs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){zs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Bl=new WeakMap,D6),Ul,Ls,af,Vl,Bu,L6,fle=(L6=class extends cz{constructor(t){super();Kn(this,Vl);Kn(this,Ul);Kn(this,Ls);Kn(this,af);this.mutationId=t.mutationId,fn(this,Ls,t.mutationCache),fn(this,Ul,[]),this.state=t.state||mle(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Me(this,Ul).includes(t)||(Me(this,Ul).push(t),this.clearGcTimeout(),Me(this,Ls).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){fn(this,Ul,Me(this,Ul).filter(n=>n!==t)),this.scheduleGc(),Me(this,Ls).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Me(this,Ul).length||(this.state.status==="pending"?this.scheduleGc():Me(this,Ls).remove(this))}continue(){var t;return((t=Me(this,af))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,h,m,p,v,x,b,_,j,w,N,k,C,A,P;const n=()=>{vs(this,Vl,Bu).call(this,{type:"continue"})};fn(this,af,lz({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,T)=>{vs(this,Vl,Bu).call(this,{type:"failed",failureCount:O,error:T})},onPause:()=>{vs(this,Vl,Bu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Me(this,Ls).canRun(this)}));const r=this.state.status==="pending",a=!Me(this,af).canStart();try{if(r)n();else{vs(this,Vl,Bu).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=Me(this,Ls).config).onMutate)==null?void 0:o.call(i,t,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));T!==this.state.context&&vs(this,Vl,Bu).call(this,{type:"pending",context:T,variables:t,isPaused:a})}const O=await Me(this,af).start();return await((d=(u=Me(this,Ls).config).onSuccess)==null?void 0:d.call(u,O,t,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,O,t,this.state.context)),await((v=(p=Me(this,Ls).config).onSettled)==null?void 0:v.call(p,O,null,this.state.variables,this.state.context,this)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,O,null,t,this.state.context)),vs(this,Vl,Bu).call(this,{type:"success",data:O}),O}catch(O){try{throw await((j=(_=Me(this,Ls).config).onError)==null?void 0:j.call(_,O,t,this.state.context,this)),await((N=(w=this.options).onError)==null?void 0:N.call(w,O,t,this.state.context)),await((C=(k=Me(this,Ls).config).onSettled)==null?void 0:C.call(k,void 0,O,this.state.variables,this.state.context,this)),await((P=(A=this.options).onSettled)==null?void 0:P.call(A,void 0,O,t,this.state.context)),O}finally{vs(this,Vl,Bu).call(this,{type:"error",error:O})}}finally{Me(this,Ls).runNext(this)}}},Ul=new WeakMap,Ls=new WeakMap,af=new WeakMap,Vl=new WeakSet,Bu=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),zs.batch(()=>{Me(this,Ul).forEach(r=>{r.onMutationUpdate(t)}),Me(this,Ls).notify({mutation:this,type:"updated",action:t})})},L6);function mle(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dc,sl,T0,F6,ple=(F6=class extends rS{constructor(t={}){super();Kn(this,Dc);Kn(this,sl);Kn(this,T0);this.config=t,fn(this,Dc,new Set),fn(this,sl,new Map),fn(this,T0,0)}build(t,n,r){const a=new fle({mutationCache:this,mutationId:++iw(this,T0)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){Me(this,Dc).add(t);const n=Sw(t);if(typeof n=="string"){const r=Me(this,sl).get(n);r?r.push(t):Me(this,sl).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Me(this,Dc).delete(t)){const n=Sw(t);if(typeof n=="string"){const r=Me(this,sl).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&Me(this,sl).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Sw(t);if(typeof n=="string"){const r=Me(this,sl).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=Sw(t);if(typeof n=="string"){const a=(r=Me(this,sl).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){zs.batch(()=>{Me(this,Dc).forEach(t=>{this.notify({type:"removed",mutation:t})}),Me(this,Dc).clear(),Me(this,sl).clear()})}getAll(){return Array.from(Me(this,Dc))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>YL(n,r))}findAll(t={}){return this.getAll().filter(n=>YL(t,n))}notify(t){zs.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return zs.batch(()=>Promise.all(t.map(n=>n.continue().catch(nl))))}},Dc=new WeakMap,sl=new WeakMap,T0=new WeakMap,F6);function Sw(e){var t;return(t=e.options.scope)==null?void 0:t.id}function JL(e){return{onFetch:(t,n)=>{var d,h,m,p,v;const r=t.options,a=(m=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},_=az(t.options,t.fetchOptions),j=async(w,N,k)=>{if(x)return Promise.reject();if(N==null&&w.pages.length)return Promise.resolve(w);const A=(()=>{const $={client:t.client,queryKey:t.queryKey,pageParam:N,direction:k?"backward":"forward",meta:t.options.meta};return b($),$})(),P=await _(A),{maxPages:O}=t.options,T=k?nle:tle;return{pages:T(w.pages,P,O),pageParams:T(w.pageParams,N,O)}};if(a&&i.length){const w=a==="backward",N=w?gle:ZL,k={pages:i,pageParams:o},C=N(r,k);l=await j(k,C,w)}else{const w=e??i.length;do{const N=c===0?o[0]??r.initialPageParam:ZL(r,l);if(c>0&&N==null)break;l=await j(l,N),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var x,b;return(b=(x=t.options).persister)==null?void 0:b.call(x,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function ZL(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function gle(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Jr,td,nd,Ip,Rp,rd,$p,Mp,B6,uz=(B6=class{constructor(e={}){Kn(this,Jr);Kn(this,td);Kn(this,nd);Kn(this,Ip);Kn(this,Rp);Kn(this,rd);Kn(this,$p);Kn(this,Mp);fn(this,Jr,e.queryCache||new hle),fn(this,td,e.mutationCache||new ple),fn(this,nd,e.defaultOptions||{}),fn(this,Ip,new Map),fn(this,Rp,new Map),fn(this,rd,0)}mount(){iw(this,rd)._++,Me(this,rd)===1&&(fn(this,$p,sz.subscribe(async e=>{e&&(await this.resumePausedMutations(),Me(this,Jr).onFocus())})),fn(this,Mp,nj.subscribe(async e=>{e&&(await this.resumePausedMutations(),Me(this,Jr).onOnline())})))}unmount(){var e,t;iw(this,rd)._--,Me(this,rd)===0&&((e=Me(this,$p))==null||e.call(this),fn(this,$p,void 0),(t=Me(this,Mp))==null||t.call(this),fn(this,Mp,void 0))}isFetching(e){return Me(this,Jr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Me(this,td).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Me(this,Jr).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Me(this,Jr).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(aT(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Me(this,Jr).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=Me(this,Jr).get(r.queryHash),i=a==null?void 0:a.state.data,o=Yoe(t,i);if(o!==void 0)return Me(this,Jr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return zs.batch(()=>Me(this,Jr).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Me(this,Jr).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Me(this,Jr);zs.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Me(this,Jr);return zs.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=zs.batch(()=>Me(this,Jr).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(nl).catch(nl)}invalidateQueries(e,t={}){return zs.batch(()=>(Me(this,Jr).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=zs.batch(()=>Me(this,Jr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(nl)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(nl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Me(this,Jr).build(this,t);return n.isStaleByTime(aT(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(nl).catch(nl)}fetchInfiniteQuery(e){return e.behavior=JL(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(nl).catch(nl)}ensureInfiniteQueryData(e){return e.behavior=JL(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return nj.isOnline()?Me(this,td).resumePausedMutations():Promise.resolve()}getQueryCache(){return Me(this,Jr)}getMutationCache(){return Me(this,td)}getDefaultOptions(){return Me(this,nd)}setDefaultOptions(e){fn(this,nd,e)}setQueryDefaults(e,t){Me(this,Ip).set(bx(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Me(this,Ip).values()],n={};return t.forEach(r=>{wx(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Me(this,Rp).set(bx(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Me(this,Rp).values()],n={};return t.forEach(r=>{wx(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Me(this,nd).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=z2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===H2&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Me(this,nd).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Me(this,Jr).clear(),Me(this,td).clear()}},Jr=new WeakMap,td=new WeakMap,nd=new WeakMap,Ip=new WeakMap,Rp=new WeakMap,rd=new WeakMap,$p=new WeakMap,Mp=new WeakMap,B6),vle=g.createContext(void 0),dz=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(vle.Provider,{value:e,children:t}));const yle=1,xle=2e3;let HC=0;function ble(){return HC=(HC+1)%Number.MAX_SAFE_INTEGER,HC.toString()}const WC=new Map,e4=e=>{if(WC.has(e))return;const t=setTimeout(()=>{WC.delete(e),Hy({type:"REMOVE_TOAST",toastId:e})},xle);WC.set(e,t)},wle=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,yle)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?e4(n):e.toasts.forEach(r=>{e4(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},b_=[];let w_={toasts:[]};function Hy(e){w_=wle(w_,e),b_.forEach(t=>{t(w_)})}function xo({...e}){const t=ble(),n=a=>Hy({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>Hy({type:"DISMISS_TOAST",toastId:t});return Hy({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function Lo(){const[e,t]=g.useState(w_);return g.useEffect(()=>(b_.push(t),()=>{const n=b_.indexOf(t);n>-1&&b_.splice(n,1)}),[e]),{...e,toast:xo,dismiss:n=>Hy({type:"DISMISS_TOAST",toastId:n})}}function We(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function t4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Zc(...e){return t=>{let n=!1;const r=e.map(a=>{const i=t4(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():t4(e[a],null)}}}}function Dt(...e){return g.useCallback(Zc(...e),e)}function _le(e,t){const n=g.createContext(t),r=i=>{const{children:o,...l}=i,c=g.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(i){const o=g.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function ga(e,t=[]){let n=[];function r(i,o){const l=g.createContext(o),c=n.length;n=[...n,o];const u=h=>{var _;const{scope:m,children:p,...v}=h,x=((_=m==null?void 0:m[e])==null?void 0:_[c])||l,b=g.useMemo(()=>v,Object.values(v));return s.jsx(x.Provider,{value:b,children:p})};u.displayName=i+"Provider";function d(h,m){var x;const p=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,v=g.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,jle(a,...t)]}function jle(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Ad(e){const t=Sle(e),n=g.forwardRef((r,a)=>{const{children:i,...o}=r,l=g.Children.toArray(i),c=l.find(Nle);if(c){const u=c.props.children,d=l.map(h=>h===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:h);return s.jsx(t,{...o,ref:a,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var Lg=Ad("Slot");function Sle(e){const t=g.forwardRef((n,r)=>{const{children:a,...i}=n;if(g.isValidElement(a)){const o=Cle(a),l=kle(i,a.props);return a.type!==g.Fragment&&(l.ref=r?Zc(r,o):o),g.cloneElement(a,l)}return g.Children.count(a)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hz=Symbol("radix.slottable");function fz(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=hz,t}function Nle(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hz}function kle(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Cle(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function M0(e){const t=e+"CollectionProvider",[n,r]=ga(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:b,children:_}=x,j=V.useRef(null),w=V.useRef(new Map).current;return s.jsx(a,{scope:b,itemMap:w,collectionRef:j,children:_})};o.displayName=t;const l=e+"CollectionSlot",c=Ad(l),u=V.forwardRef((x,b)=>{const{scope:_,children:j}=x,w=i(l,_),N=Dt(b,w.collectionRef);return s.jsx(c,{ref:N,children:j})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Ad(d),p=V.forwardRef((x,b)=>{const{scope:_,children:j,...w}=x,N=V.useRef(null),k=Dt(b,N),C=i(d,_);return V.useEffect(()=>(C.itemMap.set(N,{ref:N,...w}),()=>void C.itemMap.delete(N))),s.jsx(m,{[h]:"",ref:k,children:j})});p.displayName=d;function v(x){const b=i(e+"CollectionConsumer",x);return V.useCallback(()=>{const j=b.collectionRef.current;if(!j)return[];const w=Array.from(j.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((C,A)=>w.indexOf(C.ref.current)-w.indexOf(A.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},v,r]}var Ale=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],it=Ale.reduce((e,t)=>{const n=Ad(`Primitive.${t}`),r=g.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function W2(e,t){e&&Ff.flushSync(()=>e.dispatchEvent(t))}function aa(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Ele(e,t=globalThis==null?void 0:globalThis.document){const n=aa(e);g.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Tle="DismissableLayer",iT="dismissableLayer.update",Ple="dismissableLayer.pointerDownOutside",Ole="dismissableLayer.focusOutside",n4,mz=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bf=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=g.useContext(mz),[d,h]=g.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),v=Dt(t,A=>h(A)),x=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(b),j=d?x.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,N=j>=_,k=Rle(A=>{const P=A.target,O=[...u.branches].some(T=>T.contains(P));!N||O||(a==null||a(A),o==null||o(A),A.defaultPrevented||l==null||l())},m),C=$le(A=>{const P=A.target;[...u.branches].some(T=>T.contains(P))||(i==null||i(A),o==null||o(A),A.defaultPrevented||l==null||l())},m);return Ele(A=>{j===u.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},m),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(n4=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),r4(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=n4)}},[d,m,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),r4())},[d,u]),g.useEffect(()=>{const A=()=>p({});return document.addEventListener(iT,A),()=>document.removeEventListener(iT,A)},[]),s.jsx(it.div,{...c,ref:v,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:We(e.onFocusCapture,C.onFocusCapture),onBlurCapture:We(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:We(e.onPointerDownCapture,k.onPointerDownCapture)})});Bf.displayName=Tle;var Ile="DismissableLayerBranch",pz=g.forwardRef((e,t)=>{const n=g.useContext(mz),r=g.useRef(null),a=Dt(t,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(it.div,{...e,ref:a})});pz.displayName=Ile;function Rle(e,t=globalThis==null?void 0:globalThis.document){const n=aa(e),r=g.useRef(!1),a=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){gz(Ple,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function $le(e,t=globalThis==null?void 0:globalThis.document){const n=aa(e),r=g.useRef(!1);return g.useEffect(()=>{const a=i=>{i.target&&!r.current&&gz(Ole,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function r4(){const e=new CustomEvent(iT);document.dispatchEvent(e)}function gz(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?W2(a,i):a.dispatchEvent(i)}var Mle=Bf,Dle=pz,sa=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},Lle="Portal",Fg=g.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,i]=g.useState(!1);sa(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?tz.createPortal(s.jsx(it.div,{...r,ref:t}),o):null});Fg.displayName=Lle;function Fle(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var Aa=e=>{const{present:t,children:n}=e,r=Ble(t),a=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=Dt(r.ref,Ule(a));return typeof n=="function"||r.isPresent?g.cloneElement(a,{ref:i}):null};Aa.displayName="Presence";function Ble(e){const[t,n]=g.useState(),r=g.useRef(null),a=g.useRef(e),i=g.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Fle(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Nw(r.current);i.current=l==="mounted"?u:"none"},[l]),sa(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,p=Nw(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),sa(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=p=>{const x=Nw(r.current).includes(p.animationName);if(p.target===t&&x&&(c("ANIMATION_END"),!a.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=p=>{p.target===t&&(i.current=Nw(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Nw(e){return(e==null?void 0:e.animationName)||"none"}function Ule(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Vle=JO[" useInsertionEffect ".trim().toString()]||sa;function _i({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=zle({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const d=g.useRef(e!==void 0);g.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=g.useCallback(d=>{var h;if(l){const m=Hle(d)?d(e):d;m!==e&&((h=o.current)==null||h.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function zle({defaultProp:e,onChange:t}){const[n,r]=g.useState(e),a=g.useRef(n),i=g.useRef(t);return Vle(()=>{i.current=t},[t]),g.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function Hle(e){return typeof e=="function"}var vz=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Wle="VisuallyHidden",sS=g.forwardRef((e,t)=>s.jsx(it.span,{...e,ref:t,style:{...vz,...e.style}}));sS.displayName=Wle;var qle=sS,q2="ToastProvider",[K2,Kle,Gle]=M0("Toast"),[yz,UYe]=ga("Toast",[Gle]),[Yle,iS]=yz(q2),xz=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=g.useState(null),[u,d]=g.useState(0),h=g.useRef(!1),m=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${q2}\`. Expected non-empty \`string\`.`),s.jsx(K2.Provider,{scope:t,children:s.jsx(Yle,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>d(p=>p+1),[]),onToastRemove:g.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};xz.displayName=q2;var bz="ToastViewport",Qle=["F8"],oT="toast.viewportPause",lT="toast.viewportResume",wz=g.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Qle,label:a="Notifications ({hotkey})",...i}=e,o=iS(bz,n),l=Kle(n),c=g.useRef(null),u=g.useRef(null),d=g.useRef(null),h=g.useRef(null),m=Dt(t,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;g.useEffect(()=>{const b=_=>{var w;r.length!==0&&r.every(N=>_[N]||_.code===N)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),g.useEffect(()=>{const b=c.current,_=h.current;if(v&&b&&_){const j=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(oT);_.dispatchEvent(C),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(lT);_.dispatchEvent(C),o.isClosePausedRef.current=!1}},N=C=>{!b.contains(C.relatedTarget)&&w()},k=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",j),b.addEventListener("focusout",N),b.addEventListener("pointermove",j),b.addEventListener("pointerleave",k),window.addEventListener("blur",j),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",j),b.removeEventListener("focusout",N),b.removeEventListener("pointermove",j),b.removeEventListener("pointerleave",k),window.removeEventListener("blur",j),window.removeEventListener("focus",w)}}},[v,o.isClosePausedRef]);const x=g.useCallback(({tabbingDirection:b})=>{const j=l().map(w=>{const N=w.ref.current,k=[N,...cce(N)];return b==="forwards"?k:k.reverse()});return(b==="forwards"?j.reverse():j).flat()},[l]);return g.useEffect(()=>{const b=h.current;if(b){const _=j=>{var k,C,A;const w=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!w){const P=document.activeElement,O=j.shiftKey;if(j.target===b&&O){(k=u.current)==null||k.focus();return}const L=x({tabbingDirection:O?"backwards":"forwards"}),z=L.findIndex(W=>W===P);qC(L.slice(z+1))?j.preventDefault():O?(C=u.current)==null||C.focus():(A=d.current)==null||A.focus()}};return b.addEventListener("keydown",_),()=>b.removeEventListener("keydown",_)}},[l,x]),s.jsxs(Dle,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&s.jsx(cT,{ref:u,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"forwards"});qC(b)}}),s.jsx(K2.Slot,{scope:n,children:s.jsx(it.ol,{tabIndex:-1,...i,ref:m})}),v&&s.jsx(cT,{ref:d,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"backwards"});qC(b)}})]})});wz.displayName=bz;var _z="ToastFocusProxy",cT=g.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=iS(_z,n);return s.jsx(sS,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});cT.displayName=_z;var D0="Toast",Xle="toast.swipeStart",Jle="toast.swipeMove",Zle="toast.swipeCancel",ece="toast.swipeEnd",jz=g.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=_i({prop:r,defaultProp:a??!0,onChange:i,caller:D0});return s.jsx(Aa,{present:n||l,children:s.jsx(rce,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:aa(e.onPause),onResume:aa(e.onResume),onSwipeStart:We(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:We(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:We(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:We(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});jz.displayName=D0;var[tce,nce]=yz(D0,{onClose(){}}),rce=g.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:p,...v}=e,x=iS(D0,n),[b,_]=g.useState(null),j=Dt(t,W=>_(W)),w=g.useRef(null),N=g.useRef(null),k=a||x.duration,C=g.useRef(0),A=g.useRef(k),P=g.useRef(0),{onToastAdd:O,onToastRemove:T}=x,$=aa(()=>{var B;(b==null?void 0:b.contains(document.activeElement))&&((B=x.viewport)==null||B.focus()),o()}),L=g.useCallback(W=>{!W||W===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout($,W))},[$]);g.useEffect(()=>{const W=x.viewport;if(W){const B=()=>{L(A.current),u==null||u()},G=()=>{const U=new Date().getTime()-C.current;A.current=A.current-U,window.clearTimeout(P.current),c==null||c()};return W.addEventListener(oT,G),W.addEventListener(lT,B),()=>{W.removeEventListener(oT,G),W.removeEventListener(lT,B)}}},[x.viewport,k,c,u,L]),g.useEffect(()=>{i&&!x.isClosePausedRef.current&&L(k)},[i,k,x.isClosePausedRef,L]),g.useEffect(()=>(O(),()=>T()),[O,T]);const z=g.useMemo(()=>b?Tz(b):null,[b]);return x.viewport?s.jsxs(s.Fragment,{children:[z&&s.jsx(ace,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),s.jsx(tce,{scope:n,onClose:$,children:Ff.createPortal(s.jsx(K2.ItemSlot,{scope:n,children:s.jsx(Mle,{asChild:!0,onEscapeKeyDown:We(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||$(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(it.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...v,ref:j,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:We(e.onKeyDown,W=>{W.key==="Escape"&&(l==null||l(W.nativeEvent),W.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:We(e.onPointerDown,W=>{W.button===0&&(w.current={x:W.clientX,y:W.clientY})}),onPointerMove:We(e.onPointerMove,W=>{if(!w.current)return;const B=W.clientX-w.current.x,G=W.clientY-w.current.y,U=!!N.current,F=["left","right"].includes(x.swipeDirection),K=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,X=F?K(0,B):0,se=F?0:K(0,G),D=W.pointerType==="touch"?10:2,Y={x:X,y:se},ue={originalEvent:W,delta:Y};U?(N.current=Y,kw(Jle,h,ue,{discrete:!1})):a4(Y,x.swipeDirection,D)?(N.current=Y,kw(Xle,d,ue,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(B)>D||Math.abs(G)>D)&&(w.current=null)}),onPointerUp:We(e.onPointerUp,W=>{const B=N.current,G=W.target;if(G.hasPointerCapture(W.pointerId)&&G.releasePointerCapture(W.pointerId),N.current=null,w.current=null,B){const U=W.currentTarget,F={originalEvent:W,delta:B};a4(B,x.swipeDirection,x.swipeThreshold)?kw(ece,p,F,{discrete:!0}):kw(Zle,m,F,{discrete:!0}),U.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),ace=e=>{const{__scopeToast:t,children:n,...r}=e,a=iS(D0,t),[i,o]=g.useState(!1),[l,c]=g.useState(!1);return oce(()=>o(!0)),g.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(Fg,{asChild:!0,children:s.jsx(sS,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},sce="ToastTitle",Sz=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(it.div,{...r,ref:t})});Sz.displayName=sce;var ice="ToastDescription",Nz=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(it.div,{...r,ref:t})});Nz.displayName=ice;var kz="ToastAction",Cz=g.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(Ez,{altText:n,asChild:!0,children:s.jsx(G2,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${kz}\`. Expected non-empty \`string\`.`),null)});Cz.displayName=kz;var Az="ToastClose",G2=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=nce(Az,n);return s.jsx(Ez,{asChild:!0,children:s.jsx(it.button,{type:"button",...r,ref:t,onClick:We(e.onClick,a.onClose)})})});G2.displayName=Az;var Ez=g.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(it.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function Tz(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),lce(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Tz(r))}}),t}function kw(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?W2(a,i):a.dispatchEvent(i)}var a4=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function oce(e=()=>{}){const t=aa(e);sa(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function lce(e){return e.nodeType===e.ELEMENT_NODE}function cce(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function qC(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var uce=xz,Pz=wz,Oz=jz,Iz=Sz,Rz=Nz,$z=Cz,Mz=G2;function Dz(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Dz(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Xt(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Dz(e))&&(r&&(r+=" "),r+=t);return r}const s4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,i4=Xt,Uf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return i4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=s4(d)||s4(h);return a[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(v=>{let[x,b]=v;return Array.isArray(b)?b.includes({...i,...l}[x]):{...i,...l}[x]===b})?[...u,h,m]:u},[]);return i4(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dce=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lz=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fce=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...hce,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Lz("lucide",a),...l},[...o.map(([u,d])=>g.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=(e,t)=>{const n=g.forwardRef(({className:r,...a},i)=>g.createElement(fce,{ref:i,iconNode:t,className:Lz(`lucide-${dce(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=et("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=et("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=et("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mce=et("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=et("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=et("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=et("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pce=et("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=et("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=et("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=et("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gce=et("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=et("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=et("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vce=et("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=et("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=et("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=et("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=et("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=et("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=et("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=et("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=et("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=et("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=et("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yce=et("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=et("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=et("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=et("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xce=et("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=et("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=et("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=et("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bce=et("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wce=et("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=et("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ce=et("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jce=et("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sce=et("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nce=et("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kce=et("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cce=et("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=et("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=et("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ace=et("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=et("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ece=et("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tce=et("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pce=et("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=et("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=et("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=et("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oce=et("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ice=et("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=et("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=et("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=et("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rce=et("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ce=et("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mce=et("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=et("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=et("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=et("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=et("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=et("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=et("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=et("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=et("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=et("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=et("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dce=et("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=et("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lce=et("ShieldPlus",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9 12h6",key:"1c52cq"}],["path",{d:"M12 9v6",key:"199k2o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=et("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=et("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=et("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fce=et("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=et("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=et("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=et("TestTubeDiagonal",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3",key:"1ub6xw"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=et("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=et("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=et("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=et("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bce=et("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uce=et("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=et("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=et("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=et("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=et("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),J2="-",Vce=e=>{const t=Hce(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(J2);return l[0]===""&&l.length!==1&&l.shift(),Qz(l,t)||zce(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},Qz=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?Qz(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(J2);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},d4=/^\[(.+)\]$/,zce=e=>{if(d4.test(e)){const t=d4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Hce=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return qce(Object.entries(e.classGroups),n).forEach(([i,o])=>{mT(o,r,i,t)}),r},mT=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:h4(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(Wce(a)){mT(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{mT(o,h4(t,i),n,r)})})},h4=(e,t)=>{let n=e;return t.split(J2).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Wce=e=>e.isThemeGetter,qce=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,a]}):e,Kce=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},Xz="!",Gce=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let b=0;b<l.length;b++){let _=l[b];if(u===0){if(_===a&&(r||l.slice(b,b+i)===t)){c.push(l.slice(d,b)),d=b+i;continue}if(_==="/"){h=b;continue}}_==="["?u++:_==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(Xz),v=p?m.substring(1):m,x=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},Yce=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Qce=e=>({cache:Kce(e.cacheSize),parseClassName:Gce(e),...Vce(e)}),Xce=/\s+/,Jce=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(Xce);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let v=!!p,x=r(v?m.substring(0,p):m);if(!x){if(!v){l=u+(l.length>0?" "+l:l);continue}if(x=r(m),!x){l=u+(l.length>0?" "+l:l);continue}v=!1}const b=Yce(d).join(":"),_=h?b+Xz:b,j=_+x;if(i.includes(j))continue;i.push(j);const w=a(x,v);for(let N=0;N<w.length;++N){const k=w[N];i.push(_+k)}l=u+(l.length>0?" "+l:l)}return l};function Zce(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Jz(t))&&(r&&(r+=" "),r+=n);return r}const Jz=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Jz(e[r]))&&(n&&(n+=" "),n+=t);return n};function eue(e,...t){let n,r,a,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=Qce(u),r=n.cache.get,a=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=Jce(c,n);return a(c,d),d}return function(){return i(Zce.apply(null,arguments))}}const Er=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Zz=/^\[(?:([a-z-]+):)?(.+)\]$/i,tue=/^\d+\/\d+$/,nue=new Set(["px","full","screen"]),rue=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aue=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sue=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iue=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oue=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ac=e=>yp(e)||nue.has(e)||tue.test(e),Mu=e=>Ug(e,"length",pue),yp=e=>!!e&&!Number.isNaN(Number(e)),KC=e=>Ug(e,"number",yp),oy=e=>!!e&&Number.isInteger(Number(e)),lue=e=>e.endsWith("%")&&yp(e.slice(0,-1)),gn=e=>Zz.test(e),Du=e=>rue.test(e),cue=new Set(["length","size","percentage"]),uue=e=>Ug(e,cue,eH),due=e=>Ug(e,"position",eH),hue=new Set(["image","url"]),fue=e=>Ug(e,hue,vue),mue=e=>Ug(e,"",gue),ly=()=>!0,Ug=(e,t,n)=>{const r=Zz.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},pue=e=>aue.test(e)&&!sue.test(e),eH=()=>!1,gue=e=>iue.test(e),vue=e=>oue.test(e),yue=()=>{const e=Er("colors"),t=Er("spacing"),n=Er("blur"),r=Er("brightness"),a=Er("borderColor"),i=Er("borderRadius"),o=Er("borderSpacing"),l=Er("borderWidth"),c=Er("contrast"),u=Er("grayscale"),d=Er("hueRotate"),h=Er("invert"),m=Er("gap"),p=Er("gradientColorStops"),v=Er("gradientColorStopPositions"),x=Er("inset"),b=Er("margin"),_=Er("opacity"),j=Er("padding"),w=Er("saturate"),N=Er("scale"),k=Er("sepia"),C=Er("skew"),A=Er("space"),P=Er("translate"),O=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",gn,t],L=()=>[gn,t],z=()=>["",Ac,Mu],W=()=>["auto",yp,gn],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",gn],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[yp,gn];return{cacheSize:500,separator:":",theme:{colors:[ly],spacing:[Ac,Mu],blur:["none","",Du,gn],brightness:se(),borderColor:[e],borderRadius:["none","","full",Du,gn],borderSpacing:L(),borderWidth:z(),contrast:se(),grayscale:K(),hueRotate:se(),invert:K(),gap:L(),gradientColorStops:[e],gradientColorStopPositions:[lue,Mu],inset:$(),margin:$(),opacity:se(),padding:L(),saturate:se(),scale:se(),sepia:K(),skew:se(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",gn]}],container:["container"],columns:[{columns:[Du]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),gn]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",oy,gn]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gn]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",oy,gn]}],"grid-cols":[{"grid-cols":[ly]}],"col-start-end":[{col:["auto",{span:["full",oy,gn]},gn]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[ly]}],"row-start-end":[{row:["auto",{span:[oy,gn]},gn]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gn]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gn,t]}],"min-w":[{"min-w":[gn,t,"min","max","fit"]}],"max-w":[{"max-w":[gn,t,"none","full","min","max","fit","prose",{screen:[Du]},Du]}],h:[{h:[gn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Du,Mu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",KC]}],"font-family":[{font:[ly]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gn]}],"line-clamp":[{"line-clamp":["none",yp,KC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ac,gn]}],"list-image":[{"list-image":["none",gn]}],"list-style-type":[{list:["none","disc","decimal",gn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ac,Mu]}],"underline-offset":[{"underline-offset":["auto",Ac,gn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),due]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uue]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fue]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:G()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[Ac,gn]}],"outline-w":[{outline:[Ac,Mu]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Ac,Mu]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Du,mue]}],"shadow-color":[{shadow:[ly]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Du,gn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gn]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",gn]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",gn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[oy,gn]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ac,Mu,KC]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xue=eue(yue);function je(...e){return xue(Xt(e))}const bue=uce,tH=g.forwardRef(({className:e,...t},n)=>s.jsx(Pz,{ref:n,className:je("fixed top-0 right-0 z-[100] flex max-h-screen w-full flex-col p-4 md:max-w-[210px]",e),...t}));tH.displayName=Pz.displayName;const wue=Uf("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-3 pr-4 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),nH=g.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(Oz,{ref:r,className:je(wue({variant:t}),e),...n}));nH.displayName=Oz.displayName;const _ue=g.forwardRef(({className:e,...t},n)=>s.jsx($z,{ref:n,className:je("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));_ue.displayName=$z.displayName;const rH=g.forwardRef(({className:e,...t},n)=>s.jsx(Mz,{ref:n,className:je("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Cs,{className:"h-4 w-4"})}));rH.displayName=Mz.displayName;const aH=g.forwardRef(({className:e,...t},n)=>s.jsx(Iz,{ref:n,className:je("text-xs font-semibold",e),...t}));aH.displayName=Iz.displayName;const sH=g.forwardRef(({className:e,...t},n)=>s.jsx(Rz,{ref:n,className:je("text-xs opacity-90",e),...t}));sH.displayName=Rz.displayName;function jue(){const{toasts:e}=Lo();return s.jsxs(bue,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return s.jsxs(nH,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(aH,{children:n}),r&&s.jsx(sH,{children:r})]}),a,s.jsx(rH,{})]},t)}),s.jsx(tH,{})]})}var f4=["light","dark"],Sue="(prefers-color-scheme: dark)",Nue=g.createContext(void 0),kue={setTheme:e=>{},themes:[]},Cue=()=>{var e;return(e=g.useContext(Nue))!=null?e:kue};g.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=a?f4.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,x=!1,b=!0)=>{let _=o?o[v]:v,j=x?v+"|| ''":`'${_}'`,w="";return a&&b&&!x&&f4.includes(v)&&(w+=`d.style.colorScheme = '${v}';`),n==="class"?x||_?w+=`c.add(${j})`:w+="null":_&&(w+=`d[s](n,${j})`),w},p=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${Sue}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${h}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var Aue=e=>{switch(e){case"success":return Pue;case"info":return Iue;case"warning":return Oue;case"error":return Rue;default:return null}},Eue=Array(12).fill(0),Tue=({visible:e,className:t})=>V.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},V.createElement("div",{className:"sonner-spinner"},Eue.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Pue=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Oue=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Iue=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Rue=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$ue=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Mue=()=>{let[e,t]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},pT=1,Due=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:pT++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],V.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(Fue(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||pT++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},hi=new Due,Lue=(e,t)=>{let n=(t==null?void 0:t.id)||pT++;return hi.addToast({title:e,...t,id:n}),n},Fue=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Bue=Lue,Uue=()=>hi.toasts,Vue=()=>hi.getActiveToasts(),ne=Object.assign(Bue,{success:hi.success,info:hi.info,warning:hi.warning,error:hi.error,custom:hi.custom,message:hi.message,promise:hi.promise,dismiss:hi.dismiss,loading:hi.loading},{getHistory:Uue,getToasts:Vue});function zue(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}zue(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Cw(e){return e.label!==void 0}var Hue=3,Wue="32px",que="16px",m4=4e3,Kue=356,Gue=14,Yue=20,Que=200;function Qo(...e){return e.filter(Boolean).join(" ")}function Xue(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var Jue=e=>{var t,n,r,a,i,o,l,c,u,d,h;let{invert:m,toast:p,unstyled:v,interacting:x,setHeights:b,visibleToasts:_,heights:j,index:w,toasts:N,expanded:k,removeToast:C,defaultRichColors:A,closeButton:P,style:O,cancelButtonStyle:T,actionButtonStyle:$,className:L="",descriptionClassName:z="",duration:W,position:B,gap:G,loadingIcon:U,expandByDefault:F,classNames:K,icons:X,closeButtonAriaLabel:se="Close toast",pauseWhenPageIsHidden:D}=e,[Y,ue]=V.useState(null),[xe,Ne]=V.useState(null),[oe,ee]=V.useState(!1),[re,Z]=V.useState(!1),[ce,ae]=V.useState(!1),[Ue,Ve]=V.useState(!1),[ut,Rt]=V.useState(!1),[mt,rn]=V.useState(0),[yn,dn]=V.useState(0),Tt=V.useRef(p.duration||W||m4),ve=V.useRef(null),Ce=V.useRef(null),ye=w===0,dt=w+1<=_,pt=p.type,tn=p.dismissible!==!1,xn=p.className||"",on=p.descriptionClassName||"",zn=V.useMemo(()=>j.findIndex(tt=>tt.toastId===p.id)||0,[j,p.id]),ti=V.useMemo(()=>{var tt;return(tt=p.closeButton)!=null?tt:P},[p.closeButton,P]),Rr=V.useMemo(()=>p.duration||W||m4,[p.duration,W]),Ja=V.useRef(0),ia=V.useRef(0),ni=V.useRef(0),va=V.useRef(null),[Za,hc]=B.split("-"),mr=V.useMemo(()=>j.reduce((tt,Dn,mn)=>mn>=zn?tt:tt+Dn.height,0),[j,zn]),fc=Mue(),Ye=p.invert||m,El=pt==="loading";ia.current=V.useMemo(()=>zn*G+mr,[zn,mr]),V.useEffect(()=>{Tt.current=Rr},[Rr]),V.useEffect(()=>{ee(!0)},[]),V.useEffect(()=>{let tt=Ce.current;if(tt){let Dn=tt.getBoundingClientRect().height;return dn(Dn),b(mn=>[{toastId:p.id,height:Dn,position:p.position},...mn]),()=>b(mn=>mn.filter(es=>es.toastId!==p.id))}},[b,p.id]),V.useLayoutEffect(()=>{if(!oe)return;let tt=Ce.current,Dn=tt.style.height;tt.style.height="auto";let mn=tt.getBoundingClientRect().height;tt.style.height=Dn,dn(mn),b(es=>es.find(Cr=>Cr.toastId===p.id)?es.map(Cr=>Cr.toastId===p.id?{...Cr,height:mn}:Cr):[{toastId:p.id,height:mn,position:p.position},...es])},[oe,p.title,p.description,b,p.id]);let ar=V.useCallback(()=>{Z(!0),rn(ia.current),b(tt=>tt.filter(Dn=>Dn.toastId!==p.id)),setTimeout(()=>{C(p)},Que)},[p,C,b,ia]);V.useEffect(()=>{if(p.promise&&pt==="loading"||p.duration===1/0||p.type==="loading")return;let tt;return k||x||D&&fc?(()=>{if(ni.current<Ja.current){let Dn=new Date().getTime()-Ja.current;Tt.current=Tt.current-Dn}ni.current=new Date().getTime()})():Tt.current!==1/0&&(Ja.current=new Date().getTime(),tt=setTimeout(()=>{var Dn;(Dn=p.onAutoClose)==null||Dn.call(p,p),ar()},Tt.current)),()=>clearTimeout(tt)},[k,x,p,pt,D,fc,ar]),V.useEffect(()=>{p.delete&&ar()},[ar,p.delete]);function mc(){var tt,Dn,mn;return X!=null&&X.loading?V.createElement("div",{className:Qo(K==null?void 0:K.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":pt==="loading"},X.loading):U?V.createElement("div",{className:Qo(K==null?void 0:K.loader,(Dn=p==null?void 0:p.classNames)==null?void 0:Dn.loader,"sonner-loader"),"data-visible":pt==="loading"},U):V.createElement(Tue,{className:Qo(K==null?void 0:K.loader,(mn=p==null?void 0:p.classNames)==null?void 0:mn.loader),visible:pt==="loading"})}return V.createElement("li",{tabIndex:0,ref:Ce,className:Qo(L,xn,K==null?void 0:K.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,K==null?void 0:K.default,K==null?void 0:K[pt],(n=p==null?void 0:p.classNames)==null?void 0:n[pt]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:A,"data-styled":!(p.jsx||p.unstyled||v),"data-mounted":oe,"data-promise":!!p.promise,"data-swiped":ut,"data-removed":re,"data-visible":dt,"data-y-position":Za,"data-x-position":hc,"data-index":w,"data-front":ye,"data-swiping":ce,"data-dismissible":tn,"data-type":pt,"data-invert":Ye,"data-swipe-out":Ue,"data-swipe-direction":xe,"data-expanded":!!(k||F&&oe),style:{"--index":w,"--toasts-before":w,"--z-index":N.length-w,"--offset":`${re?mt:ia.current}px`,"--initial-height":F?"auto":`${yn}px`,...O,...p.style},onDragEnd:()=>{ae(!1),ue(null),va.current=null},onPointerDown:tt=>{El||!tn||(ve.current=new Date,rn(ia.current),tt.target.setPointerCapture(tt.pointerId),tt.target.tagName!=="BUTTON"&&(ae(!0),va.current={x:tt.clientX,y:tt.clientY}))},onPointerUp:()=>{var tt,Dn,mn,es;if(Ue||!tn)return;va.current=null;let Cr=Number(((tt=Ce.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ya=Number(((Dn=Ce.current)==null?void 0:Dn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ts=new Date().getTime()-((mn=ve.current)==null?void 0:mn.getTime()),xa=Y==="x"?Cr:ya,Yr=Math.abs(xa)/ts;if(Math.abs(xa)>=Yue||Yr>.11){rn(ia.current),(es=p.onDismiss)==null||es.call(p,p),Ne(Y==="x"?Cr>0?"right":"left":ya>0?"down":"up"),ar(),Ve(!0),Rt(!1);return}ae(!1),ue(null)},onPointerMove:tt=>{var Dn,mn,es,Cr;if(!va.current||!tn||((Dn=window.getSelection())==null?void 0:Dn.toString().length)>0)return;let ya=tt.clientY-va.current.y,ts=tt.clientX-va.current.x,xa=(mn=e.swipeDirections)!=null?mn:Xue(B);!Y&&(Math.abs(ts)>1||Math.abs(ya)>1)&&ue(Math.abs(ts)>Math.abs(ya)?"x":"y");let Yr={x:0,y:0};Y==="y"?(xa.includes("top")||xa.includes("bottom"))&&(xa.includes("top")&&ya<0||xa.includes("bottom")&&ya>0)&&(Yr.y=ya):Y==="x"&&(xa.includes("left")||xa.includes("right"))&&(xa.includes("left")&&ts<0||xa.includes("right")&&ts>0)&&(Yr.x=ts),(Math.abs(Yr.x)>0||Math.abs(Yr.y)>0)&&Rt(!0),(es=Ce.current)==null||es.style.setProperty("--swipe-amount-x",`${Yr.x}px`),(Cr=Ce.current)==null||Cr.style.setProperty("--swipe-amount-y",`${Yr.y}px`)}},ti&&!p.jsx?V.createElement("button",{"aria-label":se,"data-disabled":El,"data-close-button":!0,onClick:El||!tn?()=>{}:()=>{var tt;ar(),(tt=p.onDismiss)==null||tt.call(p,p)},className:Qo(K==null?void 0:K.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=X==null?void 0:X.close)!=null?i:$ue):null,p.jsx||g.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:V.createElement(V.Fragment,null,pt||p.icon||p.promise?V.createElement("div",{"data-icon":"",className:Qo(K==null?void 0:K.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||mc():null,p.type!=="loading"?p.icon||(X==null?void 0:X[pt])||Aue(pt):null):null,V.createElement("div",{"data-content":"",className:Qo(K==null?void 0:K.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},V.createElement("div",{"data-title":"",className:Qo(K==null?void 0:K.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?V.createElement("div",{"data-description":"",className:Qo(z,on,K==null?void 0:K.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),g.isValidElement(p.cancel)?p.cancel:p.cancel&&Cw(p.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:tt=>{var Dn,mn;Cw(p.cancel)&&tn&&((mn=(Dn=p.cancel).onClick)==null||mn.call(Dn,tt),ar())},className:Qo(K==null?void 0:K.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,g.isValidElement(p.action)?p.action:p.action&&Cw(p.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||$,onClick:tt=>{var Dn,mn;Cw(p.action)&&((mn=(Dn=p.action).onClick)==null||mn.call(Dn,tt),!tt.defaultPrevented&&ar())},className:Qo(K==null?void 0:K.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function p4(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Zue(e,t){let n={};return[e,t].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?que:Wue;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var ede=g.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:p,visibleToasts:v=Hue,toastOptions:x,dir:b=p4(),gap:_=Gue,loadingIcon:j,icons:w,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:k}=e,[C,A]=V.useState([]),P=V.useMemo(()=>Array.from(new Set([r].concat(C.filter(D=>D.position).map(D=>D.position)))),[C,r]),[O,T]=V.useState([]),[$,L]=V.useState(!1),[z,W]=V.useState(!1),[B,G]=V.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=V.useRef(null),F=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=V.useRef(null),X=V.useRef(!1),se=V.useCallback(D=>{A(Y=>{var ue;return(ue=Y.find(xe=>xe.id===D.id))!=null&&ue.delete||hi.dismiss(D.id),Y.filter(({id:xe})=>xe!==D.id)})},[]);return V.useEffect(()=>hi.subscribe(D=>{if(D.dismiss){A(Y=>Y.map(ue=>ue.id===D.id?{...ue,delete:!0}:ue));return}setTimeout(()=>{tz.flushSync(()=>{A(Y=>{let ue=Y.findIndex(xe=>xe.id===D.id);return ue!==-1?[...Y.slice(0,ue),{...Y[ue],...D},...Y.slice(ue+1)]:[D,...Y]})})})}),[]),V.useEffect(()=>{if(d!=="system"){G(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;let D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:Y})=>{G(Y?"dark":"light")})}catch{D.addListener(({matches:ue})=>{try{G(ue?"dark":"light")}catch(xe){console.error(xe)}})}},[d]),V.useEffect(()=>{C.length<=1&&L(!1)},[C]),V.useEffect(()=>{let D=Y=>{var ue,xe;a.every(Ne=>Y[Ne]||Y.code===Ne)&&(L(!0),(ue=U.current)==null||ue.focus()),Y.code==="Escape"&&(document.activeElement===U.current||(xe=U.current)!=null&&xe.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[a]),V.useEffect(()=>{if(U.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,X.current=!1)}},[U.current]),V.createElement("section",{ref:t,"aria-label":`${N} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((D,Y)=>{var ue;let[xe,Ne]=D.split("-");return C.length?V.createElement("ol",{key:D,dir:b==="auto"?p4():b,tabIndex:-1,ref:U,className:l,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":xe,"data-lifted":$&&C.length>1&&!i,"data-x-position":Ne,style:{"--front-toast-height":`${((ue=O[0])==null?void 0:ue.height)||0}px`,"--width":`${Kue}px`,"--gap":`${_}px`,...p,...Zue(c,u)},onBlur:oe=>{X.current&&!oe.currentTarget.contains(oe.relatedTarget)&&(X.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:oe=>{oe.target instanceof HTMLElement&&oe.target.dataset.dismissible==="false"||X.current||(X.current=!0,K.current=oe.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{z||L(!1)},onDragEnd:()=>L(!1),onPointerDown:oe=>{oe.target instanceof HTMLElement&&oe.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},C.filter(oe=>!oe.position&&Y===0||oe.position===D).map((oe,ee)=>{var re,Z;return V.createElement(Jue,{key:oe.id,icons:w,index:ee,toast:oe,defaultRichColors:h,duration:(re=x==null?void 0:x.duration)!=null?re:m,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:n,visibleToasts:v,closeButton:(Z=x==null?void 0:x.closeButton)!=null?Z:o,interacting:z,position:D,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:se,toasts:C.filter(ce=>ce.position==oe.position),heights:O.filter(ce=>ce.position==oe.position),setHeights:T,expandByDefault:i,gap:_,loadingIcon:j,expanded:$,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const tde=({...e})=>{const{theme:t="system"}=Cue();return s.jsx(ede,{theme:t,position:"top-right",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var nde=JO[" useId ".trim().toString()]||(()=>{}),rde=0;function Fa(e){const[t,n]=g.useState(nde());return sa(()=>{n(r=>r??String(rde++))},[e]),t?`radix-${t}`:""}const ade=["top","right","bottom","left"],Od=Math.min,Ui=Math.max,ij=Math.round,Aw=Math.floor,ec=e=>({x:e,y:e}),sde={left:"right",right:"left",bottom:"top",top:"bottom"},ide={start:"end",end:"start"};function gT(e,t,n){return Ui(e,Od(t,n))}function ru(e,t){return typeof e=="function"?e(t):e}function au(e){return e.split("-")[0]}function Vg(e){return e.split("-")[1]}function Z2(e){return e==="x"?"y":"x"}function eI(e){return e==="y"?"height":"width"}const ode=new Set(["top","bottom"]);function Kl(e){return ode.has(au(e))?"y":"x"}function tI(e){return Z2(Kl(e))}function lde(e,t,n){n===void 0&&(n=!1);const r=Vg(e),a=tI(e),i=eI(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=oj(o)),[o,oj(o)]}function cde(e){const t=oj(e);return[vT(e),t,vT(t)]}function vT(e){return e.replace(/start|end/g,t=>ide[t])}const g4=["left","right"],v4=["right","left"],ude=["top","bottom"],dde=["bottom","top"];function hde(e,t,n){switch(e){case"top":case"bottom":return n?t?v4:g4:t?g4:v4;case"left":case"right":return t?ude:dde;default:return[]}}function fde(e,t,n,r){const a=Vg(e);let i=hde(au(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(vT)))),i}function oj(e){return e.replace(/left|right|bottom|top/g,t=>sde[t])}function mde(e){return{top:0,right:0,bottom:0,left:0,...e}}function iH(e){return typeof e!="number"?mde(e):{top:e,right:e,bottom:e,left:e}}function lj(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function y4(e,t,n){let{reference:r,floating:a}=e;const i=Kl(t),o=tI(t),l=eI(o),c=au(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[l]/2-a[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-a.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-a.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Vg(t)){case"start":p[o]-=m*(n&&u?-1:1);break;case"end":p[o]+=m*(n&&u?-1:1);break}return p}const pde=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=y4(u,r,c),m=r,p={},v=0;for(let x=0;x<l.length;x++){const{name:b,fn:_}=l[x],{x:j,y:w,data:N,reset:k}=await _({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});d=j??d,h=w??h,p={...p,[b]:{...p[b],...N}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=y4(u,m,c)),x=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:p}};async function Cx(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=ru(t,e),v=iH(p),b=l[m?h==="floating"?"reference":"floating":h],_=lj(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),j=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},k=lj(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:w,strategy:c}):j);return{top:(_.top-k.top+v.top)/N.y,bottom:(k.bottom-_.bottom+v.bottom)/N.y,left:(_.left-k.left+v.left)/N.x,right:(k.right-_.right+v.right)/N.x}}const gde=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=ru(e,t)||{};if(u==null)return{};const h=iH(d),m={x:n,y:r},p=tI(a),v=eI(p),x=await o.getDimensions(u),b=p==="y",_=b?"top":"left",j=b?"bottom":"right",w=b?"clientHeight":"clientWidth",N=i.reference[v]+i.reference[p]-m[p]-i.floating[v],k=m[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let A=C?C[w]:0;(!A||!await(o.isElement==null?void 0:o.isElement(C)))&&(A=l.floating[w]||i.floating[v]);const P=N/2-k/2,O=A/2-x[v]/2-1,T=Od(h[_],O),$=Od(h[j],O),L=T,z=A-x[v]-$,W=A/2-x[v]/2+P,B=gT(L,W,z),G=!c.arrow&&Vg(a)!=null&&W!==B&&i.reference[v]/2-(W<L?T:$)-x[v]/2<0,U=G?W<L?W-L:W-z:0;return{[p]:m[p]+U,data:{[p]:B,centerOffset:W-B-U,...G&&{alignmentOffset:U}},reset:G}}}),vde=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...b}=ru(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=au(a),j=Kl(l),w=au(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=m||(w||!x?[oj(l)]:cde(l)),C=v!=="none";!m&&C&&k.push(...fde(l,x,v,N));const A=[l,...k],P=await Cx(t,b),O=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&O.push(P[_]),h){const W=lde(a,o,N);O.push(P[W[0]],P[W[1]])}if(T=[...T,{placement:a,overflows:O}],!O.every(W=>W<=0)){var $,L;const W=((($=i.flip)==null?void 0:$.index)||0)+1,B=A[W];if(B&&(!(h==="alignment"?j!==Kl(B):!1)||T.every(F=>F.overflows[0]>0&&Kl(F.placement)===j)))return{data:{index:W,overflows:T},reset:{placement:B}};let G=(L=T.filter(U=>U.overflows[0]<=0).sort((U,F)=>U.overflows[1]-F.overflows[1])[0])==null?void 0:L.placement;if(!G)switch(p){case"bestFit":{var z;const U=(z=T.filter(F=>{if(C){const K=Kl(F.placement);return K===j||K==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(K=>K>0).reduce((K,X)=>K+X,0)]).sort((F,K)=>F[1]-K[1])[0])==null?void 0:z[0];U&&(G=U);break}case"initialPlacement":G=l;break}if(a!==G)return{reset:{placement:G}}}return{}}}};function x4(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function b4(e){return ade.some(t=>e[t]>=0)}const yde=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=ru(e,t);switch(r){case"referenceHidden":{const i=await Cx(t,{...a,elementContext:"reference"}),o=x4(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:b4(o)}}}case"escaped":{const i=await Cx(t,{...a,altBoundary:!0}),o=x4(i,n.floating);return{data:{escapedOffsets:o,escaped:b4(o)}}}default:return{}}}}},oH=new Set(["left","top"]);async function xde(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=au(n),l=Vg(n),c=Kl(n)==="y",u=oH.has(o)?-1:1,d=i&&c?-1:1,h=ru(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const bde=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await xde(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},wde=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:_,y:j}=b;return{x:_,y:j}}},...c}=ru(e,t),u={x:n,y:r},d=await Cx(t,c),h=Kl(au(a)),m=Z2(h);let p=u[m],v=u[h];if(i){const b=m==="y"?"top":"left",_=m==="y"?"bottom":"right",j=p+d[b],w=p-d[_];p=gT(j,p,w)}if(o){const b=h==="y"?"top":"left",_=h==="y"?"bottom":"right",j=v+d[b],w=v-d[_];v=gT(j,v,w)}const x=l.fn({...t,[m]:p,[h]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[m]:i,[h]:o}}}}}},_de=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ru(e,t),d={x:n,y:r},h=Kl(a),m=Z2(h);let p=d[m],v=d[h];const x=ru(l,t),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const w=m==="y"?"height":"width",N=i.reference[m]-i.floating[w]+b.mainAxis,k=i.reference[m]+i.reference[w]-b.mainAxis;p<N?p=N:p>k&&(p=k)}if(u){var _,j;const w=m==="y"?"width":"height",N=oH.has(au(a)),k=i.reference[h]-i.floating[w]+(N&&((_=o.offset)==null?void 0:_[h])||0)+(N?0:b.crossAxis),C=i.reference[h]+i.reference[w]+(N?0:((j=o.offset)==null?void 0:j[h])||0)-(N?b.crossAxis:0);v<k?v=k:v>C&&(v=C)}return{[m]:p,[h]:v}}}},jde=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=ru(e,t),d=await Cx(t,u),h=au(a),m=Vg(a),p=Kl(a)==="y",{width:v,height:x}=i.floating;let b,_;h==="top"||h==="bottom"?(b=h,_=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=h,b=m==="end"?"top":"bottom");const j=x-d.top-d.bottom,w=v-d.left-d.right,N=Od(x-d[b],j),k=Od(v-d[_],w),C=!t.middlewareData.shift;let A=N,P=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=j),C&&!m){const T=Ui(d.left,0),$=Ui(d.right,0),L=Ui(d.top,0),z=Ui(d.bottom,0);p?P=v-2*(T!==0||$!==0?T+$:Ui(d.left,d.right)):A=x-2*(L!==0||z!==0?L+z:Ui(d.top,d.bottom))}await c({...t,availableWidth:P,availableHeight:A});const O=await o.getDimensions(l.floating);return v!==O.width||x!==O.height?{reset:{rects:!0}}:{}}}};function uS(){return typeof window<"u"}function zg(e){return lH(e)?(e.nodeName||"").toLowerCase():"#document"}function Yi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function lc(e){var t;return(t=(lH(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lH(e){return uS()?e instanceof Node||e instanceof Yi(e).Node:!1}function jl(e){return uS()?e instanceof Element||e instanceof Yi(e).Element:!1}function sc(e){return uS()?e instanceof HTMLElement||e instanceof Yi(e).HTMLElement:!1}function w4(e){return!uS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yi(e).ShadowRoot}const Sde=new Set(["inline","contents"]);function F0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Sl(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Sde.has(a)}const Nde=new Set(["table","td","th"]);function kde(e){return Nde.has(zg(e))}const Cde=[":popover-open",":modal"];function dS(e){return Cde.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ade=["transform","translate","scale","rotate","perspective"],Ede=["transform","translate","scale","rotate","perspective","filter"],Tde=["paint","layout","strict","content"];function nI(e){const t=rI(),n=jl(e)?Sl(e):e;return Ade.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Ede.some(r=>(n.willChange||"").includes(r))||Tde.some(r=>(n.contain||"").includes(r))}function Pde(e){let t=Id(e);for(;sc(t)&&!Wp(t);){if(nI(t))return t;if(dS(t))return null;t=Id(t)}return null}function rI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Ode=new Set(["html","body","#document"]);function Wp(e){return Ode.has(zg(e))}function Sl(e){return Yi(e).getComputedStyle(e)}function hS(e){return jl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Id(e){if(zg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||w4(e)&&e.host||lc(e);return w4(t)?t.host:t}function cH(e){const t=Id(e);return Wp(t)?e.ownerDocument?e.ownerDocument.body:e.body:sc(t)&&F0(t)?t:cH(t)}function Ax(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=cH(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Yi(a);if(i){const l=yT(o);return t.concat(o,o.visualViewport||[],F0(a)?a:[],l&&n?Ax(l):[])}return t.concat(a,Ax(a,[],n))}function yT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function uH(e){const t=Sl(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=sc(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=ij(n)!==i||ij(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function aI(e){return jl(e)?e:e.contextElement}function xp(e){const t=aI(e);if(!sc(t))return ec(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=uH(t);let o=(i?ij(n.width):n.width)/r,l=(i?ij(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Ide=ec(0);function dH(e){const t=Yi(e);return!rI()||!t.visualViewport?Ide:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Rde(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Yi(e)?!1:t}function yf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=aI(e);let o=ec(1);t&&(r?jl(r)&&(o=xp(r)):o=xp(e));const l=Rde(i,n,r)?dH(i):ec(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const m=Yi(i),p=r&&jl(r)?Yi(r):r;let v=m,x=yT(v);for(;x&&r&&p!==v;){const b=xp(x),_=x.getBoundingClientRect(),j=Sl(x),w=_.left+(x.clientLeft+parseFloat(j.paddingLeft))*b.x,N=_.top+(x.clientTop+parseFloat(j.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=w,u+=N,v=Yi(x),x=yT(v)}}return lj({width:d,height:h,x:c,y:u})}function sI(e,t){const n=hS(e).scrollLeft;return t?t.left+n:yf(lc(e)).left+n}function hH(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:sI(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function $de(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=lc(r),l=t?dS(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=ec(1);const d=ec(0),h=sc(r);if((h||!h&&!i)&&((zg(r)!=="body"||F0(o))&&(c=hS(r)),sc(r))){const p=yf(r);u=xp(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const m=o&&!h&&!i?hH(o,c,!0):ec(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function Mde(e){return Array.from(e.getClientRects())}function Dde(e){const t=lc(e),n=hS(e),r=e.ownerDocument.body,a=Ui(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Ui(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+sI(e);const l=-n.scrollTop;return Sl(r).direction==="rtl"&&(o+=Ui(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function Lde(e,t){const n=Yi(e),r=lc(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=rI();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const Fde=new Set(["absolute","fixed"]);function Bde(e,t){const n=yf(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=sc(e)?xp(e):ec(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function _4(e,t,n){let r;if(t==="viewport")r=Lde(e,n);else if(t==="document")r=Dde(lc(e));else if(jl(t))r=Bde(t,n);else{const a=dH(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return lj(r)}function fH(e,t){const n=Id(e);return n===t||!jl(n)||Wp(n)?!1:Sl(n).position==="fixed"||fH(n,t)}function Ude(e,t){const n=t.get(e);if(n)return n;let r=Ax(e,[],!1).filter(l=>jl(l)&&zg(l)!=="body"),a=null;const i=Sl(e).position==="fixed";let o=i?Id(e):e;for(;jl(o)&&!Wp(o);){const l=Sl(o),c=nI(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&Fde.has(a.position)||F0(o)&&!c&&fH(e,o))?r=r.filter(d=>d!==o):a=l,o=Id(o)}return t.set(e,r),r}function Vde(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?dS(t)?[]:Ude(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=_4(t,d,a);return u.top=Ui(h.top,u.top),u.right=Od(h.right,u.right),u.bottom=Od(h.bottom,u.bottom),u.left=Ui(h.left,u.left),u},_4(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function zde(e){const{width:t,height:n}=uH(e);return{width:t,height:n}}function Hde(e,t,n){const r=sc(t),a=lc(t),i=n==="fixed",o=yf(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=ec(0);function u(){c.x=sI(a)}if(r||!r&&!i)if((zg(t)!=="body"||F0(a))&&(l=hS(t)),r){const p=yf(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&u();i&&!r&&a&&u();const d=a&&!r&&!i?hH(a,l):ec(0),h=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function GC(e){return Sl(e).position==="static"}function j4(e,t){if(!sc(e)||Sl(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return lc(e)===n&&(n=n.ownerDocument.body),n}function mH(e,t){const n=Yi(e);if(dS(e))return n;if(!sc(e)){let a=Id(e);for(;a&&!Wp(a);){if(jl(a)&&!GC(a))return a;a=Id(a)}return n}let r=j4(e,t);for(;r&&kde(r)&&GC(r);)r=j4(r,t);return r&&Wp(r)&&GC(r)&&!nI(r)?n:r||Pde(e)||n}const Wde=async function(e){const t=this.getOffsetParent||mH,n=this.getDimensions,r=await n(e.floating);return{reference:Hde(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qde(e){return Sl(e).direction==="rtl"}const Kde={convertOffsetParentRelativeRectToViewportRelativeRect:$de,getDocumentElement:lc,getClippingRect:Vde,getOffsetParent:mH,getElementRects:Wde,getClientRects:Mde,getDimensions:zde,getScale:xp,isElement:jl,isRTL:qde};function pH(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Gde(e,t){let n=null,r;const a=lc(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=u;if(l||t(),!m||!p)return;const v=Aw(h),x=Aw(a.clientWidth-(d+m)),b=Aw(a.clientHeight-(h+p)),_=Aw(d),w={rootMargin:-v+"px "+-x+"px "+-b+"px "+-_+"px",threshold:Ui(0,Od(1,c))||1};let N=!0;function k(C){const A=C[0].intersectionRatio;if(A!==c){if(!N)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!pH(u,e.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(k,{...w,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,w)}n.observe(e)}return o(!0),i}function Yde(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=aI(e),d=a||i?[...u?Ax(u):[],...Ax(t)]:[];d.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const h=u&&l?Gde(u,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(_=>{let[j]=_;j&&j.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let v,x=c?yf(e):null;c&&b();function b(){const _=yf(e);x&&!pH(x,_)&&n(),x=_,v=requestAnimationFrame(b)}return n(),()=>{var _;d.forEach(j=>{a&&j.removeEventListener("scroll",n),i&&j.removeEventListener("resize",n)}),h==null||h(),(_=p)==null||_.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const Qde=bde,Xde=wde,Jde=vde,Zde=jde,ehe=yde,S4=gde,the=_de,nhe=(e,t,n)=>{const r=new Map,a={platform:Kde,...n},i={...a.platform,_c:r};return pde(e,t,{...a,platform:i})};var rhe=typeof document<"u",ahe=function(){},__=rhe?g.useLayoutEffect:ahe;function cj(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!cj(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!cj(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function gH(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function N4(e,t){const n=gH(e);return Math.round(t*n)/n}function YC(e){const t=g.useRef(e);return __(()=>{t.current=e}),t}function she(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=g.useState(r);cj(m,r)||p(r);const[v,x]=g.useState(null),[b,_]=g.useState(null),j=g.useCallback(F=>{F!==C.current&&(C.current=F,x(F))},[]),w=g.useCallback(F=>{F!==A.current&&(A.current=F,_(F))},[]),N=i||v,k=o||b,C=g.useRef(null),A=g.useRef(null),P=g.useRef(d),O=c!=null,T=YC(c),$=YC(a),L=YC(u),z=g.useCallback(()=>{if(!C.current||!A.current)return;const F={placement:t,strategy:n,middleware:m};$.current&&(F.platform=$.current),nhe(C.current,A.current,F).then(K=>{const X={...K,isPositioned:L.current!==!1};W.current&&!cj(P.current,X)&&(P.current=X,Ff.flushSync(()=>{h(X)}))})},[m,t,n,$,L]);__(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[u]);const W=g.useRef(!1);__(()=>(W.current=!0,()=>{W.current=!1}),[]),__(()=>{if(N&&(C.current=N),k&&(A.current=k),N&&k){if(T.current)return T.current(N,k,z);z()}},[N,k,z,T,O]);const B=g.useMemo(()=>({reference:C,floating:A,setReference:j,setFloating:w}),[j,w]),G=g.useMemo(()=>({reference:N,floating:k}),[N,k]),U=g.useMemo(()=>{const F={position:n,left:0,top:0};if(!G.floating)return F;const K=N4(G.floating,d.x),X=N4(G.floating,d.y);return l?{...F,transform:"translate("+K+"px, "+X+"px)",...gH(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:X}},[n,l,G.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:z,refs:B,elements:G,floatingStyles:U}),[d,z,B,G,U])}const ihe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?S4({element:r.current,padding:a}).fn(n):{}:r?S4({element:r,padding:a}).fn(n):{}}}},ohe=(e,t)=>({...Qde(e),options:[e,t]}),lhe=(e,t)=>({...Xde(e),options:[e,t]}),che=(e,t)=>({...the(e),options:[e,t]}),uhe=(e,t)=>({...Jde(e),options:[e,t]}),dhe=(e,t)=>({...Zde(e),options:[e,t]}),hhe=(e,t)=>({...ehe(e),options:[e,t]}),fhe=(e,t)=>({...ihe(e),options:[e,t]});var mhe="Arrow",vH=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return s.jsx(it.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});vH.displayName=mhe;var phe=vH;function B0(e){const[t,n]=g.useState(void 0);return sa(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var iI="Popper",[yH,Vd]=ga(iI),[ghe,xH]=yH(iI),bH=e=>{const{__scopePopper:t,children:n}=e,[r,a]=g.useState(null);return s.jsx(ghe,{scope:t,anchor:r,onAnchorChange:a,children:n})};bH.displayName=iI;var wH="PopperAnchor",_H=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=xH(wH,n),o=g.useRef(null),l=Dt(t,o);return g.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(it.div,{...a,ref:l})});_H.displayName=wH;var oI="PopperContent",[vhe,yhe]=yH(oI),jH=g.forwardRef((e,t)=>{var oe,ee,re,Z,ce,ae;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...x}=e,b=xH(oI,n),[_,j]=g.useState(null),w=Dt(t,Ue=>j(Ue)),[N,k]=g.useState(null),C=B0(N),A=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,O=r+(i!=="center"?"-"+i:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},$=Array.isArray(u)?u:[u],L=$.length>0,z={padding:T,boundary:$.filter(bhe),altBoundary:L},{refs:W,floatingStyles:B,placement:G,isPositioned:U,middlewareData:F}=she({strategy:"fixed",placement:O,whileElementsMounted:(...Ue)=>Yde(...Ue,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[ohe({mainAxis:a+P,alignmentAxis:o}),c&&lhe({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?che():void 0,...z}),c&&uhe({...z}),dhe({...z,apply:({elements:Ue,rects:Ve,availableWidth:ut,availableHeight:Rt})=>{const{width:mt,height:rn}=Ve.reference,yn=Ue.floating.style;yn.setProperty("--radix-popper-available-width",`${ut}px`),yn.setProperty("--radix-popper-available-height",`${Rt}px`),yn.setProperty("--radix-popper-anchor-width",`${mt}px`),yn.setProperty("--radix-popper-anchor-height",`${rn}px`)}}),N&&fhe({element:N,padding:l}),whe({arrowWidth:A,arrowHeight:P}),m&&hhe({strategy:"referenceHidden",...z})]}),[K,X]=kH(G),se=aa(v);sa(()=>{U&&(se==null||se())},[U,se]);const D=(oe=F.arrow)==null?void 0:oe.x,Y=(ee=F.arrow)==null?void 0:ee.y,ue=((re=F.arrow)==null?void 0:re.centerOffset)!==0,[xe,Ne]=g.useState();return sa(()=>{_&&Ne(window.getComputedStyle(_).zIndex)},[_]),s.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:U?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(Z=F.transformOrigin)==null?void 0:Z.x,(ce=F.transformOrigin)==null?void 0:ce.y].join(" "),...((ae=F.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(vhe,{scope:n,placedSide:K,onArrowChange:k,arrowX:D,arrowY:Y,shouldHideArrow:ue,children:s.jsx(it.div,{"data-side":K,"data-align":X,...x,ref:w,style:{...x.style,animation:U?void 0:"none"}})})})});jH.displayName=oI;var SH="PopperArrow",xhe={top:"bottom",right:"left",bottom:"top",left:"right"},NH=g.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=yhe(SH,r),o=xhe[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(phe,{...a,ref:n,style:{...a.style,display:"block"}})})});NH.displayName=SH;function bhe(e){return e!==null}var whe=e=>({name:"transformOrigin",options:e,fn(t){var b,_,j;const{placement:n,rects:r,middlewareData:a}=t,o=((b=a.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=kH(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((_=a.arrow)==null?void 0:_.x)??0)+l/2,p=(((j=a.arrow)==null?void 0:j.y)??0)+c/2;let v="",x="";return u==="bottom"?(v=o?h:`${m}px`,x=`${-c}px`):u==="top"?(v=o?h:`${m}px`,x=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,x=o?h:`${p}px`):u==="left"&&(v=`${r.floating.width+c}px`,x=o?h:`${p}px`),{data:{x:v,y:x}}}});function kH(e){const[t,n="center"]=e.split("-");return[t,n]}var fS=bH,U0=_H,mS=jH,pS=NH,[gS,VYe]=ga("Tooltip",[Vd]),vS=Vd(),CH="TooltipProvider",_he=700,xT="tooltip.open",[jhe,lI]=gS(CH),AH=e=>{const{__scopeTooltip:t,delayDuration:n=_he,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(jhe,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};AH.displayName=CH;var Ex="Tooltip",[She,yS]=gS(Ex),EH=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=lI(Ex,e.__scopeTooltip),u=vS(t),[d,h]=g.useState(null),m=Fa(),p=g.useRef(0),v=o??c.disableHoverableContent,x=l??c.delayDuration,b=g.useRef(!1),[_,j]=_i({prop:r,defaultProp:a??!1,onChange:A=>{A?(c.onOpen(),document.dispatchEvent(new CustomEvent(xT))):c.onClose(),i==null||i(A)},caller:Ex}),w=g.useMemo(()=>_?b.current?"delayed-open":"instant-open":"closed",[_]),N=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b.current=!1,j(!0)},[j]),k=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,j(!1)},[j]),C=g.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,j(!0),p.current=0},x)},[x,j]);return g.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),s.jsx(fS,{...u,children:s.jsx(She,{scope:t,contentId:m,open:_,stateAttribute:w,trigger:d,onTriggerChange:h,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayedRef.current?C():N()},[c.isOpenDelayedRef,C,N]),onTriggerLeave:g.useCallback(()=>{v?k():(window.clearTimeout(p.current),p.current=0)},[k,v]),onOpen:N,onClose:k,disableHoverableContent:v,children:n})})};EH.displayName=Ex;var bT="TooltipTrigger",TH=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=yS(bT,n),i=lI(bT,n),o=vS(n),l=g.useRef(null),c=Dt(t,l,a.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),h=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(U0,{asChild:!0,...o,children:s.jsx(it.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:We(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:We(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:We(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:We(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:We(e.onBlur,a.onClose),onClick:We(e.onClick,a.onClose)})})});TH.displayName=bT;var Nhe="TooltipPortal",[zYe,khe]=gS(Nhe,{forceMount:void 0}),qp="TooltipContent",PH=g.forwardRef((e,t)=>{const n=khe(qp,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=yS(qp,e.__scopeTooltip);return s.jsx(Aa,{present:r||o.open,children:o.disableHoverableContent?s.jsx(OH,{side:a,...i,ref:t}):s.jsx(Che,{side:a,...i,ref:t})})}),Che=g.forwardRef((e,t)=>{const n=yS(qp,e.__scopeTooltip),r=lI(qp,e.__scopeTooltip),a=g.useRef(null),i=Dt(t,a),[o,l]=g.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=g.useCallback(()=>{l(null),h(!1)},[h]),p=g.useCallback((v,x)=>{const b=v.currentTarget,_={x:v.clientX,y:v.clientY},j=Ohe(_,b.getBoundingClientRect()),w=Ihe(_,j),N=Rhe(x.getBoundingClientRect()),k=Mhe([...w,...N]);l(k),h(!0)},[h]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&d){const v=b=>p(b,d),x=b=>p(b,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",x)}}},[c,d,p,m]),g.useEffect(()=>{if(o){const v=x=>{const b=x.target,_={x:x.clientX,y:x.clientY},j=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),w=!$he(_,o);j?m():w&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,m]),s.jsx(OH,{...e,ref:i})}),[Ahe,Ehe]=gS(Ex,{isInside:!1}),The=fz("TooltipContent"),OH=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=yS(qp,n),u=vS(n),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(xT,d),()=>document.removeEventListener(xT,d)),[d]),g.useEffect(()=>{if(c.trigger){const h=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),s.jsx(Bf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:s.jsxs(mS,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(The,{children:r}),s.jsx(Ahe,{scope:n,isInside:!0,children:s.jsx(qle,{id:c.contentId,role:"tooltip",children:a||r})})]})})});PH.displayName=qp;var IH="TooltipArrow",Phe=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=vS(n);return Ehe(IH,n).isInside?null:s.jsx(pS,{...a,...r,ref:t})});Phe.displayName=IH;function Ohe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Ihe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Rhe(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function $he(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function Mhe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Dhe(t)}function Dhe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Lhe=AH,Fhe=EH,Bhe=TH,RH=PH;const fi=Lhe,Li=Fhe,Fi=Bhe,mi=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(RH,{ref:r,sideOffset:t,className:je("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));mi.displayName=RH.displayName;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tx(){return Tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tx.apply(this,arguments)}var od;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(od||(od={}));const k4="popstate";function Uhe(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return wT("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:uj(a)}return zhe(t,n,null,e)}function Kr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $H(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Vhe(){return Math.random().toString(36).substr(2,8)}function C4(e,t){return{usr:e.state,key:e.key,idx:t}}function wT(e,t,n,r){return n===void 0&&(n=null),Tx({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hg(t):t,{state:n,key:t&&t.key||r||Vhe()})}function uj(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Hg(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function zhe(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=od.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Tx({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=od.Pop;let b=d(),_=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:_})}function m(b,_){l=od.Push;let j=wT(x.location,b,_);u=d()+1;let w=C4(j,u),N=x.createHref(j);try{o.pushState(w,"",N)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(N)}i&&c&&c({action:l,location:x.location,delta:1})}function p(b,_){l=od.Replace;let j=wT(x.location,b,_);u=d();let w=C4(j,u),N=x.createHref(j);o.replaceState(w,"",N),i&&c&&c({action:l,location:x.location,delta:0})}function v(b){let _=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof b=="string"?b:uj(b);return j=j.replace(/ $/,"%20"),Kr(_,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,_)}let x={get action(){return l},get location(){return e(a,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(k4,h),c=b,()=>{a.removeEventListener(k4,h),c=null}},createHref(b){return t(a,b)},createURL:v,encodeLocation(b){let _=v(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:p,go(b){return o.go(b)}};return x}var A4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(A4||(A4={}));function Hhe(e,t,n){return n===void 0&&(n="/"),Whe(e,t,n,!1)}function Whe(e,t,n,r){let a=typeof t=="string"?Hg(t):t,i=Kp(a.pathname||"/",n);if(i==null)return null;let o=MH(e);qhe(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=rfe(i);l=tfe(o[c],u,r)}return l}function MH(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Kr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=_d([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(Kr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),MH(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Zhe(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of DH(i.path))a(i,o,c)}),t}function DH(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=DH(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function qhe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:efe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Khe=/^:[\w-]+$/,Ghe=3,Yhe=2,Qhe=1,Xhe=10,Jhe=-2,E4=e=>e==="*";function Zhe(e,t){let n=e.split("/"),r=n.length;return n.some(E4)&&(r+=Jhe),t&&(r+=Yhe),n.filter(a=>!E4(a)).reduce((a,i)=>a+(Khe.test(i)?Ghe:i===""?Qhe:Xhe),r)}function efe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function tfe(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=dj({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=dj({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:_d([i,h.pathname]),pathnameBase:ofe(_d([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=_d([i,h.pathnameBase]))}return o}function dj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=nfe(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function nfe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),$H(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function rfe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $H(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Kp(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function afe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Hg(e):e;return{pathname:n?n.startsWith("/")?n:sfe(n,t):t,search:lfe(r),hash:cfe(a)}}function sfe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function QC(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ife(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cI(e,t){let n=ife(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function uI(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Hg(e):(a=Tx({},e),Kr(!a.pathname||!a.pathname.includes("?"),QC("?","pathname","search",a)),Kr(!a.pathname||!a.pathname.includes("#"),QC("#","pathname","hash",a)),Kr(!a.search||!a.search.includes("#"),QC("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=afe(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const _d=e=>e.join("/").replace(/\/\/+/g,"/"),ofe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lfe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cfe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ufe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const LH=["post","put","patch","delete"];new Set(LH);const dfe=["get",...LH];new Set(dfe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Px.apply(this,arguments)}const xS=g.createContext(null),FH=g.createContext(null),du=g.createContext(null),bS=g.createContext(null),hu=g.createContext({outlet:null,matches:[],isDataRoute:!1}),BH=g.createContext(null);function hfe(e,t){let{relative:n}=t===void 0?{}:t;Wg()||Kr(!1);let{basename:r,navigator:a}=g.useContext(du),{hash:i,pathname:o,search:l}=wS(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:_d([r,o])),a.createHref({pathname:c,search:l,hash:i})}function Wg(){return g.useContext(bS)!=null}function zd(){return Wg()||Kr(!1),g.useContext(bS).location}function UH(e){g.useContext(du).static||g.useLayoutEffect(e)}function cs(){let{isDataRoute:e}=g.useContext(hu);return e?Cfe():ffe()}function ffe(){Wg()||Kr(!1);let e=g.useContext(xS),{basename:t,future:n,navigator:r}=g.useContext(du),{matches:a}=g.useContext(hu),{pathname:i}=zd(),o=JSON.stringify(cI(a,n.v7_relativeSplatPath)),l=g.useRef(!1);return UH(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=uI(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:_d([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,i,e])}const mfe=g.createContext(null);function pfe(e){let t=g.useContext(hu).outlet;return t&&g.createElement(mfe.Provider,{value:e},t)}function wS(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=g.useContext(du),{matches:a}=g.useContext(hu),{pathname:i}=zd(),o=JSON.stringify(cI(a,r.v7_relativeSplatPath));return g.useMemo(()=>uI(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function gfe(e,t){return vfe(e,t)}function vfe(e,t,n,r){Wg()||Kr(!1);let{navigator:a}=g.useContext(du),{matches:i}=g.useContext(hu),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=zd(),d;if(t){var h;let b=typeof t=="string"?Hg(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Kr(!1),d=b}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=Hhe(e,{pathname:p}),x=_fe(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:_d([c,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:_d([c,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&x?g.createElement(bS.Provider,{value:{location:Px({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:od.Pop}},x):x}function yfe(){let e=kfe(),t=ufe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:a},n):null,null)}const xfe=g.createElement(yfe,null);class bfe extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(hu.Provider,{value:this.props.routeContext},g.createElement(BH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wfe(e){let{routeContext:t,match:n,children:r}=e,a=g.useContext(xS);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(hu.Provider,{value:t},r)}function _fe(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Kr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=n,v=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let p,v=!1,x=null,b=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||xfe,c&&(u<0&&m===0?(v=!0,b=null):u===m&&(v=!0,b=h.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,m+1)),j=()=>{let w;return p?w=x:v?w=b:h.route.Component?w=g.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,g.createElement(wfe,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?g.createElement(bfe,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:j(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):j()},null)}var VH=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(VH||{}),hj=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(hj||{});function jfe(e){let t=g.useContext(xS);return t||Kr(!1),t}function Sfe(e){let t=g.useContext(FH);return t||Kr(!1),t}function Nfe(e){let t=g.useContext(hu);return t||Kr(!1),t}function zH(e){let t=Nfe(),n=t.matches[t.matches.length-1];return n.route.id||Kr(!1),n.route.id}function kfe(){var e;let t=g.useContext(BH),n=Sfe(hj.UseRouteError),r=zH(hj.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Cfe(){let{router:e}=jfe(VH.UseNavigateStable),t=zH(hj.UseNavigateStable),n=g.useRef(!1);return UH(()=>{n.current=!0}),g.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Px({fromRouteId:t},i)))},[e,t])}function Afe(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function HH(e){let{to:t,replace:n,state:r,relative:a}=e;Wg()||Kr(!1);let{future:i,static:o}=g.useContext(du),{matches:l}=g.useContext(hu),{pathname:c}=zd(),u=cs(),d=uI(t,cI(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:a}),[u,h,a,n,r]),null}function Efe(e){return pfe(e.context)}function wr(e){Kr(!1)}function Tfe(e){let{basename:t="/",children:n=null,location:r,navigationType:a=od.Pop,navigator:i,static:o=!1,future:l}=e;Wg()&&Kr(!1);let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:i,static:o,future:Px({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Hg(r));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:v="default"}=r,x=g.useMemo(()=>{let b=Kp(d,c);return b==null?null:{location:{pathname:b,search:h,hash:m,state:p,key:v},navigationType:a}},[c,d,h,m,p,v,a]);return x==null?null:g.createElement(du.Provider,{value:u},g.createElement(bS.Provider,{children:n,value:x}))}function Pfe(e){let{children:t,location:n}=e;return gfe(_T(t),n)}new Promise(()=>{});function _T(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(r,a)=>{if(!g.isValidElement(r))return;let i=[...t,a];if(r.type===g.Fragment){n.push.apply(n,_T(r.props.children,i));return}r.type!==wr&&Kr(!1),!r.props.index||!r.props.children||Kr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_T(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fj(){return fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fj.apply(this,arguments)}function WH(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Ofe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ife(e,t){return e.button===0&&(!t||t==="_self")&&!Ofe(e)}function jT(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function Rfe(e,t){let n=jT(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const $fe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Mfe=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Dfe="6";try{window.__reactRouterVersion=Dfe}catch{}const Lfe=g.createContext({isTransitioning:!1}),Ffe="startTransition",T4=JO[Ffe];function Bfe(e){let{basename:t,children:n,future:r,window:a}=e,i=g.useRef();i.current==null&&(i.current=Uhe({window:a,v5Compat:!0}));let o=i.current,[l,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=g.useCallback(h=>{u&&T4?T4(()=>c(h)):c(h)},[c,u]);return g.useLayoutEffect(()=>o.listen(d),[o,d]),g.useEffect(()=>Afe(r),[r]),g.createElement(Tfe,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Ufe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xf=g.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=WH(t,$fe),{basename:p}=g.useContext(du),v,x=!1;if(typeof u=="string"&&Vfe.test(u)&&(v=u,Ufe))try{let w=new URL(window.location.href),N=u.startsWith("//")?new URL(w.protocol+u):new URL(u),k=Kp(N.pathname,p);N.origin===w.origin&&k!=null?u=k+N.search+N.hash:x=!0}catch{}let b=hfe(u,{relative:a}),_=Wfe(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function j(w){r&&r(w),w.defaultPrevented||_(w)}return g.createElement("a",fj({},m,{href:v||b,onClick:x||i?r:j,ref:n,target:c}))}),zfe=g.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=WH(t,Mfe),m=wS(c,{relative:h.relative}),p=zd(),v=g.useContext(FH),{navigator:x,basename:b}=g.useContext(du),_=v!=null&&Kfe(m)&&u===!0,j=x.encodeLocation?x.encodeLocation(m).pathname:m.pathname,w=p.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(w=w.toLowerCase(),N=N?N.toLowerCase():null,j=j.toLowerCase()),N&&b&&(N=Kp(N,b)||N);const k=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let C=w===j||!o&&w.startsWith(j)&&w.charAt(k)==="/",A=N!=null&&(N===j||!o&&N.startsWith(j)&&N.charAt(j.length)==="/"),P={isActive:C,isPending:A,isTransitioning:_},O=C?r:void 0,T;typeof i=="function"?T=i(P):T=[i,C?"active":null,A?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let $=typeof l=="function"?l(P):l;return g.createElement(xf,fj({},h,{"aria-current":O,className:T,ref:n,style:$,to:c,viewTransition:u}),typeof d=="function"?d(P):d)});var ST;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ST||(ST={}));var P4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(P4||(P4={}));function Hfe(e){let t=g.useContext(xS);return t||Kr(!1),t}function Wfe(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=cs(),u=zd(),d=wS(e,{relative:o});return g.useCallback(h=>{if(Ife(h,n)){h.preventDefault();let m=r!==void 0?r:uj(u)===uj(d);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,i,o,l])}function qfe(e){let t=g.useRef(jT(e)),n=g.useRef(!1),r=zd(),a=g.useMemo(()=>Rfe(r.search,n.current?null:t.current),[r.search]),i=cs(),o=g.useCallback((l,c)=>{const u=jT(typeof l=="function"?l(a):l);n.current=!0,i("?"+u,c)},[i,a]);return[a,o]}function Kfe(e,t){t===void 0&&(t={});let n=g.useContext(Lfe);n==null&&Kr(!1);let{basename:r}=Hfe(ST.useViewTransitionState),a=wS(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Kp(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Kp(n.nextLocation.pathname,r)||n.nextLocation.pathname;return dj(a.pathname,o)!=null||dj(a.pathname,i)!=null}const Ox=Uf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?Lg:"button";return s.jsx(o,{className:je(Ox({variant:t,size:n,className:e})),ref:i,...a})});J.displayName="Button";const Oe=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:je("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Oe.displayName="Card";const Fe=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:je("flex flex-col space-y-1.5 p-6",e),...t}));Fe.displayName="CardHeader";const Be=g.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:je("text-2xl font-semibold leading-none tracking-tight",e),...t}));Be.displayName="CardTitle";const sn=g.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:je("text-sm text-muted-foreground",e),...t}));sn.displayName="CardDescription";const Re=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:je("p-6 pt-0",e),...t}));Re.displayName="CardContent";const dI=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:je("flex items-center p-6 pt-0",e),...t}));dI.displayName="CardFooter";class Gfe extends g.Component{constructor(){super(...arguments);pC(this,"state",{hasError:!1,error:null});pC(this,"handleReset",()=>{this.setState({hasError:!1,error:null})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){var a,i;console.error("ErrorBoundary caught an error:",n,r),(i=(a=this.props).onError)==null||i.call(a,n,r)}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-4",children:s.jsxs(Oe,{className:"max-w-md w-full",children:[s.jsxs(Fe,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[s.jsx(ac,{className:"w-5 h-5"}),s.jsx(Be,{children:" xy ra li"})]}),s.jsx(sn,{children:"ng dng gp s c khng mong mun"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-md",children:s.jsx("p",{className:"font-mono text-xs break-all",children:(n=this.state.error)==null?void 0:n.message})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{onClick:this.handleReset,variant:"default",children:"Th li"}),s.jsx(J,{onClick:()=>window.location.reload(),variant:"outline",children:"Ti li trang"})]})]})]})}):this.props.children}}var NT=function(e,t){return NT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},NT(e,t)};function qH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");NT(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var So=function(){return So=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},So.apply(this,arguments)};function Hd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function KH(e,t,n,r){var a=arguments.length,i=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function GH(e,t){return function(n,r){t(n,r,e)}}function YH(e,t,n,r,a,i){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var l=r.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,p=n.length-1;p>=0;p--){var v={};for(var x in r)v[x]=x==="access"?{}:r[x];for(var x in r.access)v.access[x]=r.access[x];v.addInitializer=function(_){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(_||null))};var b=(0,n[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],v);if(l==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=o(b.get))&&(d.get=h),(h=o(b.set))&&(d.set=h),(h=o(b.init))&&a.unshift(h)}else(h=o(b))&&(l==="field"?a.unshift(h):d[c]=h)}u&&Object.defineProperty(u,r.name,d),m=!0}function QH(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0}function XH(e){return typeof e=="symbol"?e:"".concat(e)}function JH(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function ZH(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Et(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}function eW(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var _S=Object.create?function(e,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function tW(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_S(t,e,n)}function mj(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function hI(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function nW(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(hI(arguments[t]));return e}function rW(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,a++)r[a]=i[o];return r}function fI(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function Gp(e){return this instanceof Gp?(this.v=e,this):new Gp(e)}function aW(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(p){return function(v){return Promise.resolve(v).then(p,h)}}function l(p,v){r[p]&&(a[p]=function(x){return new Promise(function(b,_){i.push([p,x,b,_])>1||c(p,x)})},v&&(a[p]=v(a[p])))}function c(p,v){try{u(r[p](v))}catch(x){m(i[0][3],x)}}function u(p){p.value instanceof Gp?Promise.resolve(p.value.v).then(d,h):m(i[0][2],p)}function d(p){c("next",p)}function h(p){c("throw",p)}function m(p,v){p(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function sW(e){var t,n;return t={},r("next"),r("throw",function(a){throw a}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(a,i){t[a]=e[a]?function(o){return(n=!n)?{value:Gp(e[a](o)),done:!1}:i?i(o):o}:i}}function iW(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof mj=="function"?mj(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}function oW(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Yfe=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},kT=function(e){return kT=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},kT(e)};function lW(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=kT(e),r=0;r<n.length;r++)n[r]!=="default"&&_S(t,e,n[r]);return Yfe(t,e),t}function cW(e){return e&&e.__esModule?e:{default:e}}function uW(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function dW(e,t,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(e,n):a?a.value=n:t.set(e,n),n}function hW(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function fW(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var Qfe=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function mW(e){function t(i){e.error=e.hasError?new Qfe(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var n,r=0;function a(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(a);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(a,function(o){return t(o),a()})}else r|=1}catch(o){t(o)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function pW(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,a,i,o){return r?t?".jsx":".js":a&&(!i||!o)?n:a+i+"."+o.toLowerCase()+"js"}):e}const Xfe={__extends:qH,__assign:So,__rest:Hd,__decorate:KH,__param:GH,__esDecorate:YH,__runInitializers:QH,__propKey:XH,__setFunctionName:JH,__metadata:ZH,__awaiter:Et,__generator:eW,__createBinding:_S,__exportStar:tW,__values:mj,__read:hI,__spread:nW,__spreadArrays:rW,__spreadArray:fI,__await:Gp,__asyncGenerator:aW,__asyncDelegator:sW,__asyncValues:iW,__makeTemplateObject:oW,__importStar:lW,__importDefault:cW,__classPrivateFieldGet:uW,__classPrivateFieldSet:dW,__classPrivateFieldIn:hW,__addDisposableResource:fW,__disposeResources:mW,__rewriteRelativeImportExtension:pW},Jfe=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:fW,get __assign(){return So},__asyncDelegator:sW,__asyncGenerator:aW,__asyncValues:iW,__await:Gp,__awaiter:Et,__classPrivateFieldGet:uW,__classPrivateFieldIn:hW,__classPrivateFieldSet:dW,__createBinding:_S,__decorate:KH,__disposeResources:mW,__esDecorate:YH,__exportStar:tW,__extends:qH,__generator:eW,__importDefault:cW,__importStar:lW,__makeTemplateObject:oW,__metadata:ZH,__param:GH,__propKey:XH,__read:hI,__rest:Hd,__rewriteRelativeImportExtension:pW,__runInitializers:QH,__setFunctionName:JH,__spread:nW,__spreadArray:fI,__spreadArrays:rW,__values:mj,default:Xfe},Symbol.toStringTag,{value:"Module"})),Zfe="modulepreload",eme=function(e){return"/"+e},O4={},vr=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=eme(c),c in O4)return;O4[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Zfe,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},tme=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>vr(async()=>{const{default:r}=await Promise.resolve().then(()=>Vf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class mI extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class I4 extends mI{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class R4 extends mI{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $4 extends mI{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var CT;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(CT||(CT={}));class nme{constructor(t,{headers:n={},customFetch:r,region:a=CT.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=tme(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Et(this,arguments,void 0,function*(n,r={}){var a;try{const{headers:i,method:o,body:l,signal:c}=r;let u={},{region:d}=r;d||(d=this.region);const h=new URL(`${this.url}/${n}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let m;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const p=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:m,signal:c}).catch(_=>{throw _.name==="AbortError"?_:new I4(_)}),v=p.headers.get("x-relay-error");if(v&&v==="true")throw new R4(p);if(!p.ok)throw new $4(p);let x=((a=p.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield p.json():x==="application/octet-stream"||x==="application/pdf"?b=yield p.blob():x==="text/event-stream"?b=p:x==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null,response:p}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new I4(i)}:{data:null,error:i,response:i instanceof $4||i instanceof R4?i.context:void 0}}})}}var Ws={};const qg=V6(Jfe);var Ew={},Tw={},Pw={},Ow={},Iw={},rme=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yp=rme();const ame=Yp.fetch,gW=Yp.fetch.bind(Yp),vW=Yp.Headers,sme=Yp.Request,ime=Yp.Response,Vf=Object.freeze(Object.defineProperty({__proto__:null,Headers:vW,Request:sme,Response:ime,default:gW,fetch:ame},Symbol.toStringTag,{value:"Module"})),ome=V6(Vf);var Rw={},M4;function yW(){if(M4)return Rw;M4=1,Object.defineProperty(Rw,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Rw.default=e,Rw}var D4;function xW(){if(D4)return Iw;D4=1,Object.defineProperty(Iw,"__esModule",{value:!0});const e=qg,t=e.__importDefault(ome),n=e.__importDefault(yW());class r{constructor(i){var o,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,m,p;let v=null,x=null,b=null,_=u.status,j=u.statusText;if(u.ok){if(this.method!=="HEAD"){const C=await u.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?x=C:x=JSON.parse(C))}const N=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),k=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");N&&k&&k.length>1&&(b=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(v={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,b=null,_=406,j="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const N=await u.text();try{v=JSON.parse(N),Array.isArray(v)&&u.status===404&&(x=[],v=null,_=200,j="OK")}catch{u.status===404&&N===""?(_=204,j="No Content"):v={message:N}}if(v&&this.isMaybeSingle&&(!((p=v==null?void 0:v.details)===null||p===void 0)&&p.includes("0 rows"))&&(v=null,_=200,j="OK"),v&&this.shouldThrowOnError)throw new n.default(v)}return{error:v,data:x,count:b,status:_,statusText:j}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,h,m;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return Iw.default=r,Iw}var L4;function bW(){if(L4)return Ow;L4=1,Object.defineProperty(Ow,"__esModule",{value:!0});const t=qg.__importDefault(xW());class n extends t.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Ow.default=n,Ow}var F4;function pI(){if(F4)return Pw;F4=1,Object.defineProperty(Pw,"__esModule",{value:!0});const t=qg.__importDefault(bW()),n=new RegExp("[,()]");class r extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return Pw.default=r,Pw}var B4;function wW(){if(B4)return Tw;B4=1,Object.defineProperty(Tw,"__esModule",{value:!0});const t=qg.__importDefault(pI());class n{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const h=a.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Tw.default=n,Tw}var U4;function lme(){if(U4)return Ew;U4=1,Object.defineProperty(Ew,"__esModule",{value:!0});const e=qg,t=e.__importDefault(wW()),n=e.__importDefault(pI());class r{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const m=new URL(`${this.url}/rpc/${i}`);let p;l||c?(h=l?"HEAD":"GET",Object.entries(o).filter(([x,b])=>b!==void 0).map(([x,b])=>[x,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([x,b])=>{m.searchParams.append(x,b)})):(h="POST",p=o);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new n.default({method:h,url:m,headers:v,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Ew.default=r,Ew}Object.defineProperty(Ws,"__esModule",{value:!0});var _W=Ws.PostgrestError=OW=Ws.PostgrestBuilder=TW=Ws.PostgrestTransformBuilder=AW=Ws.PostgrestFilterBuilder=kW=Ws.PostgrestQueryBuilder=SW=Ws.PostgrestClient=void 0;const Kg=qg,jW=Kg.__importDefault(lme());var SW=Ws.PostgrestClient=jW.default;const NW=Kg.__importDefault(wW());var kW=Ws.PostgrestQueryBuilder=NW.default;const CW=Kg.__importDefault(pI());var AW=Ws.PostgrestFilterBuilder=CW.default;const EW=Kg.__importDefault(bW());var TW=Ws.PostgrestTransformBuilder=EW.default;const PW=Kg.__importDefault(xW());var OW=Ws.PostgrestBuilder=PW.default;const IW=Kg.__importDefault(yW());_W=Ws.PostgrestError=IW.default;var RW=Ws.default={PostgrestClient:jW.default,PostgrestQueryBuilder:NW.default,PostgrestFilterBuilder:CW.default,PostgrestTransformBuilder:EW.default,PostgrestBuilder:PW.default,PostgrestError:IW.default};const cme=U6({__proto__:null,get PostgrestBuilder(){return OW},get PostgrestClient(){return SW},get PostgrestError(){return _W},get PostgrestFilterBuilder(){return AW},get PostgrestQueryBuilder(){return kW},get PostgrestTransformBuilder(){return TW},default:RW},[Ws]),{PostgrestClient:ume,PostgrestQueryBuilder:HYe,PostgrestFilterBuilder:WYe,PostgrestTransformBuilder:qYe,PostgrestBuilder:KYe,PostgrestError:GYe}=RW||cme;class dme{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const hme="2.78.0",fme=`realtime-js/${hme}`,mme="1.0.0",AT=1e4,pme=1e3,gme=100;var Wy;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wy||(Wy={}));var Ra;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ra||(Ra={}));var ol;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ol||(ol={}));var ET;(function(e){e.websocket="websocket"})(ET||(ET={}));var Lh;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Lh||(Lh={}));class vme{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class $W{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _r;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_r||(_r={}));const V4=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=yme(o,e,t,a),i),{}):{}},yme=(e,t,n,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!r.includes(i)?MW(i,o):TT(o)},MW=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return _me(t,n)}switch(e){case _r.bool:return xme(t);case _r.float4:case _r.float8:case _r.int2:case _r.int4:case _r.int8:case _r.numeric:case _r.oid:return bme(t);case _r.json:case _r.jsonb:return wme(t);case _r.timestamp:return jme(t);case _r.abstime:case _r.date:case _r.daterange:case _r.int4range:case _r.int8range:case _r.money:case _r.reltime:case _r.text:case _r.time:case _r.timestamptz:case _r.timetz:case _r.tsrange:case _r.tstzrange:return TT(t);default:return TT(t)}},TT=e=>e,xme=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},bme=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},wme=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_me=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>MW(t,l))}return e},jme=e=>typeof e=="string"?e.replace(" ","T"):e,DW=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class XC{constructor(t,n,r={},a=AT){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var z4;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(z4||(z4={}));class qy{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qy.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=qy.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=qy.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),v=d.filter(b=>p.indexOf(b.presence_ref)<0),x=h.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(l[u]=v),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var H4;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(H4||(H4={}));var Ky;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ky||(Ky={}));var Rc;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Rc||(Rc={}));class gI{constructor(t,n={config:{}},r){var a,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ra.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new XC(this,ol.join,this.params,this.timeout),this.rejoinTimer=new $W(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ra.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ra.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ra.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ra.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ra.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ol.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new qy(this),this.broadcastEndpointURL=DW(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ra.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Ky.PRESENCE]&&this.bindings[Ky.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Rc.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Rc.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){t==null||t(Rc.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,_=[];for(let j=0;j<b;j++){const w=x[j],{filter:{event:N,schema:k,table:C,filter:A}}=w,P=p&&p[j];if(P&&P.event===N&&P.schema===k&&P.table===C&&P.filter===A)_.push(Object.assign(Object.assign({},w),{id:P.id}));else{this.unsubscribe(),this.state=Ra.errored,t==null||t(Rc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Rc.SUBSCRIBED);return}}).receive("error",p=>{this.state=Ra.errored,t==null||t(Rc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Rc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ra.joined&&t===Ky.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ra.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ol.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new XC(this,ol.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ra.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new XC(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>gme){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=ol;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var v,x,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(x=p.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,x,b,_,j,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const N=p.id,k=(v=p.filter)===null||v===void 0?void 0:v.event;return N&&((x=n.ids)===null||x===void 0?void 0:x.includes(N))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const N=(j=(_=p==null?void 0:p.filter)===null||_===void 0?void 0:_.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return N==="*"||N===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:b,commit_timestamp:_,type:j,errors:w}=v;m=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:_,eventType:j,new:{},old:{},errors:w}),this._getPayloadRecords(v))}p.callback(m,r)})}_isClosed(){return this.state===Ra.closed}_isJoined(){return this.state===Ra.joined}_isJoining(){return this.state===Ra.joining}_isLeaving(){return this.state===Ra.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&gI.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ol.close,{},t)}_onError(t){this._on(ol.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ra.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=V4(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=V4(t.columns,t.old_record)),n}}const JC=()=>{},$w={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Sme=[1e3,2e3,5e3,1e4],Nme=1e4,kme=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Cme{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=AT,this.transport=null,this.heartbeatIntervalMs=$w.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=JC,this.ref=0,this.reconnectTimer=null,this.logger=JC,this.conn=null,this.sendBuffer=[],this.serializer=new vme,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>vr(async()=>{const{default:l}=await Promise.resolve().then(()=>Vf);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${ET.websocket}`,this.httpEndpoint=DW(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=dme.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:mme}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wy.connecting:return Lh.Connecting;case Wy.open:return Lh.Open;case Wy.closing:return Lh.Closing;default:return Lh.Closed}}isConnected(){return this.connectionState()===Lh.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new gI(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(pme,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},$w.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ol.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([kme],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:fme};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(ol.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new $W(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$w.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,o,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:AT,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:$w.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:JC,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>Sme[h-1]||Nme,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class vI extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ur(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Ame extends vI{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class PT extends vI{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const yI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>vr(async()=>{const{default:r}=await Promise.resolve().then(()=>Vf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Eme=()=>Et(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield vr(()=>Promise.resolve().then(()=>Vf),void 0)).Response:Response}),OT=e=>{if(Array.isArray(e))return e.map(n=>OT(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=OT(r)}),t},Tme=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ZC=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Pme=(e,t,n)=>Et(void 0,void 0,void 0,function*(){const r=yield Eme();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new Ame(ZC(a),i,o))}).catch(a=>{t(new PT(ZC(a),a))}):t(new PT(ZC(e),e))}),Ome=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(Tme(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function V0(e,t,n,r,a,i){return Et(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,Ome(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Pme(c,l,r))})})}function Ix(e,t,n,r){return Et(this,void 0,void 0,function*(){return V0(e,"GET",t,n,r)})}function rl(e,t,n,r,a){return Et(this,void 0,void 0,function*(){return V0(e,"POST",t,r,a,n)})}function IT(e,t,n,r,a){return Et(this,void 0,void 0,function*(){return V0(e,"PUT",t,r,a,n)})}function Ime(e,t,n,r){return Et(this,void 0,void 0,function*(){return V0(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function xI(e,t,n,r,a){return Et(this,void 0,void 0,function*(){return V0(e,"DELETE",t,r,a,n)})}class Rme{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Et(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ur(t))return{data:null,error:t};throw t}})}}var LW;class $me{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[LW]="BlobDownloadBuilder",this.promise=null}asStream(){return new Rme(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Et(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ur(t))return{data:null,error:t};throw t}})}}LW=Symbol.toStringTag;const Mme={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},W4={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Dme{constructor(t,n={},r,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=yI(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,a){return Et(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},W4),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?IT:rl)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ur(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return Et(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:W4.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield IT(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ur(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Et(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield rl(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new vI("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}})}update(t,n,r){return Et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Et(this,void 0,void 0,function*(){try{return{data:yield rl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ur(a))return{data:null,error:a};throw a}})}copy(t,n,r){return Et(this,void 0,void 0,function*(){try{return{data:{path:(yield rl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ur(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return Et(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield rl(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ur(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return Et(this,void 0,void 0,function*(){try{const a=yield rl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ur(a))return{data:null,error:a};throw a}})}download(t,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Ix(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new $me(c,this.shouldThrowOnError)}info(t){return Et(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ix(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:OT(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}})}exists(t){return Et(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Ime(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r)&&r instanceof PT){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Et(this,void 0,void 0,function*(){try{return{data:yield xI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}list(t,n,r){return Et(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Mme),n),{prefix:t||""});return{data:yield rl(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ur(a))return{data:null,error:a};throw a}})}listV2(t,n){return Et(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield rl(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const FW="2.78.0",BW={"X-Client-Info":`storage-js/${FW}`};class Lme{constructor(t,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},BW),n),this.fetch=yI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Et(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Ix(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}getBucket(t){return Et(this,void 0,void 0,function*(){try{return{data:yield Ix(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}createBucket(t){return Et(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield rl(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ur(a))return{data:null,error:a};throw a}})}updateBucket(t,n){return Et(this,void 0,void 0,function*(){try{return{data:yield IT(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Et(this,void 0,void 0,function*(){try{return{data:yield rl(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Et(this,void 0,void 0,function*(){try{return{data:yield xI(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class Fme{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},BW),n),this.fetch=yI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Et(this,void 0,void 0,function*(){try{return{data:yield rl(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}listBuckets(t){return Et(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ix(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Et(this,void 0,void 0,function*(){try{return{data:yield xI(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}})}}const bI={"X-Client-Info":`storage-js/${FW}`,"Content-Type":"application/json"};class UW extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function zi(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class eA extends UW{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bme extends UW{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var q4;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(q4||(q4={}));const wI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>vr(async()=>{const{default:r}=await Promise.resolve().then(()=>Vf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Ume=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},K4=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Vme=(e,t,n)=>Et(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+"";t(new eA(K4(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new eA(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new eA(l,a,o))}}else t(new Bme(K4(e),e))}),zme=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(Ume(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),n)):a};function Hme(e,t,n,r,a,i){return Et(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,zme(t,r,a,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>Vme(c,l,r))})})}function Hi(e,t,n,r,a){return Et(this,void 0,void 0,function*(){return Hme(e,"POST",t,r,a,n)})}class Wme{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bI),n),this.fetch=wI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Et(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Et(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zi(r))return{data:null,error:r};throw r}})}listIndexes(t){return Et(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Et(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zi(r))return{data:null,error:r};throw r}})}}class qme{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bI),n),this.fetch=wI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Et(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Hi(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}getVectors(t){return Et(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}listVectors(t){return Et(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Hi(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}queryVectors(t){return Et(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Et(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Hi(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}}class Kme{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bI),n),this.fetch=wI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Et(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}getBucket(t){return Et(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}listBuckets(){return Et(this,arguments,void 0,function*(t={}){try{return{data:yield Hi(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Et(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zi(n))return{data:null,error:n};throw n}})}}class Gme extends Kme{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new Yme(this.url,this.headers,t,this.fetch)}}class Yme extends Wme{constructor(t,n,r,a){super(t,n,a),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Et(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Et(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Et(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Et(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Qme(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Qme extends qme{constructor(t,n,r,a,i){super(t,n,i),this.vectorBucketName=r,this.indexName=a}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Et(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Et(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Et(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Et(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Et(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Xme extends Lme{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new Dme(this.url,this.headers,t,this.fetch)}get vectors(){return new Gme(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Fme(this.url+"/iceberg",this.headers,this.fetch)}}const Jme="2.78.0";let Ay="";typeof Deno<"u"?Ay="deno":typeof document<"u"?Ay="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ay="react-native":Ay="node";const Zme={"X-Client-Info":`supabase-js-${Ay}/${Jme}`},epe={headers:Zme},tpe={schema:"public"},npe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rpe={},ape=e=>{let t;return e?t=e:typeof fetch>"u"?t=gW:t=fetch,(...n)=>t(...n)},spe=()=>typeof Headers>"u"?vW:Headers,ipe=(e,t,n)=>{const r=ape(n),a=spe();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))}};function ope(e){return e.endsWith("/")?e:e+"/"}function lpe(e,t){var n,r;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function cpe(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ope(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const VW="2.78.0",Bm=30*1e3,RT=3,tA=RT*Bm,upe="http://localhost:9999",dpe="supabase.auth.token",hpe={"X-Client-Info":`gotrue-js/${VW}`},$T="X-Supabase-Api-Version",zW={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fpe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mpe=10*60*1e3;class Rx extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $t(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ppe extends Rx{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function gpe(e){return $t(e)&&e.name==="AuthApiError"}class Fh extends Rx{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Wd extends Rx{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Jo extends Wd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vpe(e){return $t(e)&&e.name==="AuthSessionMissingError"}class jm extends Wd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mw extends Wd{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Dw extends Wd{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ype(e){return $t(e)&&e.name==="AuthImplicitGrantRedirectError"}class G4 extends Wd{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class MT extends Wd{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function nA(e){return $t(e)&&e.name==="AuthRetryableFetchError"}class Y4 extends Wd{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class DT extends Wd{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const pj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Q4=` 	
\r=`.split(""),xpe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Q4.length;t+=1)e[Q4[t].charCodeAt(0)]=-2;for(let t=0;t<pj.length;t+=1)e[pj[t].charCodeAt(0)]=t;return e})();function X4(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(pj[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(pj[r]),t.queuedBits-=6}}function HW(e,t,n){const r=xpe[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function J4(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{_pe(o,r,n)};for(let o=0;o<e.length;o+=1)HW(e.charCodeAt(o),a,i);return t.join("")}function bpe(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function wpe(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}bpe(r,t)}}function _pe(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function bp(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)HW(e.charCodeAt(a),n,r);return new Uint8Array(t)}function jpe(e){const t=[];return wpe(e,n=>t.push(n)),new Uint8Array(t)}function qh(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>X4(a,n,r)),X4(null,n,r),t.join("")}function Spe(e){return Math.round(Date.now()/1e3)+e}function Npe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ds=()=>typeof window<"u"&&typeof document<"u",Sh={tested:!1,writable:!1},WW=()=>{if(!Ds())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sh.tested)return Sh.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Sh.tested=!0,Sh.writable=!0}catch{Sh.tested=!0,Sh.writable=!1}return Sh.writable};function kpe(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const qW=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>vr(async()=>{const{default:r}=await Promise.resolve().then(()=>Vf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Cpe=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Um=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Nh=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Lu=async(e,t)=>{await e.removeItem(t)};class jS{constructor(){this.promise=new jS.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}jS.promiseConstructor=Promise;function rA(e){const t=e.split(".");if(t.length!==3)throw new DT("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!fpe.test(t[r]))throw new DT("JWT not in base64url format");return{header:JSON.parse(J4(t[0])),payload:JSON.parse(J4(t[1])),signature:bp(t[2]),raw:{header:t[0],payload:t[1]}}}async function Ape(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Epe(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function Tpe(e){return("0"+e.toString(16)).substr(-2)}function Ppe(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,Tpe).join("")}async function Ope(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Ipe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Ope(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sm(e,t,n=!1){const r=Ppe();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Um(e,`${t}-code-verifier`,a);const i=await Ipe(r);return[i,r===i?"plain":"s256"]}const Rpe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $pe(e){const t=e.headers.get($T);if(!t||!t.match(Rpe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Mpe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Dpe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lpe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nm(e){if(!Lpe.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function aA(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Fpe(e,t){return new Proxy(e,{get:(n,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,a)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,a)}})}function Z4(e){return JSON.parse(JSON.stringify(e))}const Oh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Bpe=[502,503,504];async function eF(e){var t;if(!Cpe(e))throw new MT(Oh(e),0);if(Bpe.includes(e.status))throw new MT(Oh(e),e.status);let n;try{n=await e.json()}catch(i){throw new Fh(Oh(i),i)}let r;const a=$pe(e);if(a&&a.getTime()>=zW["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Y4(Oh(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Jo}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Y4(Oh(n),e.status,n.weak_password.reasons);throw new ppe(Oh(n),e.status||500,r)}const Upe=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Jt(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[$T]||(i[$T]=zW["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Vpe(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Vpe(e,t,n,r,a,i){const o=Upe(t,r,a,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new MT(Oh(c),0)}if(l.ok||await eF(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await eF(c)}}function Zo(e){var t;let n=null;Wpe(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Spe(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function tF(e){const t=Zo(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Xu(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function zpe(e){return{data:e,error:null}}function Hpe(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,o=Hd(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function nF(e){return e}function Wpe(e){return e.access_token&&e.refresh_token&&e.expires_in}const sA=["global","local","others"];class qpe{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=qW(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=sA[0]){if(sA.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sA.join(", ")}`);try{return await Jt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Xu})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Hd(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Hpe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($t(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Jt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Xu})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:nF});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if($t(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Nm(t);try{return await Jt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Xu})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Nm(t);try{return await Jt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Xu})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Nm(t);try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Xu})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Nm(t.userId);try{const{data:n,error:r}=await Jt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if($t(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Nm(t.userId),Nm(t.id);try{return{data:await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Jt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:nF});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if($t(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Jt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Jt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Jt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($t(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Jt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}}function rF(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const km={debug:!!(globalThis&&WW()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class KW extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Kpe extends KW{}async function Gpe(e,t,n){km.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),km.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){km.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{km.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw km.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Kpe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(km.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Ype(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function GW(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Qpe(e){return parseInt(e,16)}function Xpe(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Jpe(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=GW(e.address),v=d?`${d}://${r}`:r,x=e.statement?`${e.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${p}

${x}`;let _=`URI: ${h}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(_+=`
Expiration Time: ${a.toISOString()}`),l&&(_+=`
Not Before: ${l.toISOString()}`),c&&(_+=`
Request ID: ${c}`),u){let j=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);j+=`
- ${w}`}_+=j}return`${b}
${_}`}class Sa extends Error{constructor({message:t,code:n,cause:r,name:a}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=a??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class gj extends Sa{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function Zpe({error:e,options:t}){var n,r,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Sa({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Sa({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Sa({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Sa({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Sa({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Sa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Sa({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Sa({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(YW(o)){if(i.rp.id!==o)return new Sa({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Sa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Sa({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Sa({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Sa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function ege({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Sa({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Sa({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(YW(r)){if(n.rpId!==r)return new Sa({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Sa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Sa({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Sa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class tge{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const nge=new tge;function rge(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=Hd(e,["challenge","user","excludeCredentials"]),i=bp(t).buffer,o=Object.assign(Object.assign({},n),{id:bp(n.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:bp(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function age(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Hd(e,["challenge","allowCredentials"]),a=bp(t).buffer,i=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:bp(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function sge(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:qh(new Uint8Array(e.response.attestationObject)),clientDataJSON:qh(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ige(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:qh(new Uint8Array(a.authenticatorData)),clientDataJSON:qh(new Uint8Array(a.clientDataJSON)),signature:qh(new Uint8Array(a.signature)),userHandle:a.userHandle?qh(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function YW(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function aF(){var e,t;return!!(Ds()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function oge(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new gj("Browser returned unexpected credential type",t)}:{data:null,error:new gj("Empty credential response",t)}}catch(t){return{data:null,error:Zpe({error:t,options:e})}}}async function lge(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new gj("Browser returned unexpected credential type",t)}:{data:null,error:new gj("Empty credential response",t)}}catch(t){return{data:null,error:ege({error:t,options:e})}}}const cge={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},uge={userVerification:"preferred",hints:["security-key"]};function vj(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const l=r[i];t(l)?r[i]=vj(l,o):r[i]=vj(o)}else r[i]=o}return r}function dge(e,t){return vj(cge,e,t||{})}function hge(e,t){return vj(uge,e,t||{})}class fge{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const c=a??nge.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=dge(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await oge({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=hge(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await lge(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Fh("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!n)return{data:null,error:new Rx("rpId is required for WebAuthn authentication")};try{if(!aF())return{data:null,error:new Fh("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Fh("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!n)return{data:null,error:new Rx("rpId is required for WebAuthn registration")};try{if(!aF())return{data:null,error:new Fh("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new Fh("Unexpected error in register",o)}}}}Ype();const mge={url:upe,storageKey:dpe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hpe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sF(e,t,n){return await n()}const Cm={};class $x{get jwks(){var t,n;return(n=(t=Cm[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Cm[this.storageKey]=Object.assign(Object.assign({},Cm[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Cm[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cm[this.storageKey]=Object.assign(Object.assign({},Cm[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$x.nextInstanceID,$x.nextInstanceID+=1,this.instanceID>0&&Ds()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},mge),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new qpe({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=qW(a.fetch),this.lock=a.lock||sF,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ds()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Gpe:this.lock=sF,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fge(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:WW()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rF(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=rF(this.memoryStorage)),Ds()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${VW}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=kpe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ds()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ype(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $t(n)?{error:n}:{error:new Fh("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Zo}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if($t(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Sm(this.storage,this.storageKey)),i=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},xform:Zo})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Zo})}else throw new Mw("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if($t(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tF})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tF})}else throw new Mw("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new jm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if($t(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,a,i,o,l,c,u,d,h,m;let p,v;if("message"in t)p=t.message,v=t.signature;else{const{chain:x,wallet:b,statement:_,options:j}=t;let w;if(Ds())if(typeof b=="object")w=b;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")w=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const N=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href),k=await w.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=GW(k[0]);let A=(r=j==null?void 0:j.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!A){const O=await w.request({method:"eth_chainId"});A=Qpe(O)}const P={domain:N.host,address:C,statement:_,uri:N.href,version:"1",chainId:A,nonce:(a=j==null?void 0:j.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=j==null?void 0:j.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=j==null?void 0:j.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=j==null?void 0:j.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=j==null?void 0:j.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=j==null?void 0:j.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=Jpe(P),v=await w.request({method:"personal_sign",params:[Xpe(p),C]})}try{const{data:x,error:b}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Zo});if(b)throw b;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new jm}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:b})}catch(x){if($t(x))return{data:{user:null,session:null},error:x};throw x}}async signInWithSolana(t){var n,r,a,i,o,l,c,u,d,h,m,p;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:b,wallet:_,statement:j,options:w}=t;let N;if(Ds())if(typeof _=="object")N=_;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))N=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=_}const k=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const C=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),j?{statement:j}:null));let A;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")A=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)A=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)v=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),x=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const C=await N.signMessage(new TextEncoder().encode(v),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=C}}try{const{data:b,error:_}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:qh(x)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Zo});if(_)throw _;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new jm}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:_})}catch(b){if($t(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await Nh(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:o}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Zo});if(await Lu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new jm}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if($t(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:o}=t,l=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Zo}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new jm}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if($t(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sm(this.storage,this.storageKey));const{error:h}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Mw("You must provide either an email or phone number.")}catch(l){if($t(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Zo});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if($t(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Sm(this.storage,this.storageKey)),await Jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:zpe})}catch(i){if($t(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Jo;const{error:a}=await Jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if($t(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await Jt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=await Jt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Mw("You must provide either an email or phone number and a type")}catch(n){if($t(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Nh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<tA:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Nh(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=aA()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Fpe(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Xu}):await this._useSession(async n=>{var r,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jo}:await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Xu})})}catch(n){if($t(n))return vpe(n)&&(await this._removeSession(),await Lu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Jo;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Sm(this.storage,this.storageKey));const{data:u,error:d}=await Jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Xu});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Jo;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:o}=rA(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if($t(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Jo;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($t(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Ds())throw new Dw("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Dw(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new G4("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dw("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new G4("No code detected.");const{data:j,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Dw("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=Bm&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const _={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(r){if($t(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Nh(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(gpe(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Lu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Npe(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Sm(this.storage,this.storageKey,!0));try{return await Jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if($t(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Jt(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Ds()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($t(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:a,data:{session:i}}=n;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Zo}),{data:m,error:p}=h;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new jm}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:p})}catch(a){if($t(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)throw o;return await Jt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Epe(async a=>(a>0&&await Ape(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Zo})),(a,i)=>{const o=200*Math.pow(2,a);return i&&nA(i)&&Date.now()+o-r<Bm})}catch(r){if(this._debug(n,"error",r),$t(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Ds()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Nh(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Nh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Um(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:aA()}else if(a&&!a.user&&!a.user){const o=await Nh(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Lu(this.storage,this.storageKey+"-user"),await Um(this.storage,this.storageKey,a)):a.user=aA()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<tA;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${tA}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),nA(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Jo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new jS;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Jo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),$t(i)){const o={data:null,error:i};return nA(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Um(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=Z4(a);await Um(this.storage,this.storageKey,i)}else{const a=Z4(n);await Um(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Lu(this.storage,this.storageKey),await Lu(this.storage,this.storageKey+"-code-verifier"),await Lu(this.storage,this.storageKey+"-user"),this.userStorage&&await Lu(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ds()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Bm);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Bm);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Bm}ms, refresh threshold is ${RT} ticks`),a<=RT&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof KW)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ds()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Sm(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await Jt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Jt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?sge(t.webauthn.credential_response):ige(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Jt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if($t(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const o=await Jt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:rge(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:age(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if($t(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:a}=await this.getSession();if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=rA(r.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?{data:null,error:a}:r?await Jt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):{data:null,error:new Jo}})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return{data:null,error:i};if(!a)return{data:null,error:new Jo};const o=await Jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ds()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if($t(r))return{data:null,error:r};throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return{data:null,error:i};if(!a)return{data:null,error:new Jo};const o=await Jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ds()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if($t(r))return{data:null,error:r};throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+mpe>a)return r;const{data:i,error:o}=await Jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};r=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=rA(r);n!=null&&n.allowExpired||Mpe(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const d=Dpe(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,jpe(`${l}.${c}`)))throw new DT("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}}$x.nextInstanceID=0;const pge=$x;class gge extends pge{constructor(t){super(t)}}class vge{constructor(t,n,r){var a,i,o;this.supabaseUrl=t,this.supabaseKey=n;const l=cpe(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:tpe,realtime:rpe,auth:Object.assign(Object.assign({},npe),{storageKey:c}),global:epe},d=lpe(r??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=ipe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ume(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Xme(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new nme(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gge({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Cme(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const yge=(e,t,n)=>new vge(e,t,n);function xge(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}xge()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bge="https://jtaekxrkubhwtqgodvtx.supabase.co",wge="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp0YWVreHJrdWJod3RxZ29kdnR4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM3MDcxMTYsImV4cCI6MjA3OTI4MzExNn0.iRHg-xMZ1i_qb0xnQ6vDivcFEEdrpYb0Z6cSkgOLLyU",wt=yge(bge,wge,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),z0=Object.freeze(Object.defineProperty({__proto__:null,supabase:wt},Symbol.toStringTag,{value:"Module"})),QW=g.createContext(void 0),_ge=({children:e})=>{const[t,n]=g.useState(null),[r,a]=g.useState(null),[i,o]=g.useState(!0),l=cs();g.useEffect(()=>{const{data:{subscription:v}}=wt.auth.onAuthStateChange((x,b)=>{a(b),n((b==null?void 0:b.user)??null),o(!1)});return wt.auth.getSession().then(({data:{session:x}})=>{a(x),n((x==null?void 0:x.user)??null),o(!1)}),()=>v.unsubscribe()},[]),g.useEffect(()=>{t&&c(t)},[t]);const c=async v=>{try{const{error:x}=await wt.functions.invoke("sync-user-profile",{body:{userId:v.id}});x&&console.error(" Failed to sync user profile to NocoDB:",x)}catch(x){console.error(" Error syncing user profile:",x)}},u=async(v,x,b)=>{var _;try{const j=`${window.location.origin}/`,{data:w,error:N}=await wt.auth.signUp({email:v,password:x,options:{emailRedirectTo:j,data:{full_name:b}}});if(console.log(" Signup response:",{user:(_=w.user)==null?void 0:_.id,session:!!w.session}),N)throw console.error(" Signup error:",N),N.message.includes("already registered")||N.message.includes("already exists")?new Error("Email ny  c ng k. Vui lng ng nhp hoc s dng email khc."):N;return w.user&&!w.session?(console.log(" User created but no session (Email Confirmation likely enabled)"),ne.success("ng k thnh cng! Vui lng kim tra email  xc nhn ti khon.",{duration:6e3}),{error:null}):(w.user&&w.session&&(console.log(" User created and session active. Starting post-signup setup..."),setTimeout(async()=>{try{console.log(" Invoking sync-user-profile...");const{error:k}=await wt.functions.invoke("sync-user-profile");if(k)console.error(" Failed to sync user profile to NocoDB:",k),ne.error("Khng th to profile. Vui lng th ng nhp li.");else{console.log(" Profile synced."),console.log(" Invoking assign-default-role...");const{error:C}=await wt.functions.invoke("assign-default-role",{body:{userId:w.user.id}});C?console.error(" Failed to assign default role:",C):(console.log(" Role assigned."),window.dispatchEvent(new CustomEvent("roles-updated"))),console.log(" Invoking assign-trial-subscription...");const{error:A}=await wt.functions.invoke("assign-trial-subscription",{body:{userId:w.user.id}});A?console.error(" Failed to assign trial subscription:",A):console.log(" Trial subscription assigned."),ne.success("Ti khon  c thit lp xong!")}}catch(k){console.error(" Error in post-signup setup:",k),ne.error("C li xy ra khi thit lp ti khon")}},2e3)),{error:null})}catch(j){console.error(" Signup exception:",j);let w=j.message||"ng k tht bi",N="";return w.includes("Failed to fetch")||w.includes("network")?(w=" Li kt ni",N="Khng th kt ni n my ch. Vui lng kim tra internet hoc tt AdBlock."):w.includes("already registered")&&(w="Email  tn ti",N="Vui lng ng nhp hoc dng email khc."),ne.error(w,{description:N,duration:5e3}),{error:j}}},d=async(v,x)=>{var b;try{const{data:_,error:j}=await wt.auth.signInWithPassword({email:v,password:x});if(j)throw j;return _.user&&setTimeout(()=>{c(_.user)},100),ne.success("ng nhp thnh cng!"),l("/"),{error:null}}catch(_){console.error(" Sign in error:",_);let j="ng nhp tht bi",w="";const N=_==null?void 0:_.code,k=((b=_==null?void 0:_.message)==null?void 0:b.toLowerCase())||"";return N==="email_not_confirmed"||k.includes("email not confirmed")?(j=" Email cha c xc nhn",w="Vui lng kim tra email v click vo link xc nhn. Nu khng thy email, kim tra hp th spam."):N==="invalid_credentials"||k.includes("invalid login credentials")?(j=" Email hoc mt khu khng ng",w="Vui lng kim tra li thng tin ng nhp."):k.includes("user not found")||k.includes("email not found")?(j=" Email khng tn ti",w="Email ny cha c ng k. Vui lng ng k ti khon mi."):k.includes("too many requests")||N==="over_request_rate_limit"?(j=" Qu nhiu ln th",w="Vui lng i 5-10 pht trc khi th li."):(k.includes("fetch")||k.includes("network"))&&(j=" Li kt ni",w="Vui lng kim tra kt ni internet v th li."),ne.error(j,{description:w,duration:5e3}),{error:_}}},h=async()=>{try{const{error:v}=await wt.auth.signOut();v&&console.warn("Sign out warning:",v.message),a(null),n(null),ne.success(" ng xut"),l("/auth/login")}catch(v){console.error("Sign out error:",v),l("/auth/login"),ne.error(v.message||"ng xut tht bi")}},m=async v=>{try{const x=`${window.location.origin}/auth/reset-password`,{error:b}=await wt.auth.resetPasswordForEmail(v,{redirectTo:x});if(b)throw b;return ne.success("Email t li mt khu  c gi!"),{error:null}}catch(x){return ne.error(x.message||"Gi email tht bi"),{error:x}}},p=async v=>{try{const{error:x}=await wt.auth.updateUser({password:v});if(x)throw x;return ne.success("Mt khu  c cp nht!"),l("/"),{error:null}}catch(x){return ne.error(x.message||"Cp nht mt khu tht bi"),{error:x}}};return s.jsx(QW.Provider,{value:{user:t,session:r,loading:i,signUp:u,signIn:d,signOut:h,resetPassword:m,updatePassword:p},children:e})},Mn=()=>{const e=g.useContext(QW);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},It={BASE_URL:"http://180.93.3.41:8080",API_TOKEN:"8m1N0qDkakGPT_Xq4MXBaA2gw5hWrTAkZVKJ3Wd_",TABLES:{OPENAI_SETTINGS:"mlyqdigfn8tmt2o",FACEBOOK_AD_ACCOUNTS:"mp0at8j7vlalgoo",FACEBOOK_PAGES:"mtstya0v6m16w25",CAMPAIGN_LABELS:"m7jnf4y29tmv3lj",CAMPAIGN_LABEL_ASSIGNMENTS:"mms9psw2gi1whg8",AUTOMATED_RULES:"mxdamrlmpw1bcl8",AUTOMATION_RULE_EXECUTION_LOGS:"mpy6uv4q64yek4i",FACEBOOK_INSIGHTS:"m8olbfgr5i1rio0",FACEBOOK_INSIGHTS_HISTORY:"m0jwnv0a80j0ggc",PENDING_REVERTS:"mms83ggj1yps8sr",SALES_REPORTS:"m8r1aghugm2tdr9",FACEBOOK_CAMPAIGNS:"mbhv1uczc3v22t2",FACEBOOK_ADSETS:"mnlyrzeefr9vu34",FACEBOOK_ADS:"ml1c2tyasq95xyb",USER_ROLES:"mgegupik7zihccr",FEATURE_FLAGS:"m4ejg5bliwqrxkt",ROLE_FEATURE_FLAGS:"mzg5rbcu8slheho",USER_FEATURE_OVERRIDES:"mulzgmjwvq658qt",PROFILES:"m9yo4dwz1fj2hsa",USER_SUBSCRIPTIONS:"mniwyq7d5iu3w2j",PAYMENT_TRANSACTIONS:"mga4jw0x3rbbimt",PAYMENT_PACKAGES:"m2xhdz9d0akq1nf",PAYMENT_SETTINGS:"melitl6whnc6hgq",USAGE_LOGS:"mx3r2e9u6q5jebf",USER_SYNC_SETTINGS:"mi7wjupweoklj16",FACEBOOK_PERSONAL_TOKENS:"m7t0jdaaknhfiko",TODAY_INSIGHTS:"PLACEHOLDER",WEEKLY_INSIGHTS:"PLACEHOLDER",MONTHLY_INSIGHTS:"PLACEHOLDER",SYNC_LOGS:"m9j1kt8ml62g5r5",FACEBOOK_INSIGHTS_AUTO:"m8olbfgr5i1rio0",NOTIFICATION_CONFIGS:"m7clzb3goi4ru7x",NOTIFICATIONS:"mcyc0t46v11q9b7"}},lt=()=>({"xc-token":It.API_TOKEN,"Content-Type":"application/json"}),ht=(e,t)=>{const n=`${It.BASE_URL}/api/v2/tables/${e}/records`;return t?`${n}/${t}`:n},Vr=async e=>{try{if(!e)throw new Error("userId is required for getActiveAdAccounts");const t=encodeURIComponent(`(user_id,eq,${e})~and(is_active,eq,1)`),n=`${ht(It.TABLES.FACEBOOK_AD_ACCOUNTS)}?where=${t}&limit=100`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return((await r.json()).list||[]).map(o=>({...o,is_active:!!o.is_active}))}catch(t){throw console.error(" Error fetching ad accounts from NocoDB:",t),t}},XW=async e=>{try{const t=ht(It.TABLES.FACEBOOK_AD_ACCOUNTS),n={...e};"is_active"in n&&n.is_active!==void 0&&(n.is_active=n.is_active?1:0);const r=await fetch(t,{method:"POST",headers:lt(),body:JSON.stringify(n)});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return await r.json()}catch(t){throw console.error("Error upserting ad account:",t),t}},LT=async(e,t)=>{try{const n=ht(It.TABLES.FACEBOOK_AD_ACCOUNTS),r={...t};"is_active"in r&&r.is_active!==void 0&&(r.is_active=r.is_active?1:0);const a=await fetch(n,{method:"PATCH",headers:lt(),body:JSON.stringify({Id:e,...r})});if(!a.ok)throw new Error(`NocoDB API error: ${a.status} ${a.statusText}`);return await a.json()}catch(n){throw console.error("Error updating ad account:",n),n}},JW=async e=>{var t;try{if(!e)throw new Error("userId is required for deleteAllAdAccounts");const n=encodeURIComponent(`(user_id,eq,${e})`),r=`${ht(It.TABLES.FACEBOOK_AD_ACCOUNTS)}?where=${n}&limit=100`,a=await fetch(r,{method:"GET",headers:lt()});if(!a.ok)throw new Error(`NocoDB API error: ${a.status}`);const i=await a.json();if((((t=i.list)==null?void 0:t.length)||0)===0)return;await Promise.all(i.list.map(async l=>{if(l.Id){const c=ht(It.TABLES.FACEBOOK_AD_ACCOUNTS);await fetch(c,{method:"DELETE",headers:lt(),body:JSON.stringify({Id:l.Id})})}}))}catch(n){throw console.error("Error deleting ad accounts:",n),n}},ZW=Object.freeze(Object.defineProperty({__proto__:null,deleteAllAdAccounts:JW,getActiveAdAccounts:Vr,updateAdAccount:LT,upsertAdAccount:XW},Symbol.toStringTag,{value:"Module"})),Qp=async e=>{try{if(!e)throw new Error("userId is required for getAllPages");const t=encodeURIComponent(`(user_id,eq,${e})`),n=`${ht(It.TABLES.FACEBOOK_PAGES)}?where=${t}&limit=100`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return(await r.json()).list||[]}catch(t){throw console.error(" Error fetching pages from NocoDB:",t),t}},j_=async e=>{try{const t=encodeURIComponent(`(user_id,eq,${e})`),n=`${ht(It.TABLES.FACEBOOK_PAGES)}?where=${t}&limit=100`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return(await r.json()).list||[]}catch(t){throw console.error("Error fetching pages by user_id:",t),t}},jge=async e=>{try{const t=ht(It.TABLES.FACEBOOK_PAGES),n={...e};"is_active"in n&&n.is_active!==void 0&&(n.is_active=n.is_active?1:0);const r=await fetch(t,{method:"POST",headers:lt(),body:JSON.stringify(n)});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return await r.json()}catch(t){throw console.error("Error upserting page:",t),t}},iF=async(e,t)=>{try{const n=ht(It.TABLES.FACEBOOK_PAGES),r={...t};"is_active"in r&&r.is_active!==void 0&&(r.is_active=r.is_active?1:0);const a=await fetch(n,{method:"PATCH",headers:lt(),body:JSON.stringify({Id:e,...r})});if(!a.ok)throw new Error(`NocoDB API error: ${a.status} ${a.statusText}`);return await a.json()}catch(n){throw console.error("Error updating page:",n),n}},H0=async e=>{try{const t=encodeURIComponent(`(user_id,eq,${e})`),n=`${ht(It.TABLES.OPENAI_SETTINGS)}?where=${t}&limit=100`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok){const i=await r.text();throw console.error(" [NocoDB] Failed to fetch:",r.status,i),new Error(`Failed to fetch OpenAI settings: ${r.statusText}`)}return(await r.json()).list||[]}catch(t){throw console.error(" [NocoDB] Error fetching AI settings:",t),t}},Sge=async(e,t)=>{try{if(!t)throw new Error("userId is required for upsertOpenAISetting. User must be authenticated.");!e.user_id&&t&&(e.user_id=t);const n=await H0(t),r=e.name_api==="aibeautypro"?n.find(a=>a.name_api===e.name_api&&a.model===e.model&&a.user_id===t):n.find(a=>a.name_api===e.name_api&&a.user_id===t);if(r){const{CreatedAt:a,UpdatedAt:i,...o}=e;return await eq(r.Id,{...o,user_id:t})}else{const a=ht(It.TABLES.OPENAI_SETTINGS),i=e.is_active!==void 0&&e.is_active?1:0,o=e.model||"gpt-4o-mini",l=e.name_api||(o.toLowerCase().includes("gemini")?"gemini":(o.toLowerCase().includes("gpt"),"openai")),c={record_id:crypto.randomUUID(),name_api:l,api_key:e.api_key,model:o,is_active:i,user_id:t},u=await fetch(a,{method:"POST",headers:lt(),body:JSON.stringify(c)});if(!u.ok){const h=await u.text();throw console.error(" [NocoDB] Failed to create AI setting:",u.status,h),new Error(`Failed to create AI setting: ${u.statusText}`)}return await u.json()}}catch(n){throw console.error("Error upserting OpenAI setting:",n),n}},eq=async(e,t)=>{try{const n=ht(It.TABLES.OPENAI_SETTINGS),{CreatedAt:r,UpdatedAt:a,...i}=t;"is_active"in i&&i.is_active!==void 0&&(i.is_active=i.is_active?1:0);const o=await fetch(n,{method:"PATCH",headers:lt(),body:JSON.stringify({Id:e,...i})});if(!o.ok){const c=await o.text();throw console.error(" Failed to update OpenAI setting:",o.status,c),new Error(`Failed to update OpenAI setting: ${o.statusText} - ${c}`)}return await o.json()}catch(n){throw console.error("Error updating OpenAI setting:",n),n}},oF=async(e,t)=>{try{if(!e)throw new Error("userId is required for deactivateAllOpenAISettings");const n=await H0(e),a=(t?n.filter(i=>i.name_api===t):n).map(i=>eq(i.Id,{is_active:!1}));await Promise.all(a)}catch(n){throw console.error("Error deactivating OpenAI settings:",n),n}},Nge=g.createContext(void 0),kge=({children:e})=>{const{user:t}=Mn(),[n,r]=g.useState(null),[a,i]=g.useState(!0),[o,l]=g.useState(null),c=async()=>{try{if(!(t!=null&&t.id)){r(null),i(!1);return}n||i(!0),l(null);const p=(await Vr(t.id)).find(j=>j.is_active),x=(await j_(t.id)).find(j=>j.is_active),_=(await H0(t.id)).find(j=>j.is_active);r({adAccountId:(p==null?void 0:p.account_id)||"",adsToken:(p==null?void 0:p.access_token)||"",pageId:(x==null?void 0:x.page_id)||"",pageToken:(x==null?void 0:x.access_token)||"",openaiApiKey:(_==null?void 0:_.api_key)||"",openaiModel:(_==null?void 0:_.model)||"gpt-4o-mini"})}catch(m){const p=m instanceof Error?m.message:"Unknown error";l(p),console.error("Error loading settings:",m)}finally{i(!1)}};g.useEffect(()=>{c();const m=()=>{c()};return window.addEventListener("settings-updated",m),()=>window.removeEventListener("settings-updated",m)},[t==null?void 0:t.id]);const u=!!(n!=null&&n.adsToken),d=!!(n!=null&&n.pageToken),h=!!(n!=null&&n.openaiApiKey);return s.jsx(Nge.Provider,{value:{settings:n,loading:a,error:o,hasAdsToken:u,hasPageToken:d,hasOpenAIKey:h,reload:c},children:e})},mo=({children:e})=>{const{user:t,loading:n}=Mn();return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):t?s.jsx(s.Fragment,{children:e}):s.jsx(HH,{to:"/auth/login",replace:!0})},tq=It.TABLES.USER_ROLES,nq=async e=>{const t=encodeURIComponent(`(user_id,eq,${e})`),n=`${ht(tq)}?where=${t}`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return(await r.json()).list},Cge=async e=>{const t=ht(tq),n=await fetch(t,{method:"POST",headers:lt(),body:JSON.stringify(e)});if(!n.ok)throw new Error(`NocoDB API error: ${n.status} ${n.statusText}`);return await n.json()},Age=async(e,t,n)=>{const a=(await nq(e)).find(i=>i.role===t);return a||await Cge({user_id:e,role:t,created_by:n})},_I=()=>{const{user:e}=Mn(),[t,n]=g.useState([]),[r,a]=g.useState(!0),[i,o]=g.useState(null);g.useEffect(()=>{const d=async()=>{if(!e){n([]),a(!1);return}try{a(!0),o(null);const p=(await nq(e.id)).map(v=>v.role);n(p)}catch(m){console.error(" Error fetching user roles:",m),o("Failed to fetch user roles"),n([])}finally{a(!1)}};d();const h=()=>{d()};return window.addEventListener("roles-updated",h),()=>{window.removeEventListener("roles-updated",h)}},[e]);const l=t.includes("super_admin"),c=t.includes("admin")||l,u=t.includes("user");return{roles:t,loading:r,error:i,isSuperAdmin:l,isAdmin:c,isUser:u,hasAnyRole:t.length>0}},Ege=Uf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ka=g.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:je(Ege({variant:t}),e),...n}));Ka.displayName="Alert";const xl=g.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:je("mb-1 font-medium leading-none tracking-tight",e),...t}));xl.displayName="AlertTitle";const Ga=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:je("text-sm [&_p]:leading-relaxed",e),...t}));Ga.displayName="AlertDescription";const Tge=({children:e})=>{const{user:t,loading:n}=Mn(),{isSuperAdmin:r,loading:a}=_I();return n||a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):t?r?s.jsx(s.Fragment,{children:e}):s.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:s.jsxs(Ka,{variant:"destructive",className:"max-w-md",children:[s.jsx(Dce,{className:"h-4 w-4"}),s.jsxs(Ga,{className:"mt-2",children:[s.jsx("strong",{children:"Access Denied"}),s.jsx("p",{className:"mt-2",children:"You do not have permission to access this area. This page is restricted to Super Administrators only."}),s.jsx("p",{className:"mt-2",children:s.jsx("a",{href:"/",className:"underline",children:"Return to Home"})})]})]})}):s.jsx(HH,{to:"/auth/login",replace:!0})};var iA="focusScope.autoFocusOnMount",oA="focusScope.autoFocusOnUnmount",lF={bubbles:!1,cancelable:!0},Pge="FocusScope",W0=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=g.useState(null),u=aa(a),d=aa(i),h=g.useRef(null),m=Dt(t,x=>c(x)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let x=function(w){if(p.paused||!l)return;const N=w.target;l.contains(N)?h.current=N:Uu(h.current,{select:!0})},b=function(w){if(p.paused||!l)return;const N=w.relatedTarget;N!==null&&(l.contains(N)||Uu(h.current,{select:!0}))},_=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&Uu(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const j=new MutationObserver(_);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),j.disconnect()}}},[r,l,p.paused]),g.useEffect(()=>{if(l){uF.add(p);const x=document.activeElement;if(!l.contains(x)){const _=new CustomEvent(iA,lF);l.addEventListener(iA,u),l.dispatchEvent(_),_.defaultPrevented||(Oge(Dge(rq(l)),{select:!0}),document.activeElement===x&&Uu(l))}return()=>{l.removeEventListener(iA,u),setTimeout(()=>{const _=new CustomEvent(oA,lF);l.addEventListener(oA,d),l.dispatchEvent(_),_.defaultPrevented||Uu(x??document.body,{select:!0}),l.removeEventListener(oA,d),uF.remove(p)},0)}}},[l,u,d,p]);const v=g.useCallback(x=>{if(!n&&!r||p.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,_=document.activeElement;if(b&&_){const j=x.currentTarget,[w,N]=Ige(j);w&&N?!x.shiftKey&&_===N?(x.preventDefault(),n&&Uu(w,{select:!0})):x.shiftKey&&_===w&&(x.preventDefault(),n&&Uu(N,{select:!0})):_===j&&x.preventDefault()}},[n,r,p.paused]);return s.jsx(it.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});W0.displayName=Pge;function Oge(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Uu(r,{select:t}),document.activeElement!==n)return}function Ige(e){const t=rq(e),n=cF(t,e),r=cF(t.reverse(),e);return[n,r]}function rq(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function cF(e,t){for(const n of e)if(!Rge(n,{upTo:t}))return n}function Rge(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function $ge(e){return e instanceof HTMLInputElement&&"select"in e}function Uu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&$ge(e)&&t&&e.select()}}var uF=Mge();function Mge(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=dF(e,t),e.unshift(t)},remove(t){var n;e=dF(e,t),(n=e[0])==null||n.resume()}}}function dF(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Dge(e){return e.filter(t=>t.tagName!=="A")}var lA=0;function SS(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??hF()),document.body.insertAdjacentElement("beforeend",e[1]??hF()),lA++,()=>{lA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),lA--}},[])}function hF(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var S_="right-scroll-bar-position",N_="width-before-scroll-bar",Lge="with-scroll-bars-hidden",Fge="--removed-body-scroll-bar-size";function cA(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Bge(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Uge=typeof window<"u"?g.useLayoutEffect:g.useEffect,fF=new WeakMap;function Vge(e,t){var n=Bge(null,function(r){return e.forEach(function(a){return cA(a,r)})});return Uge(function(){var r=fF.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||cA(l,null)}),i.forEach(function(l){a.has(l)||cA(l,o)})}fF.set(n,e)},[e]),n}function zge(e){return e}function Hge(e,t){t===void 0&&(t=zge);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function Wge(e){e===void 0&&(e={});var t=Hge(null);return t.options=So({async:!0,ssr:!1},e),t}var aq=function(e){var t=e.sideCar,n=Hd(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,So({},n))};aq.isSideCarExport=!0;function qge(e,t){return e.useMedium(t),aq}var sq=Wge(),uA=function(){},NS=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:uA,onWheelCapture:uA,onTouchMoveCapture:uA}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,p=e.noRelative,v=e.noIsolation,x=e.inert,b=e.allowPinchZoom,_=e.as,j=_===void 0?"div":_,w=e.gapMode,N=Hd(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,C=Vge([n,t]),A=So(So({},N),a);return g.createElement(g.Fragment,null,d&&g.createElement(k,{sideCar:sq,removeScrollBar:u,shards:h,noRelative:p,noIsolation:v,inert:x,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:w}),o?g.cloneElement(g.Children.only(l),So(So({},A),{ref:C})):g.createElement(j,So({},A,{className:c,ref:C}),l))});NS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};NS.classNames={fullWidth:N_,zeroRight:S_};var Kge=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Gge(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Kge();return t&&e.setAttribute("nonce",t),e}function Yge(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Qge(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Xge=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Gge())&&(Yge(t,n),Qge(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Jge=function(){var e=Xge();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},iq=function(){var e=Jge(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Zge={left:0,top:0,right:0,gap:0},dA=function(e){return parseInt(e||"",10)||0},eve=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[dA(n),dA(r),dA(a)]},tve=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Zge;var t=eve(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},nve=iq(),wp="data-scroll-locked",rve=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Lge,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(wp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(S_,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(N_,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(S_," .").concat(S_,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(N_," .").concat(N_,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wp,`] {
    `).concat(Fge,": ").concat(l,`px;
  }
`)},mF=function(){var e=parseInt(document.body.getAttribute(wp)||"0",10);return isFinite(e)?e:0},ave=function(){g.useEffect(function(){return document.body.setAttribute(wp,(mF()+1).toString()),function(){var e=mF()-1;e<=0?document.body.removeAttribute(wp):document.body.setAttribute(wp,e.toString())}},[])},sve=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;ave();var i=g.useMemo(function(){return tve(a)},[a]);return g.createElement(nve,{styles:rve(i,!t,a,n?"":"!important")})},FT=!1;if(typeof window<"u")try{var Lw=Object.defineProperty({},"passive",{get:function(){return FT=!0,!0}});window.addEventListener("test",Lw,Lw),window.removeEventListener("test",Lw,Lw)}catch{FT=!1}var Am=FT?{passive:!1}:!1,ive=function(e){return e.tagName==="TEXTAREA"},oq=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ive(e)&&n[t]==="visible")},ove=function(e){return oq(e,"overflowY")},lve=function(e){return oq(e,"overflowX")},pF=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=lq(e,r);if(a){var i=cq(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},cve=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},uve=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},lq=function(e,t){return e==="v"?ove(t):lve(t)},cq=function(e,t){return e==="v"?cve(t):uve(t)},dve=function(e,t){return e==="h"&&t==="rtl"?-1:1},hve=function(e,t,n,r,a){var i=dve(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),u=!1,d=o>0,h=0,m=0;do{if(!l)break;var p=cq(e,l),v=p[0],x=p[1],b=p[2],_=x-b-i*v;(v||_)&&lq(e,l)&&(h+=_,m+=v);var j=l.parentNode;l=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!a)||!d&&(Math.abs(m)<1||!a))&&(u=!0),u},Fw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gF=function(e){return[e.deltaX,e.deltaY]},vF=function(e){return e&&"current"in e?e.current:e},fve=function(e,t){return e[0]===t[0]&&e[1]===t[1]},mve=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},pve=0,Em=[];function gve(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),a=g.useState(pve++)[0],i=g.useState(iq)[0],o=g.useRef(e);g.useEffect(function(){o.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=fI([e.lockRef.current],(e.shards||[]).map(vF),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var _=Fw(x),j=n.current,w="deltaX"in x?x.deltaX:j[0]-_[0],N="deltaY"in x?x.deltaY:j[1]-_[1],k,C=x.target,A=Math.abs(w)>Math.abs(N)?"h":"v";if("touches"in x&&A==="h"&&C.type==="range")return!1;var P=pF(A,C);if(!P)return!0;if(P?k=A:(k=A==="v"?"h":"v",P=pF(A,C)),!P)return!1;if(!r.current&&"changedTouches"in x&&(w||N)&&(r.current=k),!k)return!0;var O=r.current||k;return hve(O,b,x,O==="h"?w:N,!0)},[]),c=g.useCallback(function(x){var b=x;if(!(!Em.length||Em[Em.length-1]!==i)){var _="deltaY"in b?gF(b):Fw(b),j=t.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&fve(k.delta,_)})[0];if(j&&j.should){b.cancelable&&b.preventDefault();return}if(!j){var w=(o.current.shards||[]).map(vF).filter(Boolean).filter(function(k){return k.contains(b.target)}),N=w.length>0?l(b,w[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),u=g.useCallback(function(x,b,_,j){var w={name:x,delta:b,target:_,should:j,shadowParent:vve(_)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(N){return N!==w})},1)},[]),d=g.useCallback(function(x){n.current=Fw(x),r.current=void 0},[]),h=g.useCallback(function(x){u(x.type,gF(x),x.target,l(x,e.lockRef.current))},[]),m=g.useCallback(function(x){u(x.type,Fw(x),x.target,l(x,e.lockRef.current))},[]);g.useEffect(function(){return Em.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Am),document.addEventListener("touchmove",c,Am),document.addEventListener("touchstart",d,Am),function(){Em=Em.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Am),document.removeEventListener("touchmove",c,Am),document.removeEventListener("touchstart",d,Am)}},[]);var p=e.removeScrollBar,v=e.inert;return g.createElement(g.Fragment,null,v?g.createElement(i,{styles:mve(a)}):null,p?g.createElement(sve,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function vve(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const yve=qge(sq,gve);var q0=g.forwardRef(function(e,t){return g.createElement(NS,So({},e,{ref:t,sideCar:yve}))});q0.classNames=NS.classNames;var xve=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Tm=new WeakMap,Bw=new WeakMap,Uw={},hA=0,uq=function(e){return e&&(e.host||uq(e.parentNode))},bve=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=uq(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},wve=function(e,t,n,r){var a=bve(t,Array.isArray(e)?e:[e]);Uw[n]||(Uw[n]=new WeakMap);var i=Uw[n],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(r),v=p!==null&&p!=="false",x=(Tm.get(m)||0)+1,b=(i.get(m)||0)+1;Tm.set(m,x),i.set(m,b),o.push(m),x===1&&v&&Bw.set(m,!0),b===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return d(t),l.clear(),hA++,function(){o.forEach(function(h){var m=Tm.get(h)-1,p=i.get(h)-1;Tm.set(h,m),i.set(h,p),m||(Bw.has(h)||h.removeAttribute(r),Bw.delete(h)),p||h.removeAttribute(n)}),hA--,hA||(Tm=new WeakMap,Tm=new WeakMap,Bw=new WeakMap,Uw={})}},kS=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=xve(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),wve(r,a,n,"aria-hidden")):function(){return null}},CS="Dialog",[dq,hq]=ga(CS),[_ve,Cl]=dq(CS),fq=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=g.useRef(null),c=g.useRef(null),[u,d]=_i({prop:r,defaultProp:a??!1,onChange:i,caller:CS});return s.jsx(_ve,{scope:t,triggerRef:l,contentRef:c,contentId:Fa(),titleId:Fa(),descriptionId:Fa(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};fq.displayName=CS;var mq="DialogTrigger",pq=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Cl(mq,n),i=Dt(t,a.triggerRef);return s.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":NI(a.open),...r,ref:i,onClick:We(e.onClick,a.onOpenToggle)})});pq.displayName=mq;var jI="DialogPortal",[jve,gq]=dq(jI,{forceMount:void 0}),vq=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Cl(jI,t);return s.jsx(jve,{scope:t,forceMount:n,children:g.Children.map(r,o=>s.jsx(Aa,{present:n||i.open,children:s.jsx(Fg,{asChild:!0,container:a,children:o})}))})};vq.displayName=jI;var yj="DialogOverlay",yq=g.forwardRef((e,t)=>{const n=gq(yj,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Cl(yj,e.__scopeDialog);return i.modal?s.jsx(Aa,{present:r||i.open,children:s.jsx(Nve,{...a,ref:t})}):null});yq.displayName=yj;var Sve=Ad("DialogOverlay.RemoveScroll"),Nve=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Cl(yj,n);return s.jsx(q0,{as:Sve,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(it.div,{"data-state":NI(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),bf="DialogContent",xq=g.forwardRef((e,t)=>{const n=gq(bf,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Cl(bf,e.__scopeDialog);return s.jsx(Aa,{present:r||i.open,children:i.modal?s.jsx(kve,{...a,ref:t}):s.jsx(Cve,{...a,ref:t})})});xq.displayName=bf;var kve=g.forwardRef((e,t)=>{const n=Cl(bf,e.__scopeDialog),r=g.useRef(null),a=Dt(t,n.contentRef,r);return g.useEffect(()=>{const i=r.current;if(i)return kS(i)},[]),s.jsx(bq,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:We(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:We(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:We(e.onFocusOutside,i=>i.preventDefault())})}),Cve=g.forwardRef((e,t)=>{const n=Cl(bf,e.__scopeDialog),r=g.useRef(!1),a=g.useRef(!1);return s.jsx(bq,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),bq=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Cl(bf,n),c=g.useRef(null),u=Dt(t,c);return SS(),s.jsxs(s.Fragment,{children:[s.jsx(W0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Bf,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":NI(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Eve,{titleId:l.titleId}),s.jsx(Pve,{contentRef:c,descriptionId:l.descriptionId})]})]})}),SI="DialogTitle",wq=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Cl(SI,n);return s.jsx(it.h2,{id:a.titleId,...r,ref:t})});wq.displayName=SI;var _q="DialogDescription",jq=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Cl(_q,n);return s.jsx(it.p,{id:a.descriptionId,...r,ref:t})});jq.displayName=_q;var Sq="DialogClose",Nq=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Cl(Sq,n);return s.jsx(it.button,{type:"button",...r,ref:t,onClick:We(e.onClick,()=>a.onOpenChange(!1))})});Nq.displayName=Sq;function NI(e){return e?"open":"closed"}var kq="DialogTitleWarning",[Ave,Cq]=_le(kq,{contentName:bf,titleName:SI,docsSlug:"dialog"}),Eve=({titleId:e})=>{const t=Cq(kq),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Tve="DialogDescriptionWarning",Pve=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Cq(Tve).contentName}}.`;return g.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},AS=fq,kI=pq,ES=vq,Gg=yq,Yg=xq,K0=wq,G0=jq,TS=Nq;const Aq=AS,Ove=kI,Ive=ES,Eq=g.forwardRef(({className:e,...t},n)=>s.jsx(Gg,{className:je("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Eq.displayName=Gg.displayName;const Rve=Uf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),CI=g.forwardRef(({side:e="right",className:t,children:n,...r},a)=>s.jsxs(Ive,{children:[s.jsx(Eq,{}),s.jsxs(Yg,{ref:a,className:je(Rve({side:e}),t),...r,children:[n,s.jsxs(TS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Cs,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));CI.displayName=Yg.displayName;const $ve=g.forwardRef(({className:e,...t},n)=>s.jsx(K0,{ref:n,className:je("text-lg font-semibold text-foreground",e),...t}));$ve.displayName=K0.displayName;const Mve=g.forwardRef(({className:e,...t},n)=>s.jsx(G0,{ref:n,className:je("text-sm text-muted-foreground",e),...t}));Mve.displayName=G0.displayName;var PS="Popover",[Tq,YYe]=ga(PS,[Vd]),Y0=Vd(),[Dve,qd]=Tq(PS),Pq=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Y0(t),c=g.useRef(null),[u,d]=g.useState(!1),[h,m]=_i({prop:r,defaultProp:a??!1,onChange:i,caller:PS});return s.jsx(fS,{...l,children:s.jsx(Dve,{scope:t,contentId:Fa(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:g.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:g.useCallback(()=>d(!0),[]),onCustomAnchorRemove:g.useCallback(()=>d(!1),[]),modal:o,children:n})})};Pq.displayName=PS;var Oq="PopoverAnchor",Lve=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=qd(Oq,n),i=Y0(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return g.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(U0,{...i,...r,ref:t})});Lve.displayName=Oq;var Iq="PopoverTrigger",Rq=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=qd(Iq,n),i=Y0(n),o=Dt(t,a.triggerRef),l=s.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Fq(a.open),...r,ref:o,onClick:We(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(U0,{asChild:!0,...i,children:l})});Rq.displayName=Iq;var AI="PopoverPortal",[Fve,Bve]=Tq(AI,{forceMount:void 0}),$q=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=qd(AI,t);return s.jsx(Fve,{scope:t,forceMount:n,children:s.jsx(Aa,{present:n||i.open,children:s.jsx(Fg,{asChild:!0,container:a,children:r})})})};$q.displayName=AI;var Xp="PopoverContent",Mq=g.forwardRef((e,t)=>{const n=Bve(Xp,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=qd(Xp,e.__scopePopover);return s.jsx(Aa,{present:r||i.open,children:i.modal?s.jsx(Vve,{...a,ref:t}):s.jsx(zve,{...a,ref:t})})});Mq.displayName=Xp;var Uve=Ad("PopoverContent.RemoveScroll"),Vve=g.forwardRef((e,t)=>{const n=qd(Xp,e.__scopePopover),r=g.useRef(null),a=Dt(t,r),i=g.useRef(!1);return g.useEffect(()=>{const o=r.current;if(o)return kS(o)},[]),s.jsx(q0,{as:Uve,allowPinchZoom:!0,children:s.jsx(Dq,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:We(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:We(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:We(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),zve=g.forwardRef((e,t)=>{const n=qd(Xp,e.__scopePopover),r=g.useRef(!1),a=g.useRef(!1);return s.jsx(Dq,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Dq=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=e,m=qd(Xp,n),p=Y0(n);return SS(),s.jsx(W0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Bf,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(mS,{"data-state":Fq(m.open),role:"dialog",id:m.contentId,...p,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Lq="PopoverClose",Hve=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=qd(Lq,n);return s.jsx(it.button,{type:"button",...r,ref:t,onClick:We(e.onClick,()=>a.onOpenChange(!1))})});Hve.displayName=Lq;var Wve="PopoverArrow",qve=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Y0(n);return s.jsx(pS,{...a,...r,ref:t})});qve.displayName=Wve;function Fq(e){return e?"open":"closed"}var Kve=Pq,Gve=Rq,Yve=$q,Bq=Mq;const Q0=Kve,X0=Gve,Qg=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>s.jsx(Yve,{children:s.jsx(Bq,{ref:a,align:t,sideOffset:n,className:je("z-[100] w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Qg.displayName=Bq.displayName;var Qve=g.createContext(void 0);function zf(e){const t=g.useContext(Qve);return e||t||"ltr"}function Mx(e,[t,n]){return Math.min(n,Math.max(t,e))}function Xve(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var EI="ScrollArea",[Uq,QYe]=ga(EI),[Jve,Fo]=Uq(EI),Vq=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=g.useState(null),[u,d]=g.useState(null),[h,m]=g.useState(null),[p,v]=g.useState(null),[x,b]=g.useState(null),[_,j]=g.useState(0),[w,N]=g.useState(0),[k,C]=g.useState(!1),[A,P]=g.useState(!1),O=Dt(t,$=>c($)),T=zf(a);return s.jsx(Jve,{scope:n,type:r,dir:T,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:C,scrollbarY:x,onScrollbarYChange:b,scrollbarYEnabled:A,onScrollbarYEnabledChange:P,onCornerWidthChange:j,onCornerHeightChange:N,children:s.jsx(it.div,{dir:T,...o,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});Vq.displayName=EI;var zq="ScrollAreaViewport",Hq=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Fo(zq,n),l=g.useRef(null),c=Dt(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(it.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Hq.displayName=zq;var cc="ScrollAreaScrollbar",TI=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Fo(cc,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return g.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(Zve,{...r,ref:t,forceMount:n}):a.type==="scroll"?s.jsx(eye,{...r,ref:t,forceMount:n}):a.type==="auto"?s.jsx(Wq,{...r,ref:t,forceMount:n}):a.type==="always"?s.jsx(PI,{...r,ref:t}):null});TI.displayName=cc;var Zve=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Fo(cc,e.__scopeScrollArea),[i,o]=g.useState(!1);return g.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(Aa,{present:n||i,children:s.jsx(Wq,{"data-state":i?"visible":"hidden",...r,ref:t})})}),eye=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Fo(cc,e.__scopeScrollArea),i=e.orientation==="horizontal",o=IS(()=>c("SCROLL_END"),100),[l,c]=Xve("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),g.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const p=u[d];h!==p&&(c("SCROLL"),o()),h=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),s.jsx(Aa,{present:n||l!=="hidden",children:s.jsx(PI,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:We(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:We(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Wq=g.forwardRef((e,t)=>{const n=Fo(cc,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=g.useState(!1),l=e.orientation==="horizontal",c=IS(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Jp(n.viewport,c),Jp(n.content,c),s.jsx(Aa,{present:r||i,children:s.jsx(PI,{"data-state":i?"visible":"hidden",...a,ref:t})})}),PI=g.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Fo(cc,e.__scopeScrollArea),i=g.useRef(null),o=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Qq(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,p){return iye(m,o.current,l,p)}return n==="horizontal"?s.jsx(tye,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,p=yF(m,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?s.jsx(nye,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,p=yF(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),tye=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Fo(cc,e.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),u=Dt(t,c,i.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(Kq,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":OS(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),Jq(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:bj(o.paddingLeft),paddingEnd:bj(o.paddingRight)}})}})}),nye=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Fo(cc,e.__scopeScrollArea),[o,l]=g.useState(),c=g.useRef(null),u=Dt(t,c,i.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(Kq,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":OS(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),Jq(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:bj(o.paddingTop),paddingEnd:bj(o.paddingBottom)}})}})}),[rye,qq]=Uq(cc),Kq=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,p=Fo(cc,n),[v,x]=g.useState(null),b=Dt(t,O=>x(O)),_=g.useRef(null),j=g.useRef(""),w=p.viewport,N=r.content-r.viewport,k=aa(d),C=aa(c),A=IS(h,10);function P(O){if(_.current){const T=O.clientX-_.current.left,$=O.clientY-_.current.top;u({x:T,y:$})}}return g.useEffect(()=>{const O=T=>{const $=T.target;(v==null?void 0:v.contains($))&&k(T,N)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[w,v,N,k]),g.useEffect(C,[r,C]),Jp(v,A),Jp(p.content,A),s.jsx(rye,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:aa(i),onThumbPointerUp:aa(o),onThumbPositionChange:C,onThumbPointerDown:aa(l),children:s.jsx(it.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:We(e.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),_.current=v.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(O))}),onPointerMove:We(e.onPointerMove,P),onPointerUp:We(e.onPointerUp,O=>{const T=O.target;T.hasPointerCapture(O.pointerId)&&T.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=j.current,p.viewport&&(p.viewport.style.scrollBehavior=""),_.current=null})})})}),xj="ScrollAreaThumb",Gq=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=qq(xj,e.__scopeScrollArea);return s.jsx(Aa,{present:n||a.hasThumb,children:s.jsx(aye,{ref:t,...r})})}),aye=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Fo(xj,n),o=qq(xj,n),{onThumbPositionChange:l}=o,c=Dt(t,h=>o.onThumbChange(h)),u=g.useRef(void 0),d=IS(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!u.current){const p=oye(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,l]),s.jsx(it.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:We(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),v=h.clientX-p.left,x=h.clientY-p.top;o.onThumbPointerDown({x:v,y:x})}),onPointerUp:We(e.onPointerUp,o.onThumbPointerUp)})});Gq.displayName=xj;var OI="ScrollAreaCorner",Yq=g.forwardRef((e,t)=>{const n=Fo(OI,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(sye,{...e,ref:t}):null});Yq.displayName=OI;var sye=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Fo(OI,n),[i,o]=g.useState(0),[l,c]=g.useState(0),u=!!(i&&l);return Jp(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Jp(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?s.jsx(it.div,{...r,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function bj(e){return e?parseInt(e,10):0}function Qq(e,t){const n=e/t;return isNaN(n)?0:n}function OS(e){const t=Qq(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function iye(e,t,n,r="ltr"){const a=OS(n),i=a/2,o=t||i,l=a-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return Xq([c,u],h)(e)}function yF(e,t,n="ltr"){const r=OS(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=Mx(e,c);return Xq([0,o],[0,l])(u)}function Xq(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Jq(e,t){return e>0&&e<t}var oye=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function IS(e,t){const n=aa(e),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Jp(e,t){const n=aa(t);sa(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Zq=Vq,lye=Hq,cye=Yq;const As=g.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(Zq,{ref:r,className:je("relative overflow-hidden",e),...n,children:[s.jsx(lye,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(wj,{}),s.jsx(cye,{})]}));As.displayName=Zq.displayName;const wj=g.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(TI,{ref:r,orientation:t,className:je("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(Gq,{className:"relative flex-1 rounded-full bg-border"})}));wj.displayName=TI.displayName;const uye=async e=>{try{console.log(" Fetching notification configs for user:",e);const t=await fetch(`${ht(It.TABLES.NOTIFICATION_CONFIGS)}?where=(user_id,eq,${e})`,{headers:lt()});if(!t.ok)throw console.error(" API Error:",t.status,t.statusText),new Error("Failed to fetch configs");const n=await t.json();return console.log(" Raw API response:",n),(n.list||[]).map(r=>({...r,id:r.CreatedAt,selected_metrics:typeof r.selected_metrics=="string"?JSON.parse(r.selected_metrics):r.selected_metrics}))}catch(t){return console.error("Error fetching notification configs:",t),[]}},dye=async e=>{try{const t=await fetch(ht(It.TABLES.NOTIFICATION_CONFIGS),{method:"POST",headers:lt(),body:JSON.stringify({...e,selected_metrics:JSON.stringify(e.selected_metrics)})});if(!t.ok)throw new Error("Failed to create config");return await t.json()}catch(t){throw console.error("Error creating notification config:",t),t}},hye=async(e,t)=>{try{const n={...t};n.selected_metrics&&(n.selected_metrics=JSON.stringify(n.selected_metrics));const r=await fetch(`${ht(It.TABLES.NOTIFICATION_CONFIGS)}?where=(CreatedAt,eq,${e})`,{method:"PATCH",headers:lt(),body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to update config");return await r.json()}catch(n){throw console.error("Error updating notification config:",n),n}},fye=async e=>{try{const t=await fetch(`${ht(It.TABLES.NOTIFICATION_CONFIGS)}?where=(CreatedAt,eq,${e})`,{method:"DELETE",headers:lt()});if(!t.ok)throw new Error("Failed to delete config");return await t.json()}catch(t){throw console.error("Error deleting notification config:",t),t}},mye=async e=>{try{const t=await fetch(`${ht(It.TABLES.NOTIFICATIONS)}?where=(user_id,eq,${e})~and(is_read,eq,false)&sort=-CreatedAt&limit=20`,{headers:lt()});if(!t.ok)throw new Error("Failed to fetch notifications");return((await t.json()).list||[]).map((r,a)=>({...r,created_at:r.created_at||r.CreatedAt||new Date().toISOString()}))}catch(t){return console.error("Error fetching notifications:",t),[]}},xF=async e=>{try{const t=await fetch(ht(It.TABLES.NOTIFICATIONS),{method:"PATCH",headers:lt(),body:JSON.stringify({Id:e,is_read:!0})});if(!t.ok)throw new Error("Failed to mark as read");return await t.json()}catch(t){throw console.error("Error marking notification as read:",t),t}},II=6048e5,pye=864e5,e7=6e4,t7=36e5,Vw=43200,bF=1440,wF=Symbol.for("constructDateFrom");function pa(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&wF in e?e[wF](t):e instanceof Date?new e.constructor(t):new Date(t)}function vn(e,t){return pa(t||e,e)}function Us(e,t,n){const r=vn(e,n==null?void 0:n.in);return isNaN(t)?pa((n==null?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Zi(e,t,n){const r=vn(e,n==null?void 0:n.in);if(isNaN(t))return pa((n==null?void 0:n.in)||e,NaN);if(!t)return r;const a=r.getDate(),i=pa((n==null?void 0:n.in)||e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const o=i.getDate();return a>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),a),r)}let gye={};function Xg(){return gye}function ic(e,t){var l,c,u,d;const n=Xg(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=vn(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function wf(e,t){return ic(e,{...t,weekStartsOn:1})}function n7(e,t){const n=vn(e,t==null?void 0:t.in),r=n.getFullYear(),a=pa(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=wf(a),o=pa(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=wf(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function Zp(e){const t=vn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function fu(e,...t){const n=pa.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function No(e,t){const n=vn(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function pl(e,t,n){const[r,a]=fu(n==null?void 0:n.in,e,t),i=No(r),o=No(a),l=+i-Zp(i),c=+o-Zp(o);return Math.round((l-c)/pye)}function vye(e,t){const n=n7(e,t),r=pa(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),wf(r)}function BT(e,t,n){return Us(e,t*7,n)}function yye(e,t,n){return Zi(e,t*12,n)}function xye(e,t){let n,r=t==null?void 0:t.in;return e.forEach(a=>{!r&&typeof a=="object"&&(r=pa.bind(null,a));const i=vn(a,r);(!n||n<i||isNaN(+i))&&(n=i)}),pa(r,n||NaN)}function r7(e,t){let n,r=t==null?void 0:t.in;return e.forEach(a=>{!r&&typeof a=="object"&&(r=pa.bind(null,a));const i=vn(a,r);(!n||n>i||isNaN(+i))&&(n=i)}),pa(r,n||NaN)}function k_(e,t){const n=+vn(e)-+vn(t);return n<0?-1:n>0?1:n}function a7(e){return pa(e,Date.now())}function ma(e,t,n){const[r,a]=fu(n==null?void 0:n.in,e,t);return+No(r)==+No(a)}function RI(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function bye(e){return!(!RI(e)&&typeof e!="number"||isNaN(+vn(e)))}function eg(e,t,n){const[r,a]=fu(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function wye(e,t,n){const[r,a]=fu(n==null?void 0:n.in,e,t),i=ic(r,n),o=ic(a,n),l=+i-Zp(i),c=+o-Zp(o);return Math.round((l-c)/II)}function _ye(e,t,n){const[r,a]=fu(n==null?void 0:n.in,e,t),i=_F(r,a),o=Math.abs(pl(r,a));r.setDate(r.getDate()-i*o);const l=+(_F(r,a)===-i),c=i*(o-l);return c===0?0:c}function _F(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function jye(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function Sye(e,t){return+vn(e)-+vn(t)}function Bh(e,t){const n=vn(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function _f(e,t){const n=vn(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Nye(e,t){const n=vn(e,t==null?void 0:t.in);return+Bh(n,t)==+_f(n,t)}function kye(e,t,n){const[r,a,i]=fu(n==null?void 0:n.in,e,e,t),o=k_(a,i),l=Math.abs(eg(a,i));if(l<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*l);let c=k_(a,i)===-o;Nye(r)&&l===1&&k_(r,i)===1&&(c=!1);const u=o*(l-+c);return u===0?0:u}function Cye(e,t,n){const r=Sye(e,t)/1e3;return jye(n==null?void 0:n.roundingMethod)(r)}function Qa(e,t){const n=vn(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function jF(e,t){const n=vn(e,t==null?void 0:t.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function _j(e,t){const n=vn(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function $I(e,t){var l,c,u,d;const n=Xg(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=vn(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?-7:0)+6-(i-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function s7(e,t){return $I(e,{...t,weekStartsOn:1})}const Aye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Eye=(e,t,n)=>{let r;const a=Aye[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _p(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Tye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Pye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Oye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Iye={date:_p({formats:Tye,defaultWidth:"full"}),time:_p({formats:Pye,defaultWidth:"full"}),dateTime:_p({formats:Oye,defaultWidth:"full"})},Rye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$ye=(e,t,n,r)=>Rye[e];function Hl(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Mye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Dye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Uye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vye=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},zye={ordinalNumber:Vye,era:Hl({values:Mye,defaultWidth:"wide"}),quarter:Hl({values:Dye,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Hl({values:Lye,defaultWidth:"wide"}),day:Hl({values:Fye,defaultWidth:"wide"}),dayPeriod:Hl({values:Bye,defaultWidth:"wide",formattingValues:Uye,defaultFormattingWidth:"wide"})};function Wl(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Wye(l,h=>h.test(o)):Hye(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function Hye(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Wye(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function i7(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const qye=/^(\d+)(th|st|nd|rd)?/i,Kye=/\d+/i,Gye={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Yye={any:[/^b/i,/^(a|c)/i]},Qye={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xye={any:[/1/i,/2/i,/3/i,/4/i]},Jye={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zye={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},exe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},txe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nxe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rxe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},axe={ordinalNumber:i7({matchPattern:qye,parsePattern:Kye,valueCallback:e=>parseInt(e,10)}),era:Wl({matchPatterns:Gye,defaultMatchWidth:"wide",parsePatterns:Yye,defaultParseWidth:"any"}),quarter:Wl({matchPatterns:Qye,defaultMatchWidth:"wide",parsePatterns:Xye,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Wl({matchPatterns:Jye,defaultMatchWidth:"wide",parsePatterns:Zye,defaultParseWidth:"any"}),day:Wl({matchPatterns:exe,defaultMatchWidth:"wide",parsePatterns:txe,defaultParseWidth:"any"}),dayPeriod:Wl({matchPatterns:nxe,defaultMatchWidth:"any",parsePatterns:rxe,defaultParseWidth:"any"})},MI={code:"en-US",formatDistance:Eye,formatLong:Iye,formatRelative:$ye,localize:zye,match:axe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sxe(e,t){const n=vn(e,t==null?void 0:t.in);return pl(n,_j(n))+1}function o7(e,t){const n=vn(e,t==null?void 0:t.in),r=+wf(n)-+vye(n);return Math.round(r/II)+1}function l7(e,t){var d,h,m,p;const n=vn(e,t==null?void 0:t.in),r=n.getFullYear(),a=Xg(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=pa((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=ic(o,t),c=pa((t==null?void 0:t.in)||e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=ic(c,t);return+n>=+l?r+1:+n>=+u?r:r-1}function ixe(e,t){var l,c,u,d;const n=Xg(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=l7(e,t),i=pa((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),ic(i,t)}function c7(e,t){const n=vn(e,t==null?void 0:t.in),r=+ic(n,t)-+ixe(n,t);return Math.round(r/II)+1}function ir(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Fu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ir(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ir(n+1,2)},d(e,t){return ir(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ir(e.getHours()%12||12,t.length)},H(e,t){return ir(e.getHours(),t.length)},m(e,t){return ir(e.getMinutes(),t.length)},s(e,t){return ir(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return ir(a,t.length)}},Pm={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},SF={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Fu.y(e,t)},Y:function(e,t,n,r){const a=l7(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return ir(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):ir(i,t.length)},R:function(e,t){const n=n7(e);return ir(n,t.length)},u:function(e,t){const n=e.getFullYear();return ir(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ir(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ir(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Fu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ir(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=c7(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):ir(a,t.length)},I:function(e,t,n){const r=o7(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ir(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Fu.d(e,t)},D:function(e,t,n){const r=sxe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ir(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ir(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ir(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return ir(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Pm.noon:r===0?a=Pm.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Pm.evening:r>=12?a=Pm.afternoon:r>=4?a=Pm.morning:a=Pm.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Fu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Fu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ir(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ir(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Fu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Fu.s(e,t)},S:function(e,t){return Fu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return kF(r);case"XXXX":case"XX":return Ih(r);case"XXXXX":case"XXX":default:return Ih(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return kF(r);case"xxxx":case"xx":return Ih(r);case"xxxxx":case"xxx":default:return Ih(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+NF(r,":");case"OOOO":default:return"GMT"+Ih(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+NF(r,":");case"zzzz":default:return"GMT"+Ih(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return ir(r,t.length)},T:function(e,t,n){return ir(+e,t.length)}};function NF(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+ir(i,2)}function kF(e,t){return e%60===0?(e>0?"-":"+")+ir(Math.abs(e)/60,2):Ih(e,t)}function Ih(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=ir(Math.trunc(r/60),2),i=ir(r%60,2);return n+a+t+i}const CF=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},u7=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},oxe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return CF(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",CF(r,t)).replace("{{time}}",u7(a,t))},lxe={p:u7,P:oxe},cxe=/^D+$/,uxe=/^Y+$/,dxe=["D","DD","YY","YYYY"];function hxe(e){return cxe.test(e)}function fxe(e){return uxe.test(e)}function mxe(e,t,n){const r=pxe(e,t,n);if(console.warn(r),dxe.includes(e))throw new RangeError(r)}function pxe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gxe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vxe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yxe=/^'([^]*?)'?$/,xxe=/''/g,bxe=/[a-zA-Z]/;function Bt(e,t,n){var d,h,m,p,v,x,b,_;const r=Xg(),a=(n==null?void 0:n.locale)??r.locale??MI,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((x=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??r.weekStartsOn??((_=(b=r.locale)==null?void 0:b.options)==null?void 0:_.weekStartsOn)??0,l=vn(e,n==null?void 0:n.in);if(!bye(l))throw new RangeError("Invalid time value");let c=t.match(vxe).map(j=>{const w=j[0];if(w==="p"||w==="P"){const N=lxe[w];return N(j,a.formatLong)}return j}).join("").match(gxe).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const w=j[0];if(w==="'")return{isToken:!1,value:wxe(j)};if(SF[w])return{isToken:!0,value:j};if(w.match(bxe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:j}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(j=>{if(!j.isToken)return j.value;const w=j.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&fxe(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&hxe(w))&&mxe(w,t,String(e));const N=SF[w[0]];return N(l,w,a.localize,u)}).join("")}function wxe(e){const t=e.match(yxe);return t?t[1].replace(xxe,"'"):e}function _xe(e,t,n){const r=Xg(),a=(n==null?void 0:n.locale)??r.locale??MI,i=2520,o=k_(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[c,u]=fu(n==null?void 0:n.in,...o>0?[t,e]:[e,t]),d=Cye(u,c),h=(Zp(u)-Zp(c))/1e3,m=Math.round((d-h)/60);let p;if(m<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,l):d<10?a.formatDistance("lessThanXSeconds",10,l):d<20?a.formatDistance("lessThanXSeconds",20,l):d<40?a.formatDistance("halfAMinute",0,l):d<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):m===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",m,l);if(m<45)return a.formatDistance("xMinutes",m,l);if(m<90)return a.formatDistance("aboutXHours",1,l);if(m<bF){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,l)}else{if(m<i)return a.formatDistance("xDays",1,l);if(m<Vw){const v=Math.round(m/bF);return a.formatDistance("xDays",v,l)}else if(m<Vw*2)return p=Math.round(m/Vw),a.formatDistance("aboutXMonths",p,l)}if(p=kye(u,c),p<12){const v=Math.round(m/Vw);return a.formatDistance("xMonths",v,l)}else{const v=p%12,x=Math.trunc(p/12);return v<3?a.formatDistance("aboutXYears",x,l):v<9?a.formatDistance("overXYears",x,l):a.formatDistance("almostXYears",x+1,l)}}function jxe(e,t){return _xe(e,a7(e),t)}function Sxe(e,t){const n=vn(e,t==null?void 0:t.in),r=n.getFullYear(),a=n.getMonth(),i=pa(n,0);return i.setFullYear(r,a+1,0),i.setHours(0,0,0,0),i.getDate()}function Nxe(e){return Math.trunc(+vn(e)/1e3)}function kxe(e,t){const n=vn(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(0,0,0,0),vn(n,t==null?void 0:t.in)}function Cxe(e,t){const n=vn(e,t==null?void 0:t.in);return wye(kxe(n,t),Qa(n,t),t)+1}function UT(e,t){return+vn(e)>+vn(t)}function d7(e,t){return+vn(e)<+vn(t)}function DI(e,t,n){const[r,a]=fu(n==null?void 0:n.in,e,t);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}function Axe(e,t,n){const[r,a]=fu(n==null?void 0:n.in,e,t);return r.getFullYear()===a.getFullYear()}function Exe(e,t){return ma(pa(e,e),a7(e))}function cy(e,t,n){const r=+vn(e,n==null?void 0:n.in),[a,i]=[+vn(t.start,n==null?void 0:n.in),+vn(t.end,n==null?void 0:n.in)].sort((o,l)=>o-l);return r>=a&&r<=i}function ld(e,t,n){return Us(e,-t,n)}function Om(e,t){const n=()=>pa(t==null?void 0:t.in,NaN),a=Ixe(e);let i;if(a.date){const u=Rxe(a.date,2);i=$xe(u.restDateString,u.year)}if(!i||isNaN(+i))return n();const o=+i;let l=0,c;if(a.time&&(l=Mxe(a.time),isNaN(l)))return n();if(a.timezone){if(c=Dxe(a.timezone),isNaN(c))return n()}else{const u=new Date(o+l),d=vn(0,t==null?void 0:t.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return vn(o+l+c,t==null?void 0:t.in)}const zw={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Txe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Pxe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Oxe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ixe(e){const t={},n=e.split(zw.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],zw.timeZoneDelimiter.test(t.date)&&(t.date=e.split(zw.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const a=zw.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function Rxe(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function $xe(e,t){if(t===null)return new Date(NaN);const n=e.match(Txe);if(!n)return new Date(NaN);const r=!!n[4],a=uy(n[1]),i=uy(n[2])-1,o=uy(n[3]),l=uy(n[4]),c=uy(n[5])-1;if(r)return Vxe(t,l,c)?Lxe(t,l,c):new Date(NaN);{const u=new Date(0);return!Bxe(t,i,o)||!Uxe(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}}function uy(e){return e?parseInt(e):1}function Mxe(e){const t=e.match(Pxe);if(!t)return NaN;const n=fA(t[1]),r=fA(t[2]),a=fA(t[3]);return zxe(n,r,a)?n*t7+r*e7+a*1e3:NaN}function fA(e){return e&&parseFloat(e.replace(",","."))||0}function Dxe(e){if(e==="Z")return 0;const t=e.match(Oxe);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Hxe(r,a)?n*(r*t7+a*e7):NaN}function Lxe(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=r.getUTCDay()||7,i=(t-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+i),r}const Fxe=[31,null,31,30,31,30,31,31,30,31,30,31];function h7(e){return e%400===0||e%4===0&&e%100!==0}function Bxe(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Fxe[t]||(h7(e)?29:28))}function Uxe(e,t){return t>=1&&t<=(h7(e)?366:365)}function Vxe(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function zxe(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function Hxe(e,t){return t>=0&&t<=59}function mA(e,t,n){const r=vn(e,n==null?void 0:n.in),a=r.getFullYear(),i=r.getDate(),o=pa(e,0);o.setFullYear(a,t,15),o.setHours(0,0,0,0);const l=Sxe(o);return r.setMonth(t,Math.min(i,l)),r}function AF(e,t,n){const r=vn(e,n==null?void 0:n.in);return isNaN(+r)?pa(e,NaN):(r.setFullYear(t),r)}const Wxe={lessThanXSeconds:{one:"di 1 giy",other:"di {{count}} giy"},xSeconds:{one:"1 giy",other:"{{count}} giy"},halfAMinute:"na pht",lessThanXMinutes:{one:"di 1 pht",other:"di {{count}} pht"},xMinutes:{one:"1 pht",other:"{{count}} pht"},aboutXHours:{one:"khong 1 gi",other:"khong {{count}} gi"},xHours:{one:"1 gi",other:"{{count}} gi"},xDays:{one:"1 ngy",other:"{{count}} ngy"},aboutXWeeks:{one:"khong 1 tun",other:"khong {{count}} tun"},xWeeks:{one:"1 tun",other:"{{count}} tun"},aboutXMonths:{one:"khong 1 thng",other:"khong {{count}} thng"},xMonths:{one:"1 thng",other:"{{count}} thng"},aboutXYears:{one:"khong 1 nm",other:"khong {{count}} nm"},xYears:{one:"1 nm",other:"{{count}} nm"},overXYears:{one:"hn 1 nm",other:"hn {{count}} nm"},almostXYears:{one:"gn 1 nm",other:"gn {{count}} nm"}},qxe=(e,t,n)=>{let r;const a=Wxe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?r+" na":r+" trc":r},Kxe={full:"EEEE, 'ngy' d MMMM 'nm' y",long:"'ngy' d MMMM 'nm' y",medium:"d MMM 'nm' y",short:"dd/MM/y"},Gxe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Yxe={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Qxe={date:_p({formats:Kxe,defaultWidth:"full"}),time:_p({formats:Gxe,defaultWidth:"full"}),dateTime:_p({formats:Yxe,defaultWidth:"full"})},Xxe={lastWeek:"eeee 'tun trc vo lc' p",yesterday:"'hm qua vo lc' p",today:"'hm nay vo lc' p",tomorrow:"'ngy mai vo lc' p",nextWeek:"eeee 'ti vo lc' p",other:"P"},Jxe=(e,t,n,r)=>Xxe[e],Zxe={narrow:["TCN","SCN"],abbreviated:["trc CN","sau CN"],wide:["trc Cng Nguyn","sau Cng Nguyn"]},e0e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Qu 1","Qu 2","Qu 3","Qu 4"]},t0e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["qu I","qu II","qu III","qu IV"]},n0e={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],wide:["Thng Mt","Thng Hai","Thng Ba","Thng T","Thng Nm","Thng Su","Thng By","Thng Tm","Thng Chn","Thng Mi","Thng Mi Mt","Thng Mi Hai"]},r0e={narrow:["01","02","03","04","05","06","07","08","09","10","11","12"],abbreviated:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],wide:["thng 01","thng 02","thng 03","thng 04","thng 05","thng 06","thng 07","thng 08","thng 09","thng 10","thng 11","thng 12"]},a0e={narrow:["CN","T2","T3","T4","T5","T6","T7"],short:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],abbreviated:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],wide:["Ch Nht","Th Hai","Th Ba","Th T","Th Nm","Th Su","Th By"]},s0e={narrow:{am:"am",pm:"pm",midnight:"na m",noon:"tr",morning:"sg",afternoon:"ch",evening:"ti",night:"m"},abbreviated:{am:"AM",pm:"PM",midnight:"na m",noon:"tra",morning:"sng",afternoon:"chiu",evening:"ti",night:"m"},wide:{am:"SA",pm:"CH",midnight:"na m",noon:"tra",morning:"sng",afternoon:"chiu",evening:"ti",night:"m"}},i0e={narrow:{am:"am",pm:"pm",midnight:"na m",noon:"tr",morning:"sg",afternoon:"ch",evening:"ti",night:"m"},abbreviated:{am:"AM",pm:"PM",midnight:"na m",noon:"tra",morning:"sng",afternoon:"chiu",evening:"ti",night:"m"},wide:{am:"SA",pm:"CH",midnight:"na m",noon:"gia tra",morning:"vo bui sng",afternoon:"vo bui chiu",evening:"vo bui ti",night:"vo ban m"}},o0e=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(r==="quarter")switch(n){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV"}else if(r==="day")switch(n){case 1:return"th 2";case 2:return"th 3";case 3:return"th 4";case 4:return"th 5";case 5:return"th 6";case 6:return"th 7";case 7:return"ch nht"}else{if(r==="week")return n===1?"th nht":"th "+n;if(r==="dayOfYear")return n===1?"u tin":"th "+n}return String(n)},l0e={ordinalNumber:o0e,era:Hl({values:Zxe,defaultWidth:"wide"}),quarter:Hl({values:e0e,defaultWidth:"wide",formattingValues:t0e,defaultFormattingWidth:"wide",argumentCallback:e=>e-1}),month:Hl({values:n0e,defaultWidth:"wide",formattingValues:r0e,defaultFormattingWidth:"wide"}),day:Hl({values:a0e,defaultWidth:"wide"}),dayPeriod:Hl({values:s0e,defaultWidth:"wide",formattingValues:i0e,defaultFormattingWidth:"wide"})},c0e=/^(\d+)/i,u0e=/\d+/i,d0e={narrow:/^(tcn|scn)/i,abbreviated:/^(trc CN|sau CN)/i,wide:/^(trc Cng Nguyn|sau Cng Nguyn)/i},h0e={any:[/^t/i,/^s/i]},f0e={narrow:/^([1234]|i{1,3}v?)/i,abbreviated:/^q([1234]|i{1,3}v?)/i,wide:/^qu ([1234]|i{1,3}v?)/i},m0e={any:[/(1|i)$/i,/(2|ii)$/i,/(3|iii)$/i,/(4|iv)$/i]},p0e={narrow:/^(0?[2-9]|10|11|12|0?1)/i,abbreviated:/^thg[ _]?(0?[1-9](?!\d)|10|11|12)/i,wide:/^thng ?(Mt|Hai|Ba|T|Nm|Su|By|Tm|Chn|Mi|Mi ?Mt|Mi ?Hai|0?[1-9](?!\d)|10|11|12)/i},g0e={narrow:[/0?1$/i,/0?2/i,/3/,/4/,/5/,/6/,/7/,/8/,/9/,/10/,/11/,/12/],abbreviated:[/^thg[ _]?0?1(?!\d)/i,/^thg[ _]?0?2/i,/^thg[ _]?0?3/i,/^thg[ _]?0?4/i,/^thg[ _]?0?5/i,/^thg[ _]?0?6/i,/^thg[ _]?0?7/i,/^thg[ _]?0?8/i,/^thg[ _]?0?9/i,/^thg[ _]?10/i,/^thg[ _]?11/i,/^thg[ _]?12/i],wide:[/^thng ?(Mt|0?1(?!\d))/i,/^thng ?(Hai|0?2)/i,/^thng ?(Ba|0?3)/i,/^thng ?(T|0?4)/i,/^thng ?(Nm|0?5)/i,/^thng ?(Su|0?6)/i,/^thng ?(By|0?7)/i,/^thng ?(Tm|0?8)/i,/^thng ?(Chn|0?9)/i,/^thng ?(Mi|10)/i,/^thng ?(Mi ?Mt|11)/i,/^thng ?(Mi ?Hai|12)/i]},v0e={narrow:/^(CN|T2|T3|T4|T5|T6|T7)/i,short:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,abbreviated:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,wide:/^(Ch ?Nht|Cha ?Nht|th ?Hai|th ?Ba|th ?T|th ?Nm|th ?Su|th ?By)/i},y0e={narrow:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],short:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],abbreviated:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],wide:[/(Ch|Cha) ?Nht/i,/Hai/i,/Ba/i,/T/i,/Nm/i,/Su/i,/By/i]},x0e={narrow:/^(a|p|na m|tra|(gi) (sng|chiu|ti|m))/i,abbreviated:/^(am|pm|na m|tra|(gi) (sng|chiu|ti|m))/i,wide:/^(ch[^i]*|sa|na m|tra|(gi) (sng|chiu|ti|m))/i},b0e={any:{am:/^(a|sa)/i,pm:/^(p|ch[^i]*)/i,midnight:/na m/i,noon:/tra/i,morning:/sng/i,afternoon:/chiu/i,evening:/ti/i,night:/^m/i}},w0e={ordinalNumber:i7({matchPattern:c0e,parsePattern:u0e,valueCallback:e=>parseInt(e,10)}),era:Wl({matchPatterns:d0e,defaultMatchWidth:"wide",parsePatterns:h0e,defaultParseWidth:"any"}),quarter:Wl({matchPatterns:f0e,defaultMatchWidth:"wide",parsePatterns:m0e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Wl({matchPatterns:p0e,defaultMatchWidth:"wide",parsePatterns:g0e,defaultParseWidth:"wide"}),day:Wl({matchPatterns:v0e,defaultMatchWidth:"wide",parsePatterns:y0e,defaultParseWidth:"wide"}),dayPeriod:Wl({matchPatterns:x0e,defaultMatchWidth:"wide",parsePatterns:b0e,defaultParseWidth:"any"})},Uh={code:"vi",formatDistance:qxe,formatLong:Qxe,formatRelative:Jxe,localize:l0e,match:w0e,options:{weekStartsOn:1,firstWeekContainsDate:1}},_0e=({notification:e,onMarkRead:t})=>{const[n,r]=g.useState(!1),a=u=>{try{return jxe(new Date(u),{addSuffix:!0,locale:Uh})}catch{return"Va xong"}},i=e.content.split(`
`).filter(u=>u.trim()!==""),o=i[0],l=i.slice(1),c=()=>{r(!n),!n&&!e.is_read&&t(e.id,e.Id)};return s.jsx("div",{className:je("p-4 hover:bg-muted/50 transition-colors cursor-pointer group",n?"bg-muted/30":"",e.is_read?"opacity-60 bg-muted/10":"bg-white"),onClick:c,children:s.jsx("div",{className:"flex justify-between items-start gap-2",children:s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:je("text-sm font-medium leading-none",e.is_read&&"font-normal"),children:e.title}),l.length>0&&s.jsx("div",{className:"text-muted-foreground",children:n?s.jsx(Y2,{className:"h-3 w-3"}):s.jsx(eu,{className:"h-3 w-3"})}),!e.is_read&&s.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500 inline-block ml-auto"})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{className:"font-medium text-foreground/80",children:o}),n?s.jsx("div",{className:"space-y-1 pl-2 border-l-2 border-muted mt-1",children:l.map((u,d)=>s.jsx("p",{children:u},d))}):l.length>0&&s.jsxs("p",{className:"opacity-70 truncate",children:[l.length," ch s chi tit..."]})]}),s.jsx("p",{className:"text-[10px] text-muted-foreground pt-1",children:a(e.created_at)})]})})})},j0e=()=>{const{user:e}=Mn(),[t,n]=g.useState([]),[r,a]=g.useState(!1);g.useState(!1);const i=async()=>{if(e!=null&&e.id)try{const u=await mye(e.id);n(u)}catch(u){console.error(u)}};g.useEffect(()=>{i();const u=setInterval(i,6e4);return()=>clearInterval(u)},[e==null?void 0:e.id]);const o=async(u,d)=>{if(d)try{n(h=>h.map(m=>m.id===u?{...m,is_read:!0}:m)),await xF(d)}catch(h){console.error(h),n(m=>m.map(p=>p.id===u?{...p,is_read:!1}:p))}},l=async()=>{const u=t.filter(d=>!d.is_read);n(d=>d.map(h=>({...h,is_read:!0})));for(const d of u)d.Id&&await xF(d.Id);a(!1)},c=t.filter(u=>!u.is_read).length;return s.jsxs(Q0,{open:r,onOpenChange:a,children:[s.jsx(X0,{asChild:!0,children:s.jsxs(J,{variant:"ghost",size:"icon",className:"relative",children:[s.jsx(_x,{className:"h-5 w-5 text-muted-foreground"}),c>0&&s.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-[10px] font-bold text-white flex items-center justify-center ring-2 ring-background",children:c>9?"9+":c})]})}),s.jsxs(Qg,{className:"w-80 p-0",align:"end",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Thng bo"}),c>0&&s.jsx(J,{variant:"ghost",size:"sm",className:"text-xs h-auto p-0",onClick:l,children:"nh du  c tt c"})]}),s.jsx(As,{className:"h-[300px]",children:t.length===0?s.jsx("div",{className:"p-8 text-center text-muted-foreground text-sm",children:"Khng c thng bo mi"}):s.jsx("div",{className:"divide-y",children:t.map(u=>s.jsx(_0e,{notification:u,onMarkRead:o},u.id))})})]})]})},S0e=()=>s.jsx(s.Fragment,{children:s.jsx("header",{className:"border-b bg-card/95 backdrop-blur-sm sticky top-0 z-50",children:s.jsxs("div",{className:"flex items-center justify-between px-2 md:px-6 py-2 md:py-3",children:[s.jsx("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("div",{className:"w-7 h-7 md:w-10 md:h-10 rounded-full bg-primary flex items-center justify-center flex-shrink-0",children:s.jsx(Zr,{className:"w-3.5 h-3.5 md:w-5 md:h-5 text-primary-foreground"})}),s.jsx("h1",{className:"font-semibold text-foreground text-sm md:text-base truncate",children:"Tr l AI"})]})}),s.jsx("div",{className:"flex items-center gap-2 ml-auto",children:s.jsx(j0e,{})})]})})}),J0=()=>{const{user:e}=Mn(),[t,n]=g.useState({}),[r,a]=g.useState([]),[i,o]=g.useState(!0),[l,c]=g.useState(null),u=async()=>{var m,p;if(!e){n({}),a([]),o(!1);return}try{o(!0),c(null);const{data:{session:v}}=await wt.auth.getSession();if(!v){console.warn(" No active session, skipping features fetch"),n({}),a([]),o(!1);return}const{data:x,error:b}=await wt.functions.invoke("get-feature-flags");if(b){if((m=b.message)!=null&&m.includes("token")||(p=b.message)!=null&&p.includes("expired")){const{data:{session:_},error:j}=await wt.auth.refreshSession();if(!j&&_){const{data:w,error:N}=await wt.functions.invoke("get-feature-flags");if(N)throw N;w&&(n(w.features),a(w.roles));return}}throw b}x&&(n(x.features),a(x.roles))}catch(v){console.error(" Error fetching features:",v),c("Failed to fetch features"),n({})}finally{o(!1)}};return g.useEffect(()=>{u()},[e]),{features:t,roles:r,loading:i,error:l,hasFeature:m=>{var p;return((p=t[m])==null?void 0:p.enabled)??!1},getFeature:m=>t[m]}};var N0e="Separator",EF="horizontal",k0e=["horizontal","vertical"],f7=g.forwardRef((e,t)=>{const{decorative:n,orientation:r=EF,...a}=e,i=C0e(r)?r:EF,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(it.div,{"data-orientation":i,...l,...a,ref:t})});f7.displayName=N0e;function C0e(e){return k0e.includes(e)}var m7=f7;const qs=g.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(m7,{ref:a,decorative:n,orientation:t,className:je("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));qs.displayName=m7.displayName;var p7={exports:{}},g7={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=g;function A0e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var E0e=typeof Object.is=="function"?Object.is:A0e,T0e=tg.useState,P0e=tg.useEffect,O0e=tg.useLayoutEffect,I0e=tg.useDebugValue;function R0e(e,t){var n=t(),r=T0e({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return O0e(function(){a.value=n,a.getSnapshot=t,pA(a)&&i({inst:a})},[e,n,t]),P0e(function(){return pA(a)&&i({inst:a}),e(function(){pA(a)&&i({inst:a})})},[e]),I0e(n),n}function pA(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!E0e(e,n)}catch{return!0}}function $0e(e,t){return t()}var M0e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$0e:R0e;g7.useSyncExternalStore=tg.useSyncExternalStore!==void 0?tg.useSyncExternalStore:M0e;p7.exports=g7;var D0e=p7.exports;function L0e(){return D0e.useSyncExternalStore(F0e,()=>!0,()=>!1)}function F0e(){return()=>{}}var LI="Avatar",[B0e,XYe]=ga(LI),[U0e,v7]=B0e(LI),y7=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=g.useState("idle");return s.jsx(U0e,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(it.span,{...r,ref:t})})});y7.displayName=LI;var x7="AvatarImage",b7=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=v7(x7,n),l=V0e(r,i),c=aa(u=>{a(u),o.onImageLoadingStatusChange(u)});return sa(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(it.img,{...i,ref:t,src:r}):null});b7.displayName=x7;var w7="AvatarFallback",_7=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=v7(w7,n),[o,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(it.span,{...a,ref:t}):null});_7.displayName=w7;function TF(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function V0e(e,{referrerPolicy:t,crossOrigin:n}){const r=L0e(),a=g.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=g.useState(()=>TF(i,e));return sa(()=>{l(TF(i,e))},[i,e]),sa(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,n,t]),o}var j7=y7,S7=b7,N7=_7;const FI=g.forwardRef(({className:e,...t},n)=>s.jsx(j7,{ref:n,className:je("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));FI.displayName=j7.displayName;const k7=g.forwardRef(({className:e,...t},n)=>s.jsx(S7,{ref:n,className:je("aspect-square h-full w-full",e),...t}));k7.displayName=S7.displayName;const BI=g.forwardRef(({className:e,...t},n)=>s.jsx(N7,{ref:n,className:je("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));BI.displayName=N7.displayName;const yr=AS,UI=kI,z0e=ES,C7=g.forwardRef(({className:e,...t},n)=>s.jsx(Gg,{ref:n,className:je("fixed inset-0 z-[60] bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));C7.displayName=Gg.displayName;const dr=g.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(z0e,{children:[s.jsx(C7,{}),s.jsxs(Yg,{ref:r,className:je("fixed left-[50%] top-[50%] z-[70] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(TS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Cs,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dr.displayName=Yg.displayName;const hr=({className:e,...t})=>s.jsx("div",{className:je("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});hr.displayName="DialogHeader";const qa=({className:e,...t})=>s.jsx("div",{className:je("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qa.displayName="DialogFooter";const fr=g.forwardRef(({className:e,...t},n)=>s.jsx(K0,{ref:n,className:je("text-lg font-semibold leading-none tracking-tight",e),...t}));fr.displayName=K0.displayName;const Ca=g.forwardRef(({className:e,...t},n)=>s.jsx(G0,{ref:n,className:je("text-sm text-muted-foreground",e),...t}));Ca.displayName=G0.displayName;var H0e="Label",A7=g.forwardRef((e,t)=>s.jsx(it.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));A7.displayName=H0e;var E7=A7;const W0e=Uf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ge=g.forwardRef(({className:e,...t},n)=>s.jsx(E7,{ref:n,className:je(W0e(),e),...t}));ge.displayName=E7.displayName;const Ke=g.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:je("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Ke.displayName="Input";function Z0(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var q0e=[" ","Enter","ArrowUp","ArrowDown"],K0e=[" ","Enter"],jf="Select",[RS,$S,G0e]=M0(jf),[Jg,JYe]=ga(jf,[G0e,Vd]),MS=Vd(),[Y0e,Kd]=Jg(jf),[Q0e,X0e]=Jg(jf),T7=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:v}=e,x=MS(t),[b,_]=g.useState(null),[j,w]=g.useState(null),[N,k]=g.useState(!1),C=zf(u),[A,P]=_i({prop:r,defaultProp:a??!1,onChange:i,caller:jf}),[O,T]=_i({prop:o,defaultProp:l,onChange:c,caller:jf}),$=g.useRef(null),L=b?v||!!b.closest("form"):!0,[z,W]=g.useState(new Set),B=Array.from(z).map(G=>G.props.value).join(";");return s.jsx(fS,{...x,children:s.jsxs(Y0e,{required:p,scope:t,trigger:b,onTriggerChange:_,valueNode:j,onValueNodeChange:w,valueNodeHasChildren:N,onValueNodeHasChildrenChange:k,contentId:Fa(),value:O,onValueChange:T,open:A,onOpenChange:P,dir:C,triggerPointerDownPosRef:$,disabled:m,children:[s.jsx(RS.Provider,{scope:t,children:s.jsx(Q0e,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(G=>{W(U=>new Set(U).add(G))},[]),onNativeOptionRemove:g.useCallback(G=>{W(U=>{const F=new Set(U);return F.delete(G),F})},[]),children:n})}),L?s.jsxs(t9,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:O,onChange:G=>T(G.target.value),disabled:m,form:v,children:[O===void 0?s.jsx("option",{value:""}):null,Array.from(z)]},B):null]})})};T7.displayName=jf;var P7="SelectTrigger",O7=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=MS(n),o=Kd(P7,n),l=o.disabled||r,c=Dt(t,o.onTriggerChange),u=$S(n),d=g.useRef("touch"),[h,m,p]=r9(x=>{const b=u().filter(w=>!w.disabled),_=b.find(w=>w.value===o.value),j=a9(b,x,_);j!==void 0&&o.onValueChange(j.value)}),v=x=>{l||(o.onOpenChange(!0),p()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return s.jsx(U0,{asChild:!0,...i,children:s.jsx(it.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":n9(o.value)?"":void 0,...a,ref:c,onClick:We(a.onClick,x=>{x.currentTarget.focus(),d.current!=="mouse"&&v(x)}),onPointerDown:We(a.onPointerDown,x=>{d.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:We(a.onKeyDown,x=>{const b=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(b&&x.key===" ")&&q0e.includes(x.key)&&(v(),x.preventDefault())})})})});O7.displayName=P7;var I7="SelectValue",R7=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...l}=e,c=Kd(I7,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=Dt(t,c.onValueNodeChange);return sa(()=>{u(d)},[u,d]),s.jsx(it.span,{...l,ref:h,style:{pointerEvents:"none"},children:n9(c.value)?s.jsx(s.Fragment,{children:o}):i})});R7.displayName=I7;var J0e="SelectIcon",$7=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(it.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});$7.displayName=J0e;var Z0e="SelectPortal",M7=e=>s.jsx(Fg,{asChild:!0,...e});M7.displayName=Z0e;var Sf="SelectContent",D7=g.forwardRef((e,t)=>{const n=Kd(Sf,e.__scopeSelect),[r,a]=g.useState();if(sa(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ff.createPortal(s.jsx(L7,{scope:e.__scopeSelect,children:s.jsx(RS.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(F7,{...e,ref:t})});D7.displayName=Sf;var el=10,[L7,Gd]=Jg(Sf),ebe="SelectContentImpl",tbe=Ad("SelectContent.RemoveScroll"),F7=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:x,avoidCollisions:b,..._}=e,j=Kd(Sf,n),[w,N]=g.useState(null),[k,C]=g.useState(null),A=Dt(t,oe=>N(oe)),[P,O]=g.useState(null),[T,$]=g.useState(null),L=$S(n),[z,W]=g.useState(!1),B=g.useRef(!1);g.useEffect(()=>{if(w)return kS(w)},[w]),SS();const G=g.useCallback(oe=>{const[ee,...re]=L().map(ae=>ae.ref.current),[Z]=re.slice(-1),ce=document.activeElement;for(const ae of oe)if(ae===ce||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===ee&&k&&(k.scrollTop=0),ae===Z&&k&&(k.scrollTop=k.scrollHeight),ae==null||ae.focus(),document.activeElement!==ce))return},[L,k]),U=g.useCallback(()=>G([P,w]),[G,P,w]);g.useEffect(()=>{z&&U()},[z,U]);const{onOpenChange:F,triggerPointerDownPosRef:K}=j;g.useEffect(()=>{if(w){let oe={x:0,y:0};const ee=Z=>{var ce,ae;oe={x:Math.abs(Math.round(Z.pageX)-(((ce=K.current)==null?void 0:ce.x)??0)),y:Math.abs(Math.round(Z.pageY)-(((ae=K.current)==null?void 0:ae.y)??0))}},re=Z=>{oe.x<=10&&oe.y<=10?Z.preventDefault():w.contains(Z.target)||F(!1),document.removeEventListener("pointermove",ee),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",re,{capture:!0})}}},[w,F,K]),g.useEffect(()=>{const oe=()=>F(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[F]);const[X,se]=r9(oe=>{const ee=L().filter(ce=>!ce.disabled),re=ee.find(ce=>ce.ref.current===document.activeElement),Z=a9(ee,oe,re);Z&&setTimeout(()=>Z.ref.current.focus())}),D=g.useCallback((oe,ee,re)=>{const Z=!B.current&&!re;(j.value!==void 0&&j.value===ee||Z)&&(O(oe),Z&&(B.current=!0))},[j.value]),Y=g.useCallback(()=>w==null?void 0:w.focus(),[w]),ue=g.useCallback((oe,ee,re)=>{const Z=!B.current&&!re;(j.value!==void 0&&j.value===ee||Z)&&$(oe)},[j.value]),xe=r==="popper"?VT:B7,Ne=xe===VT?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:x,avoidCollisions:b}:{};return s.jsx(L7,{scope:n,content:w,viewport:k,onViewportChange:C,itemRefCallback:D,selectedItem:P,onItemLeave:Y,itemTextRefCallback:ue,focusSelectedItem:U,selectedItemText:T,position:r,isPositioned:z,searchRef:X,children:s.jsx(q0,{as:tbe,allowPinchZoom:!0,children:s.jsx(W0,{asChild:!0,trapped:j.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:We(a,oe=>{var ee;(ee=j.trigger)==null||ee.focus({preventScroll:!0}),oe.preventDefault()}),children:s.jsx(Bf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:s.jsx(xe,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:oe=>oe.preventDefault(),..._,...Ne,onPlaced:()=>W(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:We(_.onKeyDown,oe=>{const ee=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!ee&&oe.key.length===1&&se(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let Z=L().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const ce=oe.target,ae=Z.indexOf(ce);Z=Z.slice(ae+1)}setTimeout(()=>G(Z)),oe.preventDefault()}})})})})})})});F7.displayName=ebe;var nbe="SelectItemAlignedPosition",B7=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=Kd(Sf,n),o=Gd(Sf,n),[l,c]=g.useState(null),[u,d]=g.useState(null),h=Dt(t,A=>d(A)),m=$S(n),p=g.useRef(!1),v=g.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:_,focusSelectedItem:j}=o,w=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&x&&b&&_){const A=i.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),T=_.getBoundingClientRect();if(i.dir!=="rtl"){const ce=T.left-P.left,ae=O.left-ce,Ue=A.left-ae,Ve=A.width+Ue,ut=Math.max(Ve,P.width),Rt=window.innerWidth-el,mt=Mx(ae,[el,Math.max(el,Rt-ut)]);l.style.minWidth=Ve+"px",l.style.left=mt+"px"}else{const ce=P.right-T.right,ae=window.innerWidth-O.right-ce,Ue=window.innerWidth-A.right-ae,Ve=A.width+Ue,ut=Math.max(Ve,P.width),Rt=window.innerWidth-el,mt=Mx(ae,[el,Math.max(el,Rt-ut)]);l.style.minWidth=Ve+"px",l.style.right=mt+"px"}const $=m(),L=window.innerHeight-el*2,z=x.scrollHeight,W=window.getComputedStyle(u),B=parseInt(W.borderTopWidth,10),G=parseInt(W.paddingTop,10),U=parseInt(W.borderBottomWidth,10),F=parseInt(W.paddingBottom,10),K=B+G+z+F+U,X=Math.min(b.offsetHeight*5,K),se=window.getComputedStyle(x),D=parseInt(se.paddingTop,10),Y=parseInt(se.paddingBottom,10),ue=A.top+A.height/2-el,xe=L-ue,Ne=b.offsetHeight/2,oe=b.offsetTop+Ne,ee=B+G+oe,re=K-ee;if(ee<=ue){const ce=$.length>0&&b===$[$.length-1].ref.current;l.style.bottom="0px";const ae=u.clientHeight-x.offsetTop-x.offsetHeight,Ue=Math.max(xe,Ne+(ce?Y:0)+ae+U),Ve=ee+Ue;l.style.height=Ve+"px"}else{const ce=$.length>0&&b===$[0].ref.current;l.style.top="0px";const Ue=Math.max(ue,B+x.offsetTop+(ce?D:0)+Ne)+re;l.style.height=Ue+"px",x.scrollTop=ee-ue+x.offsetTop}l.style.margin=`${el}px 0`,l.style.minHeight=X+"px",l.style.maxHeight=L+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,u,x,b,_,i.dir,r]);sa(()=>w(),[w]);const[N,k]=g.useState();sa(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const C=g.useCallback(A=>{A&&v.current===!0&&(w(),j==null||j(),v.current=!1)},[w,j]);return s.jsx(abe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(it.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});B7.displayName=nbe;var rbe="SelectPopperPosition",VT=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=el,...i}=e,o=MS(n);return s.jsx(mS,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});VT.displayName=rbe;var[abe,VI]=Jg(Sf,{}),zT="SelectViewport",U7=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Gd(zT,n),o=VI(zT,n),l=Dt(t,i.onViewportChange),c=g.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(RS.Slot,{scope:n,children:s.jsx(it.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:We(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-el*2,x=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),_=Math.max(x,b);if(_<v){const j=_+p,w=Math.min(v,j),N=j-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});U7.displayName=zT;var V7="SelectGroup",[sbe,ibe]=Jg(V7),z7=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Fa();return s.jsx(sbe,{scope:n,id:a,children:s.jsx(it.div,{role:"group","aria-labelledby":a,...r,ref:t})})});z7.displayName=V7;var H7="SelectLabel",W7=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=ibe(H7,n);return s.jsx(it.div,{id:a.id,...r,ref:t})});W7.displayName=H7;var jj="SelectItem",[obe,q7]=Jg(jj),K7=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,l=Kd(jj,n),c=Gd(jj,n),u=l.value===r,[d,h]=g.useState(i??""),[m,p]=g.useState(!1),v=Dt(t,j=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,j,r,a)}),x=Fa(),b=g.useRef("touch"),_=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(obe,{scope:n,value:r,disabled:a,textId:x,isSelected:u,onItemTextChange:g.useCallback(j=>{h(w=>w||((j==null?void 0:j.textContent)??"").trim())},[]),children:s.jsx(RS.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:s.jsx(it.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:We(o.onFocus,()=>p(!0)),onBlur:We(o.onBlur,()=>p(!1)),onClick:We(o.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:We(o.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:We(o.onPointerDown,j=>{b.current=j.pointerType}),onPointerMove:We(o.onPointerMove,j=>{var w;b.current=j.pointerType,a?(w=c.onItemLeave)==null||w.call(c):b.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:We(o.onPointerLeave,j=>{var w;j.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:We(o.onKeyDown,j=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&j.key===" "||(K0e.includes(j.key)&&_(),j.key===" "&&j.preventDefault())})})})})});K7.displayName=jj;var Ey="SelectItemText",G7=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=Kd(Ey,n),l=Gd(Ey,n),c=q7(Ey,n),u=X0e(Ey,n),[d,h]=g.useState(null),m=Dt(t,_=>h(_),c.onItemTextChange,_=>{var j;return(j=l.itemTextRefCallback)==null?void 0:j.call(l,_,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=g.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=u;return sa(()=>(x(v),()=>b(v)),[x,b,v]),s.jsxs(s.Fragment,{children:[s.jsx(it.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ff.createPortal(i.children,o.valueNode):null]})});G7.displayName=Ey;var Y7="SelectItemIndicator",Q7=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return q7(Y7,n).isSelected?s.jsx(it.span,{"aria-hidden":!0,...r,ref:t}):null});Q7.displayName=Y7;var HT="SelectScrollUpButton",X7=g.forwardRef((e,t)=>{const n=Gd(HT,e.__scopeSelect),r=VI(HT,e.__scopeSelect),[a,i]=g.useState(!1),o=Dt(t,r.onScrollButtonChange);return sa(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(Z7,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});X7.displayName=HT;var WT="SelectScrollDownButton",J7=g.forwardRef((e,t)=>{const n=Gd(WT,e.__scopeSelect),r=VI(WT,e.__scopeSelect),[a,i]=g.useState(!1),o=Dt(t,r.onScrollButtonChange);return sa(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(Z7,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});J7.displayName=WT;var Z7=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Gd("SelectScrollButton",n),o=g.useRef(null),l=$S(n),c=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),sa(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(it.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:We(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:We(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:We(a.onPointerLeave,()=>{c()})})}),lbe="SelectSeparator",e9=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(it.div,{"aria-hidden":!0,...r,ref:t})});e9.displayName=lbe;var qT="SelectArrow",cbe=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=MS(n),i=Kd(qT,n),o=Gd(qT,n);return i.open&&o.position==="popper"?s.jsx(pS,{...a,...r,ref:t}):null});cbe.displayName=qT;var ube="SelectBubbleInput",t9=g.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=g.useRef(null),i=Dt(r,a),o=Z0(t);return g.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(it.select,{...n,style:{...vz,...n.style},ref:i,defaultValue:t})});t9.displayName=ube;function n9(e){return e===""||e===void 0}function r9(e){const t=aa(e),n=g.useRef(""),r=g.useRef(0),a=g.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function a9(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=dbe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function dbe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var hbe=T7,s9=O7,fbe=R7,mbe=$7,pbe=M7,i9=D7,gbe=U7,vbe=z7,o9=W7,l9=K7,ybe=G7,xbe=Q7,c9=X7,u9=J7,d9=e9;const kn=hbe,gA=vbe,Cn=fbe,wn=g.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(s9,{ref:r,className:je("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(mbe,{asChild:!0,children:s.jsx(eu,{className:"h-4 w-4 opacity-50"})})]}));wn.displayName=s9.displayName;const bbe=g.forwardRef(({className:e,...t},n)=>s.jsx(c9,{ref:n,className:je("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Y2,{className:"h-4 w-4"})}));bbe.displayName=c9.displayName;const wbe=g.forwardRef(({className:e,...t},n)=>s.jsx(u9,{ref:n,className:je("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(eu,{className:"h-4 w-4"})}));wbe.displayName=u9.displayName;const _n=g.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(pbe,{children:s.jsx(i9,{ref:a,className:je("relative z-[100] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:s.jsx(gbe,{className:je("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));_n.displayName=i9.displayName;const C_=g.forwardRef(({className:e,...t},n)=>s.jsx(o9,{ref:n,className:je("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));C_.displayName=o9.displayName;const st=g.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(l9,{ref:r,className:je("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(xbe,{children:s.jsx(Td,{className:"h-4 w-4"})})}),s.jsx(ybe,{children:t})]}));st.displayName=l9.displayName;const _be=g.forwardRef(({className:e,...t},n)=>s.jsx(d9,{ref:n,className:je("-mx-1 my-1 h-px bg-muted",e),...t}));_be.displayName=d9.displayName;const jbe=async(e,t,n,r,a=0,i=1e4)=>{try{let o;r?o=encodeURIComponent(`(user_id,eq,${e})~and(account_id,eq,${r})`):(o=encodeURIComponent(`(user_id,eq,${e})`),console.warn(" WARNING: Fetching insights WITHOUT account_id filter. This may cause data mixing for multi-account users!"));const l=`${ht(It.TABLES.FACEBOOK_INSIGHTS)}?where=${o}&offset=${a}&limit=${i}&sort=-date_start`,c=await fetch(l,{method:"GET",headers:lt()});if(!c.ok){const m=await c.text();throw console.error(" NocoDB error:",c.status,m),new Error(`NocoDB API error: ${c.status} ${c.statusText}`)}return((await c.json()).list||[]).filter(m=>m.date_start?m.date_start>=t&&m.date_start<=n:!1).map(m=>{if((m.started_7d===void 0||m.started_7d===0)&&m["Tr chuyn 7d"]!==void 0){const p=Number(m["Tr chuyn 7d"]);m.started_7d=isNaN(p)?0:Math.round(p)}return m.level||(m.level=m.ad_id?"ad":m.adset_id?"adset":"campaign",console.warn(" Auto-fixed missing level for record:",{id:m.Id,campaign_id:m.campaign_id,adset_id:m.adset_id,ad_id:m.ad_id,inferred_level:m.level})),m})}catch(o){throw console.error("Error fetching insights from NocoDB:",o),o}},Sbe=async e=>{var t;try{const n=encodeURIComponent(`(user_id,eq,${e})`),r=`${ht(It.TABLES.FACEBOOK_INSIGHTS)}?where=${n}&limit=10000`,a=await fetch(r,{method:"GET",headers:lt()});if(!a.ok)throw new Error(`NocoDB API error: ${a.status}`);const i=await a.json();if((((t=i.list)==null?void 0:t.length)||0)===0)return;const l=50;for(let c=0;c<i.list.length;c+=l){const u=i.list.slice(c,c+l);await Promise.all(u.map(async d=>{if(d.Id){const h=`${ht(It.TABLES.FACEBOOK_INSIGHTS,String(d.Id))}`;await fetch(h,{method:"DELETE",headers:lt()})}}))}}catch(n){throw console.error("Error deleting all insights:",n),n}},Nbe="v21.0",Zg=`https://graph.facebook.com/${Nbe}`,Hf=e=>`act_${e.replace(/^act_/,"")}`,h9={MESSAGES:["onsite_conversion.messaging_conversation_started_7d","onsite_conversion.messaging_first_reply","onsite_conversion.total_messaging_connection"],OUTCOME_ENGAGEMENT:["onsite_conversion.total_messaging_connection","post_engagement","page_engagement"],OUTCOME_LEADS:["lead","onsite_conversion.lead_grouped"],OUTCOME_SALES:["purchase","omni_purchase"],VIDEO_VIEWS:["video_view","thruplay"],OUTCOME_TRAFFIC:["landing_page_view","link_click"],REACH:["reach"],OUTCOME_AWARENESS:["reach"],AWARENESS:["reach"]},f9={"onsite_conversion.messaging_first_reply":"Tin nhn u tin","onsite_conversion.total_messaging_connection":"Tin nhn","onsite_conversion.messaging_conversation_started_7d":"Cuc tr chuyn mi",post_engagement:"Tng tc bi vit",page_engagement:"Tng tc trang",lead:"Khch hng tim nng","onsite_conversion.lead_grouped":"Khch hng tim nng (nhm)",purchase:"Mua hng",omni_purchase:"Mua hng (a knh)",video_view:"Lt xem video",thruplay:"Xem video hon chnh",landing_page_view:"Lt xem trang ch",link_click:"Nhp chut lin kt",reach:""},ll=e=>{if(e==null||e==="")return 0;const t=Number(e);return isNaN(t)?0:t};function m9(e){const t=n=>{const r=e==null?void 0:e.find(a=>a.action_type===n);return ll((r==null?void 0:r.value)||0)};return{started_7d:t("onsite_conversion.messaging_conversation_started_7d"),total_messaging_connection:t("onsite_conversion.total_messaging_connection"),link_click:t("link_click"),messaging_welcome_message_view:t("onsite_conversion.messaging_welcome_message_view"),post_engagement_action:t("post_engagement"),messaging_first_reply:t("onsite_conversion.messaging_first_reply"),video_view:t("video_view"),page_engagement_action:t("page_engagement"),replied_7d:t("onsite_conversion.messaging_conversation_replied_7d"),depth_2_message:t("onsite_conversion.messaging_user_depth_2_message_send"),depth_3_message:t("onsite_conversion.messaging_user_depth_3_message_send")}}function p9(e){const t=r=>{const a=e==null?void 0:e.find(o=>o.action_type===r);if(a!=null&&a.value,!a||!a.value)return null;const i=Number(a.value);return isNaN(i)?null:i};return{cost_per_started_7d:t("onsite_conversion.messaging_conversation_started_7d"),cost_per_total_messaging_connection:t("onsite_conversion.total_messaging_connection"),cost_per_link_click:t("link_click"),cost_per_messaging_welcome_message_view:t("onsite_conversion.messaging_welcome_message_view"),cost_per_post_engagement:t("post_engagement"),cost_per_messaging_first_reply:t("onsite_conversion.messaging_first_reply"),cost_per_video_view:t("video_view"),cost_per_page_engagement:t("page_engagement"),cost_per_replied_7d:t("onsite_conversion.messaging_conversation_replied_7d"),cost_per_depth_2_message:t("onsite_conversion.messaging_user_depth_2_message_send"),cost_per_depth_3_message:t("onsite_conversion.messaging_user_depth_3_message_send")}}function kbe(e,t,n,r,a){const i=h9[e]||[];let o="",l=0,c=0;if(["REACH","OUTCOME_AWARENESS","AWARENESS"].includes(e))l=ll(a),o="reach",l>0&&(c=ll(r)/l);else{for(const d of i){const h=t==null?void 0:t.find(m=>m.action_type===d);if(h&&ll(h.value)>0){o=d,l=Math.round(ll(h.value));break}}if(!o&&i.length>0){o=i[0];const d=t==null?void 0:t.find(h=>h.action_type===o);l=d?Math.round(ll(d.value)):0}if(o){const d=n==null?void 0:n.find(h=>h.action_type===o);d?c=ll(d.value):l>0&&(c=ll(r)/l)}}const u=f9[o]||o;return{results:l,cost_per_result:Math.round(c*100)/100,result_label:u,action_type_used:o}}function Cbe(e,t,n){const r="onsite_conversion.messaging_conversation_replied_7d",a=e==null?void 0:e.find(l=>l.action_type===r),i=Math.round(ll((a==null?void 0:a.value)||0));let o=0;if(i>0){const l=t==null?void 0:t.find(c=>c.action_type===r);l?o=ll(l.value):o=ll(n)/i}return{count:i,cost:o}}const Abe=["campaign_id","campaign_name","adset_id","adset_name","ad_id","ad_name","date_start","date_stop","impressions","clicks","spend","reach","frequency","ctr","cpc","cpm","cpp","cost_per_unique_click","actions","action_values","cost_per_action_type","objective","website_ctr","purchase_roas","quality_ranking","engagement_rate_ranking","conversion_rate_ranking","video_p25_watched_actions","video_p50_watched_actions","video_p75_watched_actions","video_p100_watched_actions","video_play_actions","cost_per_thruplay"],DS=async e=>{var r,a;let t=[],n=e;for(;n;)try{const i=await fetch(n),o=await i.json();if(!i.ok)throw new Error(((r=o.error)==null?void 0:r.message)||"Failed to fetch data.");const l=o.data||[];t=t.concat(l),n=((a=o.paging)==null?void 0:a.next)||null}catch(i){throw console.error("Error in fetchAll:",i),i}return t};async function Ebe(e,t){const n=Hf(t),r=new URL(`${Zg}/${n}/campaigns`);r.searchParams.append("access_token",e),r.searchParams.append("fields","id,name,status,effective_status,daily_budget,lifetime_budget,issues_info"),r.searchParams.append("limit","500");try{const a=await DS(r.toString()),i=a.reduce((c,u)=>{const d=u.effective_status||u.status||"UNKNOWN";return c[d]=(c[d]||0)+1,c},{}),o=a.filter(c=>c.effective_status==="WITH_ISSUES")||[];return o.length>0&&console.warn(" Campaigns WITH_ISSUES detected:",o.map(c=>({id:c.id,name:c.name,issues:c.issues_info}))),(a.filter(c=>c.effective_status==="DELETED"||c.status==="DELETED")||[]).length>0,a||[]}catch(a){throw console.error("Facebook API Error (getCampaigns):",a),a instanceof Error?a:new Error("An unknown error occurred while fetching campaigns.")}}async function Tbe(e,t,n){const r=Hf(t),a=new URL(`${Zg}/${r}/adsets`);a.searchParams.append("access_token",e),a.searchParams.append("fields","id,name,status,effective_status,campaign_id,daily_budget,lifetime_budget,issues_info"),a.searchParams.append("limit","500"),n&&a.searchParams.append("filtering",JSON.stringify([{field:"campaign.id",operator:"IN",value:[n]}]));try{const i=await DS(a.toString()),o=i.filter(l=>l.effective_status==="WITH_ISSUES")||[];return o.length>0&&console.warn(" Adsets WITH_ISSUES detected:",o.map(l=>({id:l.id,name:l.name,issues:l.issues_info}))),i||[]}catch(i){throw console.error("Facebook API Error (getAdSets):",i),i instanceof Error?i:new Error("An unknown error occurred while fetching adsets.")}}async function Pbe(e,t,n,r){const a=Hf(t),i=new URL(`${Zg}/${a}/ads`);i.searchParams.append("access_token",e),i.searchParams.append("fields","id,name,status,effective_status,adset_id,campaign_id,issues_info"),i.searchParams.append("limit","500");const o=[];n&&o.push({field:"campaign.id",operator:"IN",value:[n]}),r&&o.push({field:"adset.id",operator:"IN",value:[r]}),o.length>0&&i.searchParams.append("filtering",JSON.stringify(o));try{const l=await DS(i.toString()),c=l.filter(u=>u.effective_status==="WITH_ISSUES")||[];return c.length>0&&console.warn(" Ads WITH_ISSUES detected:",c.map(u=>({id:u.id,name:u.name,issues:u.issues_info}))),l||[]}catch(l){throw console.error("Facebook API Error (getAds):",l),l instanceof Error?l:new Error("An unknown error occurred while fetching ads.")}}async function Obe({accessToken:e,adAccountId:t,level:n,since:r,until:a}){var p,v;const i=Hf(t),o=n==="campaign"?"campaigns":n==="adset"?"adsets":"ads",l=["status","effective_status","name","id"];n==="campaign"?l.push("daily_budget","lifetime_budget","objective"):n==="adset"?l.push("campaign_id","daily_budget","lifetime_budget"):l.push("campaign_id","adset_id");const u=`insights.time_increment(1).time_range(${encodeURIComponent(JSON.stringify({since:r,until:a}))}).action_breakdowns(action_type).limit(1000){${Abe.join(",")}}`,d=[...l,u].join(","),h=encodeURIComponent(JSON.stringify([{field:"effective_status",operator:"IN",value:["ACTIVE","PAUSED","ARCHIVED","DELETED","CAMPAIGN_PAUSED","ADSET_PAUSED"]}])),m=`${Zg}/${i}/${o}?fields=${d}&filtering=${h}&limit=500&access_token=${e}`;try{const x=await DS(m),b=[];for(const j of x){const w={id:j.id,name:j.name,status:j.status,effective_status:j.effective_status,campaign_id:n==="campaign"?j.id:j.campaign_id,adset_id:n==="adset"?j.id:j.adset_id,ad_id:n==="ad"?j.id:void 0,objective:j.objective,daily_budget:j.daily_budget,lifetime_budget:j.lifetime_budget};if(((v=(p=j.insights)==null?void 0:p.data)==null?void 0:v.length)>0)for(const N of j.insights.data)b.push({...N,...w,campaign_name:n==="campaign"?j.name:N.campaign_name,adset_name:n==="adset"?j.name:N.adset_name,ad_name:n==="ad"?j.name:N.ad_name});else b.push({...w,campaign_name:n==="campaign"?j.name:"",adset_name:n==="adset"?j.name:"",ad_name:n==="ad"?j.name:"",date_start:r,date_stop:a,spend:0,impressions:0,reach:0,clicks:0,ctr:0,cpc:0,cpm:0})}const _=x.reduce((j,w)=>{const N=w.effective_status||w.status||"UNKNOWN";return j[N]=(j[N]||0)+1,j},{});return b}catch(x){throw console.error(`Facebook API Error (getInsights - ${n}):`,x),x}}async function g9(e,t){var a;const n=Hf(t),r=new URL(`${Zg}/${n}`);r.searchParams.append("access_token",e),r.searchParams.append("fields","id,name,account_status,currency,timezone_name");try{const i=await fetch(r.toString()),o=await i.json();if(!i.ok)throw new Error(((a=o.error)==null?void 0:a.message)||"Failed to fetch ad account.");return o}catch(i){throw console.error("Facebook API Error (getAdAccount):",i),i instanceof Error?i:new Error("An unknown error occurred while fetching ad account.")}}async function Ibe(e,t){return g9(e,t)}async function KT(e,t,n){var a;const r=`${Zg}/${t}`;try{const i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n,access_token:e})}),o=await i.json();if(!i.ok)throw new Error(((a=o.error)==null?void 0:a.message)||"Failed to update status.");return{success:!0}}catch(i){throw console.error("Facebook API Error (updateObjectStatus):",i),i}}const Vm=Object.freeze(Object.defineProperty({__proto__:null,ACTION_LABELS:f9,OBJECTIVE_ACTION_MAP:h9,calculateResultsAndCost:kbe,extractActionValues:m9,extractCostPerActionValues:p9,extractMessagingRepliedMetrics:Cbe,getAdAccount:g9,getAdAccountDetails:Ibe,getAdSets:Tbe,getAds:Pbe,getCampaigns:Ebe,getInsights:Obe,normalizeAdAccountId:Hf,updateObjectStatus:KT},Symbol.toStringTag,{value:"Module"})),Rbe=[{value:"gpt-4o-mini",label:"GPT-4o Mini (Khuyn dng)"},{value:"gpt-4o",label:"GPT-4o (Mnh hn)"},{value:"gpt-4-turbo",label:"GPT-4 Turbo (Thng minh)"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo (Nhanh & R)"}],$be=({open:e,onOpenChange:t})=>{var Rt,mt,rn,yn,dn,Tt,ve,Ce;const{toast:n}=Lo(),{user:r}=Mn(),[a,i]=g.useState(!1),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,h]=g.useState(!1),[m,p]=g.useState(!1),[v,x]=g.useState(!1),[b,_]=g.useState("idle"),[j,w]=g.useState("idle"),[N,k]=g.useState(""),[C,A]=g.useState(""),[P,O]=g.useState("gpt-4o-mini"),[T,$]=g.useState([]),[L,z]=g.useState([]),[W,B]=g.useState(""),[G,U]=g.useState(""),[F,K]=g.useState(""),[X,se]=g.useState(!1),[D,Y]=g.useState(),[ue,xe]=g.useState();g.useEffect(()=>{e&&Ne()},[e]);const Ne=async()=>{x(!0);try{if(!(r!=null&&r.id)){x(!1);return}const ye=await Vr(r.id),dt=ye.find(zn=>zn.is_active);dt&&(B(dt.account_id),k(dt.access_token),_("valid"));const tn=(await j_(r.id)).filter(zn=>zn.is_active);if(tn.length>0){const zn=tn[0];U(zn.page_id)}const on=(await H0(r.id)).find(zn=>zn.is_active);on&&(A(on.api_key),O(on.model||"gpt-4o-mini"),w("valid")),ye&&$(ye.map(zn=>({id:zn.account_id,name:zn.account_name||zn.account_id}))),tn&&tn.length>0&&z(tn.map(zn=>({id:zn.page_id,name:zn.page_name||zn.page_id})))}catch(ye){console.error("Error loading settings:",ye)}finally{x(!1)}},[oe,ee]=g.useState(null),re=async()=>{var ye,dt,pt,tn,xn,on,zn,ti;if(!N){n({title:"Li",description:"Vui lng nhp Ads token",variant:"destructive"});return}u(!0),_("idle"),ee(null);try{if(r!=null&&r.id){const va=await Vr(r.id);for(const Za of va)Za.Id&&Za.is_active&&await LT(Za.Id,{is_active:!1})}const{data:Rr,error:Ja}=await wt.functions.invoke("check-fb-token",{body:{token:N}});if(Ja)throw Ja;if(!Rr.success){_("invalid"),ee(Rr),n({title:"Token khng hp l",description:Rr.error,variant:"destructive"});return}ee(Rr);const ia=((ye=Rr.data)==null?void 0:ye.adAccounts)||[],ni=((dt=Rr.data)==null?void 0:dt.pages)||[];if(ia.length>0){_("valid"),$(ia.map(mr=>({id:mr.id,name:mr.name||mr.id,status:mr.account_status}))),ni.length>0&&z(ni);const va=((tn=(pt=Rr.permissions)==null?void 0:pt.missing)==null?void 0:tn.length)||0,Za=((on=(xn=Rr.data)==null?void 0:xn.counts)==null?void 0:on.adAccounts)||ia.length,hc=((ti=(zn=Rr.data)==null?void 0:zn.counts)==null?void 0:ti.pages)||ni.length;n({title:"Token hp l! ",description:`${Rr.tokenType} token - ${Za} TKQC, ${hc} pages${va>0?` (Thiu ${va} quyn)`:""}`})}else _("invalid"),n({title:" Khng tm thy ad accounts",description:"Token hp l nhng khng c quyn truy cp ad accounts",variant:"destructive"})}catch(Rr){_("invalid"),n({title:"Li kim tra token",description:Rr instanceof Error?Rr.message:"Unknown error",variant:"destructive"})}finally{u(!1)}},Z=async()=>{x(!0);try{if(!(r!=null&&r.id))throw new Error("User not authenticated");if(!N||b!=="valid"){n({title:"Li",description:"Vui lng kim tra v xc nhn Ads Token trc khi lu",variant:"destructive"}),x(!1);return}if(!W){n({title:"Li",description:"Vui lng chn Ti khon Qung co",variant:"destructive"}),x(!1);return}if(!G){n({title:"Li",description:"Vui lng chn Trang Facebook",variant:"destructive"}),x(!1);return}const ye=L.find(on=>on.id===G),dt=ye==null?void 0:ye.access_token;if(!dt){n({title:"Li",description:"Khng tm thy Page Access Token. Vui lng kim tra Ads Token trc.",variant:"destructive"}),x(!1);return}n({title:"Bc 1/2: ang lu TKQC...",description:"Xa d liu c v lu ti khon qung co mi"});const pt=Hf(W);await Sbe(r.id),await JW(r.id);const tn=T.find(on=>on.id===W);await XW({account_id:pt,account_name:(tn==null?void 0:tn.name)||W,access_token:N,is_active:!0,user_id:r.id,updated_at:new Date().toISOString()}),n({title:"Bc 2/2: ang lu Page...",description:"Lu trang Facebook  qun l tin nhn"});const xn=await j_(r.id);for(const on of xn)on.Id&&await iF(on.Id,{is_active:!1});await jge({page_id:G,access_token:dt,is_active:!0,user_id:r.id,page_name:(ye==null?void 0:ye.name)||G,category:ye==null?void 0:ye.category,updated_at:new Date().toISOString()}),n({title:" Hon tt!",description:" lu TKQC v Page thnh cng vo h thng"}),window.dispatchEvent(new Event("settings-updated"))}catch(ye){console.error(" handleSaveAdAccountAndPage error:",ye),n({title:"Li",description:ye instanceof Error?ye.message:"C li xy ra",variant:"destructive"})}finally{x(!1)}},ce=async()=>{if(!C.trim()){n({title:" Thiu thng tin",description:"Vui lng nhp API Key",variant:"destructive"});return}if(!P){n({title:" Thiu thng tin",description:"Vui lng chn Model",variant:"destructive"});return}h(!0),w("checking");try{console.log(" Testing OpenAI API key with model:",P);const{data:ye,error:dt}=await wt.functions.invoke("check-openai-api",{body:{apiKey:C.trim(),model:P}});if(dt)throw dt;ye.success?(w("valid"),n({title:" API Key hp l",description:ye.message||"Kt ni thnh cng!"})):(w("invalid"),n({title:" API Key khng hp l",description:ye.error||"Vui lng kim tra li key v model",variant:"destructive"}))}catch(ye){console.error("Error checking OpenAI key:",ye),w("invalid"),n({title:" Li kim tra",description:"Khng th kt ni n server kim tra",variant:"destructive"})}finally{h(!1)}},ae=async()=>{if(r!=null&&r.id){if(!C.trim()){n({title:" Vui lng nhp API Key",variant:"destructive"});return}if(j!=="valid"){n({title:" Cha kim tra API",description:"Vui lng n 'Kim tra' v m bo hp l trc khi lu.",variant:"destructive"});return}p(!0);try{console.log(" Saving OpenAI settings for user:",r.id),await oF(r.id,"openai"),await Sge({api_key:C.trim(),model:P,is_active:!0,user_id:r.id,name_api:"openai"},r.id),n({title:"  lu thnh cng",description:`Model: ${P}  c lu.`}),Ne()}catch(ye){console.error("Error saving OpenAI settings:",ye),n({title:" Li lu ci t",description:"Khng th lu vo c s d liu",variant:"destructive"})}finally{p(!1)}}},Ue=async()=>{x(!0);try{if(!(r!=null&&r.id))throw new Error("User not authenticated");const dt=(await Vr(r.id)).map(xn=>LT(xn.Id,{is_active:!1}));await Promise.all(dt);const tn=(await j_(r.id)).map(xn=>iF(xn.Id,{is_active:!1}));await Promise.all(tn),await oF(r.id),k(""),A(""),O("gpt-4o-mini"),B(""),U(""),$([]),z([]),_("idle"),w("idle"),n({title:" xa",description:"Tt c ci t  c xa"})}catch{n({title:"Li",description:"Khng th xa ci t",variant:"destructive"})}finally{x(!1)}},Ve=async()=>{if(!F.trim()){n({title:"Li",description:"Vui lng nhp link bi vit",variant:"destructive"});return}se(!0),Y(void 0),xe(void 0);try{const{data:ye,error:dt}=await wt.functions.invoke("validate-facebook-post",{body:{postUrl:F.trim(),pageToken:N||void 0}});if(dt)throw dt;if(ye&&ye.success)Y({id:ye.fullPostId||ye.postId,name:ye.pageId||"N/A",type:ye.contentType||"unknown"}),n({title:" Thnh cng",description:`Post ID: ${ye.fullPostId||ye.postId}`});else throw new Error((ye==null?void 0:ye.error)||"Khng th ly ID")}catch(ye){xe(ye.message||"Khng th kim tra link"),n({title:"Li",description:ye.message||"Khng th kim tra link",variant:"destructive"})}finally{se(!1)}},ut=({status:ye})=>ye==="valid"?s.jsx(Nn,{className:"w-4 h-4 text-green-600"}):ye==="invalid"?s.jsx(is,{className:"w-4 h-4 text-red-600"}):null;return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(hr,{children:[s.jsxs(fr,{className:"flex items-center gap-2 text-xl",children:[s.jsx(Hz,{className:"w-6 h-6 text-primary"}),"Ci t API Tokens"]}),s.jsx(Ca,{className:"sr-only",children:"Qun l Facebook Ads tokens, Personal tokens v OpenAI API keys"})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-green-800 flex items-start gap-2",children:[s.jsx(Nn,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Bo mt:"})," Cc token c lu an ton trn cloud database vi m ha. Ch bn mi c quyn truy cp."]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{htmlFor:"adsToken",className:"text-sm font-medium flex items-center gap-2",children:["Facebook Ads Access Token",s.jsx(ut,{status:b})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ke,{id:"adsToken",type:a?"text":"password",value:N,onChange:ye=>{k(ye.target.value),_("idle")},placeholder:"EAAVVRSZBo9ngBP...",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:a?s.jsx(c4,{className:"w-4 h-4"}):s.jsx(Sx,{className:"w-4 h-4"})})]}),s.jsx(J,{onClick:re,disabled:c||!N,variant:"outline",className:"min-w-[100px]",children:c?s.jsx(zt,{className:"w-4 h-4 animate-spin"}):"Check"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Token  truy cp Facebook Ads API"}),b==="valid"&&oe&&s.jsxs("div",{className:"mt-2 p-3 bg-green-50 rounded-lg border border-green-200 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nn,{className:"w-4 h-4 text-green-600"}),s.jsxs("p",{className:"text-sm font-medium text-green-800",children:[" Token hp l (",oe.tokenType,")"]})]}),s.jsxs("div",{className:"text-xs text-green-700 space-y-1",children:[s.jsxs("p",{children:[" Ht hn: ",new Date(oe.expiresAt).toLocaleString("vi-VN")]}),s.jsxs("p",{children:[" User ID: ",oe.userId]}),((mt=(Rt=oe.data)==null?void 0:Rt.adAccounts)==null?void 0:mt.length)>0&&s.jsxs("p",{children:[" ",oe.data.adAccounts.length," ti khon qung co"]}),((yn=(rn=oe.data)==null?void 0:rn.pages)==null?void 0:yn.length)>0&&s.jsxs("p",{children:[" ",oe.data.pages.length," trang"]})]}),((Tt=(dn=oe.permissions)==null?void 0:dn.missing)==null?void 0:Tt.length)>0&&s.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:[s.jsxs("p",{className:"text-xs text-yellow-800 font-medium flex items-center gap-1",children:[s.jsx(ac,{className:"w-3 h-3"}),"Thiu ",oe.permissions.missing.length," quyn:"]}),s.jsx("ul",{className:"text-xs text-yellow-700 mt-1 ml-4 list-disc",children:oe.permissions.missing.map(ye=>s.jsx("li",{children:ye},ye))})]}),((Ce=(ve=oe.permissions)==null?void 0:ve.granted)==null?void 0:Ce.length)>0&&s.jsxs("details",{className:"text-xs",children:[s.jsxs("summary",{className:"cursor-pointer text-green-700 hover:text-green-800 font-medium",children:["Xem tt c ",oe.permissions.granted.length," quyn "]}),s.jsx("ul",{className:"mt-1 ml-4 list-disc text-green-600 max-h-32 overflow-y-auto",children:oe.permissions.granted.map(ye=>s.jsx("li",{children:ye},ye))})]})]}),b==="invalid"&&oe&&s.jsxs("div",{className:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200",children:[s.jsxs("p",{className:"text-sm text-red-800 font-medium flex items-center gap-1",children:[s.jsx(is,{className:"w-4 h-4"}),oe.error||"Token khng hp l"]}),s.jsx("p",{className:"text-xs text-red-700 mt-1",children:" Hng dn: To token mi ti Facebook Business Manager vi y  quyn ads_management v pages"})]})]}),T.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"adAccount",className:"text-sm font-medium",children:"Chn Ti khon Qung co"}),s.jsxs(kn,{value:W,onValueChange:B,children:[s.jsx(wn,{children:s.jsx(Cn,{placeholder:"Chn ti khon"})}),s.jsx(_n,{children:T.map(ye=>s.jsxs(st,{value:ye.id,children:[ye.name," (",ye.id,")"]},ye.id))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Ti khon ny s c dng  to chin dch"})]}),L.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"page",className:"text-sm font-medium",children:"Chn Trang"}),s.jsxs(kn,{value:G,onValueChange:U,children:[s.jsx(wn,{children:s.jsx(Cn,{placeholder:"Chn trang"})}),s.jsx(_n,{children:L.map(ye=>s.jsxs(st,{value:ye.id,children:[ye.name," ",ye.category&&`(${ye.category})`]},ye.id))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Trang ny s c dng  qun l tin nhn"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{htmlFor:"openaiApiKey",className:"text-sm font-medium flex items-center gap-2",children:["OpenAI API Key",s.jsx(ut,{status:j})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ke,{id:"openaiApiKey",type:o?"text":"password",value:C,onChange:ye=>{A(ye.target.value),w("idle")},placeholder:"sk-...",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:o?s.jsx(c4,{className:"w-4 h-4"}):s.jsx(Sx,{className:"w-4 h-4"})})]}),s.jsx(J,{onClick:ce,disabled:d||!C,variant:"outline",className:"min-w-[100px]",children:d?s.jsx(zt,{className:"w-4 h-4 animate-spin"}):"Check"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"API key t OpenAI  s dng GPT models"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"openaiModel",className:"text-sm font-medium",children:"Chn Model OpenAI"}),s.jsxs(kn,{value:P,onValueChange:O,children:[s.jsx(wn,{children:s.jsx(Cn,{placeholder:"Chn model"})}),s.jsx(_n,{children:Rbe.map(ye=>s.jsx(st,{value:ye.value,children:ye.label},ye.value))})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Model s c s dng cho cc tnh nng AI"})]}),s.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg border",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Lu TKQC & Page"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Lu Token Ads + chn TKQC + chn Page (s xa d liu c)"})]}),s.jsxs(J,{onClick:Z,disabled:v||!W||!G||b!=="valid"||!L.some(ye=>ye.id===G&&ye.access_token),size:"sm",children:[v?s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}):null,"Lu TKQC & Page"]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg border",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Lu OpenAI API Key"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Lu API Key + Model OpenAI"})]}),s.jsxs(J,{onClick:ae,disabled:v||j!=="valid",size:"sm",children:[v?s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}):null,"Lu API Key"]})]}),s.jsx(J,{onClick:Ue,variant:"outline",className:"w-full",disabled:v,children:"Xa tt c ci t"})]}),s.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[s.jsx(ge,{htmlFor:"testUrl",className:"text-xs font-medium",children:"Link bi vit"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{id:"testUrl",value:F,onChange:ye=>{K(ye.target.value),Y(void 0),xe(void 0)},placeholder:"https://facebook.com/...",className:"h-8 text-xs"}),s.jsx(J,{onClick:Ve,disabled:X||!F.trim(),variant:"outline",size:"sm",className:"h-8 px-3 text-xs",children:X?s.jsx(zt,{className:"w-3 h-3 animate-spin"}):"Kim tra"})]}),D&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",D.id,"  Tn: ",D.name,"  Loi: ",D.type]}),ue&&s.jsx("p",{className:"text-xs text-red-600",children:ue})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",s.jsx("strong",{children:"Hng dn ly tokens:"})]}),s.jsxs("ul",{className:"text-xs text-muted-foreground mt-2 space-y-1 ml-4",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Facebook Ads Token:"})," Truy cp Facebook Graph API Explorer  to token"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Page Token:"})," Ly t Page Settings  Advanced  Page Token"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"OpenAI API Key:"})," ng k ti platform.openai.com"]})]})]})]})]})})};var vA="rovingFocusGroup.onEntryFocus",Mbe={bubbles:!1,cancelable:!0},eb="RovingFocusGroup",[GT,v9,Dbe]=M0(eb),[Lbe,ev]=ga(eb,[Dbe]),[Fbe,Bbe]=Lbe(eb),y9=g.forwardRef((e,t)=>s.jsx(GT.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(GT.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Ube,{...e,ref:t})})}));y9.displayName=eb;var Ube=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=g.useRef(null),p=Dt(t,m),v=zf(i),[x,b]=_i({prop:o,defaultProp:l??null,onChange:c,caller:eb}),[_,j]=g.useState(!1),w=aa(u),N=v9(n),k=g.useRef(!1),[C,A]=g.useState(0);return g.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(vA,w),()=>P.removeEventListener(vA,w)},[w]),s.jsx(Fbe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:x,onItemFocus:g.useCallback(P=>b(P),[b]),onItemShiftTab:g.useCallback(()=>j(!0),[]),onFocusableItemAdd:g.useCallback(()=>A(P=>P+1),[]),onFocusableItemRemove:g.useCallback(()=>A(P=>P-1),[]),children:s.jsx(it.div,{tabIndex:_||C===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:We(e.onMouseDown,()=>{k.current=!0}),onFocus:We(e.onFocus,P=>{const O=!k.current;if(P.target===P.currentTarget&&O&&!_){const T=new CustomEvent(vA,Mbe);if(P.currentTarget.dispatchEvent(T),!T.defaultPrevented){const $=N().filter(G=>G.focusable),L=$.find(G=>G.active),z=$.find(G=>G.id===x),B=[L,z,...$].filter(Boolean).map(G=>G.ref.current);w9(B,d)}}k.current=!1}),onBlur:We(e.onBlur,()=>j(!1))})})}),x9="RovingFocusGroupItem",b9=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Fa(),u=i||c,d=Bbe(x9,n),h=d.currentTabStopId===u,m=v9(n),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:x}=d;return g.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),s.jsx(GT.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:s.jsx(it.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:We(e.onMouseDown,b=>{r?d.onItemFocus(u):b.preventDefault()}),onFocus:We(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:We(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const _=Hbe(b,d.orientation,d.dir);if(_!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=m().filter(N=>N.focusable).map(N=>N.ref.current);if(_==="last")w.reverse();else if(_==="prev"||_==="next"){_==="prev"&&w.reverse();const N=w.indexOf(b.currentTarget);w=d.loop?Wbe(w,N+1):w.slice(N+1)}setTimeout(()=>w9(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});b9.displayName=x9;var Vbe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zbe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Hbe(e,t,n){const r=zbe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Vbe[r]}function w9(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Wbe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var zI=y9,HI=b9,YT=["Enter"," "],qbe=["ArrowDown","PageUp","Home"],_9=["ArrowUp","PageDown","End"],Kbe=[...qbe,..._9],Gbe={ltr:[...YT,"ArrowRight"],rtl:[...YT,"ArrowLeft"]},Ybe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tb="Menu",[Dx,Qbe,Xbe]=M0(tb),[Wf,j9]=ga(tb,[Xbe,Vd,ev]),LS=Vd(),S9=ev(),[Jbe,qf]=Wf(tb),[Zbe,nb]=Wf(tb),N9=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,l=LS(t),[c,u]=g.useState(null),d=g.useRef(!1),h=aa(i),m=zf(a);return g.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),s.jsx(fS,{...l,children:s.jsx(Jbe,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:s.jsx(Zbe,{scope:t,onClose:g.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};N9.displayName=tb;var ewe="MenuAnchor",WI=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=LS(n);return s.jsx(U0,{...a,...r,ref:t})});WI.displayName=ewe;var qI="MenuPortal",[twe,k9]=Wf(qI,{forceMount:void 0}),C9=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=qf(qI,t);return s.jsx(twe,{scope:t,forceMount:n,children:s.jsx(Aa,{present:n||i.open,children:s.jsx(Fg,{asChild:!0,container:a,children:r})})})};C9.displayName=qI;var Po="MenuContent",[nwe,KI]=Wf(Po),A9=g.forwardRef((e,t)=>{const n=k9(Po,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=qf(Po,e.__scopeMenu),o=nb(Po,e.__scopeMenu);return s.jsx(Dx.Provider,{scope:e.__scopeMenu,children:s.jsx(Aa,{present:r||i.open,children:s.jsx(Dx.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(rwe,{...a,ref:t}):s.jsx(awe,{...a,ref:t})})})})}),rwe=g.forwardRef((e,t)=>{const n=qf(Po,e.__scopeMenu),r=g.useRef(null),a=Dt(t,r);return g.useEffect(()=>{const i=r.current;if(i)return kS(i)},[]),s.jsx(GI,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:We(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),awe=g.forwardRef((e,t)=>{const n=qf(Po,e.__scopeMenu);return s.jsx(GI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),swe=Ad("MenuContent.ScrollLock"),GI=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:v,...x}=e,b=qf(Po,n),_=nb(Po,n),j=LS(n),w=S9(n),N=Qbe(n),[k,C]=g.useState(null),A=g.useRef(null),P=Dt(t,A,b.onContentChange),O=g.useRef(0),T=g.useRef(""),$=g.useRef(0),L=g.useRef(null),z=g.useRef("right"),W=g.useRef(0),B=v?q0:g.Fragment,G=v?{as:swe,allowPinchZoom:!0}:void 0,U=K=>{var oe,ee;const X=T.current+K,se=N().filter(re=>!re.disabled),D=document.activeElement,Y=(oe=se.find(re=>re.ref.current===D))==null?void 0:oe.textValue,ue=se.map(re=>re.textValue),xe=vwe(ue,X,Y),Ne=(ee=se.find(re=>re.textValue===xe))==null?void 0:ee.ref.current;(function re(Z){T.current=Z,window.clearTimeout(O.current),Z!==""&&(O.current=window.setTimeout(()=>re(""),1e3))})(X),Ne&&setTimeout(()=>Ne.focus())};g.useEffect(()=>()=>window.clearTimeout(O.current),[]),SS();const F=g.useCallback(K=>{var se,D;return z.current===((se=L.current)==null?void 0:se.side)&&xwe(K,(D=L.current)==null?void 0:D.area)},[]);return s.jsx(nwe,{scope:n,searchRef:T,onItemEnter:g.useCallback(K=>{F(K)&&K.preventDefault()},[F]),onItemLeave:g.useCallback(K=>{var X;F(K)||((X=A.current)==null||X.focus(),C(null))},[F]),onTriggerLeave:g.useCallback(K=>{F(K)&&K.preventDefault()},[F]),pointerGraceTimerRef:$,onPointerGraceIntentChange:g.useCallback(K=>{L.current=K},[]),children:s.jsx(B,{...G,children:s.jsx(W0,{asChild:!0,trapped:a,onMountAutoFocus:We(i,K=>{var X;K.preventDefault(),(X=A.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Bf,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:s.jsx(zI,{asChild:!0,...w,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:C,onEntryFocus:We(c,K=>{_.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(mS,{role:"menu","aria-orientation":"vertical","data-state":H9(b.open),"data-radix-menu-content":"",dir:_.dir,...j,...x,ref:P,style:{outline:"none",...x.style},onKeyDown:We(x.onKeyDown,K=>{const se=K.target.closest("[data-radix-menu-content]")===K.currentTarget,D=K.ctrlKey||K.altKey||K.metaKey,Y=K.key.length===1;se&&(K.key==="Tab"&&K.preventDefault(),!D&&Y&&U(K.key));const ue=A.current;if(K.target!==ue||!Kbe.includes(K.key))return;K.preventDefault();const Ne=N().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);_9.includes(K.key)&&Ne.reverse(),pwe(Ne)}),onBlur:We(e.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(O.current),T.current="")}),onPointerMove:We(e.onPointerMove,Lx(K=>{const X=K.target,se=W.current!==K.clientX;if(K.currentTarget.contains(X)&&se){const D=K.clientX>W.current?"right":"left";z.current=D,W.current=K.clientX}}))})})})})})})});A9.displayName=Po;var iwe="MenuGroup",YI=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(it.div,{role:"group",...r,ref:t})});YI.displayName=iwe;var owe="MenuLabel",E9=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(it.div,{...r,ref:t})});E9.displayName=owe;var Sj="MenuItem",PF="menu.itemSelect",FS=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=g.useRef(null),o=nb(Sj,e.__scopeMenu),l=KI(Sj,e.__scopeMenu),c=Dt(t,i),u=g.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(PF,{bubbles:!0,cancelable:!0});h.addEventListener(PF,p=>r==null?void 0:r(p),{once:!0}),W2(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(T9,{...a,ref:c,disabled:n,onClick:We(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:We(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:We(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||YT.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});FS.displayName=Sj;var T9=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=KI(Sj,n),l=S9(n),c=g.useRef(null),u=Dt(t,c),[d,h]=g.useState(!1),[m,p]=g.useState("");return g.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[i.children]),s.jsx(Dx.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:s.jsx(HI,{asChild:!0,...l,focusable:!r,children:s.jsx(it.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:We(e.onPointerMove,Lx(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:We(e.onPointerLeave,Lx(v=>o.onItemLeave(v))),onFocus:We(e.onFocus,()=>h(!0)),onBlur:We(e.onBlur,()=>h(!1))})})})}),lwe="MenuCheckboxItem",P9=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(M9,{scope:e.__scopeMenu,checked:n,children:s.jsx(FS,{role:"menuitemcheckbox","aria-checked":Nj(n)?"mixed":n,...a,ref:t,"data-state":XI(n),onSelect:We(a.onSelect,()=>r==null?void 0:r(Nj(n)?!0:!n),{checkForDefaultPrevented:!1})})})});P9.displayName=lwe;var O9="MenuRadioGroup",[cwe,uwe]=Wf(O9,{value:void 0,onValueChange:()=>{}}),I9=g.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=aa(r);return s.jsx(cwe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx(YI,{...a,ref:t})})});I9.displayName=O9;var R9="MenuRadioItem",$9=g.forwardRef((e,t)=>{const{value:n,...r}=e,a=uwe(R9,e.__scopeMenu),i=n===a.value;return s.jsx(M9,{scope:e.__scopeMenu,checked:i,children:s.jsx(FS,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":XI(i),onSelect:We(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});$9.displayName=R9;var QI="MenuItemIndicator",[M9,dwe]=Wf(QI,{checked:!1}),D9=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=dwe(QI,n);return s.jsx(Aa,{present:r||Nj(i.checked)||i.checked===!0,children:s.jsx(it.span,{...a,ref:t,"data-state":XI(i.checked)})})});D9.displayName=QI;var hwe="MenuSeparator",L9=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(it.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});L9.displayName=hwe;var fwe="MenuArrow",F9=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=LS(n);return s.jsx(pS,{...a,...r,ref:t})});F9.displayName=fwe;var mwe="MenuSub",[ZYe,B9]=Wf(mwe),Ty="MenuSubTrigger",U9=g.forwardRef((e,t)=>{const n=qf(Ty,e.__scopeMenu),r=nb(Ty,e.__scopeMenu),a=B9(Ty,e.__scopeMenu),i=KI(Ty,e.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(WI,{asChild:!0,...u,children:s.jsx(T9,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":H9(n.open),...e,ref:Zc(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:We(e.onPointerMove,Lx(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:We(e.onPointerLeave,Lx(h=>{var p,v;d();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const x=(v=n.content)==null?void 0:v.dataset.side,b=x==="right",_=b?-5:5,j=m[b?"left":"right"],w=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+_,y:h.clientY},{x:j,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:j,y:m.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:We(e.onKeyDown,h=>{var p;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Gbe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});U9.displayName=Ty;var V9="MenuSubContent",z9=g.forwardRef((e,t)=>{const n=k9(Po,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=qf(Po,e.__scopeMenu),o=nb(Po,e.__scopeMenu),l=B9(V9,e.__scopeMenu),c=g.useRef(null),u=Dt(t,c);return s.jsx(Dx.Provider,{scope:e.__scopeMenu,children:s.jsx(Aa,{present:r||i.open,children:s.jsx(Dx.Slot,{scope:e.__scopeMenu,children:s.jsx(GI,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:We(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:We(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:We(e.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=Ybe[o.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});z9.displayName=V9;function H9(e){return e?"open":"closed"}function Nj(e){return e==="indeterminate"}function XI(e){return Nj(e)?"indeterminate":e?"checked":"unchecked"}function pwe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function gwe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function vwe(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=gwe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function ywe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function xwe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ywe(n,t)}function Lx(e){return t=>t.pointerType==="mouse"?e(t):void 0}var bwe=N9,wwe=WI,_we=C9,jwe=A9,Swe=YI,Nwe=E9,kwe=FS,Cwe=P9,Awe=I9,Ewe=$9,Twe=D9,Pwe=L9,Owe=F9,Iwe=U9,Rwe=z9,BS="DropdownMenu",[$we,eQe]=ga(BS,[j9]),ei=j9(),[Mwe,W9]=$we(BS),q9=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=ei(t),u=g.useRef(null),[d,h]=_i({prop:a,defaultProp:i??!1,onChange:o,caller:BS});return s.jsx(Mwe,{scope:t,triggerId:Fa(),triggerRef:u,contentId:Fa(),open:d,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(m=>!m),[h]),modal:l,children:s.jsx(bwe,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};q9.displayName=BS;var K9="DropdownMenuTrigger",G9=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=W9(K9,n),o=ei(n);return s.jsx(wwe,{asChild:!0,...o,children:s.jsx(it.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Zc(t,i.triggerRef),onPointerDown:We(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:We(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});G9.displayName=K9;var Dwe="DropdownMenuPortal",Y9=e=>{const{__scopeDropdownMenu:t,...n}=e,r=ei(t);return s.jsx(_we,{...r,...n})};Y9.displayName=Dwe;var Q9="DropdownMenuContent",X9=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=W9(Q9,n),i=ei(n),o=g.useRef(!1);return s.jsx(jwe,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:We(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:We(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});X9.displayName=Q9;var Lwe="DropdownMenuGroup",Fwe=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Swe,{...a,...r,ref:t})});Fwe.displayName=Lwe;var Bwe="DropdownMenuLabel",J9=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Nwe,{...a,...r,ref:t})});J9.displayName=Bwe;var Uwe="DropdownMenuItem",Z9=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(kwe,{...a,...r,ref:t})});Z9.displayName=Uwe;var Vwe="DropdownMenuCheckboxItem",eK=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Cwe,{...a,...r,ref:t})});eK.displayName=Vwe;var zwe="DropdownMenuRadioGroup",Hwe=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Awe,{...a,...r,ref:t})});Hwe.displayName=zwe;var Wwe="DropdownMenuRadioItem",tK=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Ewe,{...a,...r,ref:t})});tK.displayName=Wwe;var qwe="DropdownMenuItemIndicator",nK=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Twe,{...a,...r,ref:t})});nK.displayName=qwe;var Kwe="DropdownMenuSeparator",rK=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Pwe,{...a,...r,ref:t})});rK.displayName=Kwe;var Gwe="DropdownMenuArrow",Ywe=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Owe,{...a,...r,ref:t})});Ywe.displayName=Gwe;var Qwe="DropdownMenuSubTrigger",aK=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Iwe,{...a,...r,ref:t})});aK.displayName=Qwe;var Xwe="DropdownMenuSubContent",sK=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ei(n);return s.jsx(Rwe,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sK.displayName=Xwe;var Jwe=q9,Zwe=G9,e_e=Y9,iK=X9,oK=J9,lK=Z9,cK=eK,uK=tK,dK=nK,hK=rK,fK=aK,mK=sK;const pK=Jwe,gK=Zwe,t_e=g.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(fK,{ref:a,className:je("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(rj,{className:"ml-auto h-4 w-4"})]}));t_e.displayName=fK.displayName;const n_e=g.forwardRef(({className:e,...t},n)=>s.jsx(mK,{ref:n,className:je("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));n_e.displayName=mK.displayName;const JI=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(e_e,{children:s.jsx(iK,{ref:r,sideOffset:t,className:je("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));JI.displayName=iK.displayName;const lf=g.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(lK,{ref:r,className:je("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));lf.displayName=lK.displayName;const r_e=g.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(cK,{ref:a,className:je("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(dK,{children:s.jsx(Td,{className:"h-4 w-4"})})}),t]}));r_e.displayName=cK.displayName;const a_e=g.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(uK,{ref:r,className:je("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(dK,{children:s.jsx(Uz,{className:"h-2 w-2 fill-current"})})}),t]}));a_e.displayName=uK.displayName;const ZI=g.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(oK,{ref:r,className:je("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));ZI.displayName=oK.displayName;const Fx=g.forwardRef(({className:e,...t},n)=>s.jsx(hK,{ref:n,className:je("-mx-1 my-1 h-px bg-muted",e),...t}));Fx.displayName=hK.displayName;const s_e=({userName:e,userEmail:t,children:n,onOpenProfileSettings:r,onOpenChangePassword:a,onLogout:i})=>s.jsxs(pK,{children:[s.jsx(gK,{asChild:!0,children:n}),s.jsxs(JI,{align:"end",className:"w-56 bg-popover z-50",children:[s.jsx(ZI,{children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:e}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t})]})}),s.jsx(Fx,{}),s.jsxs(lf,{onClick:r,children:[s.jsx(wd,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Ci t"})]}),s.jsxs(lf,{onClick:a,children:[s.jsx(Ace,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"i mt khu"})]}),s.jsx(Fx,{}),s.jsxs(lf,{onClick:i,children:[s.jsx(Wz,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"ng xut"})]})]})]}),eR=It.TABLES.PROFILES,Nf=async e=>{var t;try{const n=await fetch(`${ht(eR)}?where=(user_id,eq,${e})&limit=1`,{method:"GET",headers:lt()});if(!n.ok)throw new Error(`HTTP ${n.status}: ${await n.text()}`);const a=((t=(await n.json()).list)==null?void 0:t[0])||null;if(a&&typeof a.report_settings=="string")try{a.report_settings=JSON.parse(a.report_settings)}catch(i){console.warn("Failed to parse report_settings:",i),a.report_settings={}}return a}catch(n){throw console.error(" getUserProfile error:",n),n}},i_e=async e=>{try{const t={...e};t.report_settings&&typeof t.report_settings!="string"&&(t.report_settings=JSON.stringify(t.report_settings));const n=await fetch(ht(eR),{method:"POST",headers:lt(),body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP ${n.status}: ${await n.text()}`);return await n.json()}catch(t){throw console.error(" createUserProfile error:",t),t}},vK=async(e,t)=>{try{const n=await Nf(e);if(!n)throw console.warn("Profile not found for:",e),new Error("Profile not found. Please reload the page to sync your profile.");const r={};t.full_name!==void 0&&(r.full_name=t.full_name),t.avatar_url!==void 0&&(r.avatar_url=t.avatar_url),t.report_settings!==void 0&&(r.report_settings=typeof t.report_settings=="string"?t.report_settings:JSON.stringify(t.report_settings));const a=`${ht(eR)}?where=(user_id,eq,${e})`,i=await fetch(a,{method:"PATCH",headers:lt(),body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`HTTP ${i.status}: ${o}`)}return await Nf(e)||n}catch(n){throw console.error(" updateUserProfile error:",n),n}},o_e=({open:e,onOpenChange:t})=>{const{user:n}=Mn(),[r,a]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(""),[u,d]=g.useState(!1);g.useEffect(()=>{e&&n&&h()},[e,n]);const h=async()=>{if(n)try{const v=await Nf(n.id);v?(a(v.full_name||""),o(v.email||n.email||""),c(v.avatar_url||"")):o(n.email||"")}catch(v){console.error("Failed to load profile:",v),ne.error("Khng th ti thng tin c nhn")}},m=async()=>{if(!(n!=null&&n.id)){ne.error("Khng tm thy thng tin ngi dng");return}d(!0);try{let v=await Nf(n.id);if(!v)v=await i_e({user_id:n.id,email:n.email||"",full_name:r,avatar_url:l});else{const x=await vK(n.id,{full_name:r,avatar_url:l})}ne.success(" cp nht thng tin c nhn"),window.dispatchEvent(new CustomEvent("profile-updated")),t(!1)}catch(v){console.error("Failed to update profile:",v);const x=(v==null?void 0:v.message)||"Khng th cp nht thng tin";ne.error(x)}finally{d(!1)}},p=v=>v?v.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"U";return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"sm:max-w-[425px]",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"Ci t thng tin c nhn"}),s.jsx(Ca,{children:"Cp nht tn v avatar ca bn"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(FI,{className:"h-20 w-20",children:[s.jsx(k7,{src:l}),s.jsx(BI,{className:"bg-primary text-primary-foreground text-lg",children:p(r||i)})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"email",children:"Email"}),s.jsx(Ke,{id:"email",type:"email",value:i,disabled:!0,className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Email khng th thay i"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"fullName",children:"Tn y "}),s.jsx(Ke,{id:"fullName",type:"text",placeholder:"Nhp tn ca bn",value:r,onChange:v=>a(v.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"avatarUrl",children:"URL Avatar"}),s.jsx(Ke,{id:"avatarUrl",type:"url",placeholder:"https://example.com/avatar.jpg",value:l,onChange:v=>c(v.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Nhp URL hnh nh avatar"})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>t(!1),children:"Hy"}),s.jsx(J,{onClick:m,disabled:u,children:u?"ang lu...":"Lu thay i"})]})]})})},l_e=({open:e,onOpenChange:t})=>{const{updatePassword:n}=Mn(),[r,a]=g.useState(""),[i,o]=g.useState(""),[l,c]=g.useState(!1),u=async()=>{if(!r){ne.error("Vui lng nhp mt khu mi");return}if(r.length<6){ne.error("Mt khu phi c t nht 6 k t");return}if(r!==i){ne.error("Mt khu xc nhn khng khp");return}c(!0);try{const{error:h}=await n(r);if(h){ne.error(h.message||"Khng th i mt khu");return}ne.success(" i mt khu thnh cng"),a(""),o(""),t(!1)}catch(h){console.error("Failed to change password:",h),ne.error("C li xy ra khi i mt khu")}finally{c(!1)}},d=()=>{a(""),o(""),t(!1)};return s.jsx(yr,{open:e,onOpenChange:d,children:s.jsxs(dr,{className:"sm:max-w-[425px]",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"i mt khu"}),s.jsx(Ca,{children:"Nhp mt khu mi  cp nht ti khon"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"newPassword",children:"Mt khu mi"}),s.jsx(Ke,{id:"newPassword",type:"password",placeholder:"Nhp mt khu mi",value:r,onChange:h=>a(h.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"confirmPassword",children:"Xc nhn mt khu mi"}),s.jsx(Ke,{id:"confirmPassword",type:"password",placeholder:"Nhp li mt khu mi",value:i,onChange:h=>o(h.target.value)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mt khu phi c t nht 6 k t"})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:d,children:"Hy"}),s.jsx(J,{onClick:u,disabled:l,children:l?"ang i...":"i mt khu"})]})]})})},c_e=[{id:"ai-chat",label:"Tr l AI",icon:s.jsx(Zr,{className:"w-5 h-5"}),category:"ai",allowedRoles:["user","admin","super_admin"]},{id:"create-ads",label:"1. To qung co bn",icon:s.jsx(X2,{className:"w-5 h-5"}),category:"manual",allowedRoles:["user","admin","super_admin"],featureFlag:"manual_create_ads"},{id:"create-message",label:"2. To QC tin nhn mi",icon:s.jsx(qz,{className:"w-5 h-5"}),category:"manual",allowedRoles:["user","admin","super_admin"],featureFlag:"manual_create_message"},{id:"audience",label:"3. To lp i tng",icon:s.jsx(yl,{className:"w-5 h-5"}),category:"manual",allowedRoles:["user","admin","super_admin"],featureFlag:"manual_audience"},{id:"advanced-ads",label:"4. ADS nng cao",icon:s.jsx(Dh,{className:"w-5 h-5"}),category:"manual",allowedRoles:["user","admin","super_admin"],featureFlag:"manual_advanced_ads"},{id:"ads-report",label:"5. Bo co Ads",icon:s.jsx(gce,{className:"w-5 h-5"}),category:"report",allowedRoles:["user","admin","super_admin"],featureFlag:"report_ads"},{id:"sales-report",label:"6. Bo co sale",icon:s.jsx(zz,{className:"w-5 h-5"}),category:"report",allowedRoles:["user","admin","super_admin"],featureFlag:"report_sale"},{id:"summary-report",label:"7. Bo co tng",icon:s.jsx(Bg,{className:"w-5 h-5"}),category:"report",allowedRoles:["user","admin","super_admin"],featureFlag:"report_summary"},{id:"create-quick-ad",label:"8. Bi vit sn nhanh",icon:s.jsx(vf,{className:"w-5 h-5"}),category:"manual",allowedRoles:["user","admin","super_admin"],featureFlag:"manual_quick_ad"},{id:"notification-settings",label:"9. Ci t thng bo",icon:s.jsx(_x,{className:"w-5 h-5"}),category:"system",allowedRoles:["user","admin","super_admin"]}],OF=({activeTab:e,onTabChange:t})=>{const{user:n,signOut:r}=Mn(),{roles:a}=_I();J0();const i=cs(),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,h]=g.useState(!1),[m,p]=g.useState(""),[v,x]=g.useState(""),[b,_]=g.useState(""),[j,w]=g.useState(""),N=async()=>{await r(),i("/auth/login")},k=c_e.filter(A=>!!A.allowedRoles.some(O=>a.includes(O))),C={ai:k.filter(A=>A.category==="ai"),manual:k.filter(A=>A.category==="manual"),report:k.filter(A=>A.category==="report"),system:k.filter(A=>A.category==="system")};return g.useEffect(()=>{const A=async()=>{var O,T;if(n)try{const $=await Nf(n.id);if(x(n.email||""),$!=null&&$.full_name)p($.full_name);else{const L=((O=n.email)==null?void 0:O.split("@")[0])||"User";p(L)}}catch($){console.error("Failed to load user profile:",$),x(n.email||"");const L=((T=n.email)==null?void 0:T.split("@")[0])||"User";p(L)}};A();const P=()=>{A()};return window.addEventListener("profile-updated",P),()=>{window.removeEventListener("profile-updated",P)}},[n]),g.useEffect(()=>{const A=async()=>{if(n!=null&&n.id)try{const O=await Vr(n.id);O&&O.length>0?(_(O[0].account_name||""),w(O[0].account_id||"")):(_(""),w(""))}catch(O){console.error("Failed to load ad account:",O),_(""),w("")}};A();const P=()=>{A()};return window.addEventListener("settings-updated",P),()=>{window.removeEventListener("settings-updated",P)}},[n==null?void 0:n.id]),s.jsxs("nav",{className:"w-64 border-r bg-card flex-shrink-0 flex flex-col h-full max-h-screen overflow-hidden",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 pt-4",children:[C.ai.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:" Tr l AI"}),C.ai.map(A=>s.jsxs("button",{onClick:()=>t(A.id),className:je("flex items-center gap-3 px-3 py-3 w-full text-sm font-medium transition-all rounded-lg",e===A.id?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-secondary/50"),children:[A.icon,s.jsx("span",{className:"flex-1 text-left",children:A.label}),A.badge&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-background/20 rounded-full",children:A.badge})]},A.id))]}),C.manual.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:" Cng c xy dng"}),C.manual.map(A=>s.jsxs("button",{onClick:()=>t(A.id),className:je("flex items-center gap-3 px-3 py-3 w-full text-sm font-medium transition-all rounded-lg",e===A.id?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-secondary/50"),children:[A.icon,s.jsx("span",{className:"flex-1 text-left",children:A.label}),A.badge&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-background/20 rounded-full",children:A.badge})]},A.id))]}),C.report.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:" Bo co"}),C.report.map(A=>s.jsxs("button",{onClick:()=>t(A.id),className:je("flex items-center gap-3 px-3 py-3 w-full text-sm font-medium transition-all rounded-lg",e===A.id?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-secondary/50"),children:[A.icon,s.jsx("span",{className:"flex-1 text-left",children:A.label}),A.badge&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-background/20 rounded-full",children:A.badge})]},A.id))]}),C.system.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:" H thng"}),C.system.map(A=>s.jsxs("button",{onClick:()=>t(A.id),className:je("flex items-center gap-3 px-3 py-3 w-full text-sm font-medium transition-all rounded-lg",e===A.id?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-secondary/50"),children:[A.icon,s.jsx("span",{className:"flex-1 text-left",children:A.label}),A.badge&&s.jsx("span",{className:"px-2 py-0.5 text-xs bg-background/20 rounded-full",children:A.badge})]},A.id))]})]}),s.jsxs("div",{className:"p-3 border-t flex-shrink-0 space-y-1",children:[b&&j&&s.jsxs("div",{className:"px-3 py-2.5 mb-2 bg-secondary/30 rounded-lg",children:[s.jsx("p",{className:"text-xs font-medium truncate",children:b}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:j})]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-3 px-3 py-3 w-full text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-all rounded-lg",children:[s.jsx(wd,{className:"w-5 h-5"}),s.jsx("span",{className:"flex-1 text-left",children:"Ci t ti khon qung co"})]}),s.jsxs("button",{onClick:()=>i("/dashboard/subscription"),className:"flex items-center gap-3 px-3 py-3 w-full text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-all rounded-lg",children:[s.jsx(lS,{className:"w-5 h-5"}),s.jsx("span",{className:"flex-1 text-left",children:"Gi ng k ca ti"})]}),a.includes("super_admin")&&s.jsxs("button",{onClick:()=>i("/super-admin"),className:"flex items-center gap-3 px-3 py-3 w-full text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-all rounded-lg",children:[s.jsx(Gz,{className:"w-5 h-5"}),s.jsx("span",{className:"flex-1 text-left",children:"Super Admin"})]}),s.jsx(qs,{className:"my-3"}),s.jsx(s_e,{userName:m,userEmail:v,onOpenProfileSettings:()=>u(!0),onOpenChangePassword:()=>h(!0),onLogout:N,children:s.jsx("button",{className:"w-full px-2 py-2 bg-secondary/50 rounded-lg hover:bg-secondary/70 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(FI,{className:"h-8 w-8",children:s.jsx(BI,{className:"bg-primary text-primary-foreground",children:m.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:m}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Ti khon c nhn"})]})]})})})]}),s.jsx($be,{open:o,onOpenChange:l}),s.jsx(o_e,{open:c,onOpenChange:u}),s.jsx(l_e,{open:d,onOpenChange:h})]})};async function u_e({messages:e,accountId:t,userName:n,onDelta:r,onDone:a,onError:i}){var l,c,u,d,h,m;const o="https://jtaekxrkubhwtqgodvtx.supabase.co/functions/v1/ai-chat";try{const{data:{session:p}}=await wt.auth.getSession();if(!p){i("User not authenticated. Please login to use AI chat.");return}const v=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify({messages:e,accountId:t,userName:n})});if(!v.ok){const w=await v.json().catch(()=>({error:"Unknown error"}));i(w.error||`Request failed with status ${v.status}`);return}if(!v.body){i("No response body");return}const x=v.body.getReader(),b=new TextDecoder;let _="",j=!1;for(;!j;){const{done:w,value:N}=await x.read();if(w)break;_+=b.decode(N,{stream:!0});let k;for(;(k=_.indexOf(`
`))!==-1;){let C=_.slice(0,k);if(_=_.slice(k+1),C.endsWith("\r")&&(C=C.slice(0,-1)),C.startsWith(":")||C.trim()===""||!C.startsWith("data: "))continue;const A=C.slice(6).trim();if(A==="[DONE]"){j=!0;break}try{const O=(u=(c=(l=JSON.parse(A).choices)==null?void 0:l[0])==null?void 0:c.delta)==null?void 0:u.content;O&&r(O)}catch{_=C+`
`+_;break}}}if(_.trim())for(let w of _.split(`
`)){if(!w||(w.endsWith("\r")&&(w=w.slice(0,-1)),w.startsWith(":")||w.trim()==="")||!w.startsWith("data: "))continue;const N=w.slice(6).trim();if(N!=="[DONE]")try{const C=(m=(h=(d=JSON.parse(N).choices)==null?void 0:d[0])==null?void 0:h.delta)==null?void 0:m.content;C&&r(C)}catch{}}a()}catch(p){console.error("Stream error:",p),i(p instanceof Error?p.message:"Unknown error")}}const tR=()=>{const{user:e}=Mn(),[t,n]=g.useState(null),[r,a]=g.useState(!0),[i,o]=g.useState(null);g.useEffect(()=>{e!=null&&e.id?l():(a(!1),n(null));const h=()=>{e!=null&&e.id&&l()};return window.addEventListener("settings-updated",h),()=>window.removeEventListener("settings-updated",h)},[e==null?void 0:e.id]);const l=async()=>{if(!(e!=null&&e.id)){console.warn(" Cannot load settings: user not authenticated"),a(!1);return}try{a(!0),o(null);const m=(await Vr(e.id)).find(_=>_.is_active),v=(await Qp(e.id)).find(_=>_.is_active),b=(await H0(e.id)).find(_=>_.is_active);n({adAccountId:(m==null?void 0:m.account_id)||"",adsToken:(m==null?void 0:m.access_token)||"",pageId:(v==null?void 0:v.page_id)||"",pageToken:(v==null?void 0:v.access_token)||"",openaiApiKey:(b==null?void 0:b.api_key)||"",openaiModel:(b==null?void 0:b.model)||"gpt-4o-mini"})}catch(h){const m=h instanceof Error?h.message:"Unknown error";o(m),console.error(" Error loading settings:",h)}finally{a(!1)}},c=!!(t!=null&&t.adsToken),u=!!(t!=null&&t.pageToken),d=!!(t!=null&&t.openaiApiKey);return{settings:t,loading:r,error:i,hasAdsToken:c,hasPageToken:u,hasOpenAIKey:d,reload:l}},IF=async(e,t)=>{try{const{data:n,error:r}=await wt.functions.invoke("analyze-intent",{body:{message:e,conversationHistory:t.slice(-6)}});return r?(console.error("[detectChatIntent] Error:",r),{intent:"unknown",confidence:0}):n}catch(n){return console.error("[detectChatIntent] Exception:",n),{intent:"unknown",confidence:0}}},d_e=async e=>{try{const{data:t,error:n}=await wt.functions.invoke("ai-parse-creative",{body:{promptText:e}});if(n)throw n;if(!t||!t.data)throw new Error("Khng nhn c phn hi t AI");const r=t.data,a=i=>{if(i==null)return null;if(typeof i=="number"&&!isNaN(i))return i;const o=String(i).match(/([\d]+(?:\.\d+)?)/),l=o?parseFloat(o[1]):NaN;return isNaN(l)?null:l};return{campaignName:r.campaignName||"Campaign Creative mi",budget:Number(r.budget)||4e5,ageMin:Number(r.ageMin)||18,ageMax:Number(r.ageMax)||65,gender:["all","male","female"].includes(r.gender)?r.gender:"all",locations:Array.isArray(r.locations)?r.locations:[],locationRadius:a(r.locationRadius),interestKeywords:Array.isArray(r.interestKeywords)?r.interestKeywords:[],adContent:r.adContent||"",adHeadline:r.adHeadline||"",greetingText:r.greetingText,iceBreakerQuestions:Array.isArray(r.iceBreakerQuestions)?r.iceBreakerQuestions.slice(0,4):void 0}}catch(t){throw console.error("AI creative parsing error:",t),new Error(`Li phn tch AI: ${t.message}`)}},h_e="v21.0",Si=`https://graph.facebook.com/${h_e}`;async function yK(e,t){const n=await fetch(`${Si}/search?type=adinterest&q=${encodeURIComponent(e)}&limit=25&access_token=${t}`);if(!n.ok)throw new Error("Failed to search interests");return(await n.json()).data}async function RF(e,t,n){const r=new FormData;r.append("access_token",t),r.append("filename",e);const a=await fetch(`${Si}/${n}/adimages`,{method:"POST",body:r});if(!a.ok)throw new Error("Failed to upload image");const i=await a.json(),o=Object.values(i.images)[0];return{hash:o.hash,url:o.url||o.permalink_url}}async function $F(e,t,n,r){var l,c,u;const a=new FormData;a.append("access_token",t),a.append("source",e);const i=await fetch(`https://graph-video.facebook.com/v21.0/${n}/advideos`,{method:"POST",body:a});if(!i.ok){const d=await i.json();console.error("Facebook Video Upload Error:",{status:i.status,statusText:i.statusText,error:d,fileInfo:{name:e.name,size:e.size,type:e.type}});const h=d.error_user_title||((l=d.error)==null?void 0:l.error_user_title)||d.error_user_msg||((c=d.error)==null?void 0:c.error_user_msg)||((u=d.error)==null?void 0:u.message)||"Failed to upload video";throw new Error(h)}return{id:(await i.json()).id}}async function f_e(e,t,n=5){var r,a;for(let i=0;i<n;i++)try{const o=await fetch(`${Si}/${e}/thumbnails?access_token=${t}`);if(!o.ok)throw new Error("Failed to fetch video thumbnail");const c=(a=(r=(await o.json()).data)==null?void 0:r[0])==null?void 0:a.uri;if(c)return c;if(i<n-1){const u=Math.min(1e3*Math.pow(2,i),8e3);await new Promise(d=>setTimeout(d,u))}}catch(o){if(console.error(` Error fetching thumbnail (attempt ${i+1}/${n}):`,o),i<n-1){const l=Math.min(1e3*Math.pow(2,i),8e3);await new Promise(c=>setTimeout(c,l))}}return console.warn(" Khng ly c thumbnail sau",n,"ln th. S dng frame u tin ca video."),""}async function m_e(e,t,n){var a;const r=await fetch(`${Si}/${n}/campaigns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,access_token:t})});if(!r.ok){const i=await r.json();throw new Error(((a=i.error)==null?void 0:a.message)||"Failed to create campaign")}return await r.json()}async function p_e(e,t,n){var a;const r=await fetch(`${Si}/${n}/adsets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,access_token:t})});if(!r.ok){const i=await r.json();throw new Error(((a=i.error)==null?void 0:a.message)||"Failed to create ad set")}return await r.json()}async function g_e(e,t,n){var a;const r=await fetch(`${Si}/${n}/adcreatives`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,access_token:t})});if(!r.ok){const i=await r.json();throw new Error(((a=i.error)==null?void 0:a.message)||"Failed to create ad creative")}return await r.json()}async function v_e(e,t,n){var i,o,l,c;const r={message:e.message,link:`https://m.me/${e.pageId}`,image_hash:e.imageHash};e.headline&&(r.name=e.headline),e.ctaType==="MESSAGE_PAGE"?(r.call_to_action={type:"MESSAGE_PAGE",value:{app_destination:"MESSENGER"}},(i=e.messageTemplateData)!=null&&i.page_welcome_message&&(r.page_welcome_message=JSON.stringify(e.messageTemplateData.page_welcome_message))):e.ctaType==="LEARN_MORE"?r.call_to_action={type:"LEARN_MORE"}:e.ctaType==="SHOP_NOW"&&(r.call_to_action={type:"SHOP_NOW"});const a=await fetch(`${Si}/${n}/adcreatives`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,object_story_spec:{page_id:e.pageId,link_data:r},access_token:t})});if(!a.ok){const u=await a.json();console.error("Facebook Ad Creative Error:",u);const d=u.error_user_title||((o=u.error)==null?void 0:o.error_user_title)||u.error_user_msg||((l=u.error)==null?void 0:l.error_user_msg)||((c=u.error)==null?void 0:c.message)||"Failed to create ad creative";throw new Error(d)}return await a.json()}async function y_e(e,t,n){var i,o,l,c;const r={message:e.message,video_id:e.videoId};e.thumbnailUrl&&(r.image_url=e.thumbnailUrl),e.videoTitle&&(r.title=e.videoTitle),e.ctaType==="MESSAGE_PAGE"?(r.call_to_action={type:"MESSAGE_PAGE",value:{app_destination:"MESSENGER"}},(i=e.messageTemplateData)!=null&&i.page_welcome_message&&(r.page_welcome_message=JSON.stringify(e.messageTemplateData.page_welcome_message))):e.ctaType==="LEARN_MORE"?r.call_to_action={type:"LEARN_MORE"}:e.ctaType==="SHOP_NOW"&&(r.call_to_action={type:"SHOP_NOW"});const a=await fetch(`${Si}/${n}/adcreatives`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,object_story_spec:{page_id:e.pageId,video_data:r},access_token:t})});if(!a.ok){const u=await a.json();console.error("Facebook Ad Creative Error:",u);const d=u.error_user_title||((o=u.error)==null?void 0:o.error_user_title)||u.error_user_msg||((l=u.error)==null?void 0:l.error_user_msg)||((c=u.error)==null?void 0:c.message)||"Failed to create ad creative";throw new Error(d)}return await a.json()}async function x_e(e,t,n){var a,i,o;const r=await fetch(`${Si}/${n}/ads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,access_token:t})});if(!r.ok){const l=await r.json();console.error("Facebook Ad Creation Error:",l);const c=l.error_user_title||((a=l.error)==null?void 0:a.error_user_title)||l.error_user_msg||((i=l.error)==null?void 0:i.error_user_msg)||((o=l.error)==null?void 0:o.message)||"Failed to create ad";throw new Error(c)}return await r.json()}const b_e=e=>{const t=e.replace(/\D/g,"");return t.startsWith("84")?t:t.startsWith("0")?`84${t.substring(1)}`:`84${t}`},w_e=async e=>{const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(o=>o.toString(16).padStart(2,"0")).join("")};async function xK(e,t,n,r){var l;const a=new FormData;a.append("name",n),a.append("description",r),a.append("subtype","CUSTOM"),a.append("customer_file_source","USER_PROVIDED_ONLY"),a.append("access_token",t);const i=await fetch(`${Si}/${e}/customaudiences`,{method:"POST",body:a});if(!i.ok){const c=await i.json();throw new Error(((l=c.error)==null?void 0:l.message)||"Failed to create custom audience")}return(await i.json()).id}async function bK(e,t,n){var c;const r=n.map(b_e).filter(u=>u.startsWith("84"));if(r.length===0)throw new Error("Khng tm thy ST hp l sau khi chun ha.");const a=await Promise.all(r.map(u=>w_e(u))),i=1e4,o=[];for(let u=0;u<a.length;u+=i)o.push(a.slice(u,u+i));let l=null;for(let u=0;u<o.length;u++){const d=o[u],h={schema:["PHONE"],data:d.map(p=>[p])},m=await fetch(`${Si}/${e}/users`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(h)});if(!m.ok){const p=await m.json();throw new Error(((c=p.error)==null?void 0:c.message)||`Failed to add users (batch ${u+1}/${o.length})`)}l=await m.json()}return l}async function wK(e,t,n,r,a,i){var h;const o=i*24*60*60,l={inclusions:{operator:"or",rules:[{event_sources:[{id:a,type:"page"}],retention_seconds:o,filter:{operator:"and",filters:[{field:"event",operator:"eq",value:"page_messaged"}]}}]}},c=new FormData;c.append("name",n),c.append("description",r),c.append("rule",JSON.stringify(l)),c.append("prefill","true"),c.append("access_token",t);const u=await fetch(`${Si}/${e}/customaudiences`,{method:"POST",body:c});if(!u.ok){const m=await u.json();throw new Error(((h=m.error)==null?void 0:h.message)||"Failed to create page messengers audience")}return(await u.json()).id}async function _K(e,t){var a;const n=await fetch(`${Si}/${e}/customaudiences?fields=id,name&access_token=${t}`);if(!n.ok){const i=await n.json();throw new Error(((a=i.error)==null?void 0:a.message)||"Failed to fetch custom audiences")}return(await n.json()).data||[]}async function jK(e,t,n,r,a,i,o){var h;const l={country:i,ratio:o/100},c=new FormData;c.append("name",n),c.append("description",r),c.append("subtype","LOOKALIKE"),c.append("origin_audience_id",a),c.append("lookalike_spec",JSON.stringify(l)),c.append("access_token",t);const u=await fetch(`${Si}/${e}/customaudiences`,{method:"POST",body:c});if(!u.ok){const m=await u.json();throw new Error(((h=m.error)==null?void 0:h.message)||"Failed to create lookalike audience")}return(await u.json()).id}const kj=async(e,t,n)=>{var u,d;const r=new FormData;r.append("source",n);const a=await fetch(`https://graph.facebook.com/v21.0/${e}/adimages`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:r});if(!a.ok){const h=await a.json();throw new Error(((u=h.error)==null?void 0:u.message)||"Upload nh tht bi")}const o=(d=(await a.json()).images)==null?void 0:d[n.name],l=o==null?void 0:o.hash,c=(o==null?void 0:o.url)||(o==null?void 0:o.permalink_url);if(!l)throw new Error("Khng nhn c image hash t Facebook");return{imageHash:l,imageUrl:c}},SK=async(e,t,n,r)=>{const a=new FormData;a.append("source",n);const i=new XMLHttpRequest;return new Promise((o,l)=>{let c=!1;const u=setTimeout(()=>{c||(i.abort(),l(new Error("Upload video timeout sau 3 pht. Vui lng th li vi video nh hn.")))},3*60*1e3);i.upload.addEventListener("progress",h=>{if(h.lengthComputable&&r){const m=h.loaded/h.total*100;r(Math.round(m))}}),i.addEventListener("load",()=>{var h,m;if(c=!0,clearTimeout(u),i.status>=200&&i.status<300)try{const p=JSON.parse(i.responseText),v=p.id;if(!v){console.error("[uploadAdVideo] No video ID in response:",p),l(new Error("Khng nhn c video ID t Facebook"));return}o({videoId:v})}catch(p){console.error("[uploadAdVideo] Parse error:",p),l(new Error("Li parse response t Facebook"))}else{console.error("[uploadAdVideo]  Upload failed with status:",i.status),console.error("[uploadAdVideo]  Error response:",i.responseText);try{const p=JSON.parse(i.responseText),v=((h=p.error)==null?void 0:h.message)||p.message||"Upload video tht bi",b=`(${((m=p.error)==null?void 0:m.code)||p.code}) ${v}`;console.error("[uploadAdVideo]  Parsed error:",b),l(new Error(b))}catch{l(new Error(`Upload video tht bi (Status: ${i.status})`))}}}),i.addEventListener("error",h=>{c=!0,clearTimeout(u),console.error("[uploadAdVideo]  Network error:",h),console.error("[uploadAdVideo]  XHR status:",i.status,"readyState:",i.readyState),l(new Error("Li kt ni khi upload video. Kim tra kt ni mng."))}),i.addEventListener("abort",()=>{c=!0,clearTimeout(u),l(new Error("Upload video  b hy"))});const d=`https://graph-video.facebook.com/v21.0/${e}/advideos`;i.open("POST",d),i.setRequestHeader("Authorization",`Bearer ${t}`),i.send(a)})},Py=async(e,t,n=5)=>{for(let r=0;r<n;r++)try{const a=await fetch(`https://graph.facebook.com/v21.0/${e}/thumbnails?access_token=${t}`);if(!a.ok)throw new Error("Li ly thumbnail");const i=await a.json();if(i.data&&i.data.length>0)return i.data[0].uri;r<n-1&&await new Promise(o=>setTimeout(o,2e3))}catch(a){if(r===n-1)throw a;await new Promise(i=>setTimeout(i,2e3))}throw new Error("Khng th ly thumbnail sau nhiu ln th")},__e=async(e,t)=>yK(e,t),j_e=async(e,t)=>{var a;const n=await fetch(`https://graph.facebook.com/v21.0/search?type=adgeolocation&location_types=["city"]&q=${encodeURIComponent(e)}&access_token=${t}`);if(!n.ok){const i=await n.json();throw new Error(((a=i.error)==null?void 0:a.message)||"Tm kim v tr tht bi")}return(await n.json()).data||[]},MF=async(e,t,n)=>{var o;const r={name:n.name,object_story_spec:{page_id:n.pageId,link_data:{message:n.message,name:n.name,link:`https://m.me/${n.pageId}`,image_hash:n.imageHash,call_to_action:{type:"MESSAGE_PAGE",value:{app_destination:"MESSENGER"}}}}};n.messageTemplateData&&(r.object_story_spec.link_data.page_welcome_message=JSON.stringify(n.messageTemplateData.page_welcome_message));const a=await fetch(`https://graph.facebook.com/v21.0/${e}/adcreatives`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(r)});if(!a.ok){const l=await a.json();throw new Error(((o=l.error)==null?void 0:o.message)||"To creative cho nh tht bi")}return(await a.json()).id},DF=async(e,t,n)=>{var l;const r=n.thumbnailUrl&&!n.thumbnailUrl.startsWith("http"),a={name:n.title,object_story_spec:{page_id:n.pageId,video_data:{title:n.title,message:n.message,video_id:n.videoId,...r?{image_hash:n.thumbnailUrl}:{image_url:n.thumbnailUrl},call_to_action:{type:"MESSAGE_PAGE",value:{app_destination:"MESSENGER"}}}}};n.messageTemplateData&&(a.object_story_spec.video_data.page_welcome_message=JSON.stringify(n.messageTemplateData.page_welcome_message));const i=await fetch(`https://graph.facebook.com/v21.0/${e}/adcreatives`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(a)});if(!i.ok){const c=await i.json();throw new Error(((l=c.error)==null?void 0:l.message)||"To creative cho video tht bi")}return(await i.json()).id},LF=async(e,t,n)=>{var i;const r=await fetch(`https://graph.facebook.com/v21.0/${e}/ads`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({adset_id:n.adSetId,name:n.name,creative:{creative_id:n.creativeId},status:"ACTIVE"})});if(!r.ok){const o=await r.json();throw new Error(((i=o.error)==null?void 0:i.message)||"To ad tht bi")}return(await r.json()).id},S_e=async(e,t,n,r)=>{try{n(" ang phn tch thng tin vi AI...");const a=await d_e(e);n(` Phn tch AI xong: ${a.campaignName}`);const o=(v=>{if(v==null)return null;if(typeof v=="number"&&!isNaN(v))return v;const x=String(v).match(/([\d]+(?:\.\d+)?)/),b=x?parseFloat(x[1]):NaN;return isNaN(b)?null:b})(a.locationRadius);n(` ang tm kim ${a.interestKeywords.length} s thch...`);const l=[];for(const v of a.interestKeywords){const x=await __e(v,t);x&&x.length>0?(l.push(x[0]),n(` "${v}"  ${x[0].name}`)):n(` "${v}" khng c kt qu`)}n(` Tm thy ${l.length} s thch`);let c=null;if(a.locations&&a.locations.length>0){const v=a.locations[0].trim(),x=v.match(/^(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)$/),b=/^(vit nam|vietnam|vn)$/i.test(v);if(!x&&!b){n(` ang tm kim v tr: ${v}...`);try{const _=await j_e(v,t);if(_&&_.length>0){const j=_.find(w=>w.type==="city")||_[0];c={key:j.key,name:j.name,type:j.type,country_code:j.country_code,country_name:j.country_name,minRadiusKm:17},n(` Tm thy: ${j.name} (key: ${j.key})`)}else n(` Khng tm thy v tr "${v}"`)}catch(_){n(` Li tm kim v tr: ${_.message}`)}}}if(a.locations.length>0&&(a.locationRadius===null||a.locationRadius===void 0)){n(" Thiu thng tin bn knh targeting");const v=a.locations.join(", "),x=a.locations.some(_=>/^-?\d+\.?\d*\s*,\s*-?\d+\.?\d*$/.test(_.trim()));if(a.locations.some(_=>/^(vit nam|vietnam|vn)$/i.test(_.trim())))n(" Quc gia Vit Nam  Khng cn bn knh");else return x?(n(" Ta  thiu bn knh  Hi user (min 1km)"),{success:!1,needsMoreInfo:!0,missingField:"locationRadius",missingFieldPrompt:` Anh cho em bit **bn knh targeting** bao nhiu km ?

 V tr: ${v}
 Ta 
 Bn knh ti thiu **1km**
 V d: 5, 10, 15`,partialData:{...a,interests:l}}):(n(" Thnh ph thiu bn knh  Hi user (min 17km)"),{success:!1,needsMoreInfo:!0,missingField:"locationRadius",missingFieldPrompt:` Anh cho em bit **bn knh targeting** bao nhiu km ?

 V tr: ${v}
 Thnh ph/a im
 Bn knh ti thiu **17km**
 V d: 20, 30, 50`,partialData:{...a,locationType:"city",resolvedLocation:c||void 0,interests:l}})}if(o!=null)if(a.locations.some(x=>/^(vit nam|vietnam|vn)$/i.test(x.trim())))n(" Target quc gia  B qua bn knh");else{const x=a.locations.some(w=>/^-?\d+\.?\d*\s*,\s*-?\d+\.?\d*$/.test(w.trim())),b=x?1:17,_=x?" Ta ":" Thnh ph/a im",j=x?"ta  quy nh l **1km tr ln**":"thnh ph bn knh phi t **17km tr ln**";if(n(` Validate: ${_}  Min: ${b}km, Got: ${o}km`),o<b)return n(` Bn knh ${o}km < ${b}km (ti thiu)`),{success:!1,needsMoreInfo:!0,missingField:"locationRadius",missingFieldPrompt:` Bn knh **${o}km** qu nh!

 V tr: ${a.locations.join(", ")}
${_}
 Theo Facebook, ${j}

Anh vui lng nhp li bn knh mi nh!
 V d: ${x?"5":"20"}`,partialData:{...a,locationRadius:o,interests:l}};n(` Bn knh ${o}km hp l (>= ${b}km)`)}let u="all";a.gender==="male"?u="male":a.gender==="female"&&(u="female");let d,h,m,p=o||void 0;if(a.locations&&a.locations.length>0){const v=a.locations[0].trim(),x=v.match(/^(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)$/);x?(d="coordinate",h=parseFloat(x[1]),m=parseFloat(x[2]),p=o||17,n(` Pht hin ta : ${h}, ${m}, radius: ${p}km`)):/^(vit nam|vietnam|vn)$/i.test(v)?(d="country",n(` Pht hin quc gia: ${v}`)):(d="city",n(` Pht hin thnh ph: ${v}`))}return n(" Validation hon tt!"),{success:!0,data:{campaignName:a.campaignName,budget:a.budget,ageMin:a.ageMin,ageMax:a.ageMax,gender:u,locations:a.locations,locationRadius:o,locationType:d,latitude:h,longitude:m,radiusKm:p,resolvedLocation:c||void 0,interests:l,adContent:a.adContent,adHeadline:a.adHeadline,greetingText:a.greetingText,iceBreakerQuestions:a.iceBreakerQuestions}}}catch(a){return console.error("[Creative Orchestrator] Error:",a),n(` Li: ${a.message}`),{success:!1,error:a.message||"Li khng xc nh"}}},Kh={async createCampaignStep(e){console.log("[TRACE_CREATIVE] createCampaignStep called with params:",JSON.stringify({...e,adsToken:"***"}));const{data:t,error:n}=await wt.functions.invoke("create-fb-campaign-step",{body:e});if(n)throw console.error("[TRACE_CREATIVE] Campaign step error:",n),n;if(console.log("[TRACE_CREATIVE] Campaign step response:",t),!t.success)throw new Error(t.error||"Failed to create campaign");return t},async createAdSetStep(e){console.log("[TRACE_CREATIVE] createAdSetStep called with params:",JSON.stringify({...e,adsToken:"***"}));const{data:t,error:n}=await wt.functions.invoke("create-fb-adset-step",{body:e});if(n)throw console.error("[TRACE_CREATIVE] AdSet step error:",n),n;if(console.log("[TRACE_CREATIVE] AdSet step response:",t),!t.success)throw new Error(t.error||"Failed to create adset");return t},async createAdStep(e){var r;console.log("[TRACE_CREATIVE] createAdStep called with params:",JSON.stringify({...e,adsToken:"***",primaryText:((r=e.primaryText)==null?void 0:r.substring(0,50))+"..."}));const{data:t,error:n}=await wt.functions.invoke("create-fb-ad-step",{body:e});if(n)throw console.error("[TRACE_CREATIVE] Ad step error:",n),n;if(console.log("[TRACE_CREATIVE] Ad step response:",t),!t.success)throw new Error(t.error||"Failed to create ad");return t}};function N_e(){const[e,t]=g.useState({stage:"idle",partialData:void 0,mediaFile:void 0,uploadedHash:void 0,uploadedVideoId:void 0,mediaType:void 0,thumbnailUrl:void 0,thumbnailChoice:void 0,customThumbnailHash:void 0,customThumbnailUrl:void 0}),n=g.useCallback(async(d,h,m)=>{console.log("[TRACE_CREATIVE] Hook start called with input:",d),t(p=>({...p,stage:"parsing",partialData:{rawInput:d}}));try{const p=await S_e(d,h,()=>{});return p.success?(t(v=>({...v,stage:"reviewing_data",partialData:p.data})),console.log("[TRACE_CREATIVE] Parse result:",p.data),{success:!0,message:"__SHOW_CREATIVE_CONFIRM_CARD__",data:p.data}):p.missingField==="locationRadius"?(t(v=>({...v,stage:"awaiting_radius",partialData:p.partialData})),{success:!1,message:p.missingFieldPrompt||"Vui lng nhp bn knh",data:p.partialData,missingField:"radius"}):(t({stage:"idle"}),{success:!1,message:p.error||"Li parse"})}catch(p){return console.error("[CreativeFlow] Parse error:",p),t({stage:"idle"}),{success:!1,message:` Li: ${p.message}`}}},[]),r=g.useCallback(async d=>{var b;const h=parseInt(d.trim(),10);if(isNaN(h)||h<=0)return{success:!1,message:" Bn knh phi l s dng (VD: 5, 10, 15). Vui lng nhp li!"};const p=(((b=e.partialData)==null?void 0:b.locations)||[]).some(_=>/^-?\d+\.?\d*\s*,\s*-?\d+\.?\d*$/.test(_.trim())),v=p?1:17;if(h<v)return{success:!1,message:` Bn knh **${h}km** qu nh!

Vi ${p?"ta ":"thnh ph"}, bn knh ti thiu l **${v}km**.

 V d: 5, 10, 15

Vui lng nhp li bn knh mi nh!`};const x={...e.partialData,locationRadius:h};return t(_=>({..._,stage:"awaiting_media",partialData:x})),{success:!0,message:`  cp nht bn knh **${h}km**. Gi hy ti nh/video ln!`,data:x}},[e.partialData]),a=g.useCallback(async(d,h,m)=>{console.log("[TRACE_CREATIVE] uploadMedia called with file:",d.name,d.type);const p=d.type.startsWith("image/"),v=d.type.startsWith("video/");if(!p&&!v)return{success:!1,message:"File khng hp l. Ch chp nhn nh hoc video."};t(x=>({...x,mediaFile:d,mediaType:p?"image":"video"}));try{if(p){const x=await kj(h,m,d);return t(b=>({...b,uploadedHash:x.imageHash,stage:"confirming"})),{success:!0,hash:x.imageHash,message:" Upload nh thnh cng!"}}else{const x=await SK(h,m,d);let b="";try{b=await Py(x.videoId,m)}catch(_){console.warn("[CreativeFlow]  Could not fetch thumbnail, will rely on edge function fallback:",_)}return t(_=>({..._,uploadedVideoId:x.videoId,thumbnailUrl:b,stage:"confirming"})),{success:!0,videoId:x.videoId,message:b?" Upload video thnh cng!  t ng ly thumbnail.":" Upload video thnh cng! Thumbnail s c to t ng."}}}catch(x){return console.error("[CreativeFlow] Upload error:",x),t(b=>({...b,stage:"awaiting_media"})),{success:!1,message:` Li upload: ${x.message}`}}},[]),i=g.useCallback(d=>{const h=d.type.startsWith("video/");t(m=>({...m,mediaFile:d,mediaType:h?"video":"image"}))},[]),o=g.useCallback(d=>{t(h=>({...h,thumbnailUrl:d}))},[]),l=g.useCallback(async(d,h,m,p,v)=>{var x;console.log("[TRACE_CREATIVE] confirmAndCreate called"),t(b=>({...b,stage:"creating"}));try{if(!e.partialData)throw new Error("No parsed data");const b={age_min:e.partialData.ageMin,age_max:e.partialData.ageMax,genders:e.partialData.gender==="male"?[1]:e.partialData.gender==="female"?[2]:[1,2],geo_locations:{},interests:((x=e.partialData.interests)==null?void 0:x.map(N=>({id:N.id,name:N.name})))||[]};e.partialData.locationType==="city"&&e.partialData.resolvedLocation?b.geo_locations.cities=[{key:e.partialData.resolvedLocation.key,radius:e.partialData.radiusKm||17,distance_unit:"kilometer"}]:e.partialData.locationType==="coordinate"?b.geo_locations.custom_locations=[{latitude:e.partialData.latitude,longitude:e.partialData.longitude,radius:e.partialData.radiusKm||17,distance_unit:"kilometer"}]:e.partialData.locationType==="country"&&e.partialData.resolvedLocation&&(b.geo_locations.countries=[e.partialData.resolvedLocation.country_code||"VN"]);const _=await Kh.createCampaignStep({campaignName:e.partialData.campaignName,adsToken:h,adAccountId:p});if(!_.success||!_.campaignId)throw new Error(_.error||"Failed to create campaign");const j=await Kh.createAdSetStep({campaignId:_.campaignId,adSetName:`${e.partialData.campaignName} - Ad Set`,dailyBudget:e.partialData.budget,targeting:JSON.stringify(b),optimizationGoal:"CONVERSATIONS",billingEvent:"IMPRESSIONS",bidStrategy:"LOWEST_COST_WITHOUT_CAP",promotedObject:{page_id:v},adsToken:h,adAccountId:p,currency:"VND"});if(!j.success||!j.adSetId)throw new Error(j.error||"Failed to create adset");const w=await Kh.createAdStep({adSetId:j.adSetId,adName:`${e.partialData.campaignName} Ad`,creativeType:e.mediaType,imageHash:e.mediaType==="image"?e.uploadedHash:void 0,videoId:e.mediaType==="video"?e.uploadedVideoId:void 0,thumbnailUrl:e.thumbnailUrl,headline:e.partialData.adHeadline,primaryText:e.partialData.adContent,pageId:v,adsToken:h,adAccountId:p,greetingMessage:e.partialData.greetingText,iceBreakers:e.partialData.iceBreakerQuestions||[]});if(!w.success||!w.adId)throw new Error(w.error||"Failed to create ad");return t({stage:"idle",partialData:void 0,mediaFile:void 0,uploadedHash:void 0,uploadedVideoId:void 0,mediaType:void 0,thumbnailUrl:void 0,thumbnailChoice:void 0,customThumbnailHash:void 0,customThumbnailUrl:void 0}),{success:!0,message:"Chin dch  c to thnh cng!",ids:{campaignId:_.campaignId,adSetId:j.adSetId,creativeId:w.creativeId,adId:w.adId}}}catch(b){return console.error("[CreativeFlow] Error:",b),t(_=>({..._,stage:"confirming"})),{success:!1,message:b.message||"Li to campaign",error:b.message}}},[e]),c=g.useCallback(()=>{t(d=>({...d,stage:"awaiting_media"}))},[]);g.useCallback(d=>{t(h=>({...h,thumbnailChoice:d,stage:d==="default"?"confirming":"awaiting_media"}))},[]),g.useCallback(async(d,h,m)=>{try{const{imageHash:p,imageUrl:v}=await kj(h,m,d);return t(x=>({...x,customThumbnailHash:p,customThumbnailUrl:v,stage:"confirming"})),{success:!0,message:" Upload thumbnail thnh cng!"}}catch(p){return console.error("[CreativeFlow] Thumbnail upload error:",p),{success:!1,message:` Li upload thumbnail: ${p.message}`}}},[]);const u=g.useCallback(()=>{t({stage:"idle",partialData:void 0,mediaFile:void 0,uploadedHash:void 0,uploadedVideoId:void 0,mediaType:void 0,thumbnailUrl:void 0,thumbnailChoice:void 0,customThumbnailHash:void 0,customThumbnailUrl:void 0})},[]);return{stage:e.stage,partialData:e.partialData,mediaFile:e.mediaFile,uploadedHash:e.uploadedHash,uploadedVideoId:e.uploadedVideoId,mediaType:e.mediaType,thumbnailUrl:e.thumbnailUrl,thumbnailChoice:e.thumbnailChoice,customThumbnailHash:e.customThumbnailHash,customThumbnailUrl:e.customThumbnailUrl,isActive:e.stage!=="idle",start:n,handleRadiusInput:r,uploadMedia:a,setMediaFile:i,setThumbnailUrl:o,continueToUpload:c,confirmAndCreate:l,reset:u}}const k_e=async(e,t,n)=>{try{const{data:r,error:a}=await wt.functions.invoke("ai-parse-audience",{body:{userMessage:e,currentStage:t,currentData:n}});return a?(console.error("[parseAudienceInput] Error:",a),{}):r}catch(r){return console.error("[parseAudienceInput] Exception:",r),{}}},Hw=(e,t,n)=>{if(!t.audienceName||!t.audienceName.trim())return{success:!1,needsMoreInfo:!0,missingField:"name",missingFieldPrompt:"Anh cho em bit tn i tng ny ?",partialData:t};{if(!t.sourceId)return{success:!1,needsMoreInfo:!0,missingField:"sourceId",missingFieldPrompt:"Anh vui lng chn mt i tng ngun  to lookalike ",partialData:t};if(!t.country)return{success:!1,needsMoreInfo:!0,missingField:"country",missingFieldPrompt:"Anh mun to lookalike  quc gia no? (VN, US, TH, SG, MY) ",partialData:t};if(!t.ratio||t.ratio<1||t.ratio>20)return{success:!1,needsMoreInfo:!0,missingField:"ratio",missingFieldPrompt:"Anh mun quy m lookalike l bao nhiu %? (t 1% n 20%) ",partialData:t}}return{success:!0}},C_e=async(e,t,n,r,a,i)=>{try{i("Bc 1/2","info","To container i tng...");const o=await xK(e,t,n,r);return i("Bc 1/2","success",`Container ID: ${o}`),i("Bc 2/2","info",`Ti ln ${a.length.toLocaleString("vi-VN")} ST...`),await bK(o,t,a),i("Bc 2/2","success","Ti ln thnh cng"),{success:!0,audienceId:o,audienceName:n,audienceType:"file"}}catch(o){return console.error("[createFileAudience] Error:",o),i(" Li to i tng","error",o.message),{success:!1,error:o.message}}},A_e=async(e,t,n,r,a,i,o)=>{try{o("ang to","info","To i tng ngi nhn tin...");const l=await wK(e,t,n,r,a,i);return o(" Thnh cng","success",`Audience ID: ${l}`),{success:!0,audienceId:l,audienceName:n,audienceType:"page_messengers"}}catch(l){return console.error("[createPageMessengersAudience] Error:",l),o(" Li to i tng","error",l.message),{success:!1,error:l.message}}},E_e=async(e,t,n,r,a,i,o,l)=>{try{l("ang to","info","To i tng tng t...");const c=await jK(e,t,n,r,a,i,o);return l(" Thnh cng","success",`Audience ID: ${c}`),{success:!0,audienceId:c,audienceName:n,audienceType:"lookalike"}}catch(c){return console.error("[createLookalikeAudience] Error:",c),l(" Li to i tng","error",c.message),{success:!1,error:c.message}}},FF=async(e,t)=>{try{return await _K(e,t)}catch(n){return console.error("[getCustomAudiences] Error:",n),[]}};function T_e(){const[e,t]=g.useState({stage:"idle",type:void 0,data:void 0}),n=g.useCallback(()=>{t({stage:"selecting_type",type:void 0,data:void 0})},[]),r=g.useCallback(c=>{c==="phone_numbers"?t({stage:"collecting_file",type:c,data:{}}):c==="page_messenger"?t({stage:"collecting_messenger_name",type:c,data:{}}):c==="lookalike"&&t({stage:"collecting_lookalike",type:c,data:{}})},[]),a=g.useCallback(c=>{t(u=>({...u,data:{...u.data,...c}}))},[]),i=g.useCallback(c=>{t(u=>({...u,stage:c}))},[]),o=g.useCallback(async(c,u)=>{var d,h,m,p,v,x,b,_,j,w,N,k,C;t(A=>({...A,stage:"creating"}));try{let A;if(e.type==="phone_numbers")A=await C_e(c,u,((d=e.data)==null?void 0:d.audienceName)||"Phone Audience",((h=e.data)==null?void 0:h.description)||"Created from phone numbers",((m=e.data)==null?void 0:m.phoneNumbers)||[],(P,O,T)=>{});else if(e.type==="page_messenger")A=await A_e(c,u,((p=e.data)==null?void 0:p.audienceName)||"Messenger Audience",((v=e.data)==null?void 0:v.description)||"Created from page messengers",((x=e.data)==null?void 0:x.pageId)||"",((b=e.data)==null?void 0:b.retentionDays)||365,(P,O,T)=>{});else if(e.type==="lookalike")A=await E_e(c,u,((_=e.data)==null?void 0:_.audienceName)||"Lookalike Audience",((j=e.data)==null?void 0:j.description)||"Created from lookalike",((w=e.data)==null?void 0:w.sourceId)||"",((N=e.data)==null?void 0:N.country)||"VN",((k=e.data)==null?void 0:k.ratio)||1,(P,O,T)=>{});else return{success:!1,message:" Loi audience khng hp l",error:"Invalid audience type"};if(!A.success){const P=e.type==="phone_numbers"?"collecting_file":e.type==="page_messenger"?"collecting_messenger_days":"collecting_lookalike";return t(O=>({...O,stage:P})),{success:!1,message:` To audience tht bi: ${A.error}`,error:A.error}}return t({stage:"idle",type:void 0,data:void 0}),{success:!0,message:` Audience "${(C=e.data)==null?void 0:C.audienceName}"  c to thnh cng!`}}catch(A){console.error("[AudienceFlow] Creation error:",A);const P=e.type==="phone_numbers"?"collecting_file":e.type==="page_messenger"?"collecting_messenger_days":"collecting_lookalike";return t(O=>({...O,stage:P})),{success:!1,message:` Li: ${A.message}`,error:A.message}}},[e.type,e.data]),l=g.useCallback(()=>{t({stage:"idle",type:void 0,data:void 0})},[]);return{stage:e.stage,type:e.type,data:e.data||{},isActive:e.stage!=="idle",start:n,selectType:r,setData:a,setStage:i,createAudience:o,reset:l}}const P_e=async e=>{const{userId:t,accountId:n,level:r,dateRange:a,minResults:i=3,sortBy:o="cost_per_result",limit:l=20}=e,c=await jbe(t,a.from,a.to,n);if(c.length===0)return[];const u=new Map;for(const m of c){if(m.level!==r)continue;const p=r==="campaign"?m.campaign_id:m.adset_id,v=r==="campaign"?m.campaign_name:m.adset_name;if(!p||!v)continue;const x=u.get(p);x?(x.spend+=m.spend||0,x.results+=m.results||0,x.impressions+=m.impressions||0,x.clicks+=m.clicks||0):u.set(p,{id:p,name:v,campaignId:r==="adset"?m.campaign_id:void 0,campaignName:r==="adset"?m.campaign_name:void 0,spend:m.spend||0,results:m.results||0,result_label:m.result_label||"Kt qu",impressions:m.impressions||0,clicks:m.clicks||0})}const d=[];for(const[,m]of u){if(m.results<i)continue;const p=m.results>0?m.spend/m.results:0,v=m.impressions>0?m.clicks/m.impressions*100:0;d.push({id:m.id,name:m.name,level:r,campaignId:m.campaignId,campaignName:m.campaignName,spend:m.spend,results:m.results,cost_per_result:p,result_label:m.result_label,impressions:m.impressions,clicks:m.clicks,ctr:v})}return d.sort((m,p)=>o==="cost_per_result"?m.cost_per_result-p.cost_per_result:o==="results"?p.results-m.results:o==="spend"?p.spend-m.spend:0),d.slice(0,l)},O_e=e=>new Promise(t=>setTimeout(t,e));async function I_e(e,t,n=60){for(let r=0;r<n;r++){await O_e(2e3);const a=await fetch(`https://graph.facebook.com/v21.0/${e}?fields=status,result&access_token=${t}`);if(!a.ok){const o=await a.text();throw console.error("[pollAsyncStatus] Failed to poll:",o),new Error(`Failed to poll async job: ${a.statusText}`)}const i=await a.json();if(i.status==="COMPLETED"){let o;try{o=typeof i.result=="string"?JSON.parse(i.result):i.result}catch(h){throw console.error("[pollAsyncStatus] Failed to parse result:",h),new Error(`Failed to parse clone result: ${h}`)}const l=o.ad_object_ids||[],c=l.filter(h=>h.ad_object_type==="CAMPAIGN").map(h=>({id:h.copied_id,source_id:h.source_id})),u=l.filter(h=>h.ad_object_type==="ADSET").map(h=>({id:h.copied_id,source_id:h.source_id})),d=l.filter(h=>h.ad_object_type==="AD").map(h=>({id:h.copied_id,source_id:h.source_id}));return{success:!0,campaignId:o.copied_campaign_id||o.id,adsetIds:u.map(h=>h.id),adIds:d.map(h=>h.id),details:{campaigns:c,adsets:u,ads:d}}}if(i.status==="FAILED")throw console.error("[pollAsyncStatus] Job failed:",i.result),new Error(`Clone failed: ${JSON.stringify(i.result)}`)}throw console.error(`[pollAsyncStatus] Timeout after ${n*2} seconds`),new Error(`Timeout: Clone operation took too long (${n*2} seconds)`)}async function R_e(e){var t,n;try{if(console.log("[TRACE_CLONE] cloneCampaign called with params:",JSON.stringify({...e,accessToken:"***"})),e.deepCopy){const l=await US(e.campaignId,e.accessToken);let c=0;for(const u of l){const d=await kf(u.id,e.accessToken).catch(()=>[]);c+=d.length}if(c>51)return console.warn(`[cloneCampaign] Campaign has ${c} ads (>51 limit). Clone may fail.`),{success:!1,message:`Campaign c ${c} qung co (vt gii hn 51). C th clone tht bi.  xut: clone tng ad set ring l.`}}const r=new URLSearchParams({name:e.newName,deep_copy:(e.deepCopy??!1).toString(),status_option:e.statusOption||"PAUSED",access_token:e.accessToken}),a=e.renameStrategy||(e.deepCopy?"DEEP_RENAME":"ONLY_TOP_LEVEL_RENAME");r.append("rename_strategy",a),e.startTime&&r.append("start_time",e.startTime),e.endTime&&r.append("end_time",e.endTime);const i=await fetch(`https://graph.facebook.com/v21.0/${e.campaignId}/copies`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!i.ok){const l=await i.json();console.error("[cloneCampaign] Facebook API Error:",l);const c=((t=l.error)==null?void 0:t.error_user_msg)||((n=l.error)==null?void 0:n.message)||"Failed to clone campaign";throw new Error(c)}const o=await i.json();if(o.id){const l=await I_e(o.id,e.accessToken);return l.campaignId&&((await fetch(`https://graph.facebook.com/v21.0/${l.campaignId}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({name:e.newName,access_token:e.accessToken})})).ok||console.warn("[cloneCampaign]  Failed to update campaign name, keeping default")),l}else if(o.copied_campaign_id){const l={campaigns:[],adsets:[],ads:[]};return o.ad_object_ids&&Array.isArray(o.ad_object_ids)&&o.ad_object_ids.forEach(u=>{const d={id:u.copied_id,source_id:u.source_id};u.ad_object_type==="campaign"?l.campaigns.push(d):u.ad_object_type==="adset"?l.adsets.push(d):u.ad_object_type==="ad"&&l.ads.push(d)}),(await fetch(`https://graph.facebook.com/v21.0/${o.copied_campaign_id}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({name:e.newName,access_token:e.accessToken})})).ok||console.warn("[cloneCampaign]  Failed to update campaign name, keeping default"),{success:!0,campaignId:o.copied_campaign_id,details:l}}else throw new Error("Unexpected response format from Facebook API")}catch(r){return console.error("[cloneCampaign] Error:",r),{success:!1,message:r instanceof Error?r.message:"Unknown error occurred"}}}async function NK(e){var t,n,r,a,i,o;try{(t=e.onProgress)==null||t.call(e,"Bc 1: ang nhn bn chin dch...",10);const l=await R_e({...e,deepCopy:!1});if(!l.success||!l.campaignId)throw new Error(l.message||"Failed to clone campaign");const c=l.campaignId;(n=e.onProgress)==null||n.call(e,"Bc 2: ang ti danh sch Nhm QC gc...",20);const u=await US(e.campaignId,e.accessToken);if(u.length===0)return console.warn("[cloneCampaignWithAdSets]  Campaign gc khng c ad sets. Ch to campaign rng."),{success:!0,campaignId:c,details:{campaigns:[{id:c,source_id:e.campaignId}],adsets:[],ads:[]},message:"Campaign cloned (original has no ad sets)"};const d=e.adsetQuantity?u.slice(0,e.adsetQuantity):u,h=[],m=[],p=d.length;for(let v=0;v<p;v++){const x=d[v],b=20+v/p*70;(r=e.onProgress)==null||r.call(e,`Bc 3.${v+1}: ang nhn bn Nhm QC "${x.name}"...`,Math.round(b));const _=await nR({adsetId:x.id,newName:x.name,targetCampaignId:c,deepCopy:!1,statusOption:e.statusOption,accessToken:e.accessToken,adAccountId:e.adAccountId});if(!_.success||!_.adsetIds||_.adsetIds.length===0){console.error(`[cloneCampaignWithAdSets]  Failed to clone ad set ${x.id}:`,_.message);continue}const j=_.adsetIds[0];if(h.push({id:j,source_id:x.id}),e.adQuantity&&e.adQuantity>0){(a=e.onProgress)==null||a.call(e,`Bc 4.${v+1}: ang ti ads t Nhm QC gc...`,Math.round(b+2));const N=(await kf(x.id,e.accessToken)).slice(0,e.adQuantity);for(let k=0;k<N.length;k++){const C=N[k];(i=e.onProgress)==null||i.call(e,`Bc 4.${v+1}.${k+1}: ang nhn bn Ad "${C.name}"...`,Math.round(b+3+k/N.length*5));const A=await rb({adId:C.id,newName:C.name,targetAdsetId:j,statusOption:e.statusOption==="INHERITED"?"PAUSED":e.statusOption,accessToken:e.accessToken,adAccountId:e.adAccountId});A.success&&A.adIds&&A.adIds.length>0?m.push({id:A.adIds[0],source_id:C.id}):console.error(`[cloneCampaignWithAdSets]  Failed to clone ad ${C.id}:`,A.message),k<N.length-1&&await new Promise(P=>setTimeout(P,300))}}v<p-1&&await new Promise(w=>setTimeout(w,500))}return(o=e.onProgress)==null||o.call(e,"Hon thnh",100),{success:!0,campaignId:c,details:{campaigns:[{id:c,source_id:e.campaignId}],adsets:h,ads:m},message:`Successfully cloned campaign with ${h.length} ad sets and ${m.length} ads`}}catch(l){return console.error("[cloneCampaignWithAdSets] Error:",l),{success:!1,message:l instanceof Error?l.message:"Unknown error occurred"}}}async function nR(e){var t,n,r;try{console.log("[TRACE_CLONE] cloneAdSet called with params:",JSON.stringify({...e,accessToken:"***"}));const a=await fetch(`https://graph.facebook.com/v21.0/${e.adsetId}?fields=name,campaign_id,billing_event,optimization_goal,bid_strategy,daily_budget,lifetime_budget,start_time,end_time,targeting,status,destination_type,promoted_object&access_token=${e.accessToken}`);if(!a.ok){const m=await a.json();throw console.error("[cloneAdSet] Failed to fetch ad set:",m),new Error(((t=m.error)==null?void 0:t.message)||"Failed to fetch ad set details")}const i=await a.json(),o=e.targetCampaignId||i.campaign_id,l=new URLSearchParams({name:e.newName,campaign_id:o,billing_event:i.billing_event||"IMPRESSIONS",optimization_goal:i.optimization_goal||"REACH",bid_strategy:i.bid_strategy||"LOWEST_COST_WITHOUT_CAP",status:e.statusOption||"PAUSED",access_token:e.accessToken});i.daily_budget?l.append("daily_budget",i.daily_budget):i.lifetime_budget&&l.append("lifetime_budget",i.lifetime_budget),i.start_time&&l.append("start_time",i.start_time),i.end_time&&l.append("end_time",i.end_time),i.targeting&&l.append("targeting",JSON.stringify(i.targeting)),i.destination_type&&l.append("destination_type",i.destination_type),i.promoted_object&&l.append("promoted_object",JSON.stringify(i.promoted_object));const c=e.adAccountId.startsWith("act_")?e.adAccountId:`act_${e.adAccountId}`,u=await fetch(`https://graph.facebook.com/v21.0/${c}/adsets`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l});if(!u.ok){const m=await u.json();throw console.error("[cloneAdSet] Facebook API Error:",m),new Error(((n=m.error)==null?void 0:n.error_user_msg)||((r=m.error)==null?void 0:r.message)||"Failed to create ad set")}const d=await u.json(),h=[];if(e.deepCopy){const m=await kf(e.adsetId,e.accessToken);if(m.length>0)for(let p=0;p<m.length;p++){const v=m[p],x=await rb({adId:v.id,newName:v.name,targetAdsetId:d.id,statusOption:e.statusOption==="INHERITED"?"PAUSED":e.statusOption,accessToken:e.accessToken,adAccountId:e.adAccountId});x.success&&x.adIds&&x.adIds.length>0?h.push({id:x.adIds[0],source_id:v.id}):console.error(`[cloneAdSet]  Failed to clone ad ${v.id}:`,x.message),p<m.length-1&&await new Promise(b=>setTimeout(b,300))}else console.warn("[cloneAdSet]  Ad Set gc khng c ads.")}return{success:!0,adsetIds:[d.id],adIds:h.map(m=>m.id),details:h.length>0?{campaigns:[],adsets:[{id:d.id,source_id:e.adsetId}],ads:h}:void 0,message:e.deepCopy?`Ad set cloned with ${h.length} ads`:"Ad set cloned successfully"}}catch(a){return console.error("[cloneAdSet] Error:",a),{success:!1,message:a instanceof Error?a.message:"Unknown error occurred"}}}async function kK(e){var t,n,r,a;try{(t=e.onProgress)==null||t.call(e,"Bc 1: ang nhn bn Nhm QC...",20);const i=await nR(e);if(!i.success||!i.adsetIds||i.adsetIds.length===0)throw new Error(i.message||"Failed to clone ad set");const o=i.adsetIds[0],l=[];if(e.adQuantity&&e.adQuantity>0){(n=e.onProgress)==null||n.call(e,"Bc 2: ang ti danh sch Ads gc...",30);const c=await kf(e.adsetId,e.accessToken);if(c.length===0)return console.warn("[cloneAdSetWithAds]  Ad Set gc khng c ads. Ch to Ad Set rng."),{success:!0,adsetIds:[o],adIds:[],message:"Ad Set cloned (original has no ads)"};const u=c.slice(0,e.adQuantity),d=u.length;for(let h=0;h<d;h++){const m=u[h];(r=e.onProgress)==null||r.call(e,`Bc 3.${h+1}: ang nhn bn Ad "${m.name}"...`,Math.round(30+h/d*60));const p=await rb({adId:m.id,newName:m.name,targetAdsetId:o,statusOption:e.statusOption==="INHERITED"?"PAUSED":e.statusOption,accessToken:e.accessToken,adAccountId:e.adAccountId});p.success&&p.adIds&&p.adIds.length>0?l.push({id:p.adIds[0],source_id:m.id}):console.error(`[cloneAdSetWithAds]  Failed to clone ad ${m.id}:`,p.message),h<d-1&&await new Promise(v=>setTimeout(v,300))}}return(a=e.onProgress)==null||a.call(e,"Hon thnh",100),{success:!0,adsetIds:[o],adIds:l.map(c=>c.id),details:{campaigns:[],adsets:[{id:o,source_id:e.adsetId}],ads:l},message:`Successfully cloned ad set with ${l.length} ads`}}catch(i){return console.error("[cloneAdSetWithAds] Error:",i),{success:!1,message:i instanceof Error?i.message:"Unknown error occurred"}}}async function rb(e){var t,n,r,a,i;try{console.log("[TRACE_CLONE] cloneAd called with params:",JSON.stringify({...e,accessToken:"***"}));const o=await fetch(`https://graph.facebook.com/v21.0/${e.adId}?fields=name,adset_id,status,creative&access_token=${e.accessToken}`);if(!o.ok){const _=await o.json();throw console.error("[cloneAd] Failed to fetch ad:",_),new Error(((t=_.error)==null?void 0:t.message)||"Failed to fetch original ad")}const l=await o.json(),c=e.targetAdsetId||l.adset_id,u=await fetch(`https://graph.facebook.com/v21.0/${c}?fields=account_id&access_token=${e.accessToken}`);if(!u.ok){const _=await u.json();throw new Error(((n=_.error)==null?void 0:n.message)||"Failed to fetch ad set info")}const h=(await u.json()).account_id,m=h.startsWith("act_")?h:`act_${h}`,p=new URLSearchParams({name:e.newName,adset_id:c,status:e.statusOption||"PAUSED",access_token:e.accessToken});(r=l.creative)!=null&&r.id&&p.append("creative",JSON.stringify({creative_id:l.creative.id}));const v=await fetch(`https://graph.facebook.com/v21.0/${m}/ads`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:p});if(!v.ok){const _=await v.json();console.error("[cloneAd] Facebook API Error:",_);const j=((a=_.error)==null?void 0:a.error_user_msg)||((i=_.error)==null?void 0:i.message)||"Failed to create ad";throw new Error(j)}const x=await v.json(),b=`https://business.facebook.com/adsmanager/manage/ads?act=${m.replace("act_","")}&selected_ad_ids=${x.id}`;return{success:!0,adIds:[x.id],message:`Successfully cloned ad: ${x.id}`}}catch(o){return console.error("[cloneAd] Error:",o),{success:!1,message:o instanceof Error?o.message:"Unknown error occurred"}}}function Gy(e){const t=new Date().toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"});return`${e} - Copy ${t}`}async function $_e(e,t){var n;try{const r=e.startsWith("act_")?e:`act_${e}`,a=await fetch(`https://graph.facebook.com/v21.0/${r}/campaigns?fields=id,name,status,effective_status,objective,daily_budget,lifetime_budget&access_token=${t}`);if(!a.ok){const o=await a.json().catch(()=>({}));throw console.error("Facebook API Error:",o),new Error(((n=o.error)==null?void 0:n.message)||"Failed to fetch campaigns")}return(await a.json()).data||[]}catch(r){throw console.error("Error fetching campaigns:",r),r}}async function US(e,t){var n;try{const r=await fetch(`https://graph.facebook.com/v21.0/${e}/adsets?fields=id,name,status,effective_status,campaign_id,daily_budget,lifetime_budget&access_token=${t}`);if(!r.ok){const i=await r.json().catch(()=>({}));throw console.error("Facebook API Error (Ad Sets):",i),new Error(((n=i.error)==null?void 0:n.message)||"Failed to fetch ad sets")}return(await r.json()).data||[]}catch(r){throw console.error("Error fetching ad sets:",r),r}}async function kf(e,t){var n;try{const r=await fetch(`https://graph.facebook.com/v21.0/${e}/ads?fields=id,name,status,effective_status,adset_id&access_token=${t}`);if(!r.ok){const i=await r.json().catch(()=>({}));throw console.error("Facebook API Error (Ads):",i),new Error(((n=i.error)==null?void 0:n.message)||"Failed to fetch ads")}return(await r.json()).data||[]}catch(r){throw console.error("Error fetching ads:",r),r}}function M_e(){const[e,t]=g.useState({stage:"idle",selectedType:void 0,effectiveItems:void 0,childItems:void 0,selectedItem:void 0,selectedChild:void 0,quantities:void 0,statusOption:"PAUSED",newName:void 0,isFetching:!1}),n=g.useCallback(()=>{console.log("[TRACE_CLONE] Hook start called"),t({stage:"awaiting_confirmation",selectedType:void 0,effectiveItems:void 0,childItems:void 0,selectedItem:void 0,selectedChild:void 0,quantities:{campaigns:1,adsets:1,ads:1},statusOption:"PAUSED",newName:void 0})},[]),r=g.useCallback(()=>{t(N=>({...N,stage:"awaiting_list_choice"}))},[]),a=g.useCallback(()=>{t(N=>({...N,stage:"listing_campaigns"}))},[]),i=g.useCallback(()=>{t(N=>({...N,stage:"awaiting_campaign_selection"}))},[]),o=g.useCallback(N=>{t(k=>({...k,stage:"confirming",selectedType:N}))},[]),l=g.useCallback(async(N,k,C)=>{if(e.isFetching)return console.warn("[CloneFlow] Already fetching, skipping..."),{success:!1,message:"Already fetching"};console.log("[TRACE_CLONE] fetchCampaignsForListing called"),t(A=>({...A,isFetching:!0}));try{const A={from:new Date(Date.now()-2592e6).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]},P=await P_e({userId:N,accountId:k,level:"campaign",dateRange:A,minResults:0,sortBy:"spend",limit:50});return t(O=>({...O,stage:"awaiting_campaign_selection",effectiveItems:P,isFetching:!1})),{success:!0,items:P}}catch(A){return console.error("[CloneFlow] Fetch error:",A),t(P=>({...P,isFetching:!1})),{success:!1,message:A.message}}},[e.isFetching]),c=g.useCallback(N=>{if(!e.effectiveItems||N<0||N>=e.effectiveItems.length)return{success:!1,message:"S th t khng hp l"};const k=e.effectiveItems[N];return t(C=>({...C,stage:"selecting_type",selectedItem:k,newName:Gy(k.name)})),{success:!0,item:k}},[e.effectiveItems]),u=g.useCallback(async N=>(t(k=>({...k,stage:"awaiting_campaign_selection"})),{success:!1,message:"Vui lng nhp tn chin dch  tm kim"}),[]),d=g.useCallback(async(N,k)=>{if(!e.selectedItem||!e.selectedType)return{success:!1,message:"Cha chn chin dch hoc loi"};t(C=>({...C,isFetching:!0}));try{let C=[];return e.selectedType==="adset"?C=(await(await fetch(`https://graph.facebook.com/v21.0/${e.selectedItem.id}/adsets?fields=id,name,status,daily_budget,lifetime_budget&access_token=${k}`,{method:"GET"})).json()).data||[]:e.selectedType==="ad"&&(C=(await(await fetch(`https://graph.facebook.com/v21.0/${e.selectedItem.id}/ads?fields=id,name,status&access_token=${k}`,{method:"GET"})).json()).data||[]),t(A=>({...A,stage:C.length===1?"awaiting_name":"awaiting_child_selection",childItems:C,selectedChild:C.length===1?C[0]:void 0,newName:C.length===1?Gy(C[0].name):void 0,isFetching:!1})),{success:!0,items:C}}catch(C){return console.error("[CloneFlow] Fetch child error:",C),t(A=>({...A,isFetching:!1})),{success:!1,message:C.message}}},[e.selectedItem,e.selectedType]),h=g.useCallback(N=>{if(!e.childItems||N<0||N>=e.childItems.length)return{success:!1,message:"S th t khng hp l"};const k=e.childItems[N];return t(C=>({...C,stage:"awaiting_name",selectedChild:k,newName:Gy(k.name)})),{success:!0,item:k}},[e.childItems]),m=g.useCallback(()=>{t(N=>({...N,stage:"awaiting_name"}))},[]),p=g.useCallback(()=>{t(N=>({...N,stage:"awaiting_quantity"}))},[]),v=g.useCallback(()=>{t(N=>({...N,stage:"confirming"}))},[]),x=g.useCallback(N=>{t(k=>({...k,quantities:N}))},[]),b=g.useCallback(N=>{t(k=>({...k,statusOption:N}))},[]),_=g.useCallback(N=>{t(k=>({...k,newName:N}))},[]),j=g.useCallback(async(N,k)=>{var C,A,P,O,T,$,L;console.log("[TRACE_CLONE] confirmAndClone called with type:",e.selectedType),t(z=>({...z,stage:"cloning"}));try{const z=e.newName||((C=e.selectedChild)==null?void 0:C.name)||((A=e.selectedItem)==null?void 0:A.name)||"Clone",W=e.quantities||{campaigns:1,adsets:1,ads:1},B=e.statusOption||"PAUSED";let G=[];if(e.selectedType==="campaign"){const se=W.campaigns||1;for(let D=0;D<se;D++){const Y=se>1?`${z} - ${D+1}`:z,ue=await NK({campaignId:((P=e.selectedItem)==null?void 0:P.id)||"",newName:Y,adsetQuantity:W.adsets||1,adQuantity:W.ads||1,statusOption:B,accessToken:k,adAccountId:N});G.push(ue)}}else if(e.selectedType==="adset"){const se=W.adsets||1,D=((O=e.selectedChild)==null?void 0:O.id)||((T=e.selectedItem)==null?void 0:T.id);for(let Y=0;Y<se;Y++){const ue=se>1?`${z} - ${Y+1}`:z,xe=await kK({adsetId:D||"",newName:ue,adQuantity:W.ads||1,statusOption:B,accessToken:k,adAccountId:N});G.push(xe)}}else if(e.selectedType==="ad"){const se=W.ads||1,D=(($=e.selectedChild)==null?void 0:$.id)||((L=e.selectedItem)==null?void 0:L.id);for(let Y=0;Y<se;Y++){const ue=se>1?`${z} - ${Y+1}`:z,xe=await rb({adId:D||"",newName:ue,statusOption:B,accessToken:k,adAccountId:N});G.push(xe)}}else return{success:!1,message:" Loi nhn bn khng hp l",error:"Invalid clone type"};const U=G.filter(se=>se.success).length;if(U===0)return t(se=>({...se,stage:"awaiting_name"})),{success:!1,message:" Nhn bn tht bi",error:"All clones failed"};t({stage:"idle",selectedType:void 0,effectiveItems:void 0,childItems:void 0,selectedItem:void 0,selectedChild:void 0,quantities:void 0,statusOption:"PAUSED",newName:void 0});const F=G.reduce((se,D)=>{var Y,ue;return se+(((ue=(Y=D.details)==null?void 0:Y.adsets)==null?void 0:ue.length)||0)},0),K=G.reduce((se,D)=>{var Y,ue;return se+(((ue=(Y=D.details)==null?void 0:Y.ads)==null?void 0:ue.length)||0)},0);let X=` Nhn bn thnh cng ${U}/${G.length} ${e.selectedType}!`;return e.selectedType==="campaign"&&(F>0||K>0)&&(X+=`

 Chi tit: ${F} nhm QC, ${K} qung co`,X+=`

 Lu : Nu khng thy ads trong Ads Manager, vui lng:
`,X+=`1. Refresh trang (F5)
`,X+=`2. Kim tra filter - ads mi c status PAUSED
`,X+='3. Chuyn sang tab "Ads" trong Ads Manager'),{success:!0,message:X}}catch(z){return console.error("[CloneFlow] Clone error:",z),t(W=>({...W,stage:"awaiting_name"})),{success:!1,message:` Li: ${z.message}`,error:z.message}}},[e.selectedType,e.selectedItem,e.selectedChild,e.quantities,e.statusOption,e.newName]),w=g.useCallback(()=>{t({stage:"idle",selectedType:void 0,effectiveItems:void 0,childItems:void 0,selectedItem:void 0,selectedChild:void 0,quantities:void 0,statusOption:"PAUSED",newName:void 0,isFetching:!1})},[]);return{stage:e.stage,selectedType:e.selectedType,effectiveItems:e.effectiveItems||[],childItems:e.childItems||[],selectedItem:e.selectedItem,selectedChild:e.selectedChild,quantities:e.quantities,statusOption:e.statusOption,newName:e.newName,isActive:e.stage!=="idle",start:n,confirmIntent:r,chooseListOption:a,chooseSearchOption:i,selectType:o,fetchCampaignsForListing:l,selectCampaignByIndex:c,selectCampaignByName:u,fetchChildItems:d,selectChildByIndex:h,setQuantities:x,setStatusOption:b,setNewName:_,proceedToAwaitingName:m,proceedToAwaitingQuantity:p,proceedToConfirming:v,confirmAndClone:j,reset:w}}async function D_e(e,t,n){var c,u;console.log("[TRACE_QUICK_POST] parseQuickPost called with input:",e);const r=new Promise((d,h)=>setTimeout(()=>h(new Error(" Edge function timeout sau 30 giy. Vui lng th li.")),3e4)),a=wt.functions.invoke("parse-campaign-with-user-api",{body:{text:e,userId:n}}),{data:i,error:o}=await Promise.race([a,r]);if(o)throw new Error(o.message||"Failed to parse campaign");if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Edge function khng tr v d liu hp l");const l=i.data;if(!l)throw new Error("No parsed data returned");return console.log("[TRACE_QUICK_POST] parseQuickPost raw data from AI:",l),{campaignType:l.campaignType||"post",name:l.campaignName,objective:l.campaignType==="message"?"CONVERSATIONS":"POST_ENGAGEMENT",age:l.ageMin&&l.ageMax?{min:l.ageMin,max:l.ageMax}:void 0,gender:l.gender,location:l.resolvedLocation?[l.resolvedLocation]:void 0,locationType:l.locationType,latitude:l.latitude,longitude:l.longitude,radiusKm:l.radiusKm,interests:Array.isArray(l.resolvedInterests)&&l.resolvedInterests.length>0?l.resolvedInterests:void 0,budget:l.budget,postUrl:l.postUrl,resolvedPostId:(c=l.resolvedPost)==null?void 0:c.fullPostId,pageId:(u=l.resolvedPost)==null?void 0:u.pageId}}async function BF(e,t){console.log("[TRACE_QUICK_POST] validatePost called with url:",e);const{data:n,error:r}=await wt.functions.invoke("validate-facebook-post",{body:{postUrl:e}});if(r)throw new Error(r.message||"Failed to validate post");if(!(n!=null&&n.success))throw new Error((n==null?void 0:n.error)||"Post validation failed");return{pageId:t,postId:n.postId,resolvedPostId:`${t}_${n.postId}`}}function L_e(e){var n,r;console.log("[TRACE_QUICK_POST] buildTargetingObject called with parsed data:",e);const t={age_min:((n=e.age)==null?void 0:n.min)||18,age_max:((r=e.age)==null?void 0:r.max)||65,genders:e.gender==="all"?void 0:[e.gender==="male"?1:2]};if(e.latitude&&e.longitude)t.geo_locations={custom_locations:[{latitude:e.latitude,longitude:e.longitude,radius:e.radiusKm??10,distance_unit:"kilometer"}]};else if(e.location&&e.location.length>0){const a=e.location[0],i=typeof a.key=="string"&&a.key.includes(",")?a.key:void 0,o=typeof a.name=="string"&&/-?\d+\.\d+\s*,\s*-?\d+\.\d+/.test(a.name)?a.name:void 0,l=i||o;if(a.type==="coordinates"||l){const[c,u]=(l||"").replace(/\s+/g,"").split(","),d=Number(c),h=Number(u);!Number.isNaN(d)&&!Number.isNaN(h)&&(t.geo_locations={custom_locations:[{latitude:d,longitude:h,radius:e.radiusKm??a.radius??10,distance_unit:"kilometer"}]})}else t.geo_locations={},a.type==="city"?t.geo_locations.cities=[{key:a.key,name:a.name,radius:a.radius??17,distance_unit:a.distance_unit||"kilometer"}]:a.type==="country"&&(t.geo_locations.countries=[a.key])}return e.interests&&Array.isArray(e.interests)&&e.interests.length>0?t.flexible_spec=[{interests:e.interests.map(a=>({id:a.id,name:a.name}))}]:console.warn("[buildTargeting]  No valid interests array found:",e.interests),t}async function F_e(e,t,n,r="OUTCOME_ENGAGEMENT"){console.log("[TRACE_QUICK_POST] createCampaignStep called with name:",e);const{data:a,error:i}=await wt.functions.invoke("create-fb-campaign-step",{body:{campaignName:e,objective:r,adsToken:t,adAccountId:n}});if(i)throw new Error(i.message||"Failed to create campaign");if(!(a!=null&&a.campaignId))throw new Error("No campaign ID returned");return{campaignId:a.campaignId}}async function B_e(e,t,n,r,a,i="POST_ENGAGEMENT"){console.log("[TRACE_QUICK_POST] createAdSetStep called with budget:",n);const o={page_id:a.pageId},{data:l,error:c}=await wt.functions.invoke("create-fb-adset-step",{body:{campaignId:e,adSetName:t,dailyBudget:n,targeting:JSON.stringify(r),optimizationGoal:i,billingEvent:"IMPRESSIONS",bidStrategy:"LOWEST_COST_WITHOUT_CAP",promotedObject:o,adsToken:a.adsToken,adAccountId:a.adAccountId,currency:"VND"}});if(c)throw new Error(c.message||"Failed to create ad set");if(!(l!=null&&l.adSetId))throw new Error("No ad set ID returned");return{adSetId:l.adSetId}}async function U_e(e,t,n,r){var o;console.log("[TRACE_QUICK_POST] createAdStep called with resolvedPostId:",n);const{data:a,error:i}=await wt.functions.invoke("create-fb-ad-step",{body:{adSetId:e,adName:t,creativeType:"post",resolvedPostId:n,pageId:r.pageId,adsToken:r.adsToken,pageToken:r.pageToken,adAccountId:r.adAccountId}});if(i||a!=null&&a.error){const l=a!=null&&a.error?a:{error:i==null?void 0:i.message};throw l.error==="MISSING_CTA_BUTTON"||(o=a==null?void 0:a.message)!=null&&o.includes("nt gi tin nhn")?new Error(a.message||"Bn cn b sung thm nt gi tin nhn vo bi vit mi to c"):new Error(l.message||(i==null?void 0:i.message)||"Failed to create ad")}if(!(a!=null&&a.adId))throw new Error("No ad ID returned");return{adId:a.adId,creativeId:a.creativeId}}const Ms={parsing:" ang phn tch yu cu ca bn...",awaiting_budget:" Bn mun ngn sch bao nhiu VND/ngy? (Ti thiu 40,000 VND)",awaiting_age:"  tui mc tiu? (V d: 18-35)",awaiting_gender:" Gii tnh? (nam/n/tt c)",awaiting_location:" V tr targeting? (V d: H Ch Minh, H Ni)",awaiting_radius:" Bn knh targeting (km)? (Ti thiu 17km cho thnh ph)",awaiting_interests:" S thch mc tiu? (V d: Du lch, m thc)",confirming:' D liu  y . Xem li thng tin v nhn "Xc nhn"  to.',creating:" ang to chin dch...",done:" To thnh cng!",error:" C li xy ra. Vui lng th li."};function CK(){const{user:e}=Mn(),[t,n]=g.useState("idle"),[r,a]=g.useState({}),[i,o]=g.useState(""),[l,c]=g.useState(!1),[u,d]=g.useState(null),[h,m]=g.useState(null),[p,v]=g.useState(null),x=g.useCallback(async(C,A)=>{if(console.log("[TRACE_QUICK_POST] Hook start called with input:",C),!(e!=null&&e.id))throw new Error(" Bn cha ng nhp. Vui lng ng nhp  tip tc.");c(!0),n("parsing"),o(Ms.parsing);try{const P=await D_e(C,A,e.id);if(P.postUrl&&A.pageId)try{const G=await BF(P.postUrl,A.pageId);P.pageId=G.pageId,P.resolvedPostId=G.resolvedPostId}catch(G){throw ne.error(" Link bi vit khng hp l hoc khng cng khai"),G}console.log("[TRACE_QUICK_POST] Hook parsed data:",P),a(P);let O,T;const $=P.locationType==="country",L=P.locationType==="city",z=P.locationType==="coordinate"||!!P.latitude&&!!P.longitude;let W=null;if(z){const G=C.match(/(\d+)\s*km/i);G&&(W=parseInt(G[1]),W>=1&&(P.radiusKm=W))}const B=L&&(!P.radiusKm||P.radiusKm<17)||z&&!P.radiusKm;return P.budget?!P.age||!P.age.min||!P.age.max?(O="awaiting_age",T=Ms.awaiting_age):P.gender?B?(O="awaiting_radius",T=z?" Ta  yu cu bn knh ti thiu 1km. Vui lng nhp s km (>=1) ri gi  xc nhn.":" Bn knh cho thnh ph ti thiu 17km. Vui lng nhp s km (>=17) ri gi  xc nhn."):(O="confirming",T="__SHOW_CONFIRM_CARD__"):(O="awaiting_gender",T=Ms.awaiting_gender):(O="awaiting_budget",T=Ms.awaiting_budget),n(O),o(T),{message:T,stage:O}}catch(P){let O=Ms.error;throw P instanceof Error&&(P.message.includes("Failed to parse")?O=` Khng th phn tch yu cu.

**Vui lng kim tra:**
 Edge function \`parse-campaign-with-user-api\` c hot ng?
 OpenAI API key cn hp l?`:P.message.includes("No parsed data")?O=" Edge function khng tr v d liu. Vui lng kim tra logs.":P.message.includes("validate")||P.message.includes("Link bi vit")?O=` Link bi vit khng hp l hoc khng cng khai.

**Gi :**
 m bo bi vit c quyn cng khai
 Kim tra link c ng nh dng khng`:O=` **Li:** ${P.message}`),o(O),ne.error("Khng th phn tch yu cu"),P}finally{c(!1)}},[e]),b=g.useCallback(async C=>{console.log("[TRACE_QUICK_POST] Hook handleInput called:",C,"Current Stage:",t),c(!0);try{let A,P;switch(t){case"awaiting_budget":{const O=parseInt(C.replace(/\D/g,""));if(O<4e4)return ne.error("Ngn sch ti thiu 40,000 VND"),{message:Ms.awaiting_budget,stage:"awaiting_budget"};a(T=>({...T,budget:O})),A="awaiting_age",P=Ms.awaiting_age;break}case"awaiting_age":{const O=C.match(/(\d+)\s*-\s*(\d+)/);if(!O)return ne.error("Vui lng nhp nh dng: 18-35"),{message:Ms.awaiting_age,stage:"awaiting_age"};const[,T,$]=O;a(L=>({...L,age:{min:parseInt(T),max:parseInt($)}})),A="awaiting_gender",P=Ms.awaiting_gender;break}case"awaiting_gender":{const O=C.toLowerCase().includes("nam")?"male":C.toLowerCase().includes("n")?"female":"all";a(T=>({...T,gender:O})),A="awaiting_location",P=Ms.awaiting_location;break}case"awaiting_location":{const O=C.split(",").map(T=>({name:T.trim(),type:"city",key:"1566083690260941",radius:void 0,distance_unit:"kilometer"}));a(T=>({...T,location:O})),A="awaiting_radius",P=Ms.awaiting_radius;break}case"awaiting_radius":{const O=C.match(/(\d+)\s*(?:km)?/i);if(!O)return ne.error("Vui lng nhp s km hp l"),{message:" Vui lng nhp s km (v d: 7 hoc 7km).",stage:"awaiting_radius"};const T=parseInt(O[1]);if((r.locationType||"")==="coordinate"||r.latitude&&r.longitude){if(!T||T<1)return ne.error("Bn knh ti thiu 1km cho ta "),{message:" Ta  yu cu bn knh ti thiu 1km. Vui lng nhp s km (>=1).",stage:"awaiting_radius"}}else if(!T||T<17)return ne.error("Bn knh ti thiu 17km cho thnh ph"),{message:" Vui lng nhp bn knh (>=17km).",stage:"awaiting_radius"};a(L=>{var z;return{...L,radiusKm:T,location:(z=L.location)==null?void 0:z.map(W=>({...W,radius:T}))}}),A="confirming",P="__SHOW_CONFIRM_CARD__";break}case"awaiting_interests":{const O=C.split(",").map((T,$)=>({id:`interest_${$}`,name:T.trim()}));a(T=>({...T,interests:O})),A="confirming",P=Ms.confirming;break}default:return{message:"",stage:"idle"}}return n(A),o(P),{message:P,stage:A}}catch{return ne.error("Khng th x l input"),{message:"",stage:t}}finally{c(!1)}},[t,r]),_=g.useCallback(async C=>{try{c(!0);const A=await F_e(r.name,C.adsToken,C.adAccountId,"OUTCOME_ENGAGEMENT");return d(A.campaignId),{campaignId:A.campaignId}}catch(A){throw ne.error("Li to Campaign"),A}finally{c(!1)}},[r]),j=g.useCallback(async(C,A)=>{try{c(!0);const P=L_e(r),O=await B_e(C,r.name,r.budget,P,A,"CONVERSATIONS");return m(O.adSetId),{adSetId:O.adSetId}}catch(P){throw ne.error("Li to AdSet"),P}finally{c(!1)}},[r]),w=g.useCallback(async(C,A)=>{try{c(!0);let P=r.resolvedPostId;if(!P&&r.postUrl&&A.pageId)try{P=(await BF(r.postUrl,A.pageId)).resolvedPostId}catch{throw new Error("Khng th xc thc link bi vit. Vui lng kim tra li link.")}if(!P)throw new Error("Khng tm thy Post ID hp l. Vui lng kim tra li link.");if(!/^\d+_\d+$/.test(P))throw new Error(`Post ID khng ng format. Nhn c: ${P}`);const O=await U_e(C,r.name,P,A);return v(O.adId),{adId:O.adId,creativeId:O.creativeId}}catch(P){throw P instanceof Error&&P.message.includes("nt gi tin nhn")?(ne.error(P.message,{duration:6e3,description:'Vui lng thm nt "Send Message" vo bi vit Facebook trc khi to qung co tin nhn.'}),P):(ne.error("Li to Ad"),P)}finally{c(!1)}},[r]),N=g.useCallback(async C=>{console.log("[TRACE_QUICK_POST] Hook confirmAndCreate called"),c(!0),n("creating"),o(Ms.creating);try{const A=await _(C),P=await j(A.campaignId,C),O=await w(P.adSetId,C);return n("done"),o(Ms.done),ne.success(" To chin dch thnh cng!"),{campaignId:A.campaignId,adSetId:P.adSetId,adId:O.adId}}catch(A){console.error("[QuickPost] Create error:",A),n("error");const P=A instanceof Error?A.message:Ms.error;return o(P),ne.error(P),null}finally{c(!1)}},[r,_,j,w]),k=g.useCallback(()=>{n("idle"),a({}),o(""),c(!1),d(null),m(null),v(null)},[]);return{stage:t,data:r,lastMessage:i,isLoading:l,campaignId:u,adSetId:h,adId:p,start:x,handleInput:b,createCampaign:_,createAdSet:j,createAd:w,confirmAndCreate:N,reset:k,updateData:a}}const V_e=Uf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ze({className:e,variant:t,...n}){return s.jsx("div",{className:je(V_e({variant:t}),e),...n})}function z_e({data:e,onConfirm:t,onCancel:n,isLoading:r}){var o,l;const a=()=>{if((e.locationType==="coordinate"||e.latitude&&e.longitude)&&e.latitude&&e.longitude)return` ${e.latitude.toFixed(6)}, ${e.longitude.toFixed(6)}  Bn knh: ${e.radiusKm??10} km`;if(e.location&&e.location.length>0){const c=e.location[0],u=typeof c.key=="string"&&c.key.includes(",")?c.key:void 0,d=typeof c.name=="string"&&/-?\d+\.\d+\s*,\s*-?\d+\.\d+/.test(c.name)?c.name:void 0,h=u||d;if(c.type==="coordinates"||h){const[m,p]=(h||"").replace(/\s+/g,"").split(","),v=Number(m),x=Number(p);if(!Number.isNaN(v)&&!Number.isNaN(x)){const b=e.radiusKm??c.radius??10;return` ${v.toFixed(6)}, ${x.toFixed(6)}  Bn knh: ${b} km`}}}if(e.locationType==="city"&&e.location&&e.location.length>0){const c=e.location[0],u=e.radiusKm??c.radius??c.minRadiusKm??17;return` ${c.name} (Bn knh: ${u} km)`}return e.locationType==="country"?" Vit Nam (ton quc)":" Cha xc nh v tr"},i=()=>e.gender==="male"?"Nam":e.gender==="female"?"N":"Tt c";return s.jsxs(Oe,{className:"w-full max-w-lg shadow-lg border-primary/20",children:[s.jsx(Fe,{className:"pb-2 pt-3 sm:pb-3 sm:pt-4",children:s.jsxs(Be,{className:"flex items-center gap-1.5 sm:gap-2 text-sm sm:text-lg leading-tight",children:[s.jsx(Nn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Xc nhn thng tin chin dch"})]})}),s.jsxs(Re,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-xs text-muted-foreground uppercase",children:"Thng tin c bn"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tn chin dch"}),s.jsx("p",{className:"font-medium text-sm",children:e.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Ngn sch"}),s.jsx("p",{className:"font-medium text-sm text-primary",children:e.budget?`${e.budget.toLocaleString("vi-VN")}`:"Cha xc nh"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:" tui"}),s.jsxs("p",{className:"font-medium text-sm",children:[((o=e.age)==null?void 0:o.min)||18," - ",((l=e.age)==null?void 0:l.max)||65," tui"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gii tnh"}),s.jsx("p",{className:"font-medium text-sm",children:i()})]})]})]}),s.jsx(qs,{}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(aj,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"font-semibold text-xs text-blue-900 dark:text-blue-100",children:"V tr nhm mc tiu"}),s.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:a()})]})]})}),e.postUrl&&s.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(bce,{className:"h-4 w-4 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1.5 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold text-xs text-green-900 dark:text-green-100",children:"Bi vit Facebook"}),s.jsxs(Ze,{variant:"secondary",className:"bg-green-200 dark:bg-green-900 text-green-800 dark:text-green-200 text-[10px] px-1.5 py-0",children:[s.jsx(Nn,{className:"h-2.5 w-2.5 mr-0.5"}),"HIGH"]})]}),e.resolvedPostId&&s.jsxs("p",{className:"text-[10px] text-green-700 dark:text-green-300 font-mono",children:["Post ID: ",e.resolvedPostId]}),s.jsxs("a",{href:e.postUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 hover:underline",children:["Xem bi vit ",s.jsx(Vz,{className:"h-3 w-3"})]})]})]})}),e.interests&&e.interests.length>0&&s.jsx("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(kx,{className:"h-4 w-4 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1.5 flex-1",children:[s.jsx("h3",{className:"font-semibold text-xs text-purple-900 dark:text-purple-100",children:"S thch c xc thc"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.interests.map(c=>s.jsxs(Ze,{variant:"secondary",className:"bg-purple-200 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-[10px] px-1.5 py-0",children:[c.name,s.jsxs("span",{className:"ml-1 text-purple-600 dark:text-purple-400 font-mono text-[9px]",children:["#",c.id]})]},c.id))})]})]})})]}),s.jsxs(dI,{className:"flex gap-2 pt-3",children:[s.jsx(J,{onClick:t,disabled:r,className:"flex-1 bg-primary hover:bg-primary/90 text-sm",children:r?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin mr-2",children:""}),"ang to..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Xc nhn & To chin dch"]})}),s.jsx(J,{onClick:n,variant:"outline",disabled:r,className:"text-sm",children:"Hy"})]})]})}function H_e({parsedData:e,userMessage:t,uploadedHash:n,uploadedVideoId:r,onContinue:a,onCancel:i}){const[o,l]=g.useState(!1),c=()=>{if(!e.locations||e.locations.length===0)return" Cha xc nh v tr";const d=e.locations[0];if(typeof d=="string"&&/^-?\d+\.?\d*\s*,\s*-?\d+\.?\d*$/.test(d.trim())){const[h,m]=d.split(",").map(v=>parseFloat(v.trim())),p=e.locationRadius||10;return` ${h.toFixed(6)}, ${m.toFixed(6)}  Bn knh: ${p}km`}if(d.latitude&&d.longitude){const h=e.locationRadius||d.radius||10;return` ${d.latitude.toFixed(6)}, ${d.longitude.toFixed(6)}  Bn knh: ${h}km`}if(d.name){const h=e.locationRadius||d.radius||d.minRadiusKm||17;return` ${d.name} (Bn knh: ${h} km)`}return d.type==="country"||d==="Vit Nam"||d==="Vietnam"||d==="VN"?" Vit Nam (ton quc)":typeof d=="string"&&e.locationRadius?` ${d}  Bn knh: ${e.locationRadius}km`:` ${d}`},u=()=>e.gender==="male"||e.gender===1?"Nam":e.gender==="female"||e.gender===2?"N":"Tt c";return s.jsxs(Oe,{className:"w-full max-w-lg shadow-lg border-primary/20",children:[s.jsx(Fe,{className:"pb-2 pt-3 sm:pb-3 sm:pt-4",children:s.jsxs(Be,{className:"flex items-center gap-1.5 sm:gap-2 text-sm sm:text-lg leading-tight",children:[s.jsx(Nn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Xc nhn thng tin chin dch"})]})}),s.jsxs(Re,{className:"space-y-3",children:[(n||r)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nn,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-xs text-emerald-900 dark:text-emerald-100",children:" Media  sn sng"}),s.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:r?" Video  upload thnh cng":" nh  upload thnh cng"})]})]})}),s.jsx(qs,{})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-xs text-muted-foreground uppercase",children:"Thng tin c bn"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Tn chin dch"}),s.jsx("p",{className:"font-medium text-sm",children:e.campaignName||"Cha xc nh"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Ngn sch"}),s.jsx("p",{className:"font-medium text-sm text-primary",children:e.budget?`${e.budget.toLocaleString("vi-VN")}`:"Cha xc nh"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:" tui"}),s.jsxs("p",{className:"font-medium text-sm",children:[e.ageMin||18," - ",e.ageMax||65," tui"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gii tnh"}),s.jsx("p",{className:"font-medium text-sm",children:u()})]})]})]}),s.jsx(qs,{}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(aj,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"font-semibold text-xs text-blue-900 dark:text-blue-100",children:"V tr nhm mc tiu"}),s.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:c()})]})]})}),e.interests&&e.interests.length>0&&s.jsx("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(kx,{className:"h-4 w-4 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1.5 flex-1",children:[s.jsx("h3",{className:"font-semibold text-xs text-purple-900 dark:text-purple-100",children:"S thch c xc thc"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.interests.map(d=>s.jsxs(Ze,{variant:"secondary",className:"bg-purple-200 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-[10px] px-1.5 py-0",children:[d.name,s.jsxs("span",{className:"ml-1 text-purple-600 dark:text-purple-400 font-mono text-[9px]",children:["#",d.id]})]},d.id))})]})]})}),e.adContent&&s.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(qz,{className:"h-4 w-4 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1.5 flex-1",children:[s.jsx("h3",{className:"font-semibold text-xs text-green-900 dark:text-green-100",children:"Ni dung qung co"}),e.adHeadline&&s.jsxs("div",{className:"mb-2",children:[s.jsx("p",{className:"text-[10px] text-green-700 dark:text-green-300 uppercase font-semibold mb-0.5",children:"Tiu :"}),s.jsx("p",{className:"text-xs text-green-900 dark:text-green-100 font-medium",children:e.adHeadline})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-green-700 dark:text-green-300 uppercase font-semibold mb-0.5",children:"Ni dung:"}),s.jsx("p",{className:je("text-xs text-green-800 dark:text-green-200 leading-relaxed",!o&&"line-clamp-2"),children:e.adContent}),e.adContent&&e.adContent.length>100&&s.jsx("button",{onClick:()=>l(!o),className:"text-[10px] text-green-600 dark:text-green-400 underline mt-1 hover:text-green-700",children:o?"Thu gn":"Xem thm"})]})]})]})}),(e.greetingText||e.iceBreakerQuestions&&e.iceBreakerQuestions.length>0)&&s.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Zr,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx("h3",{className:"font-semibold text-xs text-amber-900 dark:text-amber-100",children:"Tnh nng tin nhn"}),e.greetingText&&s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-300 uppercase font-semibold mb-1",children:"Li cho t ng:"}),s.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200 italic",children:['"',e.greetingText,'"']})]}),e.iceBreakerQuestions&&e.iceBreakerQuestions.length>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] text-amber-700 dark:text-amber-300 uppercase font-semibold mb-1",children:["Cu hi gi  (",e.iceBreakerQuestions.length,"):"]}),s.jsx("ul",{className:"space-y-1",children:e.iceBreakerQuestions.map((d,h)=>s.jsxs("li",{className:"text-xs text-amber-800 dark:text-amber-200 flex items-start",children:[s.jsx("span",{className:"mr-1.5",children:""}),s.jsx("span",{children:d})]},h))})]})]})]})})]}),s.jsxs(dI,{className:"flex gap-2 pt-3",children:[s.jsxs(J,{onClick:a,className:"flex-1 bg-primary hover:bg-primary/90 text-sm",children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Xc nhn & To"]}),s.jsx(J,{onClick:i,variant:"outline",className:"text-sm",children:"Hy"})]})]})}var rR="Radio",[W_e,AK]=ga(rR),[q_e,K_e]=W_e(rR),EK=g.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[h,m]=g.useState(null),p=Dt(t,b=>m(b)),v=g.useRef(!1),x=h?u||!!h.closest("form"):!0;return s.jsxs(q_e,{scope:n,checked:a,disabled:o,children:[s.jsx(it.button,{type:"button",role:"radio","aria-checked":a,"data-state":IK(a),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:p,onClick:We(e.onClick,b=>{a||c==null||c(),x&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),x&&s.jsx(OK,{control:h,bubbles:!v.current,name:r,value:l,checked:a,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});EK.displayName=rR;var TK="RadioIndicator",PK=g.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...a}=e,i=K_e(TK,n);return s.jsx(Aa,{present:r||i.checked,children:s.jsx(it.span,{"data-state":IK(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});PK.displayName=TK;var G_e="RadioBubbleInput",OK=g.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=g.useRef(null),l=Dt(o,i),c=Z0(n),u=B0(t);return g.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const v=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(v)}},[c,n,r]),s.jsx(it.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});OK.displayName=G_e;function IK(e){return e?"checked":"unchecked"}var Y_e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],VS="RadioGroup",[Q_e,tQe]=ga(VS,[ev,AK]),RK=ev(),$K=AK(),[X_e,J_e]=Q_e(VS),MK=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...m}=e,p=RK(n),v=zf(u),[x,b]=_i({prop:i,defaultProp:a??null,onChange:h,caller:VS});return s.jsx(X_e,{scope:n,name:r,required:o,disabled:l,value:x,onValueChange:b,children:s.jsx(zI,{asChild:!0,...p,orientation:c,dir:v,loop:d,children:s.jsx(it.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:v,...m,ref:t})})})});MK.displayName=VS;var DK="RadioGroupItem",LK=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...a}=e,i=J_e(DK,n),o=i.disabled||r,l=RK(n),c=$K(n),u=g.useRef(null),d=Dt(t,u),h=i.value===a.value,m=g.useRef(!1);return g.useEffect(()=>{const p=x=>{Y_e.includes(x.key)&&(m.current=!0)},v=()=>m.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",v)}},[]),s.jsx(HI,{asChild:!0,...l,focusable:!o,active:h,children:s.jsx(EK,{disabled:o,required:i.required,checked:h,...c,...a,name:i.name,ref:d,onCheck:()=>i.onValueChange(a.value),onKeyDown:We(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:We(a.onFocus,()=>{var p;m.current&&((p=u.current)==null||p.click())})})})});LK.displayName=DK;var Z_e="RadioGroupIndicator",FK=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,a=$K(n);return s.jsx(PK,{...a,...r,ref:t})});FK.displayName=Z_e;var BK=MK,UK=LK,eje=FK;const aR=g.forwardRef(({className:e,...t},n)=>s.jsx(BK,{className:je("grid gap-2",e),...t,ref:n}));aR.displayName=BK.displayName;const Bx=g.forwardRef(({className:e,...t},n)=>s.jsx(UK,{ref:n,className:je("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(eje,{className:"flex items-center justify-center",children:s.jsx(Uz,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Bx.displayName=UK.displayName;const tje=({selectedItem:e,cloneType:t,suggestedName:n,quantities:r,onChangeQuantities:a,statusOption:i,onChangeStatus:o,onConfirm:l,onCancel:c,isLoading:u})=>{const[d,h]=g.useState(n);g.useEffect(()=>{h(n)},[n]);const m={campaign:"Chin dch",adset:"Nhm QC",ad:"Qung co"}[t],p=(x,b)=>{const _=parseInt(b)||1;a({...r,[x]:Math.max(1,_)})},v=(()=>{if(t==="campaign"){const x=r.campaigns||1,b=(r.adsets||1)*x,_=(r.ads||1)*b;return{campaigns:x,adsets:b,ads:_}}else if(t==="adset"){const x=r.adsets||1,b=(r.ads||1)*x;return{adsets:x,ads:b}}else return{ads:r.ads||1}})();return s.jsxs(Oe,{className:"w-full max-w-lg bg-card/95 backdrop-blur-sm border-border/50",children:[s.jsx(Fe,{className:"pb-3",children:s.jsxs(Be,{className:"text-lg flex items-center gap-2",children:[" Xc nhn nhn bn ",m]})}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg space-y-1",children:[s.jsxs("div",{className:"text-sm font-medium",children:["T: ",e.name]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(hl,{className:"h-3 w-3"}),e.spend.toLocaleString(),""]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(To,{className:"h-3 w-3"}),"CPR: ",e.cost_per_result.toLocaleString(),""]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"newName",children:"Tn mi:"}),s.jsx(Ke,{id:"newName",value:d,onChange:x=>h(x.target.value),placeholder:"Nhp tn mi..."})]}),s.jsxs("div",{className:"space-y-3",children:[t==="campaign"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"campaignQty",children:"S lng Chin dch:"}),s.jsx(Ke,{id:"campaignQty",type:"number",min:"1",value:r.campaigns||1,onChange:x=>p("campaigns",x.target.value)})]}),(t==="campaign"||t==="adset")&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{htmlFor:"adsetQty",children:["S lng Nhm QC",t==="campaign"?"/chin dch":"",":"]}),s.jsx(Ke,{id:"adsetQty",type:"number",min:"1",value:r.adsets||1,onChange:x=>p("adsets",x.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{htmlFor:"adQty",children:["S lng Ads",t==="ad"?"":"/nhm",":"]}),s.jsx(Ke,{id:"adQty",type:"number",min:"1",value:r.ads||1,onChange:x=>p("ads",x.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Trng thi:"}),s.jsxs(aR,{value:i,onValueChange:x=>o(x),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bx,{value:"PAUSED",id:"paused"}),s.jsx(ge,{htmlFor:"paused",className:"cursor-pointer",children:"PAUSED"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bx,{value:"ACTIVE",id:"active"}),s.jsx(ge,{htmlFor:"active",className:"cursor-pointer",children:"ACTIVE"})]})]})]}),s.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg space-y-1",children:[s.jsx("div",{className:"text-sm font-medium",children:" S to:"}),s.jsxs("ul",{className:"text-xs space-y-0.5 text-muted-foreground",children:[v.campaigns!==void 0&&s.jsxs("li",{children:[" ",v.campaigns," Campaign",v.campaigns>1?"s":""]}),v.adsets!==void 0&&s.jsxs("li",{children:[" ",v.adsets," Ad Set",v.adsets>1?"s":""]}),s.jsxs("li",{children:[" ",v.ads," Ad",v.ads>1?"s":""]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:c,disabled:u,className:"flex-1",children:" Hy"}),s.jsx(J,{size:"sm",onClick:()=>{l()},disabled:u||!d.trim(),className:"flex-1",children:u?" ang nhn bn...":" Xc nhn"})]})]})]})};function nje({campaigns:e,onSelect:t,onCancel:n}){const[r,a]=g.useState(!0),[i,o]=g.useState(null),l=(c,u)=>{o(u),a(!1),t(c,u)};return s.jsxs("div",{className:"w-full space-y-3",children:[s.jsxs("div",{className:"text-sm font-medium",children:[" Danh sch chin dch (",e.length," chin dch)"]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>a(!r),className:"w-full flex items-center justify-between px-4 py-3 bg-background border rounded-lg hover:bg-accent transition-colors",children:[s.jsx("span",{className:"text-sm",children:i!==null?`${i+1}. ${e[i].name}`:"Chn chin dch..."}),s.jsx(eu,{className:je("h-4 w-4 transition-transform",r&&"rotate-180")})]}),r&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-popover border rounded-lg shadow-lg",children:s.jsx(As,{className:"h-[300px]",children:s.jsx("div",{className:"p-2 space-y-1",children:e.map((c,u)=>s.jsxs("button",{onClick:()=>l(c,u),className:je("w-full flex items-center justify-between px-3 py-2 text-sm rounded-md hover:bg-accent transition-colors text-popover-foreground",i===u&&"bg-accent"),children:[s.jsxs("span",{className:"text-left truncate",children:[u+1,". ",c.name]}),i===u&&s.jsx(Td,{className:"h-4 w-4 text-primary flex-shrink-0 ml-2"})]},c.id||u))})})})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(J,{variant:"outline",size:"sm",onClick:n,className:"flex-1",children:"Hy"})})]})}function rje({onChooseList:e,onChooseSearch:t,onCancel:n}){return s.jsxs("div",{className:"space-y-3 w-full max-w-lg",children:[s.jsx("div",{className:"text-sm font-medium",children:" Anh chn cch no nh?"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(J,{variant:"outline",className:"flex items-center gap-2 h-auto py-4",onClick:e,children:[s.jsx(Pce,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Hin th danh sch"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Chn t list"})]})]}),s.jsxs(J,{variant:"outline",className:"flex items-center gap-2 h-auto py-4",onClick:t,children:[s.jsx(L0,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Tm kim"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Nhp tn"})]})]})]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:n,className:"w-full",children:"Hy"})]})}function aje({onConfirm:e,onCancel:t}){return s.jsxs("div",{className:"space-y-3 w-full max-w-lg",children:[s.jsxs("div",{className:"text-sm",children:[" Anh mun ",s.jsx("strong",{children:"nhn bn"})," chin dch/nhm qung co/qung co ng khng?"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(J,{onClick:e,className:"flex items-center gap-2",children:[s.jsx(Td,{className:"h-4 w-4"}),"C"]}),s.jsxs(J,{variant:"outline",onClick:t,className:"flex items-center gap-2",children:[s.jsx(Cs,{className:"h-4 w-4"}),"Khng"]})]})]})}function sje({onSelect:e,onCancel:t}){return s.jsxs("div",{className:"space-y-3 w-full max-w-lg",children:[s.jsx("div",{className:"text-sm font-medium",children:" Mun nhn bn mc no?"}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs(J,{variant:"outline",className:"flex items-center gap-3 h-auto py-4 justify-start",onClick:()=>e("campaign"),children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(Oce,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Chin dch (Campaign)"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Nhn bn ton b chin dch bao gm nhm QC v QC"})]})]}),s.jsxs(J,{variant:"outline",className:"flex items-center gap-3 h-auto py-4 justify-start",onClick:()=>e("adset"),children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(kx,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Nhm qung co (AdSet)"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Nhn bn nhm qung co v cc QC bn trong"})]})]}),s.jsxs(J,{variant:"outline",className:"flex items-center gap-3 h-auto py-4 justify-start",onClick:()=>e("ad"),children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(vf,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Qung co (Ad)"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Nhn bn ch qung co"})]})]})]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:t,className:"w-full",children:"Hy"})]})}const Mt={QUICK_POST:"ai_quick_post",CREATIVE_CAMPAIGN:"ai_creative_campaign",AUDIENCE_CREATOR:"ai_audience_creator",CLONE_TOOL:"ai_clone_tool",REPORT_ANALYSIS:"ai_report_analysis"},dy={[Mt.QUICK_POST]:"ai",[Mt.CREATIVE_CAMPAIGN]:"ai",[Mt.AUDIENCE_CREATOR]:"ai",[Mt.CLONE_TOOL]:"ai",[Mt.REPORT_ANALYSIS]:"ai"},fl={[Mt.QUICK_POST]:" Quick Post - To QC t bi vit",[Mt.CREATIVE_CAMPAIGN]:" Creative Campaign - To QC vi media",[Mt.AUDIENCE_CREATOR]:" Audience Creator - To i tng",[Mt.CLONE_TOOL]:" Clone Tool - Nhn bn",[Mt.REPORT_ANALYSIS]:" Report Analysis - Phn tch bo co"},VK=()=>{const{features:e,hasFeature:t,loading:n,error:r}=J0(),a=i=>{const o=t(i);return{enabled:o,canUse:o}};return{canUseQuickPost:t(Mt.QUICK_POST),canUseCreativeCampaign:t(Mt.CREATIVE_CAMPAIGN),canUseAudienceCreator:t(Mt.AUDIENCE_CREATOR),canUseCloneTool:t(Mt.CLONE_TOOL),canUseReportAnalysis:t(Mt.REPORT_ANALYSIS),getFeatureStatus:a,enabledFeatures:Object.values(Mt).filter(i=>t(i)),features:e,loading:n,error:r}},ije=({fullWidth:e=!1}={})=>{var X,se,D,Y,ue,xe,Ne,oe;const[t,n]=g.useState(""),[r,a]=g.useState([]),[i,o]=g.useState(!1),l=g.useRef(null),c=g.useRef(!1),u=N_e(),d=T_e(),h=M_e(),m=CK(),p=VK(),[v,x]=g.useState(null),b=g.useRef(null),{toast:_}=Lo(),{user:j}=Mn(),{settings:w,loading:N}=tR(),k=g.useRef(null),[C,A]=g.useState("");g.useRef(null);const P=(ee,re=3)=>{const Z=ee.split("."),ce=Z.pop()||"",ae=Z.join(".");return ee.length<=re+ce.length+4?ee:`${ae.substring(0,re)}...${ce}`},O=({content:ee})=>{const[re,Z]=g.useState(!1),ce=ee.split(`
`).length>3||ee.length>200;return s.jsxs("div",{children:[s.jsx("p",{className:je(!re&&ce&&"line-clamp-3 whitespace-pre-wrap"),children:ee}),ce&&s.jsx("button",{onClick:()=>Z(!re),className:"text-xs underline mt-1 hover:text-primary-foreground/80",children:re?"Thu gn":"Xem thm"})]})};g.useEffect(()=>{(async()=>{var re,Z;if(j!=null&&j.id)try{const ce=await Nf(j.id);ce!=null&&ce.full_name?A(ce.full_name):A(((re=j.email)==null?void 0:re.split("@")[0])||"")}catch(ce){console.error("Failed to load user profile:",ce),A(((Z=j.email)==null?void 0:Z.split("@")[0])||"")}})()},[j]),g.useEffect(()=>{var ee;(ee=k.current)==null||ee.scrollIntoView({behavior:"smooth"})},[r]),g.useEffect(()=>{u.stage==="reviewing_data"&&a(ee=>ee.filter(re=>!re.content.includes("Media hp l! ang upload ln Facebook")&&!re.content.includes("Upload video thnh cng! ang phn tch")&&!re.content.includes("Upload nh thnh cng! ang phn tch")))},[u.stage]);const T=g.useCallback((ee,re)=>{c.current||a(Z=>[...Z,{role:ee,content:re}])},[]),$=()=>{if(N||!w)throw new Error(" ang ti cu hnh, vui lng i...");if(!(w!=null&&w.adsToken)||!(w!=null&&w.adAccountId))throw new Error(` Cha cu hnh Facebook Ads Token.

Vui lng:
1. M Settings (biu tng )
2. Nhp Ads Token
3. Nhn "Kim tra"
4. Chn ti khon v nhn "Lu"

 Token c lu trong NocoDB.`);if(!(w!=null&&w.pageToken)||!(w!=null&&w.pageId))throw new Error(` Cha cu hnh Facebook Page Token.

Vui lng:
1. M Settings (biu tng )
2. Nhp Page Token
3. Nhn "Kim tra"
4. Chn trang v nhn "Lu"

 Token c lu trong NocoDB.`);return{adsToken:w.adsToken,pageToken:w.pageToken,adAccountId:w.adAccountId,pageId:w.pageId}},L=g.useCallback(()=>{u.reset(),d.reset(),h.reset(),m.reset(),x(null),T("assistant",`  hy.

 Anh c th:
 Gi thng tin chin dch mi
 Hi em v bo co qung co
 To i tng mi

Em sn sng h tr anh nh! `)},[u,d,h,m,T]),z=ee=>` ** chn chin dch**  ${ee.name}`,W=async()=>{var ae,Ue,Ve;if(console.log("[TRACE_QUICK_POST] AIChatPanel handleSend:",t),!t.trim()&&!v||i)return;l.current=new AbortController;const ee=t.trim(),re=v;let Z=ee;if(re){const ut=re.type.startsWith("image/")?"":"",Rt=P(re.name);Z=Z?`${Z}

[${ut} ${Rt}]`:`[${ut} ${Rt}]`}const ce={role:"user",content:Z};a(ut=>[...ut,ce]),n(""),x(null),o(!0);try{const ut=ve=>{const dt=ve.type.startsWith("image/"),pt=ve.type.startsWith("video/");return!dt&&!pt?{valid:!1,error:" Ch h tr file nh (JPG, PNG) hoc video (MP4)!"}:dt&&ve.size>20971520?{valid:!1,error:` nh qu ln! Ti a 20MB (file ny: ${(ve.size/1024/1024).toFixed(2)}MB)`}:pt&&ve.size>1073741824?{valid:!1,error:` Video qu ln! Ti a 1GB (file ny: ${(ve.size/1024/1024).toFixed(2)}MB)`}:{valid:!0}};if(m.stage!=="idle")if(console.log("[TRACE_QUICK_POST] AIChatPanel in QuickPost flow, stage:",m.stage),m.stage==="confirming")if(ee.toLowerCase().includes("ok")||ee.toLowerCase().includes("xc nhn")){const ve=$();T("assistant"," ang to quick post campaign...");const Ce=await m.confirmAndCreate(ve);Ce&&T("assistant",` To thnh cng!

 Campaign ID: ${Ce.campaignId}
 Ad Set ID: ${Ce.adSetId}
 Ad ID: ${Ce.adId}

Kim tra trong Facebook Ads Manager nh!`),o(!1);return}else{T("assistant",' Vui lng nhp "ok" hoc "xc nhn"  to campaign.'),o(!1);return}else{const{message:ve}=await m.handleInput(ee);T("assistant",ve),o(!1);return}if(u.stage!=="idle"){if(u.stage==="awaiting_radius"){const ve=await u.handleRadiusInput(ee);ve.success?T("assistant",ve.message):T("assistant",` ${ve.message}`),o(!1);return}if(u.stage==="awaiting_media"&&re){const{adsToken:ve,adAccountId:Ce}=$();T("assistant"," ang upload file...");const ye=await u.uploadMedia(re,Ce,ve);ye.success?T("assistant",ye.message):T("assistant",` ${ye.message}`),o(!1);return}if(u.stage==="confirming"&&(ee.toLowerCase().includes("ok")||ee.toLowerCase().includes("xc nhn"))){const{adsToken:ve,pageToken:Ce,adAccountId:ye,pageId:dt}=$();T("assistant"," ang to campaign...");const pt=await u.confirmAndCreate(j.id,ve,Ce,ye,dt);pt.success&&pt.ids?T("assistant",` To thnh cng!

 Campaign ID: ${pt.ids.campaignId}
 Ad Set ID: ${pt.ids.adSetId}
 Ad ID: ${pt.ids.adId}

Kim tra trong Facebook Ads Manager nh!`):T("assistant",pt.message),o(!1);return}}if(d.stage!=="idle"){if(d.stage==="selecting_type"){const ve=ee.toLowerCase();ve.includes("file")||ve.includes("danh sch")?(d.selectType("phone_numbers"),T("assistant"," Vui lng cung cp tn i tng:")):ve.includes("messenger")||ve.includes("tin nhn")?(d.selectType("page_messenger"),T("assistant"," Vui lng cung cp tn i tng:")):ve.includes("lookalike")||ve.includes("tng t")?(d.selectType("lookalike"),T("assistant"," Vui lng cung cp tn i tng:")):T("assistant"," Vui lng chn loi audience bng nt bn di."),o(!1);return}if(d.stage==="collecting_file"){d.setData({audienceName:ee}),T("assistant"," Vui lng upload file CSV cha s in thoi."),o(!1);return}if(d.stage==="collecting_messenger_name"){d.setData({audienceName:ee});try{const Ce=(await Qp(j.id)).filter(ye=>ye.is_active);Ce.length===0?(T("assistant"," Khng tm thy Page no. Vui lng kt ni Page trong Settings trc ."),d.reset()):(d.setData({availablePages:Ce}),d.setStage("collecting_messenger_page"),T("assistant"," Vui lng chn Page mun ly ngi nhn tin:"))}catch{T("assistant"," Li khi ti danh sch Page. Vui lng th li."),d.reset()}o(!1);return}if(d.stage==="collecting_messenger_days"){const ve=parseInt(ee.trim());if(isNaN(ve)||ve<1||ve>365){T("assistant",` Vui lng nhp s ngy hp l t 1 n 365 .

V d: 30, 90, hoc 365`),o(!1);return}d.setData({retentionDays:ve}),T("assistant",`   thng tin!

 Tn: ${(ae=d.data)==null?void 0:ae.audienceName}
 Page: ${(Ue=d.data)==null?void 0:Ue.pageName}
 S ngy: ${ve} ngy

Anh xc nhn to i tng ny khng?`),o(!1);return}if(d.stage==="collecting_lookalike"){if(!((Ve=d.data)!=null&&Ve.audienceName)&&ee.trim().length>0){d.setData({audienceName:ee.trim()});const dt=Hw("lookalike",{...d.data,audienceName:ee.trim()});if(dt.needsMoreInfo)if(dt.missingField==="sourceId"){const{adsToken:pt,adAccountId:tn}=$();try{const xn=await FF(tn,pt);xn.length===0?(T("assistant"," Khng tm thy i tng ngun no. Vui lng to Custom Audience trc ."),d.reset()):(d.setData({availableAudiences:xn}),T("assistant",dt.missingFieldPrompt))}catch{T("assistant"," Li khi ti danh sch i tng. Vui lng th li."),d.reset()}}else T("assistant",dt.missingFieldPrompt);o(!1);return}const ve=await k_e(ee,d.stage,d.data),Ce={...d.data,...Object.fromEntries(Object.entries(ve).filter(([dt,pt])=>pt!=null))};d.setData(Ce);const ye=Hw("lookalike",Ce);if(ye.needsMoreInfo)if(ye.missingField==="sourceId"){const{adsToken:dt,adAccountId:pt}=$();try{const tn=await FF(pt,dt);tn.length===0?(T("assistant"," Khng tm thy i tng ngun no. Vui lng to Custom Audience trc ."),d.reset()):(d.setData({availableAudiences:tn}),T("assistant",ye.missingFieldPrompt))}catch{T("assistant"," Li khi ti danh sch i tng. Vui lng th li."),d.reset()}}else ye.missingField==="country"&&d.setData({showCountryButtons:!0}),T("assistant",ye.missingFieldPrompt);else T("assistant",`   thng tin!

 Tn: ${Ce.audienceName}
 Ngun: ${Ce.sourceName}
 Quc gia: ${Ce.countryName}
 T l: ${Ce.ratio}%

Anh xc nhn to i tng Lookalike ny khng?`),d.setData({showConfirmButtons:!0});o(!1);return}if(d.stage==="creating"){const{adsToken:ve,adAccountId:Ce}=$();T("assistant"," ang to audience...");const ye=await d.createAudience(Ce,ve);T("assistant",ye.message),o(!1);return}}if(h.stage==="awaiting_list_choice"){const ve=ee.toLowerCase();if(ve.includes("1")||ve.includes("danh sch")||ve.includes("hin th")){h.chooseListOption();const{adsToken:Ce,adAccountId:ye}=$(),dt=await h.fetchCampaignsForListing(j.id,ye,Ce);dt.success&&dt.items&&dt.items.length>0?T("assistant"," Vui lng chn chin dch t danh sch bn di:"):(T("assistant"," Khng tm thy chin dch no."),h.reset())}else ve.includes("2")||ve.includes("tm")||ve.includes("search")?(h.chooseSearchOption(),T("assistant"," Vui lng nhp tn chin dch hoc t kha  tm kim:")):T("assistant"," Vui lng chn 1 hoc 2");o(!1);return}if(h.stage==="awaiting_child_selection"&&h.childItems.length>0){const ve=ee.match(/(\d+)/);if(ve){const Ce=parseInt(ve[1])-1,ye=h.selectChildByIndex(Ce);if(ye.success){const dt=h.selectedType==="adset"?"nhm qung co":"qung co";T("assistant",`  chn ${dt}: **${ye.item.name}**

 Bn mun t tn mi cho ${dt} nhn bn l g?`)}else T("assistant"," S th t khng hp l. Vui lng th li.")}else T("assistant"," Vui lng nhp s th t (VD: `1`, `2`)");o(!1);return}if(h.stage==="awaiting_name"){const ve=ee.trim();if(ve.length===0){T("assistant"," Tn khng c  trng. Vui lng nhp li:"),o(!1);return}if(ve.length>100){T("assistant"," Tn qu di (ti a 100 k t). Vui lng nhp li:"),o(!1);return}h.setNewName(ve),h.proceedToAwaitingQuantity();const Ce=h.selectedType==="campaign"?"chin dch":h.selectedType==="adset"?"nhm qung co":"qung co";T("assistant",` Tn mi: **${ve}**

 Bn mun nhn bn bao nhiu ${Ce}? (Nhp s t 1-50)`),o(!1);return}if(h.stage==="awaiting_quantity"){const ve=ee.match(/(\d+)/);if(!ve){T("assistant"," Vui lng nhp s lng (VD: 3, 5, 10):"),o(!1);return}const Ce=parseInt(ve[1]);if(Ce<1||Ce>50){T("assistant"," S lng phi t 1 n 50. Vui lng nhp li:"),o(!1);return}h.setQuantities({campaigns:h.selectedType==="campaign"?Ce:1,adsets:h.selectedType==="adset"?Ce:1,ads:h.selectedType==="ad"?Ce:1}),h.proceedToConfirming(),o(!1);return}if(N){T("assistant"," ang ti cu hnh t NocoDB, vui lng i mt cht ri th li nh..."),o(!1);return}if(/https?:\/\/(?:www\.)?(?:m\.)?(?:business\.)?(?:l\.)?(?:lm\.)?(?:facebook\.com|fb\.com|fb\.watch)\/(?:(?:share\/[pv]\/)|(?:watch\/\?v=)|(?:story\.php)|(?:permalink\.php)|(?:photo\.php)|(?:posts\/)|(?:videos\/)|(?:reel\/)|(?:.*?(?:pfbid|fbid)=))[^\s)]+/i.test(ee)&&m.stage==="idle"){if(!p.canUseQuickPost){T("assistant",` Tnh nng "Quick Post" cha c kch hot cho ti khon ca anh.

Vui lng lin h qun tr vin  c h tr kch hot tnh nng ny.`),o(!1);return}const ve=$();try{T("assistant",`Em ang x l bi vit, anh i x l .

 Vui lng i 5-10 giy...`);const{message:Ce,stage:ye}=await m.start(ee,ve);Ce!=="__SHOW_CONFIRM_CARD__"&&a(dt=>[...dt.filter(tn=>!tn.content.includes(" **ang x l")),{role:"assistant",content:Ce}])}catch(Ce){a(ye=>[...ye.filter(pt=>!pt.content.includes(" **ang x l")),{role:"assistant",content:` **Li x l bi vit:**

${Ce instanceof Error?Ce.message:"Li khng xc nh"}

**Vui lng kim tra:**
 Link bi vit c cng khai khng?
 Tokens Facebook cn hp l khng?
 NocoDB API c hot ng khng?`}])}finally{o(!1)}return}const rn=!!re,yn=ee.trim().length>0;if(rn&&yn){if(!p.canUseCreativeCampaign){T("assistant",` Tnh nng "Creative Campaign" cha c kch hot cho ti khon ca anh.

Vui lng lin h qun tr vin  c h tr kch hot tnh nng ny.`),F(),o(!1);return}T("assistant"," ang pht hin  nh...");const ve=await IF(ee,r);if(console.log("[TRACE_QUICK_POST] Intent detected:",ve),ve.intent!=="create_creative_campaign"){a(xn=>xn.filter(on=>!on.content.includes(" ang pht hin"))),T("assistant",` Em khng hiu r  nh. Anh c mun to chin dch qung co khng?

Vui lng m t r hn nh!`),o(!1);return}a(xn=>xn.filter(on=>!on.content.includes(" ang pht hin"))),T("assistant","  pht hin! ang kim tra media...");const Ce=ut(re);if(!Ce.valid){a(xn=>xn.filter(on=>!on.content.includes("ang kim tra media"))),T("assistant",Ce.error),F(),o(!1);return}a(xn=>xn.filter(on=>!on.content.includes("ang kim tra media"))),T("assistant"," Media hp l! ang upload ln Facebook...");const{adsToken:ye,adAccountId:dt}=$(),pt=await u.uploadMedia(re,dt,ye);if(!pt.success){a(xn=>xn.filter(on=>!on.content.includes("ang upload"))),T("assistant",` Upload tht bi: ${pt.message}`),F(),o(!1);return}a(xn=>xn.filter(on=>!on.content.includes("ang upload"))),pt.videoId?T("assistant"," Upload video thnh cng! ang phn tch thng tin chin dch..."):(T("assistant"," Upload nh thnh cng! ang phn tch thng tin chin dch..."),F());const tn=await u.start(ee,ye,!1);a(xn=>xn.filter(on=>!on.content.includes("ang phn tch"))),tn.success?tn.message!=="__SHOW_CREATIVE_CONFIRM_CARD__"&&T("assistant",tn.message):(T("assistant",` ${tn.message}`),pt.videoId&&F()),o(!1);return}if(rn&&!yn){T("assistant",` Em  nhn c media ri ! Anh vui lng cung cp thng tin chin dch:

1. Tn chin dch
2.  tui (VD: 20-40)
3. Gii tnh (Nam/N/Tt c)
4. Ngn sch hng ngy (VD: 400k)
5. V tr (ta  + bn knh)
6. S thch
7. Ni dung content
8. Tiu 
9. Mu cho hi (ty chn)`),o(!1);return}const dn=await IF(ee,r);if(dn.intent==="create_quick_campaign"&&m.stage==="idle"){if(!p.canUseQuickPost){T("assistant",` Tnh nng "Quick Post" cha c kch hot cho ti khon ca anh.

Vui lng lin h qun tr vin  c h tr kch hot tnh nng ny.`),o(!1);return}const ve=$();try{T("assistant",`Em ang x l bi vit, anh i x l .

 Vui lng i 5-10 giy...`);const{message:Ce}=await m.start(ee,ve);Ce!=="__SHOW_CONFIRM_CARD__"&&a(ye=>[...ye.filter(pt=>!pt.content.includes(" **ang x l")),{role:"assistant",content:Ce}])}catch(Ce){a(ye=>[...ye.filter(pt=>!pt.content.includes(" **ang x l")),{role:"assistant",content:` **Li x l bi vit:**

${Ce instanceof Error?Ce.message:"Li khng xc nh"}

**Vui lng kim tra:**
 Link bi vit c cng khai khng?
 Tokens Facebook cn hp l khng?
 NocoDB API c hot ng khng?`}])}finally{o(!1)}return}if(dn.intent==="create_creative_campaign"&&u.stage==="idle"){if(!p.canUseCreativeCampaign){T("assistant",` Tnh nng "Creative Campaign" cha c kch hot cho ti khon ca anh.

Vui lng lin h qun tr vin  c h tr kch hot tnh nng ny.`),o(!1);return}const{adsToken:ve}=$(),Ce=await u.start(ee,ve);T("assistant",Ce.message),o(!1);return}if(dn.intent==="create_audience"&&d.stage==="idle"){if(!p.canUseAudienceCreator){T("assistant",` Tnh nng "Audience Creator" cha c kch hot cho ti khon ca anh.

Vui lng lin h qun tr vin  c h tr kch hot tnh nng ny.`),o(!1);return}d.start(),T("assistant"," Anh mun to loi i tng no?"),o(!1);return}if(dn.intent==="clone_campaign"&&h.stage==="idle"){if(!p.canUseCloneTool){T("assistant",` Tnh nng "Clone Tool" cha c kch hot cho ti khon ca anh.

Vui lng lin h qun tr vin  c h tr kch hot tnh nng ny.`),o(!1);return}h.start(),o(!1);return}if(!(w!=null&&w.adAccountId)){T("assistant"," Vui lng chn **Ti khon qung co** trong phn Ci t (Settings)  bt u chat."),o(!1);return}let Tt="";await u_e({messages:[...r,{role:"user",content:ee}],accountId:w==null?void 0:w.adAccountId,userName:C,onDelta:ve=>{Tt+=ve,a(Ce=>{const ye=Ce[Ce.length-1];return(ye==null?void 0:ye.role)==="assistant"&&!ye.content.startsWith("")?[...Ce.slice(0,-1),{role:"assistant",content:Tt}]:[...Ce,{role:"assistant",content:Tt}]})},onDone:()=>{o(!1)},onError:ve=>{T("assistant",` Li: ${ve}`),o(!1)}})}catch(ut){console.error("[handleSend] Error:",ut),T("assistant",` Li: ${ut.message}`),o(!1)}},B=g.useCallback(()=>{c.current=!0,l.current&&(l.current.abort(),l.current=null),u.reset(),d.reset(),h.reset(),m.reset(),a([]),n(""),x(null),o(!1),setTimeout(()=>{c.current=!1},100),_({title:"  xa",description:"Cuc tr chuyn  c xa"})},[u,d,h,m,_]),G=()=>{var ee;(ee=b.current)==null||ee.click()},U=ee=>{var Z;const re=(Z=ee.target.files)==null?void 0:Z[0];re&&(x(re),_({title:"  nh km",description:re.name})),ee.target.value=""},F=()=>{x(null),_({title:"  xa",description:"File nh km  c xa"})},K=u.isActive||d.isActive||h.isActive||m.stage!=="idle";return s.jsxs("div",{className:je("flex flex-col bg-card border border-border rounded-xl shadow-sm h-full",e?"w-full":"max-w-2xl mx-auto"),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-gradient-to-r from-primary/5 to-primary/10 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(Zr,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-foreground",children:"AI Assistant"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:K?" ang x l...":"Sn sng h tr"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[K&&s.jsxs(J,{variant:"ghost",size:"sm",onClick:L,className:"h-8 px-3",children:[s.jsx(Cs,{className:"h-4 w-4 mr-1"}),"Hy"]}),s.jsxs(J,{variant:"ghost",size:"sm",onClick:B,className:"h-8 px-3",children:[s.jsx(Kz,{className:"h-4 w-4 mr-1"}),"Xa"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.length===0&&s.jsx("div",{className:"flex items-center justify-center h-full min-h-[200px]",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"p-4 rounded-full bg-primary/10 inline-block",children:s.jsx(Zr,{className:"h-8 w-8 text-primary"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg text-foreground",children:["Xin cho ",C||"bn","! "]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Em c th gip anh to chin dch, i tng, hoc tr li cu hi v qung co"})]})]})}),r.map((ee,re)=>ee.content==="__SHOW_CREATIVE_CONFIRM_CARD__"||ee.content==="__SHOW_CONFIRM_CARD__"||ee.content==="__SHOW_THUMBNAIL_OPTIONS__"?null:s.jsxs("div",{className:je("flex gap-3 animate-in fade-in-50 slide-in-from-bottom-2",ee.role==="user"?"justify-end":"justify-start"),children:[ee.role==="assistant"&&s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx("div",{className:je("px-4 py-2 rounded-lg max-w-[80%]",ee.role==="user"?"bg-primary text-primary-foreground":"bg-muted text-foreground"),children:ee.role==="user"?s.jsx(O,{content:ee.content}):s.jsx("div",{className:"whitespace-pre-wrap",children:ee.content})})]},re)),m.stage==="confirming"&&s.jsxs("div",{className:"flex gap-3 animate-in fade-in-50 slide-in-from-bottom-2 justify-start",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx("div",{className:"w-full max-w-lg",children:s.jsx(z_e,{data:m.data,onConfirm:async()=>{o(!0);try{const ee=$(),re=await m.confirmAndCreate(ee);re&&T("assistant",` To thnh cng!

 Campaign ID: ${re.campaignId}
 Ad Set ID: ${re.adSetId}
 Ad ID: ${re.adId}

Kim tra trong Facebook Ads Manager nh!`)}catch(ee){T("assistant",` Li: ${ee instanceof Error?ee.message:"Khng xc nh"}`)}finally{o(!1)}},onCancel:()=>{m.reset(),T("assistant","  hy. Anh c th th li vi chin dch khc nh!")},isLoading:i})})]}),u.stage==="reviewing_data"&&s.jsxs("div",{className:"flex gap-3 animate-in fade-in-50 slide-in-from-bottom-2 justify-start",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx("div",{className:"w-full max-w-lg",children:s.jsx(H_e,{parsedData:u.partialData,userMessage:(X=r.find(ee=>ee.role==="user"))==null?void 0:X.content,uploadedHash:u.uploadedHash,uploadedVideoId:u.uploadedVideoId,onContinue:async()=>{if(u.uploadedHash||u.uploadedVideoId){o(!0);try{const{adsToken:ee,pageToken:re,adAccountId:Z,pageId:ce}=$();T("assistant"," ang to campaign...");const ae=await u.confirmAndCreate(j.id,ee,re,Z,ce);ae.success&&ae.ids?T("assistant",` To thnh cng!

 Campaign ID: ${ae.ids.campaignId}
 Ad Set ID: ${ae.ids.adSetId}
 Ad ID: ${ae.ids.adId}

Kim tra trong Facebook Ads Manager nh!`):T("assistant",ae.message)}catch(ee){T("assistant",` Li: ${ee instanceof Error?ee.message:"Khng xc nh"}`)}finally{o(!1)}}else u.continueToUpload(),F(),T("assistant"," Tuyt vi! Gi hy ti nh hoc video ln nh!")},onCancel:()=>{u.reset(),F(),T("assistant","  hy. Anh c th th li vi chin dch khc nh!")}})})]}),h.stage==="awaiting_confirmation"&&s.jsxs("div",{className:"flex gap-3 animate-in fade-in-50 slide-in-from-bottom-2 justify-start",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx(aje,{onConfirm:()=>{h.confirmIntent(),T("assistant",` c ri ! Anh mun:

1 **Hin th danh sch** chin dch
2 **Tm kim** bng tn chin dch

 Anh chn cch no nh?`)},onCancel:()=>{h.reset(),T("assistant","  hy. Em sn sng h tr anh nh!")}})]}),h.stage==="awaiting_list_choice"&&s.jsxs("div",{className:"flex gap-3 animate-in fade-in-50 slide-in-from-bottom-2 justify-start",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx(rje,{onChooseList:async()=>{h.chooseListOption(),o(!0);try{const{adsToken:ee,adAccountId:re}=$(),Z=await h.fetchCampaignsForListing(j.id,re,ee);Z.success&&Z.items&&Z.items.length>0?T("assistant"," Vui lng chn chin dch t danh sch bn di:"):(T("assistant"," Khng tm thy chin dch no."),h.reset())}catch(ee){T("assistant",` Li: ${ee instanceof Error?ee.message:"Khng xc nh"}`),h.reset()}finally{o(!1)}},onChooseSearch:()=>{h.chooseSearchOption(),T("assistant"," Vui lng nhp tn chin dch hoc t kha  tm kim:")},onCancel:()=>{h.reset(),T("assistant","  hy.")}})]}),h.stage==="awaiting_campaign_selection"&&h.effectiveItems.length>0&&s.jsxs("div",{className:"flex gap-3 animate-in fade-in-50 slide-in-from-bottom-2 justify-start",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx("div",{className:"w-full max-w-lg",children:s.jsx(nje,{campaigns:h.effectiveItems,onSelect:(ee,re)=>{h.selectCampaignByIndex(re).success&&T("assistant",z(ee))},onCancel:()=>{h.reset(),T("assistant","  hy.")}})})]}),h.stage==="selecting_type"&&h.selectedItem&&s.jsxs("div",{className:"flex gap-3 animate-in fade-in-50 slide-in-from-bottom-2 justify-start",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx(sje,{onSelect:async ee=>{if(h.selectType(ee),ee==="campaign")h.proceedToAwaitingName(),T("assistant",`  chn nhn bn **chin dch**

 Bn mun t tn mi cho chin dch l g?`);else{o(!0);try{const{adsToken:re,adAccountId:Z}=$(),ce=await h.fetchChildItems(Z,re);if(ce.success&&ce.items)if(ce.items.length===1){const ae=ee==="adset"?"nhm qung co":"qung co";T("assistant",` Tm thy 1 ${ae}: **${ce.items[0].name}**

 **Tn mi:** Nhp tn cho ${ae} mi
 **S lng:** Nhp s lng cn nhn bn`)}else{const ae=ee==="adset"?"nhm qung co":"qung co",Ue=ce.items.map((Ve,ut)=>`${ut+1}. **${Ve.name}** (${Ve.status})`).join(`
`);T("assistant",` **Danh sch ${ae}** (${ce.items.length} ${ae}):

${Ue}

 **Chn ${ae}:** Nhp s th t`)}else T("assistant",` Khng tm thy ${ee==="adset"?"nhm qung co":"qung co"} no.`),h.reset()}catch(re){T("assistant",` Li: ${re instanceof Error?re.message:"Khng xc nh"}`),h.reset()}finally{o(!1)}}},onCancel:()=>{h.reset(),T("assistant","  hy.")}})]}),h.stage==="confirming"&&h.selectedItem&&s.jsxs("div",{className:"flex gap-3 animate-in fade-in-50 slide-in-from-bottom-2 justify-start",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx("div",{className:"w-full max-w-lg",children:s.jsx(tje,{selectedItem:h.selectedItem,cloneType:h.selectedType,suggestedName:h.newName||Gy(h.selectedItem.name),quantities:h.quantities||{campaigns:1,adsets:1,ads:1},onChangeQuantities:ee=>h.setQuantities(ee),statusOption:h.statusOption||"PAUSED",onChangeStatus:ee=>h.setStatusOption(ee),onConfirm:async()=>{o(!0);const{adsToken:ee,adAccountId:re}=$();T("assistant"," ang nhn bn...");const Z=await h.confirmAndClone(re,ee);a(ce=>ce.filter(ae=>!ae.content.includes(" ang nhn bn"))),Z.success?T("assistant",Z.message):T("assistant",` ${Z.message}`),o(!1)},onCancel:()=>{h.reset(),T("assistant","  hy.")},isLoading:i})})]}),i&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 h-fit",children:s.jsx(Zr,{className:"h-4 w-4 text-primary"})}),s.jsx("div",{className:"px-4 py-2 rounded-lg bg-muted",children:s.jsx(zt,{className:"h-4 w-4 animate-spin"})})]}),d.stage==="selecting_type"&&s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(J,{size:"sm",variant:"outline",onClick:()=>{d.selectType("phone_numbers"),T("assistant"," Vui lng cung cp tn i tng:")},className:"w-full justify-start",children:" Danh sch s in thoi"}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>{d.selectType("page_messenger"),T("assistant"," Vui lng cung cp tn i tng:")},className:"w-full justify-start",children:" Messenger Page"}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>{d.selectType("lookalike"),T("assistant"," Vui lng cung cp tn i tng:")},className:"w-full justify-start",children:" Lookalike Audience"})]})}),d.stage==="collecting_messenger_page"&&((se=d.data)==null?void 0:se.availablePages)&&s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ge,{htmlFor:"page-select",children:"Chn Page"}),s.jsxs(kn,{onValueChange:ee=>{var Z;const re=(Z=d.data.availablePages)==null?void 0:Z.find(ce=>ce.page_id===ee);re&&(d.setData({pageId:re.page_id,pageName:re.page_name}),d.setStage("collecting_messenger_days"),T("assistant",` Vui lng nhp s ngy lu tr (1-365 ngy):

 V d: nhp "30"  ly ngi nhn tin trong 30 ngy qua`))},children:[s.jsx(wn,{id:"page-select",className:"bg-background",children:s.jsx(Cn,{placeholder:"Chn Page..."})}),s.jsx(_n,{className:"bg-background z-50",children:d.data.availablePages.map(ee=>s.jsxs(st,{value:ee.page_id,children:[" ",ee.page_name]},ee.page_id))})]})]})}),d.stage==="collecting_messenger_days"&&((D=d.data)==null?void 0:D.audienceName)&&((Y=d.data)==null?void 0:Y.pageId)&&((ue=d.data)==null?void 0:ue.retentionDays)&&s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{size:"sm",onClick:async()=>{o(!0);const{adsToken:ee,adAccountId:re}=$();T("assistant"," ang to i tng Messenger...");const Z=await d.createAudience(re,ee);Z.success?T("assistant",` ${Z.message}`):T("assistant",` ${Z.error||Z.message}`),d.reset(),o(!1)},disabled:i,children:" Xc nhn to"}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>{d.reset(),T("assistant","  hy to i tng")},disabled:i,children:" Hy"})]})}),d.stage==="collecting_lookalike"&&((xe=d.data)==null?void 0:xe.availableAudiences)&&s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ge,{htmlFor:"source-audience",children:"Chn i tng ngun"}),s.jsxs(kn,{onValueChange:async ee=>{var Ue;o(!0);const re=(Ue=d.data.availableAudiences)==null?void 0:Ue.find(Ve=>Ve.id===ee);if(!re)return;const Z={sourceId:re.id,sourceName:re.name,availableAudiences:void 0};d.setData(Z);const ce={...d.data,...Z},ae=Hw("lookalike",ce);ae.needsMoreInfo?(ae.missingField==="country"&&d.setData({showCountryButtons:!0}),T("assistant",ae.missingFieldPrompt)):(T("assistant",`   thng tin!

 Tn: ${ce.audienceName}
 Ngun: ${ce.sourceName}
 Quc gia: ${ce.countryName}
 T l: ${ce.ratio}%

Anh xc nhn to khng?`),d.setData({showConfirmButtons:!0})),o(!1)},children:[s.jsx(wn,{id:"source-audience",className:"bg-background",children:s.jsx(Cn,{placeholder:"Chn i tng ngun..."})}),s.jsx(_n,{className:"bg-background z-50",children:d.data.availableAudiences.map(ee=>s.jsxs(st,{value:ee.id,children:[" ",ee.name]},ee.id))})]})]})}),d.stage==="collecting_lookalike"&&((Ne=d.data)==null?void 0:Ne.showCountryButtons)&&s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(ge,{htmlFor:"country-select",children:"Chn quc gia"}),s.jsxs(kn,{onValueChange:async ee=>{o(!0);const Z=[{code:"VN",name:"Vit Nam",flag:""},{code:"US",name:"United States",flag:""},{code:"TH",name:"Thailand",flag:""},{code:"SG",name:"Singapore",flag:""},{code:"MY",name:"Malaysia",flag:""}].find(Ve=>Ve.code===ee);if(!Z)return;const ce={country:Z.code,countryName:`${Z.flag} ${Z.name}`,showCountryButtons:!1};d.setData(ce);const ae={...d.data,...ce},Ue=Hw("lookalike",ae);Ue.needsMoreInfo?T("assistant",Ue.missingFieldPrompt):(T("assistant",`   thng tin!

 Tn: ${ae.audienceName}
 Ngun: ${ae.sourceName}
 Quc gia: ${ae.countryName}
 T l: ${ae.ratio}%

Anh xc nhn to khng?`),d.setData({showConfirmButtons:!0})),o(!1)},children:[s.jsx(wn,{id:"country-select",className:"bg-background",children:s.jsx(Cn,{placeholder:"Chn quc gia..."})}),s.jsxs(_n,{className:"bg-background z-50",children:[s.jsx(st,{value:"VN",children:" Vit Nam"}),s.jsx(st,{value:"US",children:" United States"}),s.jsx(st,{value:"TH",children:" Thailand"}),s.jsx(st,{value:"SG",children:" Singapore"}),s.jsx(st,{value:"MY",children:" Malaysia"})]})]})]})}),d.stage==="collecting_lookalike"&&((oe=d.data)==null?void 0:oe.showConfirmButtons)&&s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{size:"sm",onClick:async()=>{o(!0);const{adsToken:ee,adAccountId:re}=$();T("assistant"," ang to Lookalike Audience...");const Z=await d.createAudience(re,ee);Z.success?T("assistant",` ${Z.message}`):T("assistant",` ${Z.error||Z.message}`),d.reset(),o(!1)},disabled:i,children:" Xc nhn to"}),s.jsx(J,{size:"sm",variant:"outline",onClick:()=>{d.reset(),T("assistant","  hy to i tng")},disabled:i,children:" Hy"})]})}),u.stage==="confirming"&&s.jsx("div",{className:"pb-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{size:"sm",disabled:i,onClick:async()=>{o(!0);const{adsToken:ee,pageToken:re,adAccountId:Z,pageId:ce}=$();T("assistant"," ang to campaign...");const ae=await u.confirmAndCreate(j.id,ee,re,Z,ce);ae.success&&ae.ids?T("assistant",` To thnh cng!

 Campaign ID: ${ae.ids.campaignId}
 Ad Set ID: ${ae.ids.adSetId}
 Ad ID: ${ae.ids.adId}

Kim tra trong Facebook Ads Manager nh!`):T("assistant",ae.message),o(!1)},children:" Xc nhn & To"}),s.jsx(J,{size:"sm",variant:"outline",onClick:L,disabled:i,children:" Hy"})]})}),s.jsx("div",{ref:k})]}),s.jsxs("div",{className:"p-4 border-t border-border bg-muted/30 flex-shrink-0",children:[v&&s.jsxs("div",{className:"mb-2 p-2 bg-card border border-border rounded-lg flex items-center gap-2",children:[s.jsx(Hp,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsx("span",{className:"text-sm text-muted-foreground truncate flex-1",children:P(v.name)}),s.jsx(J,{variant:"ghost",size:"sm",onClick:F,className:"h-6 w-6 p-0 flex-shrink-0",children:s.jsx(Cs,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",ref:b,onChange:U,accept:"image/*,video/*",className:"hidden"}),s.jsx(J,{variant:"outline",size:"icon",onClick:G,disabled:i,className:"shrink-0",children:s.jsx($ce,{className:"h-4 w-4"})}),s.jsx("textarea",{value:t,onChange:ee=>{n(ee.target.value),ee.target.style.height="auto",ee.target.style.height=Math.min(ee.target.scrollHeight,200)+"px"},onKeyDown:ee=>{ee.key==="Enter"&&!ee.shiftKey&&(ee.preventDefault(),W())},placeholder:K?"Nhp thng tin...":"Nhn tin vi AI Assistant...",disabled:i,rows:1,className:"flex-1 px-4 py-2 bg-card border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-foreground placeholder:text-muted-foreground resize-none overflow-y-auto min-h-[40px] max-h-[200px]"}),s.jsx(J,{onClick:W,disabled:!t.trim()&&!v||i,className:"shrink-0",children:i?s.jsx(zt,{className:"h-4 w-4 animate-spin"}):s.jsx(uT,{className:"h-4 w-4"})})]})]})]})},Oo=g.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:je("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Oo.displayName="Textarea";const oje={VND:25e3,USD:1,EUR:.92,GBP:.79,JPY:149,KRW:1320,THB:35,SGD:1.34,MYR:4.47,PHP:56,IDR:15700,INR:83,AUD:1.52,CAD:1.36};function lje(e){const t=oje[e]||1;return Math.ceil(t)}function QT(e){const t=e.toString().replace(/[^\d]/g,"");return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,","):""}function cje(e){return parseInt(e.replace(/[^\d]/g,""))||0}function na(e,t){const n=QT(e),a={VND:"",USD:"$",EUR:"",GBP:"",JPY:"",KRW:"",THB:""}[t]||t;return t==="VND"||t==="KRW"||t==="JPY"?`${n} ${a}`:`${a}${n}`}function UF(e,t){return["VND","JPY","KRW","IDR","CLP","TWD"].includes(t)?e:e*100}const po={IMAGE_MAX_SIZE:10*1024*1024,VIDEO_MAX_SIZE:100*1024*1024,IMAGE_FORMATS:["image/jpeg","image/png","image/jpg"],VIDEO_FORMATS:["video/mp4","video/quicktime","video/x-msvideo"]};var VF=1,uje=.9,dje=.8,hje=.17,yA=.1,xA=.999,fje=.9999,mje=.99,pje=/[\\\/_+.#"@\[\(\{&]/,gje=/[\\\/_+.#"@\[\(\{&]/g,vje=/[\s-]/,zK=/[\s-]/g;function XT(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?VF:mje;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(i),u=n.indexOf(c,a),d=0,h,m,p,v;u>=0;)h=XT(e,t,n,r,u+1,i+1,o),h>d&&(u===a?h*=VF:pje.test(e.charAt(u-1))?(h*=dje,p=e.slice(a,u-1).match(gje),p&&a>0&&(h*=Math.pow(xA,p.length))):vje.test(e.charAt(u-1))?(h*=uje,v=e.slice(a,u-1).match(zK),v&&a>0&&(h*=Math.pow(xA,v.length))):(h*=hje,a>0&&(h*=Math.pow(xA,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=fje)),(h<yA&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(m=XT(e,t,n,r,u+1,i+2,o),m*yA>h&&(h=m*yA)),h>d&&(d=h),u=n.indexOf(c,u+1);return o[l]=d,d}function zF(e){return e.toLowerCase().replace(zK," ")}function yje(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,XT(e,t,zF(e),zF(t),0,0,{})}var hy='[cmdk-group=""]',bA='[cmdk-group-items=""]',xje='[cmdk-group-heading=""]',HK='[cmdk-item=""]',HF=`${HK}:not([aria-disabled="true"])`,JT="cmdk-item-select",zm="data-value",bje=(e,t,n)=>yje(e,t,n),WK=g.createContext(void 0),ab=()=>g.useContext(WK),qK=g.createContext(void 0),sR=()=>g.useContext(qK),KK=g.createContext(void 0),GK=g.forwardRef((e,t)=>{let n=Hm(()=>{var D,Y;return{search:"",value:(Y=(D=e.value)!=null?D:e.defaultValue)!=null?Y:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Hm(()=>new Set),a=Hm(()=>new Map),i=Hm(()=>new Map),o=Hm(()=>new Set),l=YK(e),{label:c,children:u,value:d,onValueChange:h,filter:m,shouldFilter:p,loop:v,disablePointerSelection:x=!1,vimBindings:b=!0,..._}=e,j=Fa(),w=Fa(),N=Fa(),k=g.useRef(null),C=Pje();Cf(()=>{if(d!==void 0){let D=d.trim();n.current.value=D,A.emit()}},[d]),Cf(()=>{C(6,z)},[]);let A=g.useMemo(()=>({subscribe:D=>(o.current.add(D),()=>o.current.delete(D)),snapshot:()=>n.current,setState:(D,Y,ue)=>{var xe,Ne,oe,ee;if(!Object.is(n.current[D],Y)){if(n.current[D]=Y,D==="search")L(),T(),C(1,$);else if(D==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let re=document.getElementById(N);re?re.focus():(xe=document.getElementById(j))==null||xe.focus()}if(C(7,()=>{var re;n.current.selectedItemId=(re=W())==null?void 0:re.id,A.emit()}),ue||C(5,z),((Ne=l.current)==null?void 0:Ne.value)!==void 0){let re=Y??"";(ee=(oe=l.current).onValueChange)==null||ee.call(oe,re);return}}A.emit()}},emit:()=>{o.current.forEach(D=>D())}}),[]),P=g.useMemo(()=>({value:(D,Y,ue)=>{var xe;Y!==((xe=i.current.get(D))==null?void 0:xe.value)&&(i.current.set(D,{value:Y,keywords:ue}),n.current.filtered.items.set(D,O(Y,ue)),C(2,()=>{T(),A.emit()}))},item:(D,Y)=>(r.current.add(D),Y&&(a.current.has(Y)?a.current.get(Y).add(D):a.current.set(Y,new Set([D]))),C(3,()=>{L(),T(),n.current.value||$(),A.emit()}),()=>{i.current.delete(D),r.current.delete(D),n.current.filtered.items.delete(D);let ue=W();C(4,()=>{L(),(ue==null?void 0:ue.getAttribute("id"))===D&&$(),A.emit()})}),group:D=>(a.current.has(D)||a.current.set(D,new Set),()=>{i.current.delete(D),a.current.delete(D)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:j,inputId:N,labelId:w,listInnerRef:k}),[]);function O(D,Y){var ue,xe;let Ne=(xe=(ue=l.current)==null?void 0:ue.filter)!=null?xe:bje;return D?Ne(D,n.current.search,Y):0}function T(){if(!n.current.search||l.current.shouldFilter===!1)return;let D=n.current.filtered.items,Y=[];n.current.filtered.groups.forEach(xe=>{let Ne=a.current.get(xe),oe=0;Ne.forEach(ee=>{let re=D.get(ee);oe=Math.max(re,oe)}),Y.push([xe,oe])});let ue=k.current;B().sort((xe,Ne)=>{var oe,ee;let re=xe.getAttribute("id"),Z=Ne.getAttribute("id");return((oe=D.get(Z))!=null?oe:0)-((ee=D.get(re))!=null?ee:0)}).forEach(xe=>{let Ne=xe.closest(bA);Ne?Ne.appendChild(xe.parentElement===Ne?xe:xe.closest(`${bA} > *`)):ue.appendChild(xe.parentElement===ue?xe:xe.closest(`${bA} > *`))}),Y.sort((xe,Ne)=>Ne[1]-xe[1]).forEach(xe=>{var Ne;let oe=(Ne=k.current)==null?void 0:Ne.querySelector(`${hy}[${zm}="${encodeURIComponent(xe[0])}"]`);oe==null||oe.parentElement.appendChild(oe)})}function $(){let D=B().find(ue=>ue.getAttribute("aria-disabled")!=="true"),Y=D==null?void 0:D.getAttribute(zm);A.setState("value",Y||void 0)}function L(){var D,Y,ue,xe;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Ne=0;for(let oe of r.current){let ee=(Y=(D=i.current.get(oe))==null?void 0:D.value)!=null?Y:"",re=(xe=(ue=i.current.get(oe))==null?void 0:ue.keywords)!=null?xe:[],Z=O(ee,re);n.current.filtered.items.set(oe,Z),Z>0&&Ne++}for(let[oe,ee]of a.current)for(let re of ee)if(n.current.filtered.items.get(re)>0){n.current.filtered.groups.add(oe);break}n.current.filtered.count=Ne}function z(){var D,Y,ue;let xe=W();xe&&(((D=xe.parentElement)==null?void 0:D.firstChild)===xe&&((ue=(Y=xe.closest(hy))==null?void 0:Y.querySelector(xje))==null||ue.scrollIntoView({block:"nearest"})),xe.scrollIntoView({block:"nearest"}))}function W(){var D;return(D=k.current)==null?void 0:D.querySelector(`${HK}[aria-selected="true"]`)}function B(){var D;return Array.from(((D=k.current)==null?void 0:D.querySelectorAll(HF))||[])}function G(D){let Y=B()[D];Y&&A.setState("value",Y.getAttribute(zm))}function U(D){var Y;let ue=W(),xe=B(),Ne=xe.findIndex(ee=>ee===ue),oe=xe[Ne+D];(Y=l.current)!=null&&Y.loop&&(oe=Ne+D<0?xe[xe.length-1]:Ne+D===xe.length?xe[0]:xe[Ne+D]),oe&&A.setState("value",oe.getAttribute(zm))}function F(D){let Y=W(),ue=Y==null?void 0:Y.closest(hy),xe;for(;ue&&!xe;)ue=D>0?Eje(ue,hy):Tje(ue,hy),xe=ue==null?void 0:ue.querySelector(HF);xe?A.setState("value",xe.getAttribute(zm)):U(D)}let K=()=>G(B().length-1),X=D=>{D.preventDefault(),D.metaKey?K():D.altKey?F(1):U(1)},se=D=>{D.preventDefault(),D.metaKey?G(0):D.altKey?F(-1):U(-1)};return g.createElement(it.div,{ref:t,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:D=>{var Y;(Y=_.onKeyDown)==null||Y.call(_,D);let ue=D.nativeEvent.isComposing||D.keyCode===229;if(!(D.defaultPrevented||ue))switch(D.key){case"n":case"j":{b&&D.ctrlKey&&X(D);break}case"ArrowDown":{X(D);break}case"p":case"k":{b&&D.ctrlKey&&se(D);break}case"ArrowUp":{se(D);break}case"Home":{D.preventDefault(),G(0);break}case"End":{D.preventDefault(),K();break}case"Enter":{D.preventDefault();let xe=W();if(xe){let Ne=new Event(JT);xe.dispatchEvent(Ne)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:Ije},c),zS(e,D=>g.createElement(qK.Provider,{value:A},g.createElement(WK.Provider,{value:P},D))))}),wje=g.forwardRef((e,t)=>{var n,r;let a=Fa(),i=g.useRef(null),o=g.useContext(KK),l=ab(),c=YK(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Cf(()=>{if(!u)return l.item(a,o==null?void 0:o.id)},[u]);let d=QK(a,i,[e.value,e.children,i],e.keywords),h=sR(),m=Rd(C=>C.value&&C.value===d.current),p=Rd(C=>u||l.filter()===!1?!0:C.search?C.filtered.items.get(a)>0:!0);g.useEffect(()=>{let C=i.current;if(!(!C||e.disabled))return C.addEventListener(JT,v),()=>C.removeEventListener(JT,v)},[p,e.onSelect,e.disabled]);function v(){var C,A;x(),(A=(C=c.current).onSelect)==null||A.call(C,d.current)}function x(){h.setState("value",d.current,!0)}if(!p)return null;let{disabled:b,value:_,onSelect:j,forceMount:w,keywords:N,...k}=e;return g.createElement(it.div,{ref:Zc(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!m,"data-disabled":!!b,"data-selected":!!m,onPointerMove:b||l.getDisablePointerSelection()?void 0:x,onClick:b?void 0:v},e.children)}),_je=g.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=Fa(),l=g.useRef(null),c=g.useRef(null),u=Fa(),d=ab(),h=Rd(p=>a||d.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);Cf(()=>d.group(o),[]),QK(o,l,[e.value,e.heading,c]);let m=g.useMemo(()=>({id:o,forceMount:a}),[a]);return g.createElement(it.div,{ref:Zc(l,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),zS(e,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},g.createElement(KK.Provider,{value:m},p))))}),jje=g.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=g.useRef(null),i=Rd(o=>!o.search);return!n&&!i?null:g.createElement(it.div,{ref:Zc(a,t),...r,"cmdk-separator":"",role:"separator"})}),Sje=g.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=sR(),o=Rd(u=>u.search),l=Rd(u=>u.selectedItemId),c=ab();return g.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),g.createElement(it.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),Nje=g.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=g.useRef(null),o=g.useRef(null),l=Rd(u=>u.selectedItemId),c=ab();return g.useEffect(()=>{if(o.current&&i.current){let u=o.current,d=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let p=u.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(h),m.unobserve(u)}}},[]),g.createElement(it.div,{ref:Zc(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},zS(e,u=>g.createElement("div",{ref:Zc(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),kje=g.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...l}=e;return g.createElement(AS,{open:n,onOpenChange:r},g.createElement(ES,{container:o},g.createElement(Gg,{"cmdk-overlay":"",className:a}),g.createElement(Yg,{"aria-label":e.label,"cmdk-dialog":"",className:i},g.createElement(GK,{ref:t,...l}))))}),Cje=g.forwardRef((e,t)=>Rd(n=>n.filtered.count===0)?g.createElement(it.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Aje=g.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return g.createElement(it.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},zS(e,o=>g.createElement("div",{"aria-hidden":!0},o)))}),Ni=Object.assign(GK,{List:Nje,Item:wje,Input:Sje,Group:_je,Separator:jje,Dialog:kje,Empty:Cje,Loading:Aje});function Eje(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Tje(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function YK(e){let t=g.useRef(e);return Cf(()=>{t.current=e}),t}var Cf=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Hm(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function Rd(e){let t=sR(),n=()=>e(t.snapshot());return g.useSyncExternalStore(t.subscribe,n,n)}function QK(e,t,n,r=[]){let a=g.useRef(),i=ab();return Cf(()=>{var o;let l=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),c=r.map(u=>u.trim());i.value(e,l,c),(o=t.current)==null||o.setAttribute(zm,l),a.current=l}),a}var Pje=()=>{let[e,t]=g.useState(),n=Hm(()=>new Map);return Cf(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Oje(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function zS({asChild:e,children:t},n){return e&&g.isValidElement(t)?g.cloneElement(Oje(t),{ref:t.ref},n(t.props.children)):n(t)}var Ije={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const iR=g.forwardRef(({className:e,...t},n)=>s.jsx(Ni,{ref:n,className:je("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));iR.displayName=Ni.displayName;const oR=g.forwardRef(({className:e,...t},n)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(L0,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(Ni.Input,{ref:n,className:je("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));oR.displayName=Ni.Input.displayName;const lR=g.forwardRef(({className:e,...t},n)=>s.jsx(Ni.List,{ref:n,className:je("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));lR.displayName=Ni.List.displayName;const cR=g.forwardRef((e,t)=>s.jsx(Ni.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));cR.displayName=Ni.Empty.displayName;const uR=g.forwardRef(({className:e,...t},n)=>s.jsx(Ni.Group,{ref:n,className:je("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));uR.displayName=Ni.Group.displayName;const Rje=g.forwardRef(({className:e,...t},n)=>s.jsx(Ni.Separator,{ref:n,className:je("-mx-1 h-px bg-border",e),...t}));Rje.displayName=Ni.Separator.displayName;const dR=g.forwardRef(({className:e,...t},n)=>s.jsx(Ni.Item,{ref:n,className:je("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));dR.displayName=Ni.Item.displayName;const hR=({accessToken:e,adAccountId:t,selectedLocations:n,onLocationChange:r})=>{const[a,i]=g.useState(""),[o,l]=g.useState([]),[c,u]=g.useState(!1),[d,h]=g.useState(!1),m=g.useRef(null),[p,v]=g.useState(""),[x,b]=g.useState("1"),_=async T=>{if(!(!T.trim()||T.length<2)){u(!0);try{const[$,L]=await Promise.all([fetch(`https://graph.facebook.com/v21.0/search?type=adgeolocation&q=${encodeURIComponent(T)}&access_token=${e}&location_types=["country"]`),fetch(`https://graph.facebook.com/v21.0/search?type=adgeolocation&q=${encodeURIComponent(T)}&access_token=${e}&location_types=["region","city"]`)]);if($.ok&&L.ok){const z=await $.json(),W=await L.json(),B=z.data||[],G=W.data||[],U=T.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),F=xe=>{var ee;const Ne=xe.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),oe=((ee=xe.country_code)==null?void 0:ee.toLowerCase())||"";return!!(Ne===U||oe===U||Ne.includes(U))},K=B.sort((xe,Ne)=>{const oe=F(xe),ee=F(Ne);return oe&&!ee?-1:!oe&&ee?1:0}),X={region:0,city:1},se=G.sort((xe,Ne)=>(X[xe.type]||999)-(X[Ne.type]||999)),D=K.slice(0,10),Y=se.filter(xe=>xe.type==="region").slice(0,5),ue=se.filter(xe=>xe.type==="city").slice(0,10);l([...D,...Y,...ue])}}catch($){console.error("Failed to search locations:",$)}finally{u(!1)}}};g.useEffect(()=>{const T=setTimeout(()=>{a&&a.trim().length>=2?(_(a.trim()),h(!0)):(l([]),h(!1))},1e3);return()=>clearTimeout(T)},[a]),g.useEffect(()=>{const T=$=>{m.current&&!m.current.contains($.target)&&h(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const[j,w]=g.useState(null),[N,k]=g.useState("17"),C=T=>{if(T.type==="city"&&T.supports_radius){const $={key:T.key,name:T.name,type:T.type,country_code:T.country_code,region_id:T.region_id,radius:17,distance_unit:"kilometer",supports_radius:!0};r([...n,$]),w(T.key),k("17")}else{const $={key:T.key,name:T.name,type:T.type,country_code:T.country_code,region_id:T.region_id};r([...n,$])}h(!1),i(""),l([])},A=()=>{const T=p.split(",").map(B=>B.trim());if(T.length!==2){alert("Vui lng nhp ta  theo nh dng: v , kinh  (VD: 21.0285, 105.8542)");return}const $=parseFloat(T[0]),L=parseFloat(T[1]),z=parseFloat(x);if(isNaN($)||isNaN(L)||isNaN(z)){alert("Vui lng nhp ta  v bn knh hp l");return}if($<-90||$>90||L<-180||L>180){alert("Ta  khng hp l. V : -90 n 90, Kinh : -180 n 180");return}if(z<1){alert("Bn knh ti thiu l 1 km");return}const W={key:`coord_${$}_${L}_${z}_${Date.now()}`,name:`Ta  (${$}, ${L}) - ${z}km`,type:"coordinates",latitude:$,longitude:L,radius:z,distance_unit:"kilometer"};r([...n,W]),v(""),b("1")},P=(T,$)=>{r(n.map(L=>L.key===T?{...L,radius:$}:L))},O=T=>{r(n.filter($=>$.key!==T))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Quc gia, Thnh ph"}),s.jsx("div",{ref:m,className:"relative",children:s.jsxs(iR,{className:"border rounded-md",shouldFilter:!1,children:[s.jsx(oR,{placeholder:"Tm kim v tr...",value:a,onValueChange:i,onFocus:()=>a.trim().length>=2&&o.length>0&&h(!0)}),d&&s.jsx(lR,{className:"absolute top-full left-0 right-0 z-50 mt-1 border rounded-md bg-popover shadow-md",children:c?s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"ang tm kim..."}):o.length===0?s.jsx(cR,{children:a.length>=2?"Khng tm thy kt qu":"Nhp t nht 2 k t"}):s.jsx(uR,{children:o.map(T=>s.jsxs(dR,{onSelect:()=>C(T),children:[s.jsx(aj,{className:"mr-2 h-4 w-4"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:T.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[T.type==="country"&&"Quc gia/Vng vc",T.type==="region"&&"Bang",T.type==="city"&&(T.supports_radius?"Thnh ph (bn knh min 17km)":"Thnh ph"),"  ",T.country_name]})]})]},T.key))})})]})}),n.length>0&&s.jsxs("div",{className:"space-y-2 mt-2",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:" chn:"}),n.map(T=>{var $;return s.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted/20",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:T.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[T.type==="country"&&" Quc gia",T.type==="region"&&" Bang/Tnh",T.type==="city"&&" Thnh ph",T.type==="coordinates"&&" Ta "]})]}),T.supports_radius&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{type:"number",value:j===T.key?N:(($=T.radius)==null?void 0:$.toString())||"17",onChange:L=>{w(T.key),k(L.target.value)},onBlur:()=>{var z;const L=parseFloat(N);L>=17?P(T.key,L):(alert("Bn knh ti thiu l 17km"),k(((z=T.radius)==null?void 0:z.toString())||"17")),w(null)},min:"17",className:"w-20 text-sm",placeholder:"17"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"km"})]}),T.radius&&!T.supports_radius&&s.jsxs(Ze,{variant:"outline",className:"text-xs",children:[T.radius,"km"]}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>O(T.key),title:"Xa",children:s.jsx(Cs,{className:"h-4 w-4"})})]},T.key)})]})]}),s.jsxs("div",{className:"space-y-2 p-4 border rounded-lg",children:[s.jsx(ge,{children:"Hoc nhp ta  (V , Kinh )"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"text",placeholder:"VD: 21.0285, 105.8542",value:p,onChange:T=>v(T.target.value),className:"flex-1"}),s.jsx(Ke,{type:"number",placeholder:"Bn knh (km)",value:x,onChange:T=>b(T.target.value),min:"1",className:"w-24"}),s.jsxs(J,{onClick:A,variant:"secondary",size:"sm",children:[s.jsx(aj,{className:"mr-2 h-4 w-4"}),"Thm"]})]})]})]})},$je=({accessToken:e,selectedInterests:t,onInterestChange:n})=>{const[r,a]=g.useState(""),[i,o]=g.useState([]),[l,c]=g.useState(!1),[u,d]=g.useState(!1),h=g.useRef(null),m=async x=>{if(!x.trim()||x.length<2){o([]);return}c(!0);try{const b=await yK(x,e);o(b)}catch(b){console.error("Failed to search interests:",b),o([])}finally{c(!1)}};g.useEffect(()=>{const x=setTimeout(()=>{r&&r.trim().length>=2?(m(r.trim()),d(!0)):(o([]),d(!1))},1e3);return()=>clearTimeout(x)},[r]),g.useEffect(()=>{const x=b=>{h.current&&!h.current.contains(b.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const p=x=>{t.some(b=>b.id===x.id)||(n([...t,x]),d(!1),a(""),o([]))},v=x=>{n(t.filter(b=>b.id!==x))};return s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"S thch"}),s.jsx("div",{ref:h,className:"relative",children:s.jsxs(iR,{className:"border rounded-md",shouldFilter:!1,children:[s.jsx(oR,{placeholder:"Tm kim s thch...",value:r,onValueChange:a,onFocus:()=>r.trim().length>=2&&i.length>0&&d(!0)}),u&&s.jsx(lR,{className:"absolute top-full left-0 right-0 z-50 mt-1 border rounded-md bg-popover shadow-md",children:l?s.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"ang tm kim..."}):i.length===0?s.jsx(cR,{children:r.length>=2?"Khng tm thy s thch ph hp":"Nhp t nht 2 k t"}):s.jsx(uR,{children:i.map(x=>s.jsxs(dR,{onSelect:()=>p(x),disabled:t.some(b=>b.id===x.id),children:[s.jsx(To,{className:"mr-2 h-4 w-4"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:x.name}),x.audience_size&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Kch thc i tng: ",x.audience_size.toLocaleString()]})]})]},x.id))})})]})}),t.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.map(x=>s.jsxs(Ze,{variant:"secondary",className:"pr-1",children:[x.name,s.jsx(J,{variant:"ghost",size:"sm",className:"h-auto p-0 ml-2",onClick:()=>v(x.id),children:s.jsx(Cs,{className:"h-3 w-3"})})]},x.id))})]})},Mje=[{label:"Th Hai",value:1},{label:"Th Ba",value:2},{label:"Th T",value:3},{label:"Th Nm",value:4},{label:"Th Su",value:5},{label:"Th By",value:6},{label:"Ch Nht",value:0}],wA=Array.from({length:24},(e,t)=>t),Dje=({schedulingGrid:e,onGridChange:t})=>{const n=(o,l)=>{const c=e.map((u,d)=>d===o?u.map((h,m)=>m===l?!h:h):[...u]);t(c)},r=o=>{const l=e[o].every(u=>u),c=e.map((u,d)=>d===o?u.map(()=>!l):[...u]);t(c)},a=o=>{const l=e.every(u=>u[o]),c=e.map(u=>u.map((d,h)=>h===o?!l:d));t(c)},i=()=>{const o=Array(7).fill(null).map(()=>Array(24).fill(!1));t(o)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ge,{children:"Ln lch qung co"}),s.jsx(J,{size:"sm",variant:"outline",onClick:i,children:"Xa tt c"})]}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-muted/30",children:[s.jsx("th",{className:"border-r border-b p-2 text-xs font-normal text-left sticky left-0 bg-muted/30 z-10 min-w-[100px]"}),wA.map(o=>s.jsxs("th",{className:"border-r border-b p-1 text-[10px] font-normal text-center min-w-[32px]",children:[o,"h"]},o))]})}),s.jsxs("tbody",{children:[Mje.map(o=>s.jsxs("tr",{className:"hover:bg-muted/10",children:[s.jsx("td",{className:"border-r border-b p-2 text-sm cursor-pointer hover:bg-muted/20 sticky left-0 bg-white z-10",onClick:()=>r(o.value),children:o.label}),wA.map(l=>s.jsx("td",{className:`border-r border-b cursor-pointer transition-colors ${e[o.value][l]?"bg-primary/10 hover:bg-primary/20":"bg-background hover:bg-muted/30"}`,onClick:()=>n(o.value,l),children:s.jsx("div",{className:"w-full h-8"})},l))]},o.value)),s.jsxs("tr",{className:"bg-muted/20",children:[s.jsx("td",{className:"border-r border-b p-2 text-sm font-medium sticky left-0 bg-muted/20 z-10",children:"Hng ngy"}),wA.map(o=>s.jsx("td",{className:`border-r border-b cursor-pointer transition-colors ${e.every(l=>l[o])?"bg-primary/10 hover:bg-primary/20":"bg-background hover:bg-muted/30"}`,onClick:()=>a(o),children:s.jsx("div",{className:"w-full h-8"})},o))]})]})]})}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx("div",{className:"w-4 h-4 bg-primary/10 border"}),s.jsx("span",{children:"Gi  ln lch"})]})]})},XK=It.TABLES.USAGE_LOGS,Lje=async(e,t,n,r,a)=>{try{const i=await fetch(ht(XK),{method:"POST",headers:lt(),body:JSON.stringify({user_id:e,action_type:t,resource_type:n,resource_id:r,metadata:a||{}})});if(!i.ok){const o=await i.text();console.error(" Error tracking usage:",i.status,o)}}catch(i){console.error(" Error in trackUsage:",i)}},Fje=async(e,t=100,n=30)=>{try{const r=new Date;r.setDate(r.getDate()-n);const a=r.toISOString(),i=encodeURIComponent(`(user_id,eq,${e})~and(created_at,ge,${a})`),o=await fetch(`${ht(XK)}?where=${i}&sort=-created_at&limit=${t}`,{method:"GET",headers:lt()});return o.ok?(await o.json()).list||[]:(console.error(" Error getting usage logs:",o.status),[])}catch(r){return console.error(" Error in getUserUsageLogs:",r),[]}},Bje=async(e,t=30)=>{try{const n=await Fje(e,1e3,t),r={};return n.forEach(a=>{r[a.action_type]=(r[a.action_type]||0)+1}),r}catch(n){return console.error(" Error in getUsageSummary:",n),{}}},ZT=async(e,t,n,r)=>{try{const{data:{user:a}}=await wt.auth.getUser();if(!a){console.warn(" No user found for usage tracking");return}await Lje(a.id,e,t,n,r)}catch(a){console.error(" Error in trackUsage:",a)}},JK=async(e=30)=>{try{const{data:{user:t}}=await wt.auth.getUser();return t?await Bje(t.id,e):{}}catch(t){return console.error(" Error in getUsageSummary:",t),{}}},Uje=()=>{const{toast:e}=Lo(),[t,n]=g.useState(1),[r,a]=g.useState(!1),[i,o]=g.useState(""),[l,c]=g.useState(""),[u,d]=g.useState(""),[h,m]=g.useState(""),[p,v]=g.useState("Chin dch mi"),[x,b]=g.useState("OUTCOME_ENGAGEMENT"),[_,j]=g.useState(""),[w,N]=g.useState("DAILY"),[k,C]=g.useState("100,000"),[A,P]=g.useState(""),[O,T]=g.useState(""),[$,L]=g.useState("18"),[z,W]=g.useState("65"),[B,G]=g.useState("all"),[U,F]=g.useState([]),[K,X]=g.useState([]),[se,D]=g.useState(!1),[Y,ue]=g.useState(()=>Array(7).fill(null).map(()=>Array(24).fill(!1))),[xe,Ne]=g.useState("VND"),[oe,ee]=g.useState(25e3),[re,Z]=g.useState(""),[ce,ae]=g.useState("");g.useEffect(()=>{t===2&&!re&&ds().then(qe=>{Z(qe.adsToken),ae(qe.adAccountId)}).catch(console.error)},[t]),g.useEffect(()=>{p&&t===2&&j(p)},[p,t]),g.useEffect(()=>{_&&t===3&&Ve(_)},[_,t]),g.useEffect(()=>{if(w==="LIFETIME"){const qe=new Date,St=new Date(qe.getTime()+30*60*1e3),Pn=new Date(St);Pn.setMonth(Pn.getMonth()+1);const Lt=Wt=>{const Wn=Wt.getFullYear(),Ln=String(Wt.getMonth()+1).padStart(2,"0"),hs=String(Wt.getDate()).padStart(2,"0"),ro=String(Wt.getHours()).padStart(2,"0"),fs=String(Wt.getMinutes()).padStart(2,"0"),ao=String(Wt.getSeconds()).padStart(2,"0"),On=-Wt.getTimezoneOffset(),ri=String(Math.floor(Math.abs(On)/60)).padStart(2,"0"),Ua=String(Math.abs(On)%60).padStart(2,"0"),so=On>=0?"+":"-";return`${Wn}-${Ln}-${hs}T${ro}:${fs}:${ao}${so}${ri}:${Ua}`};A||P(Lt(St)),O||T(Lt(Pn))}},[w,A,O]);const[Ue,Ve]=g.useState(""),[ut,Rt]=g.useState("existing"),[mt,rn]=g.useState(""),[yn,dn]=g.useState(""),[Tt,ve]=g.useState(null),[Ce,ye]=g.useState(""),[dt,pt]=g.useState(null),[tn,xn]=g.useState(""),[on,zn]=g.useState("image"),[ti,Rr]=g.useState(null),[Ja,ia]=g.useState(""),[ni,va]=g.useState(""),[Za,hc]=g.useState(""),[mr,fc]=g.useState("MESSAGE_PAGE"),[Ye,El]=g.useState(!1),[ar,mc]=g.useState("start_conversation"),[tt,Dn]=g.useState("text_only"),[mn,es]=g.useState("Xin cho! Chng ti c th gip g cho bn?"),[Cr,ya]=g.useState(""),[ts,xa]=g.useState(null),[Yr,yu]=g.useState(""),[zo]=g.useState("custom"),[us,Hn]=g.useState([{question:"Xem sn phm",payload:"VIEW_PRODUCTS"},{question:"T vn gi",payload:"PRICE_INQUIRY"},{question:"Chnh sch i tr",payload:"RETURN_POLICY"}]),{user:Es}=Mn(),ds=async()=>{if(!(Es!=null&&Es.id))throw new Error("Vui lng ng nhp");const St=(await Vr(Es.id)).find(Wt=>Wt.is_active);if(!St)throw new Error("Vui lng cu hnh token v ad account trong Settings");const Lt=(await Qp(Es.id)).find(Wt=>Wt.is_active);try{const Wt=await fetch(`https://graph.facebook.com/v21.0/${St.account_id}?fields=currency&access_token=${St.access_token}`);if(Wt.ok){const Ln=(await Wt.json()).currency||"VND";Ne(Ln),ee(lje(Ln))}}catch(Wt){console.error("Failed to fetch currency:",Wt)}return{adsToken:St.access_token,adAccountId:St.account_id,pageId:(Lt==null?void 0:Lt.page_id)||"",pageToken:(Lt==null?void 0:Lt.access_token)||""}},Jf=async()=>{if(!p.trim()){e({title:"Li",description:"Vui lng nhp tn chin dch",variant:"destructive"});return}a(!0);try{const{adsToken:qe,adAccountId:St}=await ds(),Pn=await m_e({name:p,objective:x,special_ad_categories:[],status:"PAUSED"},qe,St);o(Pn.id),await ZT("campaign_created","campaign",Pn.id),e({title:"Thnh cng",description:` to chin dch! ID: ${Pn.id}`}),n(2)}catch(qe){e({title:"Li",description:qe.message||"Khng th to chin dch",variant:"destructive"})}finally{a(!1)}},Zf=async()=>{if(!_.trim()){e({title:"Li",description:"Vui lng nhp tn nhm qung co",variant:"destructive"});return}const qe=cje(k);if(!qe||qe<oe){e({title:"Li",description:`Ngn sch ti thiu ${na(oe,xe)}`,variant:"destructive"});return}if(U.length===0){e({title:"Li",description:"Vui lng chn t nht mt v tr",variant:"destructive"});return}a(!0);try{if(w==="LIFETIME"){if(!A||!O){e({title:"Li",description:"Vui lng chn ngy bt u v kt thc cho ngn sch trn i",variant:"destructive"}),a(!1);return}const On=new Date(A),ri=new Date(O),Ua=new Date(Date.now()+30*60*1e3);if(On<Ua){e({title:"Li",description:`Gi bt u (${On.toLocaleString("vi-VN")}) qu gn. Vui lng chn mt thi im trong tng lai (khuyn ngh cch 30 pht)  m bo chin dch c to.`,variant:"destructive"}),a(!1);return}if(ri<=On){e({title:"Li",description:"Ngy kt thc phi sau ngy bt u",variant:"destructive"}),a(!1);return}}const{adsToken:St,adAccountId:Pn,pageId:Lt}=await ds(),Wt={geo_locations:{},age_min:parseInt($),age_max:parseInt(z)},Wn=[],Ln=[],hs=[],ro=[];U.forEach(On=>{On.type==="country"?Wn.push(On.country_code):On.type==="region"?Ln.push({key:On.key}):On.type==="city"?On.radius?hs.push({key:On.key,radius:On.radius,distance_unit:On.distance_unit||"kilometer"}):hs.push({key:On.key}):On.type==="coordinates"&&ro.push({latitude:On.latitude,longitude:On.longitude,radius:On.radius,distance_unit:On.distance_unit||"kilometer"})}),Wn.length>0&&(Wt.geo_locations.countries=Wn),Ln.length>0&&(Wt.geo_locations.regions=Ln),hs.length>0&&(Wt.geo_locations.cities=hs),ro.length>0&&(Wt.geo_locations.custom_locations=ro),B!=="all"&&(Wt.genders=[B==="male"?1:2]),K.length>0&&(Wt.flexible_spec=[{interests:K.map(On=>({id:On.id,name:On.name}))}]);const fs={name:_,campaign_id:i,start_time:A||new Date().toISOString(),targeting:Wt,billing_event:"IMPRESSIONS",optimization_goal:"CONVERSATIONS",bid_strategy:"LOWEST_COST_WITHOUT_CAP",status:"PAUSED",destination_type:"MESSENGER"};if(Lt&&(fs.promoted_object={page_id:Lt}),w==="DAILY"?fs.daily_budget=UF(qe,xe):(fs.lifetime_budget=UF(qe,xe),O&&(fs.end_time=O)),se&&w==="LIFETIME"){fs.pacing_type=["day_parting"];const On=[];for(let ri=0;ri<7;ri++){let Ua=-1;for(let so=0;so<24;so++)Y[ri][so]?Ua===-1&&(Ua=so):Ua!==-1&&(On.push({day:ri,start_minute:Ua*60,end_minute:so*60}),Ua=-1);Ua!==-1&&On.push({day:ri,start_minute:Ua*60,end_minute:24*60})}On.length>0&&(fs.adset_schedule=On)}const ao=await p_e(fs,St,Pn);c(ao.id),e({title:"Thnh cng",description:` to nhm qung co! ID: ${ao.id}`}),n(3)}catch(St){e({title:"Li",description:St.message||"Khng th to nhm qung co",variant:"destructive"})}finally{a(!1)}},eh=async()=>{var qe,St;if(!mt.trim()){e({title:"Li",description:"Vui lng nhp link bi vit Facebook",variant:"destructive"});return}a(!0),ve(null),dn("");try{const{pageToken:Pn}=await ds(),{data:Lt,error:Wt}=await wt.functions.invoke("validate-facebook-post",{body:{postUrl:mt,pageToken:Pn}});if(Wt)throw Wt;if(!Lt.success)throw new Error(Lt.error||"Khng th ly ID t link");const Wn=Lt.fullPostId||Lt.postId;if(!Wn)throw new Error("API khng tr v Post ID hp l");if(!(Es!=null&&Es.id))throw new Error("Vui lng ng nhp");const hs=(await Qp(Es.id)).find(ao=>ao.is_active);if(!hs)throw new Error("Khng tm thy Page ID trong h thng. Vui lng kt ni Facebook Page trc.");const ro=hs.page_id,fs=`${ro}_${Wn}`;dn(fs),ve({name:((qe=Lt.data)==null?void 0:qe.name)||"",type:((St=Lt.data)==null?void 0:St.type)||"",is_public:Lt.is_public,is_die:Lt.is_die,rawId:Wn,pageId:ro}),Lt.is_die?e({title:" Cnh bo",description:"Link ny c th  b xa hoc khng kh dng",variant:"destructive"}):Lt.is_public?e({title:" Thnh cng",description:`Post ID: ${Wn}`}):e({title:" Lu ",description:"Bi vit khng cng khai, c th nh hng n qung co"})}catch(Pn){console.error(" Li validate post:",Pn),e({title:"Li",description:Pn.message||"Khng th xc thc bi vit",variant:"destructive"})}finally{a(!1)}},em=async qe=>{var Pn;const St=(Pn=qe.target.files)==null?void 0:Pn[0];if(St){if(on==="image"){if(St.size>po.IMAGE_MAX_SIZE){e({title:" File qu ln",description:`nh khng c vt qu ${po.IMAGE_MAX_SIZE/1024/1024}MB`,variant:"destructive"});return}if(!po.IMAGE_FORMATS.includes(St.type)){e({title:" nh dng khng hp l",description:"Ch chp nhn file JPG, JPEG, PNG",variant:"destructive"});return}}else{if(St.size>po.VIDEO_MAX_SIZE){e({title:" File qu ln",description:`Video khng c vt qu ${po.VIDEO_MAX_SIZE/1024/1024}MB`,variant:"destructive"});return}if(!po.VIDEO_FORMATS.includes(St.type)){e({title:" nh dng khng hp l",description:"Ch chp nhn file MP4, MOV, AVI",variant:"destructive"});return}}a(!0);try{const{adsToken:Lt,adAccountId:Wt}=await ds();if(on==="image"){pt(St);const Wn=await RF(St,Lt,Wt);xn(Wn.hash),e({title:" Thnh cng",description:" ti nh ln Facebook!"})}else{Rr(St),e({title:" ang ti video...",description:`ang upload ${(St.size/1024/1024).toFixed(2)} MB. Vui lng i...`});const Wn=await $F(St,Lt,Wt);ia(Wn.id),e({title:" Video  ti ln",description:"ang t ng ly thumbnail..."});try{const Ln=await f_e(Wn.id,Lt,5);va(Ln),e(Ln?{title:" Hon tt",description:" ti video v ly thumbnail thnh cng!"}:{title:" Ch ",description:"Video  ti ln nhng cha c thumbnail. Facebook s t ng dng frame u tin."})}catch(Ln){console.error("Thumbnail fetch error:",Ln),e({title:" Ch ",description:"Video  ti ln nhng khng ly c thumbnail. Facebook s t ng dng frame u tin."})}}}catch(Lt){console.error("Media upload error:",Lt),e({title:" Li",description:Lt.message||"Khng th ti media ln",variant:"destructive"})}finally{a(!1)}}},bv=async qe=>{var Pn;const St=(Pn=qe.target.files)==null?void 0:Pn[0];if(St){if(tt==="text_image"){if(St.size>po.IMAGE_MAX_SIZE){e({title:" File qu ln",description:`nh khng c vt qu ${po.IMAGE_MAX_SIZE/1024/1024}MB`,variant:"destructive"});return}if(!po.IMAGE_FORMATS.includes(St.type)){e({title:" nh dng khng hp l",description:"Ch chp nhn file JPG, JPEG, PNG",variant:"destructive"});return}}else if(tt==="text_video"){if(St.size>po.VIDEO_MAX_SIZE){e({title:" File qu ln",description:`Video khng c vt qu ${po.VIDEO_MAX_SIZE/1024/1024}MB`,variant:"destructive"});return}if(!po.VIDEO_FORMATS.includes(St.type)){e({title:" nh dng khng hp l",description:"Ch chp nhn file MP4, MOV, AVI",variant:"destructive"});return}}a(!0);try{const{adsToken:Lt,adAccountId:Wt}=await ds();if(tt==="text_image"){const Wn=await RF(St,Lt,Wt);ya(Wn.hash),xa(St),e({title:" Thnh cng",description:" ti nh cho ln Facebook!"})}else{xa(St),e({title:" ang ti video cho...",description:`ang upload ${(St.size/1024/1024).toFixed(2)} MB. Vui lng i...`});const Wn=await $F(St,Lt,Wt);ya(Wn.id),e({title:" Thnh cng",description:" ti video cho ln Facebook! (Thumbnail s t ng c Facebook generate)"})}}catch(Lt){console.error("Greeting media upload error:",Lt),e({title:" Li",description:Lt.message||"Khng th ti media cho ln",variant:"destructive"})}finally{a(!1)}}},th=()=>{if(mr!=="MESSAGE_PAGE"||!Ye)return null;if(ar==="json"){if(!Yr.trim())return null;try{return{page_welcome_message:JSON.parse(Yr)}}catch{throw new Error("JSON  Thit lp nng cao khng hp l. Vui lng kim tra li c php.")}}if(ar==="start_conversation"){const St=(tt==="text_image"||tt==="text_video")&&Cr,Pn=mn.trim()!=="",Lt=zo==="custom"&&us.some(Wt=>Wt.question.trim());if(!St&&!Pn&&!Lt)return null;if(St){const Wt=tt==="text_image"?"image":"video";return{page_welcome_message:{greeting_text:mn.trim(),media:{type:Wt,attachment_id:Cr},ctas:Lt?us.filter(Ln=>Ln.question.trim()).map(Ln=>{var hs;return{type:"QUICK_REPLY",title:Ln.question.trim().slice(0,20),payload:((hs=Ln.payload)==null?void 0:hs.trim())||Ln.question.trim()}}):[]}}}else{const Wt=nh();return Wt?{page_welcome_message:Wt}:null}}return null},nh=()=>tt!=="text_only"||!mn.trim()&&(zo!=="custom"||!us.some(qe=>qe.question.trim()))?null:{type:"VISUAL_EDITOR",version:2,landing_screen_type:"welcome_message",media_type:"text",text_format:{customer_action_type:"ice_breakers",message:{ice_breakers:zo==="custom"?us.filter(qe=>qe.question.trim()).map(qe=>{var St;return{title:qe.question.trim().slice(0,20),response:((St=qe.payload)==null?void 0:St.trim())||qe.question.trim()}}):[],quick_replies:[],text:mn.trim()}},user_edit:!1,surface:"visual_editor_new"},xu=async()=>{if(ut==="existing"&&!yn){e({title:"Li",description:"Vui lng xc thc bi vit trc",variant:"destructive"});return}if(ut==="new"){if(on==="image"&&!tn){e({title:"Li",description:"Vui lng ti nh ln",variant:"destructive"});return}if(on==="video"&&!Ja){e({title:"Li",description:"Vui lng ti video ln",variant:"destructive"});return}if(!Ce.trim()){e({title:"Li",description:"Vui lng nhp ni dung qung co",variant:"destructive"});return}}a(!0);try{const{adsToken:qe,adAccountId:St,pageId:Pn}=await ds();let Lt;if(ut==="existing")Lt=await g_e({name:`Creative - ${Ue}`,object_story_id:yn},qe,St);else{let Wt=null;try{Wt=th()}catch(Wn){e({title:" Li",description:Wn.message,variant:"destructive"}),a(!1);return}if(Ye&&ar==="start_conversation"&&tt==="text_only"){const Wn=us.filter(Ln=>Ln.question&&Ln.question.trim()!=="");for(const Ln of Wn)if(Ln.question.length>20){e({title:" Li",description:`Cu hi "${Ln.question}" vt qu 20 k t. Vui lng rt ngn.`,variant:"destructive"}),a(!1);return}if(Wn.length===0){e({title:" Li",description:"Vui lng thm t nht 1 cu hi gi  hp l.",variant:"destructive"}),a(!1);return}if(!mn.trim()){e({title:" Li",description:"Vui lng nhp li cho.",variant:"destructive"}),a(!1);return}}on==="image"?Lt=await v_e({name:`Creative - ${Ue}`,pageId:Pn,message:Ce,headline:Za,imageHash:tn,ctaType:mr,messageTemplateData:Wt},qe,St):Lt=await y_e({name:`Creative - ${Ue}`,pageId:Pn,message:Ce,videoTitle:Za,videoId:Ja,thumbnailUrl:ni,ctaType:mr,messageTemplateData:Wt},qe,St)}d(Lt.id),e({title:"  to Creative",description:`Creative ID: ${Lt.id}`})}catch(qe){console.error(" Li to Creative:",qe),e({title:"Li",description:qe.message||"Khng th to creative",variant:"destructive"})}finally{a(!1)}},tm=async()=>{if(!u){e({title:"Li",description:"Vui lng to Creative trc",variant:"destructive"});return}if(!Ue.trim()){e({title:"Li",description:"Vui lng nhp tn qung co",variant:"destructive"});return}a(!0);try{const{adsToken:qe,adAccountId:St}=await ds(),Pn=await x_e({name:Ue,adset_id:l,creative:{creative_id:u},status:"PAUSED"},qe,St);m(Pn.id),e({title:" Hon thnh!",description:`Campaign: ${i} | AdSet: ${l} | Ad: ${Pn.id}`})}catch(qe){console.error(" Li ng Ad:",qe),e({title:"Li",description:qe.message||"Khng th to qung co",variant:"destructive"})}finally{a(!1)}},pc=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"campaignName",children:"Tn chin dch"}),s.jsx(Ke,{id:"campaignName",value:p,onChange:qe=>v(qe.target.value),placeholder:"VD: Khuyn mi thng 7"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"objective",children:"Mc tiu"}),s.jsxs("div",{className:"p-3 border rounded-md bg-muted/20",children:[s.jsx("span",{className:"font-medium",children:"Lt tng tc"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Mc tiu ti u ha  tng tin nhn v tng tc vi khch hng"})]})]}),s.jsxs(J,{onClick:Jf,disabled:r,className:"w-full",children:[r?s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}):null,"To Campaign & Tip tc"]})]}),wv=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Nn,{className:"w-4 h-4 text-green-600"}),"Campaign ID: ",i]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Tn nhm qung co"}),s.jsx(Ke,{value:_,onChange:qe=>j(qe.target.value),placeholder:"VD: Nhm qung co A, Qung co H Ni..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Loi ngn sch"}),s.jsxs(kn,{value:w,onValueChange:qe=>N(qe),children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"DAILY",children:"Hng ngy"}),s.jsx(st,{value:"LIFETIME",children:"Trn i"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{children:["S tin (",xe,")"]}),s.jsx(Ke,{value:k,onChange:qe=>{const St=QT(qe.target.value);C(St)},placeholder:QT(oe)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ti thiu: ",na(oe,xe)]})]})]}),w==="LIFETIME"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Ngy bt u"}),s.jsx(Ke,{type:"datetime-local",value:A,onChange:qe=>P(qe.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Ngy kt thc"}),s.jsx(Ke,{type:"datetime-local",value:O,onChange:qe=>T(qe.target.value)})]})]}),w==="LIFETIME"&&s.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/20",children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:se,onChange:qe=>{D(qe.target.checked),qe.target.checked||ue(Array(7).fill(null).map(()=>Array(24).fill(!0)))},className:"rounded"}),"Ln lch phn phi nhm qung co"]}),se&&s.jsx(Dje,{schedulingGrid:Y,onGridChange:ue})]}),s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"i tng mc tiu"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Tui ti thiu"}),s.jsx(Ke,{value:$,onChange:qe=>L(qe.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Tui ti a"}),s.jsx(Ke,{value:z,onChange:qe=>W(qe.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Gii tnh"}),s.jsxs(kn,{value:B,onValueChange:qe=>G(qe),children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"all",children:"Tt c"}),s.jsx(st,{value:"male",children:"Nam"}),s.jsx(st,{value:"female",children:"N"})]})]})]}),re&&s.jsxs(s.Fragment,{children:[s.jsx(hR,{accessToken:re,adAccountId:ce,selectedLocations:U,onLocationChange:F}),s.jsx($je,{accessToken:re,selectedInterests:K,onInterestChange:X})]})]}),s.jsxs(J,{onClick:Zf,disabled:r,className:"w-full",children:[r?s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}):null,"To Ad Set & Tip tc"]})]}),gc=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Nn,{className:"w-4 h-4 text-green-600"}),"Campaign ID: ",i]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Nn,{className:"w-4 h-4 text-green-600"}),"Ad Set ID: ",l]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Tn qung co"}),s.jsx(Ke,{value:Ue,onChange:qe=>Ve(qe.target.value),placeholder:"VD: Qung co 1, Qung co khuyn mi..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Ngun ni dung"}),s.jsxs(kn,{value:ut,onValueChange:qe=>Rt(qe),children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"existing",children:"Bi vit c sn"}),s.jsx(st,{value:"new",children:"To mi"})]})]})]}),ut==="existing"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3 p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ge,{htmlFor:"postUrl",children:"Link bi vit Facebook"}),s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(id,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),s.jsx(mi,{className:"max-w-xs",children:s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsx("p",{className:"font-semibold mb-1",children:"H tr 11 loi link Facebook:"}),s.jsx("p",{children:" Post chun: /posts/123456"}),s.jsx("p",{children:" PFBID: /posts/pfbid..."}),s.jsx("p",{children:" PCB: /permalink.php?pcb=..."}),s.jsx("p",{children:" Video: /videos/123456"}),s.jsx("p",{children:" Reel: /reel/123456"}),s.jsx("p",{children:" Watch: /watch/?v=123456"}),s.jsx("p",{children:" Share (v): /share/v/..."}),s.jsx("p",{children:" Share (p): /share/p/..."}),s.jsx("p",{children:" Story: /stories/123456"}),s.jsx("p",{children:" Permalink: /permalink.php?story_fbid=..."}),s.jsx("p",{children:" PFBID URL di"})]})})]})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{id:"postUrl",value:mt,onChange:qe=>rn(qe.target.value),placeholder:"https://facebook.com/... (Paste bt k link Facebook no)",className:"flex-1",onKeyDown:qe=>{qe.key==="Enter"&&!r&&eh()}}),s.jsx(J,{onClick:eh,disabled:r||!mt.trim(),size:"lg",children:r?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}),"ang x l..."]}):"Kim tra"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:" H tr: Post, Video, Reel, Share link, Story, PFBID, PCB v nhiu loi link khc"})]}),Tt&&yn&&s.jsx("div",{className:`border rounded-lg ${Tt.is_die?"border-orange-300 bg-orange-50 dark:bg-orange-950/30":Tt.is_public?"border-green-300 bg-green-50 dark:bg-green-950/30":"border-yellow-300 bg-yellow-50 dark:bg-yellow-950/30"}`,children:s.jsxs("div",{className:"p-4 pb-3",children:[s.jsx("div",{className:"text-lg flex items-center gap-2 font-semibold mb-4",children:Tt.is_die?s.jsxs(s.Fragment,{children:[s.jsx(is,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{className:"text-orange-900 dark:text-orange-100",children:"Cnh bo: Post c vn "})]}):Tt.is_public?s.jsxs(s.Fragment,{children:[s.jsx(Nn,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-green-900 dark:text-green-100",children:"Thnh cng! Post hp l"})]}):s.jsxs(s.Fragment,{children:[s.jsx(is,{className:"w-5 h-5 text-yellow-600"}),s.jsx("span",{className:"text-yellow-900 dark:text-yellow-100",children:"Post khng cng khai"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{className:"text-sm font-semibold",children:"Object Story ID (dng cho qung co)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1 font-mono text-sm bg-white dark:bg-gray-900 p-3 rounded border break-all",children:yn}),s.jsx(J,{onClick:()=>{navigator.clipboard.writeText(yn),e({title:" sao chp",description:"Object Story ID  c sao chp vo clipboard"})},variant:"outline",size:"sm",children:"Sao chp"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[Tt.type&&s.jsxs("div",{children:[s.jsx(ge,{className:"text-xs text-muted-foreground",children:"Loi ni dung"}),s.jsxs("div",{className:"font-medium mt-1",children:[" ",Tt.type]})]}),s.jsxs("div",{children:[s.jsx(ge,{className:"text-xs text-muted-foreground",children:"Trng thi"}),s.jsx("div",{className:"font-medium mt-1",children:Tt.is_public?" Cng khai ":" Ring t "})]}),Tt.rawId&&s.jsxs("div",{children:[s.jsx(ge,{className:"text-xs text-muted-foreground",children:"ID gc"}),s.jsx("div",{className:"font-mono text-xs mt-1 truncate",children:Tt.rawId})]}),Tt.pageId&&s.jsxs("div",{children:[s.jsx(ge,{className:"text-xs text-muted-foreground",children:"Page ID"}),s.jsx("div",{className:"font-mono text-xs mt-1 truncate",children:Tt.pageId})]})]}),Tt.name&&s.jsxs("div",{children:[s.jsx(ge,{className:"text-xs text-muted-foreground",children:"Tn / M t"}),s.jsx("div",{className:"mt-1 p-3 bg-white dark:bg-gray-900 rounded border text-sm",children:Tt.name})]}),Tt.is_die&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-orange-100 dark:bg-orange-900/50 rounded border border-orange-300 dark:border-orange-800 text-sm",children:[s.jsx(is,{className:"w-4 h-4 text-orange-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-orange-900 dark:text-orange-100",children:"Link c th  b xa hoc khng kh dng"}),s.jsx("div",{className:"text-orange-800 dark:text-orange-200 mt-1",children:"Bi vit ny c th khng cn tn ti trn Facebook. Vui lng kim tra li link hoc chn bi vit khc."})]})]}),!Tt.is_public&&!Tt.is_die&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-100 dark:bg-yellow-900/50 rounded border border-yellow-300 dark:border-yellow-800 text-sm",children:[s.jsx(is,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-yellow-900 dark:text-yellow-100",children:"Bi vit khng cng khai"}),s.jsx("div",{className:"text-yellow-800 dark:text-yellow-200 mt-1",children:"Bi vit ring t c th nh hng n hiu sut qung co. Khuyn ngh s dng bi vit cng khai."})]})]})]})]})})]}):s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/10",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"To ni dung qung co mi"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Loi media"}),s.jsxs(kn,{value:on,onValueChange:qe=>zn(qe),children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"image",children:" nh"}),s.jsx(st,{value:"video",children:" Video"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{children:["Ti ",on==="image"?"nh":"video"," ln"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{type:"file",accept:on==="image"?"image/*":"video/*",onChange:em,disabled:r}),(tn||Ja)&&s.jsx(Nn,{className:"w-5 h-5 text-green-600"})]}),dt&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["  ti: ",dt.name]}),ti&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["  ti: ",ti.name]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Ni dung chnh (Primary Text)"}),s.jsx(Oo,{value:Ce,onChange:qe=>ye(qe.target.value),placeholder:"VD: Khuyn mi c bit - Gim gi 50%...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Tiu  (Headline)"}),s.jsx(Ke,{value:Za,onChange:qe=>hc(qe.target.value),placeholder:"VD: Mua ngay hm nay!"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Ku gi hnh ng (CTA)"}),s.jsxs(kn,{value:mr,onValueChange:fc,children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"MESSAGE_PAGE",children:" Gi tin nhn"}),s.jsx(st,{value:"LEARN_MORE",children:" Tm hiu thm"}),s.jsx(st,{value:"SHOP_NOW",children:" Mua ngay"})]})]})]}),mr==="MESSAGE_PAGE"&&s.jsxs("div",{className:"space-y-3 p-3 border rounded-lg bg-blue-50/50 dark:bg-blue-950/20",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:Ye,onChange:qe=>El(qe.target.checked),className:"rounded"}),s.jsx(ge,{children:"Kch hot mu tin nhn cho"})]}),Ye&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 border-b",children:[s.jsx("button",{type:"button",className:`px-3 py-2 text-sm ${ar==="start_conversation"?"border-b-2 border-blue-600 font-semibold":"text-muted-foreground"}`,onClick:()=>mc("start_conversation"),children:" Giao din"}),s.jsx("button",{type:"button",className:`px-3 py-2 text-sm ${ar==="json"?"border-b-2 border-blue-600 font-semibold":"text-muted-foreground"}`,onClick:()=>mc("json"),children:" JSON ty chnh"})]}),ar==="start_conversation"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{className:"text-xs",children:"Loi li cho"}),s.jsxs(kn,{value:tt,onValueChange:qe=>Dn(qe),children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"text_only",children:" Ch vn bn"}),s.jsx(st,{value:"text_image",children:" Vn bn + nh"}),s.jsx(st,{value:"text_video",children:" Vn bn + Video"})]})]})]}),(tt==="text_image"||tt==="text_video")&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{className:"text-xs",children:["Ti ",tt==="text_image"?"nh":"video"," cho ln"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{type:"file",accept:tt==="text_image"?"image/*":"video/*",onChange:bv,disabled:r,className:"text-xs"}),Cr&&s.jsx(Nn,{className:"w-4 h-4 text-green-600"})]}),ts&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["  ti: ",ts.name]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{className:"text-xs",children:"Li cho"}),s.jsx(Oo,{value:mn,onChange:qe=>es(qe.target.value),placeholder:"Xin cho {{full_name}}! Chng ti c th gip g cho bn?",rows:2}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dng ","{{full_name}}","  chn tn ngi dng"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{className:"text-xs",children:"Cu hi gi  (Ice Breakers)"}),us.map((qe,St)=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ge,{className:"text-xs text-muted-foreground",children:["Cu hi ",St+1]}),s.jsx(Ke,{value:qe.question,onChange:Pn=>{const Lt=[...us];Lt[St].question=Pn.target.value,Lt[St].payload=Pn.target.value,Hn(Lt)},placeholder:"VD: Xem sn phm",maxLength:20}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[qe.question.length,"/20 k t"]})]},St)),s.jsx(J,{type:"button",variant:"outline",size:"sm",onClick:()=>Hn([...us,{question:"",payload:""}]),className:"w-full text-xs",children:"+ Thm cu hi"})]})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{className:"text-xs",children:"JSON ty chnh"}),s.jsx(Oo,{value:Yr,onChange:qe=>yu(qe.target.value),placeholder:`{
  "type": "VISUAL_EDITOR",
  "version": 2,
  ...
}`,rows:8,className:"font-mono text-xs"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Nhp payload JSON y  theo chun Facebook API"})]})]})]})]}),s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/10",children:[s.jsx("h4",{className:"font-semibold text-sm",children:"Quy trnh ng qung co"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(J,{onClick:xu,disabled:r||u!=="",className:"w-full",variant:"outline",children:[r?s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}):s.jsx(zz,{className:"w-4 h-4 mr-2"}),u?"  to Creative":"1. To Creative (Bn nhp)"]}),u&&s.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800 rounded text-xs",children:[s.jsx("strong",{className:"text-green-900 dark:text-green-100",children:"Creative ID:"})," ",s.jsx("code",{className:"font-mono",children:u})]})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs(J,{onClick:tm,disabled:r||!u||h!=="",className:"w-full",variant:h?"outline":"default",children:[r?s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}):h?s.jsx(u4,{className:"w-4 h-4 mr-2 opacity-50"}):s.jsx(u4,{className:"w-4 h-4 mr-2"}),h?"  ng Qung Co":"2. ng Qung Co"]})})]}),h&&s.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:" Hon thnh!"}),s.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[s.jsxs("div",{children:["Campaign ID: ",i]}),s.jsxs("div",{children:["Ad Set ID: ",l]}),s.jsxs("div",{children:["Ad ID: ",h]})]})]})]});return s.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3].map(qe=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${t>=qe?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:qe}),qe<3&&s.jsx("div",{className:`flex-1 h-1 mx-2 ${t>qe?"bg-primary":"bg-muted"}`})]},qe))}),s.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[s.jsx("span",{className:t>=1?"text-foreground font-medium":"text-muted-foreground",children:"Campaign"}),s.jsx("span",{className:t>=2?"text-foreground font-medium":"text-muted-foreground",children:"Ad Set"}),s.jsx("span",{className:t>=3?"text-foreground font-medium":"text-muted-foreground",children:"Ad"})]})]}),s.jsxs("div",{className:"bg-card rounded-lg shadow-sm border p-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-6",children:["Bc ",t,": ",t===1?"To Chin dch":t===2?"To Nhm qung co":"To Qung co"]}),t===1&&pc(),t===2&&wv(),t===3&&gc()]})]})},Im=e=>{window.dispatchEvent(new CustomEvent("campaign-event",{detail:e}))},Vje=e=>{g.useEffect(()=>{const t=n=>{e(n.detail)};return window.addEventListener("campaign-event",t),()=>window.removeEventListener("campaign-event",t)},[e])};var fR="Progress",mR=100,[zje,nQe]=ga(fR),[Hje,Wje]=zje(fR),ZK=g.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=qje,...o}=e;(a||a===0)&&!WF(a)&&console.error(Kje(`${a}`,"Progress"));const l=WF(a)?a:mR;r!==null&&!qF(r,l)&&console.error(Gje(`${r}`,"Progress"));const c=qF(r,l)?r:null,u=Cj(c)?i(c,l):void 0;return s.jsx(Hje,{scope:n,value:c,max:l,children:s.jsx(it.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Cj(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":nG(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});ZK.displayName=fR;var eG="ProgressIndicator",tG=g.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=Wje(eG,n);return s.jsx(it.div,{"data-state":nG(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});tG.displayName=eG;function qje(e,t){return`${Math.round(e/t*100)}%`}function nG(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Cj(e){return typeof e=="number"}function WF(e){return Cj(e)&&!isNaN(e)&&e>0}function qF(e,t){return Cj(e)&&!isNaN(e)&&e<=t&&e>=0}function Kje(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${mR}\`.`}function Gje(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${mR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var rG=ZK,Yje=tG;const HS=g.forwardRef(({className:e,value:t,...n},r)=>s.jsx(rG,{ref:r,className:je("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:s.jsx(Yje,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));HS.displayName=rG.displayName;const Qje=({open:e,onClose:t,adAccountId:n,adsToken:r,pageToken:a,onUploadSuccess:i})=>{const{toast:o}=Lo(),l=g.useRef(null),[c,u]=g.useState(null),[d,h]=g.useState(""),[m,p]=g.useState(!1),[v,x]=g.useState(0),[b,_]=g.useState(!1),j=N=>{var T;const k=(T=N.target.files)==null?void 0:T[0];if(!k)return;const C=k.type.startsWith("image/"),A=k.type.startsWith("video/");if(!C&&!A){o({title:"Li",description:"Ch chp nhn file nh hoc video",variant:"destructive"});return}const P=A?100*1024*1024:10*1024*1024;if(k.size>P){o({title:"Li",description:`File qu ln. Ti a ${A?"100MB":"10MB"}`,variant:"destructive"});return}u(k);const O=new FileReader;O.onloadend=()=>{h(O.result)},O.readAsDataURL(k)},w=async()=>{if(!c){o({title:"Li",description:"Vui lng chn file",variant:"destructive"});return}p(!0),x(0);try{if(c.type.startsWith("image/")){const k=await kj(n,r,c);i({type:"image",hash:k.imageHash,preview:d,imageUrl:k.imageUrl}),o({title:" Upload thnh cng",description:"nh  c ti ln"})}else{const k=await SK(n,r,c,C=>{x(C),C===100&&_(!0)});_(!1),i({type:"video",id:k.videoId,preview:d}),o({title:" Upload thnh cng",description:"Video  c ti ln"})}u(null),h(""),x(0),_(!1),t()}catch(N){console.error("Upload error:",N),o({title:" Li upload",description:N.message||"Khng th ti ln media",variant:"destructive"})}finally{p(!1)}};return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"sm:max-w-md",children:[s.jsxs(hr,{children:[s.jsxs(fr,{className:"flex items-center gap-2",children:[s.jsx(Hp,{className:"w-5 h-5"}),"Ti ln nh / Video"]}),s.jsx(Ca,{children:"Chn nh hoc video cho qung co ca bn"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ke,{ref:l,type:"file",accept:"image/*,video/*",onChange:j,disabled:m,className:"cursor-pointer"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"nh: ti a 10MB | Video: ti a 100MB"})]}),d&&s.jsxs("div",{className:"border rounded-lg overflow-hidden bg-muted",children:[c!=null&&c.type.startsWith("image/")?s.jsxs("div",{className:"relative aspect-video flex items-center justify-center",children:[s.jsx(Lm,{className:"w-12 h-12 text-muted-foreground absolute"}),s.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-contain relative z-10"})]}):s.jsxs("div",{className:"relative aspect-video flex items-center justify-center",children:[s.jsx(Fm,{className:"w-12 h-12 text-muted-foreground absolute"}),s.jsx("video",{src:d,className:"w-full h-full object-contain relative z-10",controls:!0})]}),s.jsxs("div",{className:"p-2 text-sm text-center text-muted-foreground",children:[c==null?void 0:c.name," (",(c.size/1024/1024).toFixed(2)," MB)"]})]}),m&&v>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(HS,{value:v}),s.jsx("p",{className:"text-xs text-center text-muted-foreground",children:b?" ang x l video trn Facebook...":`ang ti ln... ${v}%`})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{onClick:w,disabled:!c||m,className:"flex-1",size:"lg",children:m?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}),"ang ti ln..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Hp,{className:"w-4 h-4 mr-2"}),"Ti ln"]})}),s.jsx(J,{onClick:t,variant:"outline",disabled:m,size:"lg",children:"Hy"})]})]})]})})},Xje=()=>{const{toast:e}=Lo(),[t,n]=g.useState(""),[r,a]=g.useState("idle"),[i,o]=g.useState(null),[l,c]=g.useState(null),[u,d]=g.useState({}),[h,m]=g.useState(!1),[p,v]=g.useState([]),[x,b]=g.useState(null),[_,j]=g.useState(null),[w,N]=g.useState(!1),[k,C]=g.useState(!1),[A,P]=g.useState(!1),[O,T]=g.useState([]),[$,L]=g.useState(null),[z,W]=g.useState(null),[B,G]=g.useState("");Vje(g.useCallback(Z=>{if(Z.type==="campaign-creation-requested"){const{rawInput:ce}=Z.data;n(ce),C(!0),e({title:" nhn thng tin t AI",description:"ang phn tch d liu..."})}if(Z.type==="campaign-creation-auto-start"){const{parsedData:ce,mediaData:ae}=Z.data;o(ce),c(ae),a("parsed"),P(!0),e({title:" Bt u to t ng",description:"ang to Campaign, Ad Set v Ad..."})}},[e]));const U=g.useCallback(Z=>{const ce=new Date().toLocaleTimeString("vi-VN");v(ae=>[...ae,`[${ce}] ${Z}`])},[]),F=g.useCallback(()=>{a("idle"),o(null),c(null),d({}),v([]),b(null),j(null),N(!1),T([])},[]),{user:K}=Mn(),X=async()=>{if(!(K!=null&&K.id))throw new Error("Vui lng ng nhp");const Z=await Vr(K.id),ce=await Qp(K.id),ae=Z.find(Ve=>Ve.is_active),Ue=ce.find(Ve=>Ve.is_active);if(!(ae!=null&&ae.access_token)||!(ae!=null&&ae.account_id))throw new Error("Cha cu hnh Facebook Ads Token. Vui lng vo Settings.");if(!(Ue!=null&&Ue.access_token)||!(Ue!=null&&Ue.page_id))throw new Error("Cha cu hnh Facebook Page Token. Vui lng vo Settings.");return{adsToken:ae.access_token,adAccountId:ae.account_id,pageToken:Ue.access_token,pageId:Ue.page_id}};g.useEffect(()=>{if(i&&i.locations&&i.locations.length>0&&O.length===0){const Z=i.locations.map((ce,ae)=>{const Ue=ce.trim(),Ve=Ue.match(/^(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)$/);if(Ve){const[,ut,Rt]=Ve;return{key:`${ut},${Rt}`,name:`Ta : ${ut}, ${Rt}`,type:"coordinates",latitude:parseFloat(ut),longitude:parseFloat(Rt),radius:i.locationRadius||17,distance_unit:"kilometer"}}return/^(vit nam|vietnam|vn)$/i.test(Ue)?{key:"VN",name:"Vit Nam",type:"country"}:i.locationType==="city"&&i.resolvedLocation&&ae===0?{key:String(i.resolvedLocation.key),name:i.resolvedLocation.name||Ue,type:"city",radius:i.radiusKm||i.resolvedLocation.minRadiusKm||i.locationRadius||17,distance_unit:"kilometer"}:{key:Ue.toLowerCase(),name:Ue,type:"city",radius:i.locationRadius||17,distance_unit:"kilometer"}});T(Z)}},[i,O.length]);const se=g.useCallback(async()=>{if(!_&&!w){N(!0);try{const Z=await X();j(Z),m(!0)}catch(Z){e({title:" Li",description:Z.message,variant:"destructive"})}finally{N(!1)}}else m(!0)},[_,w,e]),D=g.useCallback(async Z=>{if(c(Z),Z.type==="video"&&Z.id&&(_!=null&&_.pageToken)){U(" Upload video thnh cng! ang t ng ly thumbnail...");try{const ce=await Py(Z.id,_.pageToken),ae={...Z,thumbnailUrl:ce};c(ae),U("  t ng ly thumbnail mc nh!"),e({title:" Upload video thnh cng",description:" t ng s dng thumbnail mc nh"})}catch(ce){console.error("[Auto thumbnail] Error:",ce),U(" Khng ly c thumbnail t ng, s b qua thumbnail"),e({title:" Upload video thnh cng",description:"S to ad khng c thumbnail"})}}else U(" Upload nh thnh cng!"),e({title:" Upload thnh cng",description:"Vui lng xem preview v xc nhn"})},[U,e,_]),Y=g.useCallback(async Z=>{if(!Z.type.startsWith("image/")){e({title:" Li",description:"Vui lng chn file nh",variant:"destructive"});return}if(_){U(" ang ti thumbnail ln...");try{const{imageHash:ce,imageUrl:ae}=await kj(_.adAccountId,_.adsToken,Z);if(!ce)throw new Error("Khng tm thy hash thumbnail t Facebook");c(Ue=>Ue&&{...Ue,thumbnailUrl:ce}),i?(a("parsed"),U(" Upload thumbnail thnh cng!"),e({title:" Upload thnh cng",description:"Thumbnail  sn sng"})):(a("uploaded"),U(" Upload thumbnail thnh cng!"),e({title:" Upload thnh cng",description:"Thumbnail  sn sng"}))}catch(ce){console.error("[handleThumbnailUpload] Error:",ce),U(` Li upload thumbnail: ${ce.message}`),e({title:" Li",description:ce.message,variant:"destructive"})}}},[_,U,e,i,t]);g.useCallback(async Z=>{if(Z==="default"){if(!(l!=null&&l.id)||!(_!=null&&_.pageToken))return;U(" ang ly thumbnail mc nh...");try{const ce=await Py(l.id,_.pageToken);c(ae=>ae&&{...ae,thumbnailUrl:ce}),i?(a("parsed"),U("  ly thumbnail mc nh!"),e({title:" Thumbnail sn sng",description:"C th xem preview v xc nhn to campaign"})):(a("uploaded"),U("  ly thumbnail mc nh!"),e({title:" Thumbnail sn sng",description:"Thumbnail  sn sng"}))}catch(ce){console.error("[handleThumbnailChoice] Error:",ce),U(` Li ly thumbnail: ${ce.message}`),e({title:" Li",description:ce.message,variant:"destructive"})}}else{const ce=document.createElement("input");ce.type="file",ce.accept="image/*",ce.onchange=async ae=>{var Ve;const Ue=(Ve=ae.target.files)==null?void 0:Ve[0];Ue&&await Y(Ue)},ce.click()}},[l,_,U,e,Y,i,t]);const ue=g.useCallback(()=>{const Z=parseFloat(B);if(isNaN(Z)||Z<=0){e({title:" Bn knh khng hp l",description:"Vui lng nhp s km > 0",variant:"destructive"});return}o(ce=>ce&&{...ce,locationRadius:Z,radiusKm:Z}),T(ce=>ce.map(ae=>({...ae,radius:Z,distance_unit:ae.distance_unit||"kilometer"}))),L(null),W(null),e({title:"  p dng bn knh",description:`${Z}km`})},[B,e]),xe=g.useCallback(async()=>{if(!(!i||!l)){a("step1-creating"),U(" Bc 1: ang to Campaign (Lt tng tc)...");try{const{adsToken:Z,adAccountId:ce}=await X(),Ue=(await Kh.createCampaignStep({campaignName:i.campaignName,adsToken:Z,adAccountId:ce})).campaignId;d({campaignId:Ue}),U(` To Campaign thnh cng! Campaign ID: ${Ue}`),a("step1-done"),await ZT("campaign_created","campaign",Ue),await ZT("ai_creative_generated","campaign",Ue,{source:"quick_creative_creator",mediaType:l.type}),e({title:" Bc 1 hon tt",description:`Campaign ID: ${Ue}`})}catch(Z){console.error("Create campaign error:",Z),U(` Li: ${Z.message}`),a("error"),e({title:" Li to Campaign",description:Z.message,variant:"destructive"})}}},[i,l,U,e]),Ne=g.useCallback(async()=>{if(!(!i||!l||!u.campaignId)){a("step2-creating"),U(" Bc 2: ang to Ad Set (ch n: Tin nhn, Ti u ha: Cuc tr chuyn)...");try{const{adsToken:Z,adAccountId:ce,pageId:ae}=await X(),Ue=i.gender==="male"?[1]:i.gender==="female"?[2]:void 0;let Ve;if(i.locationType==="coordinate"&&i.latitude&&i.longitude)Ve={custom_locations:[{latitude:i.latitude,longitude:i.longitude,radius:i.radiusKm||25,distance_unit:"kilometer"}]};else if(i.locationType==="country")Ve={location_types:["home","recent"],countries:["VN"]};else if(i.locationType==="city"&&i.resolvedLocation)Ve={location_types:["home","recent"],cities:[{key:i.resolvedLocation.key,radius:i.radiusKm||i.resolvedLocation.minRadiusKm||17,distance_unit:"kilometer"}]};else{const mt=O.filter(rn=>rn.latitude&&rn.longitude).map(rn=>({latitude:rn.latitude,longitude:rn.longitude,radius:rn.radius||i.locationRadius||17,distance_unit:rn.distance_unit||"kilometer"}));if(mt.length>0)Ve={custom_locations:mt};else{const rn=O.filter(dn=>dn.type==="country").map(dn=>dn.key),yn=O.filter(dn=>dn.type==="city").map(dn=>({key:dn.key,...dn.radius&&{radius:dn.radius,distance_unit:dn.distance_unit||"kilometer"}}));rn.length>0||yn.length>0?(Ve={location_types:["home","recent"]},rn.length>0&&(Ve.countries=rn),yn.length>0&&(Ve.cities=yn)):Ve={location_types:["home","recent"],countries:["VN"]}}}const Rt=(await Kh.createAdSetStep({campaignId:u.campaignId,adSetName:`${i.campaignName} - Ad Set`,dailyBudget:i.budget,targeting:{geo_locations:Ve,age_min:i.ageMin,age_max:i.ageMax,genders:Ue,interests:i.interests.map(mt=>mt.id)},optimizationGoal:"CONVERSATIONS",billingEvent:"IMPRESSIONS",bidStrategy:"LOWEST_COST_WITHOUT_CAP",promotedObject:{page_id:ae},adsToken:Z,adAccountId:ce,currency:"VND"})).adSetId;d(mt=>({...mt,adSetId:Rt})),U(` To Ad Set thnh cng! Ad Set ID: ${Rt}`),a("step2-done"),e({title:" Bc 2 hon tt",description:`Ad Set ID: ${Rt}`})}catch(Z){console.error("Create adset error:",Z),U(` Li: ${Z.message}`),a("error"),e({title:" Li to Ad Set",description:Z.message,variant:"destructive"})}}},[i,l,u.campaignId,U,e]),oe=g.useCallback(async()=>{if(!(!i||!l||!u.adSetId)){a("step3-creating"),U(" Bc 3/3: ang to Creative + Ad...");try{const{adAccountId:Z,adsToken:ce,pageToken:ae,pageId:Ue}=await X();let Ve;(i.greetingText||i.iceBreakerQuestions&&i.iceBreakerQuestions.length>0)&&(Ve={page_welcome_message:{type:"VISUAL_EDITOR",version:2,landing_screen_type:"welcome_message",media_type:"text",text_format:{customer_action_type:"ice_breakers",message:{ice_breakers:(i.iceBreakerQuestions||[]).slice(0,4).filter(mt=>mt.trim()).map(mt=>({title:mt.trim(),response:mt.trim()})),quick_replies:[],text:(i.greetingText||"").trim()}},user_edit:!1,surface:"visual_editor_new"}});let ut;if(l.type==="image"){if(!l.hash)throw new Error("imageHash is required for image creative");ut=await MF(Z,ce,{pageId:Ue,name:i.adHeadline,message:i.adContent,imageHash:l.hash,messageTemplateData:Ve})}else{if(!l.id)throw new Error("videoId is required for video creative");const mt=l.thumbnailUrl||await Py(l.id,ae);ut=await DF(Z,ce,{pageId:Ue,title:i.adHeadline,message:i.adContent,videoId:l.id,thumbnailUrl:mt,messageTemplateData:Ve})}d(mt=>({...mt,creativeId:ut})),U(`To Creative thnh cng! ID: ${ut}`);const Rt=await LF(Z,ce,{adSetId:u.adSetId,name:`${i.campaignName} Ad`,creativeId:ut});d(mt=>({...mt,adId:Rt})),U(`Thnh cng! Ad ID: ${Rt}`),a("completed"),e({title:" Hon tt tt c!",description:"Chin dch  c to thnh cng"})}catch(Z){console.error("Create ad error:",Z),U(Z.message||"Khng th to Creative/Ad"),a("error"),e({title:" Li to Creative/Ad",description:Z.message,variant:"destructive"})}}},[i,l,u.adSetId,U,e]),ee=g.useCallback(async()=>{if(!(!i||!l))try{Im({type:"campaign-creation-started",message:"Bt u to chin dch"}),a("step1-creating"),U(" Bc 1: ang to Campaign..."),Im({type:"campaign-creation-progress",message:"ang to Campaign..."});const{adsToken:Z,adAccountId:ce,pageId:ae,pageToken:Ue}=await X(),ut=(await Kh.createCampaignStep({campaignName:i.campaignName,adsToken:Z,adAccountId:ce})).campaignId;d({campaignId:ut}),U(` Bc 1 hon tt! Campaign ID: ${ut}`),a("step1-done"),a("step2-creating"),U(" Bc 2: ang to Ad Set..."),Im({type:"campaign-creation-progress",message:"ang to Ad Set..."});const Rt=i.gender==="male"?[1]:i.gender==="female"?[2]:void 0;let mt;if(i.locationType==="coordinate"&&i.latitude&&i.longitude)mt={custom_locations:[{latitude:i.latitude,longitude:i.longitude,radius:i.radiusKm||25,distance_unit:"kilometer"}]};else if(i.locationType==="country")mt={location_types:["home","recent"],countries:["VN"]};else if(i.locationType==="city"&&i.resolvedLocation)mt={location_types:["home","recent"],cities:[{key:i.resolvedLocation.key,radius:i.radiusKm||i.resolvedLocation.minRadiusKm||17,distance_unit:"kilometer"}]};else{const Ce=O.filter(ye=>ye.latitude&&ye.longitude).map(ye=>({latitude:ye.latitude,longitude:ye.longitude,radius:ye.radius||i.locationRadius||17,distance_unit:ye.distance_unit||"kilometer"}));if(Ce.length>0)mt={custom_locations:Ce};else{const ye=O.filter(pt=>pt.type==="country").map(pt=>pt.key),dt=O.filter(pt=>pt.type==="city").map(pt=>({key:pt.key,...pt.radius&&{radius:pt.radius,distance_unit:pt.distance_unit||"kilometer"}}));ye.length>0||dt.length>0?(mt={location_types:["home","recent"]},ye.length>0&&(mt.countries=ye),dt.length>0&&(mt.cities=dt)):mt={location_types:["home","recent"],countries:["VN"]}}}const yn=(await Kh.createAdSetStep({campaignId:ut,adSetName:`${i.campaignName} - Ad Set`,dailyBudget:i.budget,targeting:{geo_locations:mt,age_min:i.ageMin,age_max:i.ageMax,genders:Rt,interests:i.interests.map(Ce=>Ce.id)},optimizationGoal:"CONVERSATIONS",billingEvent:"IMPRESSIONS",bidStrategy:"LOWEST_COST_WITHOUT_CAP",promotedObject:{page_id:ae},adsToken:Z,adAccountId:ce,currency:"VND"})).adSetId;d(Ce=>({...Ce,adSetId:yn})),U(` Bc 2 hon tt! Ad Set ID: ${yn}`),a("step2-done"),a("step3-creating"),U(" Bc 3: ang to Creative + Ad..."),Im({type:"campaign-creation-progress",message:"ang to Creative v Ad..."});let dn;(i.greetingText||i.iceBreakerQuestions&&i.iceBreakerQuestions.length>0)&&(dn={page_welcome_message:{type:"VISUAL_EDITOR",version:2,landing_screen_type:"welcome_message",media_type:"text",text_format:{customer_action_type:"ice_breakers",message:{ice_breakers:(i.iceBreakerQuestions||[]).slice(0,4).filter(Ce=>Ce.trim()).map(Ce=>({title:Ce.trim(),response:Ce.trim()})),quick_replies:[],text:(i.greetingText||"").trim()}},user_edit:!1,surface:"visual_editor_new"}});let Tt;if(l.type==="image"){if(!l.hash)throw new Error("imageHash is required");Tt=await MF(ce,Z,{pageId:ae,name:i.adHeadline,message:i.adContent,imageHash:l.hash,messageTemplateData:dn})}else{if(!l.id)throw new Error("videoId is required");const Ce=l.thumbnailUrl||await Py(l.id,Ue);Tt=await DF(ce,Z,{pageId:ae,title:i.adHeadline,message:i.adContent,videoId:l.id,thumbnailUrl:Ce,messageTemplateData:dn})}d(Ce=>({...Ce,creativeId:Tt})),U(` To Creative thnh cng! ID: ${Tt}`);const ve=await LF(ce,Z,{adSetId:yn,name:`${i.campaignName} Ad`,creativeId:Tt});d(Ce=>({...Ce,adId:ve})),U(` Bc 3 hon tt! Ad ID: ${ve}`),U(" ang bt Campaign v Ad..."),await KT(Z,ut,"ACTIVE"),U(`  bt Campaign ID: ${ut}`),await KT(Z,ve,"ACTIVE"),U(`  bt Ad ID: ${ve}`),Im({type:"campaign-creation-completed",data:{campaignId:ut,adSetId:yn,adId:ve},message:"Chin dch  c to v ng thnh cng!"}),a("completed"),e({title:" ng thnh cng!",description:"Chin dch  c to v ng thnh cng!"})}catch(Z){console.error("Auto create error:",Z),U(` Li: ${Z.message}`),Im({type:"campaign-creation-failed",error:Z.message}),a("error"),e({title:" Li to chin dch",description:Z.message,variant:"destructive"})}},[i,l,U,e]);g.useEffect(()=>{A&&i&&l&&(P(!1),ee())},[A,i,l,ee]);const re=r==="parsing"||r==="step1-creating"||r==="step2-creating"||r==="step3-creating";return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsx(Be,{children:" To QC tin nhn mi - To ni dung qung co mi"})}),s.jsxs(Re,{className:"space-y-4",children:[(r==="step1-creating"||r==="step2-creating"||r==="step3-creating")&&s.jsx(Oe,{className:"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800",children:s.jsx(Re,{className:"py-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx(zt,{className:"w-8 h-8 animate-spin text-blue-600"}),s.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"ang to qung co..."})]})})}),r==="parsing"&&s.jsx(Oe,{className:"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800",children:s.jsx(Re,{className:"py-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx(zt,{className:"w-8 h-8 animate-spin text-blue-600"}),s.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"ang phn tch vi AI..."})]})})}),(r==="idle"||r==="error")&&s.jsxs(s.Fragment,{children:[s.jsx(Oo,{value:t,onChange:Z=>n(Z.target.value),placeholder:`Tn chin dch: Spa H Ni
Ngn sch: 400k/ngy
 tui: 25-40
Gii tnh: n
a im: H Ni
S thch: lm p, spa, thm m vin

Ni dung qung co:
Khuyn mi 50% dch v lm p thng 3! t lch ngay!

Tiu : Gim 50% - Spa H Ni

Li cho tin nhn: Xin cho! Cm n bn  quan tm. Mnh c th h tr bn iu g?

Cu hi gi :
- Gi bao nhiu?
- a ch  u?
- C khuyn mi khng?`,rows:16,className:"font-mono text-sm",disabled:re}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-sm font-medium",children:" Ti media (ty chn):"}),l&&s.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-1 rounded",children:[l.type==="image"?s.jsxs(s.Fragment,{children:[s.jsx(Lm,{className:"w-3 h-3"}),"  ti nh"]}):s.jsxs(s.Fragment,{children:[s.jsx(Fm,{className:"w-3 h-3"}),"  ti video"]}),s.jsx(J,{onClick:()=>{c(null),m(!1)},variant:"ghost",size:"icon",className:"h-4 w-4 p-0 hover:bg-transparent",children:s.jsx(ji,{className:"w-3 h-3"})})]})]}),!l&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{onClick:se,variant:"ghost",size:"icon",disabled:re||w,className:"h-8 w-8",title:"Ti nh ln",children:w?s.jsx(zt,{className:"w-4 h-4 animate-spin"}):s.jsx(Lm,{className:"w-4 h-4"})}),s.jsx(J,{onClick:se,variant:"ghost",size:"icon",disabled:re||w,className:"h-8 w-8",title:"Ti video ln",children:w?s.jsx(zt,{className:"w-4 h-4 animate-spin"}):s.jsx(Fm,{className:"w-4 h-4"})})]})]})}),s.jsxs("div",{className:"text-center p-8 text-muted-foreground",children:[s.jsx(Zr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Vui lng s dng Tr l AI  to chin dch creative"})]})]}),i&&r==="parsed"&&s.jsxs(Oe,{className:"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800",children:[s.jsx(Fe,{className:"pb-3",children:s.jsx(Be,{className:"text-md",children:" Thng tin  phn tch:"})}),s.jsxs(Re,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Chin dch:"})," ",i.campaignName]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Ngn sch:"})," ",i.budget.toLocaleString("vi-VN")," VND"]}),s.jsxs("div",{children:[s.jsx("strong",{children:" tui:"})," ",i.ageMin,"-",i.ageMax]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Gii tnh:"})," ",i.gender==="all"?"Tt c":i.gender==="male"?"Nam":"N"]})]}),s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsx("strong",{children:" V tr targeting:"}),O.length>0&&s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-xs space-y-1",children:O.map((Z,ce)=>s.jsxs("div",{className:"flex items-center gap-2",children:[Z.type==="country"&&s.jsxs("span",{children:[" ",Z.name]}),Z.type==="city"&&s.jsxs("span",{children:[" ",Z.name," (",Z.radius,"km)"]}),Z.type==="coordinates"&&s.jsxs("span",{children:[" Ta : ",Z.latitude,", ",Z.longitude," (",Z.radius,"km)"]})]},ce))}),s.jsx(hR,{accessToken:(_==null?void 0:_.adsToken)||"",adAccountId:(_==null?void 0:_.adAccountId)||"",selectedLocations:O,onLocationChange:T}),$==="locationRadius"&&s.jsxs("div",{className:"mt-2 p-3 rounded border border-orange-300 bg-orange-50 dark:bg-orange-900/20",children:[s.jsx("p",{className:"text-xs mb-2",children:z||"Vui lng nhp bn knh (km) cho v tr  chn"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{type:"number",min:(i==null?void 0:i.locationType)==="coordinate"?1:17,placeholder:(i==null?void 0:i.locationType)==="coordinate"?">= 1km":">= 17km",value:B,onChange:Z=>G(Z.target.value),className:"w-32"}),s.jsx(J,{size:"sm",onClick:ue,children:"p dng"})]})]}),O.length===0&&s.jsx("p",{className:"text-xs text-orange-600",children:" Cha chn v tr (mc nh s dng Vit Nam)"})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"S thch:"})," ",i.interests.map(Z=>Z.name).join(", ")||"Khng c"]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"Ni dung:"}),s.jsx("div",{className:"mt-1 whitespace-pre-wrap bg-muted/30 p-2 rounded text-xs max-h-40 overflow-y-auto",children:i.adContent})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"Tiu :"})," ",i.adHeadline]}),i.greetingText&&s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"Li cho:"})," ",i.greetingText]}),i.iceBreakerQuestions&&i.iceBreakerQuestions.length>0&&s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"Cu hi gi :"}),s.jsx("ul",{className:"list-disc list-inside ml-2",children:i.iceBreakerQuestions.map((Z,ce)=>s.jsx("li",{children:Z},ce))})]}),l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"border-t pt-3 mt-3",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:" Media  ti ln:"}),s.jsx("div",{className:"border rounded-lg overflow-hidden w-[30%]",children:l.type==="image"?s.jsxs("div",{className:"relative aspect-video flex items-center justify-center bg-muted",children:[s.jsx("img",{src:l.preview,alt:"Preview",className:"w-full h-full object-contain"}),s.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs flex items-center gap-1",children:[s.jsx(Lm,{className:"w-3 h-3"}),"nh"]})]}):s.jsxs("div",{className:"relative aspect-video flex items-center justify-center bg-muted",children:[s.jsx("video",{src:l.preview,className:"w-full h-full object-contain",controls:!0}),s.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs flex items-center gap-1",children:[s.jsx(Fm,{className:"w-3 h-3"}),"Video"]})]})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{onClick:se,variant:"outline",size:"lg",className:"flex-1",children:[s.jsx(Hp,{className:"w-4 h-4 mr-2"}),"Ti li"]}),s.jsxs(J,{onClick:ee,size:"lg",className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[s.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Xc nhn & ng t ng"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-t pt-3 mt-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-medium text-orange-600",children:" Cha c media:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{onClick:se,variant:"ghost",size:"icon",disabled:w,className:"h-8 w-8",title:"Ti nh ln",children:w?s.jsx(zt,{className:"w-4 h-4 animate-spin"}):s.jsx(Lm,{className:"w-4 h-4"})}),s.jsx(J,{onClick:se,variant:"ghost",size:"icon",disabled:w,className:"h-8 w-8",title:"Ti video ln",children:w?s.jsx(zt,{className:"w-4 h-4 animate-spin"}):s.jsx(Fm,{className:"w-4 h-4"})})]})]})}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(J,{onClick:F,variant:"outline",size:"lg",className:"flex-1",children:[s.jsx(ji,{className:"w-4 h-4 mr-2"}),"Sa li"]})})]})]})]}),r==="step1-done"&&s.jsxs(Oe,{className:"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-800",children:[s.jsx(Fe,{className:"pb-3",children:s.jsxs(Be,{className:"text-md flex items-center gap-2",children:[s.jsx(Nn,{className:"w-5 h-5 text-green-600"})," Bc 1 hon tt"]})}),s.jsxs(Re,{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"Campaign ID:"})," ",u.campaignId]}),s.jsx(J,{onClick:Ne,size:"lg",className:"w-full",children:"Bc 2: To Ad Set"})]})]}),r==="step2-done"&&s.jsxs(Oe,{className:"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-800",children:[s.jsx(Fe,{className:"pb-3",children:s.jsxs(Be,{className:"text-md flex items-center gap-2",children:[s.jsx(Nn,{className:"w-5 h-5 text-green-600"})," Bc 2 hon tt"]})}),s.jsxs(Re,{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"Campaign ID:"})," ",u.campaignId]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"Ad Set ID:"})," ",u.adSetId]}),s.jsx(J,{onClick:oe,size:"lg",className:"w-full",children:"Bc 3: To Creative + Ad"})]})]}),i&&l&&r==="uploaded"&&s.jsxs(Oe,{className:"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-800",children:[s.jsx(Fe,{className:"pb-3",children:s.jsxs(Be,{className:"text-md flex items-center gap-2",children:[s.jsx(Nn,{className:"w-5 h-5 text-green-600"})," Sn sng to chin dch"]})}),s.jsxs(Re,{className:"space-y-3",children:[s.jsx("div",{className:"border rounded-lg overflow-hidden w-[30%]",children:l.type==="image"?s.jsxs("div",{className:"relative aspect-video flex items-center justify-center bg-muted",children:[s.jsx("img",{src:l.preview,alt:"Preview",className:"w-full h-full object-contain"}),s.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs flex items-center gap-1",children:[s.jsx(Lm,{className:"w-3 h-3"}),"nh"]})]}):s.jsxs("div",{className:"relative aspect-video flex items-center justify-center bg-muted",children:[s.jsx("video",{src:l.preview,className:"w-full h-full object-contain",controls:!0}),s.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs flex items-center gap-1",children:[s.jsx(Fm,{className:"w-3 h-3"}),"Video"]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{onClick:xe,size:"lg",className:"flex-1",children:[s.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Bc 1: To Campaign"]}),s.jsxs(J,{onClick:se,variant:"outline",size:"lg",children:[s.jsx(Hp,{className:"w-4 h-4 mr-2"}),"Ti li"]})]})]})]}),r==="completed"&&s.jsxs(Oe,{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 border-2 border-green-300 dark:border-green-700",children:[s.jsxs(Fe,{className:"pb-3",children:[s.jsxs(Be,{className:"text-lg flex items-center gap-2 text-green-700 dark:text-green-300",children:[s.jsx(Nn,{className:"w-6 h-6 animate-pulse"})," ng qung co thnh cng!"]}),s.jsx(sn,{className:"text-green-600 dark:text-green-400 font-medium",children:"Campaign  c to v ang chy ACTIVE"})]}),s.jsxs(Re,{className:"space-y-3",children:[s.jsxs("div",{className:"bg-white/70 dark:bg-black/20 rounded-lg p-4 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-muted-foreground",children:"Campaign ID:"}),s.jsx("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded",children:u.campaignId})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-muted-foreground",children:"Ad Set ID:"}),s.jsx("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded",children:u.adSetId})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-muted-foreground",children:"Creative ID:"}),s.jsx("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded",children:u.creativeId})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-muted-foreground",children:"Ad ID:"}),s.jsx("span",{className:"font-mono text-xs bg-muted px-2 py-1 rounded",children:u.adId})]})]}),s.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded-lg p-3 text-sm",children:[s.jsxs("p",{className:"text-green-800 dark:text-green-200 font-medium",children:[" Trng thi: ",s.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"ANG CHY"})]}),s.jsx("p",{className:"text-green-700 dark:text-green-300 text-xs mt-1",children:"Campaign v Ad  c bt t ng. Bn c th kim tra trong Facebook Ads Manager."})]}),s.jsxs(J,{onClick:F,className:"w-full mt-4",size:"lg",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"}),"To chin dch mi"]})]})]})]})]}),_&&s.jsx(Qje,{open:h,onClose:()=>m(!1),adAccountId:_.adAccountId,adsToken:_.adsToken,pageToken:_.pageToken,onUploadSuccess:D})]})};var WS="Tabs",[Jje,rQe]=ga(WS,[ev]),aG=ev(),[Zje,pR]=Jje(WS),sG=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=zf(l),[h,m]=_i({prop:r,onChange:a,defaultProp:i??"",caller:WS});return s.jsx(Zje,{scope:n,baseId:Fa(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(it.div,{dir:d,"data-orientation":o,...u,ref:t})})});sG.displayName=WS;var iG="TabsList",oG=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=pR(iG,n),o=aG(n);return s.jsx(zI,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(it.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});oG.displayName=iG;var lG="TabsTrigger",cG=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=pR(lG,n),l=aG(n),c=hG(o.baseId,r),u=fG(o.baseId,r),d=r===o.value;return s.jsx(HI,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(it.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:We(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:We(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:We(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(r)})})})});cG.displayName=lG;var uG="TabsContent",dG=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,l=pR(uG,n),c=hG(l.baseId,r),u=fG(l.baseId,r),d=r===l.value,h=g.useRef(d);return g.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Aa,{present:a||d,children:({present:m})=>s.jsx(it.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});dG.displayName=uG;function hG(e,t){return`${e}-trigger-${t}`}function fG(e,t){return`${e}-content-${t}`}var e1e=sG,mG=oG,pG=cG,gG=dG;const ng=e1e,rg=g.forwardRef(({className:e,...t},n)=>s.jsx(mG,{ref:n,className:je("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));rg.displayName=mG.displayName;const gi=g.forwardRef(({className:e,...t},n)=>s.jsx(pG,{ref:n,className:je("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));gi.displayName=pG.displayName;const di=g.forwardRef(({className:e,...t},n)=>s.jsx(gG,{ref:n,className:je("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));di.displayName=gG.displayName;var vG=["PageUp","PageDown"],yG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xG={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},tv="Slider",[eP,t1e,n1e]=M0(tv),[bG,aQe]=ga(tv,[n1e]),[r1e,qS]=bG(tv),wG=g.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:v,...x}=e,b=g.useRef(new Set),_=g.useRef(0),w=o==="horizontal"?a1e:s1e,[N=[],k]=_i({prop:d,defaultProp:u,onChange:$=>{var z;(z=[...b.current][_.current])==null||z.focus(),h($)}}),C=g.useRef(N);function A($){const L=u1e(N,$);T($,L)}function P($){T($,_.current)}function O(){const $=C.current[_.current];N[_.current]!==$&&m(N)}function T($,L,{commit:z}={commit:!1}){const W=m1e(i),B=p1e(Math.round(($-r)/i)*i+r,W),G=Mx(B,[r,a]);k((U=[])=>{const F=l1e(U,G,L);if(f1e(F,c*i)){_.current=F.indexOf(G);const K=String(F)!==String(U);return K&&z&&m(F),K?F:U}else return U})}return s.jsx(r1e,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:a,valueIndexToChangeRef:_,thumbs:b.current,values:N,orientation:o,form:v,children:s.jsx(eP.Provider,{scope:e.__scopeSlider,children:s.jsx(eP.Slot,{scope:e.__scopeSlider,children:s.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:t,onPointerDown:We(x.onPointerDown,()=>{l||(C.current=N)}),min:r,max:a,inverted:p,onSlideStart:l?void 0:A,onSlideMove:l?void 0:P,onSlideEnd:l?void 0:O,onHomeKeyDown:()=>!l&&T(r,0,{commit:!0}),onEndKeyDown:()=>!l&&T(a,N.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:L})=>{if(!l){const B=vG.includes($.key)||$.shiftKey&&yG.includes($.key)?10:1,G=_.current,U=N[G],F=i*B*L;T(U+F,G,{commit:!0})}}})})})})});wG.displayName=tv;var[_G,jG]=bG(tv,{startEdge:"left",endEdge:"right",size:"width",direction:1}),a1e=g.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[h,m]=g.useState(null),p=Dt(t,w=>m(w)),v=g.useRef(void 0),x=zf(a),b=x==="ltr",_=b&&!i||!b&&i;function j(w){const N=v.current||h.getBoundingClientRect(),k=[0,N.width],A=gR(k,_?[n,r]:[r,n]);return v.current=N,A(w-N.left)}return s.jsx(_G,{scope:e.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:s.jsx(SG,{dir:x,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const N=j(w.clientX);o==null||o(N)},onSlideMove:w=>{const N=j(w.clientX);l==null||l(N)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:w=>{const k=xG[_?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:k?-1:1})}})})}),s1e=g.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=g.useRef(null),h=Dt(t,d),m=g.useRef(void 0),p=!a;function v(x){const b=m.current||d.current.getBoundingClientRect(),_=[0,b.height],w=gR(_,p?[r,n]:[n,r]);return m.current=b,w(x-b.top)}return s.jsx(_G,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:s.jsx(SG,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const b=v(x.clientY);i==null||i(b)},onSlideMove:x=>{const b=v(x.clientY);o==null||o(b)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:x=>{const _=xG[p?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:_?-1:1})}})})}),SG=g.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=qS(tv,n);return s.jsx(it.span,{...u,ref:t,onKeyDown:We(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):vG.concat(yG).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:We(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:We(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:We(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),NG="SliderTrack",kG=g.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=qS(NG,n);return s.jsx(it.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});kG.displayName=NG;var tP="SliderRange",CG=g.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=qS(tP,n),i=jG(tP,n),o=g.useRef(null),l=Dt(t,o),c=a.values.length,u=a.values.map(m=>TG(m,a.min,a.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return s.jsx(it.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:l,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});CG.displayName=tP;var nP="SliderThumb",AG=g.forwardRef((e,t)=>{const n=t1e(e.__scopeSlider),[r,a]=g.useState(null),i=Dt(t,l=>a(l)),o=g.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return s.jsx(i1e,{...e,ref:i,index:o})}),i1e=g.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=qS(nP,n),l=jG(nP,n),[c,u]=g.useState(null),d=Dt(t,j=>u(j)),h=c?o.form||!!c.closest("form"):!0,m=B0(c),p=o.values[r],v=p===void 0?0:TG(p,o.min,o.max),x=c1e(r,o.values.length),b=m==null?void 0:m[l.size],_=b?d1e(b,v,l.direction):0;return g.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${_}px)`},children:[s.jsx(eP.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(it.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:p===void 0?{display:"none"}:e.style,onFocus:We(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&s.jsx(EG,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},r)]})});AG.displayName=nP;var o1e="RadioBubbleInput",EG=g.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=g.useRef(null),i=Dt(a,r),o=Z0(t);return g.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(it.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});EG.displayName=o1e;function l1e(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function TG(e,t,n){const i=100/(n-t)*(e-t);return Mx(i,[0,100])}function c1e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function u1e(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function d1e(e,t,n){const r=e/2,i=gR([0,50],[0,r]);return(r-i(t)*n)*n}function h1e(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function f1e(e,t){if(t>0){const n=h1e(e);return Math.min(...n)>=t}return!0}function gR(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function m1e(e){return(String(e).split(".")[1]||"").length}function p1e(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var PG=wG,g1e=kG,v1e=CG,y1e=AG;const rP=g.forwardRef(({className:e,...t},n)=>s.jsxs(PG,{ref:n,className:je("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(g1e,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(v1e,{className:"absolute h-full bg-primary"})}),s.jsx(y1e,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));rP.displayName=PG.displayName;const x1e=()=>{const[e,t]=g.useState("file"),[n,r]=g.useState(""),[a,i]=g.useState(""),[o,l]=g.useState(!1),[c,u]=g.useState([]),[d,h]=g.useState([]),[m,p]=g.useState(""),[v,x]=g.useState(30),[b,_]=g.useState(""),[j,w]=g.useState([]),[N,k]=g.useState(""),[C,A]=g.useState("VN"),[P,O]=g.useState(1),[T,$]=g.useState([]),[L,z]=g.useState(null),{user:W}=Mn();g.useEffect(()=>{(async()=>{if(!(W!=null&&W.id))return;const D=(await Vr(W.id)).find(Y=>Y.is_active);D&&z({id:D.account_id,token:D.access_token})})()},[]),g.useEffect(()=>{(async()=>{if(!(W!=null&&W.id))return;const se=await Qp(W.id);if(se&&se.length>0){const D=se.map(Y=>({id:Y.page_id,name:Y.page_name||Y.page_id}));w(D),b||_(D[0].id)}})()},[]),g.useEffect(()=>{(async()=>{if(!(e!=="lookalike"||!L))try{const se=await _K(L.id,L.token);$(se)}catch(se){console.error("Failed to load audiences:",se)}})()},[e,L]);const B=g.useCallback((X,se,D)=>{u(Y=>[...Y,{id:Date.now().toString(),step:X,type:se,message:D,timestamp:new Date}])},[]),G=async X=>{var ue;const se=(ue=X.target.files)==null?void 0:ue[0];if(!se)return;if(!["text/plain","text/csv"].includes(se.type)&&!se.name.match(/\.(txt|csv)$/i)){ne.error("Vui lng chn file .txt hoc .csv");return}p(se.name);const Y=new FileReader;Y.onload=xe=>{var ee;const oe=((ee=xe.target)==null?void 0:ee.result).split(/\r?\n/).filter(re=>re.trim());h(oe),ne.success(` ti ${oe.length} s in thoi`)},Y.readAsText(se)},U=async()=>{if(!L){ne.error("Vui lng chn ti khon qung co trong Ci t");return}if(!n.trim()){ne.error("Vui lng nhp tn i tng");return}l(!0),u([]);try{if(e==="file"){if(d.length===0)throw new Error("Vui lng ti tp ST.");B("Bc 1","info","ang to container i tng...");const X=await xK(L.id,L.token,n,a||"i tng t tp ST");B("Bc 1","success",`To container thnh cng! ID: ${X}`),B("Bc 2","info",`Chun b thm ${d.length} ngi dng...`),await bK(X,L.token,d),B("Bc 2","success"," gi yu cu thm ngi dng thnh cng!"),B("Hon tt","success","Tp i tng s c x l trong vi pht."),ne.success("To i tng thnh cng!")}else if(e==="page_messengers"){if(!b)throw new Error("Khng tm thy Page ID. Vui lng kim tra ci t.");B("ang to","info","ang to i tng ngi nhn tin...");const X=await wK(L.id,L.token,n,a||`Ngi nhn tin trong ${v} ngy`,b,v);B("Hon tt","success",`To i tng thnh cng! ID: ${X}`),ne.success("To i tng ngi nhn tin thnh cng!")}else{if(!N)throw new Error("Vui lng chn mt i tng ngun.");B("ang to","info","ang to i tng tng t...");const X=await jK(L.id,L.token,n,a||`Lookalike ${P}% t i tng ngun`,N,C,P);B("Hon tt","success",`To i tng tng t thnh cng! ID: ${X}`),ne.success("To i tng tng t thnh cng!")}r(""),i(""),h([]),p("")}catch(X){const se=X.message||" xy ra li khng xc nh";B("Li","error",se),ne.error(se),console.error("Error creating audience:",X)}finally{l(!1)}},F=X=>{switch(X){case"success":return s.jsx(Nn,{className:"w-4 h-4 text-green-600"});case"error":return s.jsx(is,{className:"w-4 h-4 text-red-600"});default:return s.jsx(id,{className:"w-4 h-4 text-blue-600"})}},K=X=>{switch(X){case"success":return"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-800";case"error":return"bg-red-50 dark:bg-red-950/30 border-red-200 dark:border-red-800";default:return"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800"}};return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(kx,{className:"w-5 h-5"}),"To i Tng Qung Co"]}),s.jsx(sn,{children:"To custom audience t file ST, ngi nhn tin, hoc lookalike audience"})]}),s.jsx(Re,{children:s.jsxs(ng,{value:e,onValueChange:X=>t(X),children:[s.jsxs(rg,{className:"grid w-full grid-cols-3",children:[s.jsxs(gi,{value:"file",children:[s.jsx(Hp,{className:"w-4 h-4 mr-2"}),"Tp ST"]}),s.jsxs(gi,{value:"page_messengers",children:[s.jsx(yl,{className:"w-4 h-4 mr-2"}),"Ngi nhn tin"]}),s.jsxs(gi,{value:"lookalike",children:[s.jsx(kx,{className:"w-4 h-4 mr-2"}),"Tng t"]})]}),s.jsxs("div",{className:"space-y-4 mt-6",children:[s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"audience-name",children:"Tn i tng *"}),s.jsx(Ke,{id:"audience-name",value:n,onChange:X=>r(X.target.value),placeholder:"V d: Khch hng tim nng Q1 2025",disabled:o})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"description",children:"M t"}),s.jsx(Oo,{id:"description",value:a,onChange:X=>i(X.target.value),placeholder:"M t ngn v i tng ny...",disabled:o,rows:2})]})]}),s.jsxs(di,{value:"file",className:"space-y-4",children:[s.jsxs(Ka,{children:[s.jsx(id,{className:"w-4 h-4"}),s.jsx(Ga,{children:"Ti ln file .txt hoc .csv cha danh sch s in thoi (mi s mt dng). H thng s t ng chun ha v m ha ST trc khi gi ln Facebook."})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"phone-file",children:"Chn tp ST *"}),s.jsx(Ke,{id:"phone-file",type:"file",accept:".txt,.csv",onChange:G,disabled:o,className:"cursor-pointer"}),m&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[" ",m," - ",d.length," ST"]})]})]}),s.jsxs(di,{value:"page_messengers",className:"space-y-4",children:[s.jsxs(Ka,{children:[s.jsx(id,{className:"w-4 h-4"}),s.jsx(Ga,{children:"T ng to i tng gm nhng ngi  nhn tin cho Page trong khong thi gian chn. Facebook s t ng cp nht danh sch ny."})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"page-source",children:"Ngun Page *"}),s.jsxs(kn,{value:b,onValueChange:_,disabled:o||j.length===0,children:[s.jsx(wn,{children:s.jsx(Cn,{placeholder:"Chn Page..."})}),s.jsx(_n,{children:j.map(X=>s.jsx(st,{value:X.id,children:X.name},X.id))})]}),j.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Khng tm thy Page. Vui lng kt ni Page trong Ci t."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{children:["S ngy gi li: ",v," ngy"]}),s.jsx(rP,{value:[v],onValueChange:X=>x(X[0]),min:1,max:365,step:1,disabled:o,className:"w-full"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Bao gm ngi dng  nhn tin trong ",v," ngy qua"]})]})]}),s.jsxs(di,{value:"lookalike",className:"space-y-4",children:[s.jsxs(Ka,{children:[s.jsx(id,{className:"w-4 h-4"}),s.jsx(Ga,{children:"To i tng mi c hnh vi tng t vi mt i tng ngun  c. 1% = ging nht nhng nh, 10% = ln hn nhng  tng ng thp hn."})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"source-audience",children:"i tng ngun *"}),s.jsxs(kn,{value:N,onValueChange:k,disabled:o||T.length===0,children:[s.jsx(wn,{children:s.jsx(Cn,{placeholder:"Chn i tng ngun..."})}),s.jsx(_n,{children:T.map(X=>s.jsx(st,{value:X.id,children:X.name},X.id))})]}),T.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"ang ti danh sch i tng..."})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"country",children:"Quc gia"}),s.jsxs(kn,{value:C,onValueChange:A,disabled:o,children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"VN",children:"Vit Nam"}),s.jsx(st,{value:"US",children:"United States"}),s.jsx(st,{value:"TH",children:"Thailand"}),s.jsx(st,{value:"SG",children:"Singapore"}),s.jsx(st,{value:"MY",children:"Malaysia"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ge,{children:["Quy m: ",P,"%"]}),s.jsx(rP,{value:[P],onValueChange:X=>O(X[0]),min:1,max:10,step:1,disabled:o,className:"w-full"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[P,"% dn s ",C==="VN"?"Vit Nam":C]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx(J,{onClick:U,disabled:o||!L||!n.trim()||e==="file"&&d.length===0||e==="page_messengers"&&!b||e==="lookalike"&&!N,className:"w-full",children:o?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}),"ang to..."]}):"To i tng"})})]})})]}),c.length>0&&s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsx(Be,{className:"text-base",children:"Logs hot ng"})}),s.jsx(Re,{className:"space-y-2",children:c.map(X=>s.jsx("div",{className:`p-3 rounded-lg border ${K(X.type)}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[F(X.type),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium",children:X.step}),s.jsx("p",{className:"text-sm text-muted-foreground break-words",children:X.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:X.timestamp.toLocaleTimeString("vi-VN")})]})]})},X.id))})]})]})};function b1e({campaigns:e,accessToken:t,onSelectItem:n,selectedItem:r,onRefresh:a}){const[i,o]=g.useState(new Set),[l,c]=g.useState(new Set),[u,d]=g.useState({}),[h,m]=g.useState({}),[p,v]=g.useState({}),x=async _=>{const j=new Set(i);if(j.has(_))j.delete(_);else if(j.add(_),!u[_]||u[_].length===0){v(w=>({...w,[_]:!0}));try{const w=await US(_,t);d(N=>({...N,[_]:w})),v(N=>({...N,[_]:!1}))}catch(w){console.error("Error fetching ad sets:",w),v(N=>({...N,[_]:!1}))}}o(j)},b=async _=>{const j=new Set(l);if(j.has(_))j.delete(_);else if(j.add(_),!h[_]||h[_].length===0){v(w=>({...w,[_]:!0}));try{const w=await kf(_,t);m(N=>({...N,[_]:w})),v(N=>({...N,[_]:!1}))}catch(w){console.error("Error fetching ads:",w),v(N=>({...N,[_]:!1}))}}c(j)};return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm font-medium",children:"Cu trc Campaign"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:a,children:" Refresh"})]}),s.jsx(As,{className:"h-[600px] border rounded-lg",children:s.jsx("div",{className:"p-2 space-y-1",children:e.map(_=>s.jsxs("div",{children:[s.jsxs("div",{className:je("flex items-start gap-2 p-3 rounded hover:bg-accent cursor-pointer transition-colors",(r==null?void 0:r.type)==="campaign"&&(r==null?void 0:r.id)===_.id&&"bg-accent"),onClick:()=>n({type:"campaign",id:_.id,name:_.name}),children:[s.jsx(J,{variant:"ghost",size:"icon",className:"h-5 w-5 p-0 flex-shrink-0 mt-0.5",onClick:j=>{j.stopPropagation(),x(_.id)},children:i.has(_.id)?s.jsx(eu,{className:"h-4 w-4"}):s.jsx(rj,{className:"h-4 w-4"})}),i.has(_.id)?s.jsx(jce,{className:"h-4 w-4 text-blue-600 flex-shrink-0 mt-0.5"}):s.jsx(Sce,{className:"h-4 w-4 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm truncate",children:_.name}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:_.id})]})]}),i.has(_.id)&&u[_.id]&&s.jsx("div",{className:"ml-6 space-y-1 mt-1",children:u[_.id].map(j=>s.jsxs("div",{children:[s.jsxs("div",{className:je("flex items-start gap-2 p-3 rounded hover:bg-accent cursor-pointer transition-colors",(r==null?void 0:r.type)==="adset"&&(r==null?void 0:r.id)===j.id&&"bg-accent"),onClick:()=>n({type:"adset",id:j.id,name:j.name}),children:[s.jsx(J,{variant:"ghost",size:"icon",className:"h-5 w-5 p-0 flex-shrink-0 mt-0.5",onClick:w=>{w.stopPropagation(),b(j.id)},children:l.has(j.id)?s.jsx(eu,{className:"h-4 w-4"}):s.jsx(rj,{className:"h-4 w-4"})}),s.jsx(pce,{className:"h-4 w-4 text-green-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm truncate",children:j.name}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:j.id})]})]}),l.has(j.id)&&h[j.id]&&s.jsx("div",{className:"ml-6 space-y-1 mt-1",children:h[j.id].map(w=>s.jsxs("div",{className:je("flex items-start gap-2 p-3 rounded hover:bg-accent cursor-pointer transition-colors",(r==null?void 0:r.type)==="ad"&&(r==null?void 0:r.id)===w.id&&"bg-accent"),onClick:()=>n({type:"ad",id:w.id,name:w.name}),children:[s.jsx(Fce,{className:"h-3 w-3 ml-5 text-orange-600 flex-shrink-0 mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm truncate",children:w.name}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:w.id})]})]},w.id))})]},j.id))})]},_.id))})})]})}function w1e({open:e,onOpenChange:t,sourceType:n,sourceName:r,targetName:a,campaignQuantity:i,adsetQuantity:o,adQuantity:l,estimatedObjects:c,targetStatus:u,onConfirm:d}){return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"sm:max-w-lg",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:" Xc nhn nhn bn"}),s.jsx(Ca,{children:"Kim tra thng tin trc khi thc hin nhn bn"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"T:"}),s.jsx("span",{className:"font-medium",children:r})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(mce,{className:"h-4 w-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Tn mi:"}),s.jsx("span",{className:"font-medium text-primary",children:a})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Trng thi:"}),s.jsx(Ze,{variant:u==="ACTIVE"?"default":"secondary",children:u==="ACTIVE"?" ACTIVE":" PAUSED"})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>t(!1),children:"Hy"}),s.jsx(J,{onClick:d,className:"bg-primary",children:" Xc nhn nhn bn"})]})]})})}function _1e(){const{user:e}=Mn(),[t,n]=g.useState([]),[r,a]=g.useState(null),[i,o]=g.useState(""),[l,c]=g.useState(1),[u,d]=g.useState(1),[h,m]=g.useState(1),[p,v]=g.useState(1),[x,b]=g.useState("PAUSED"),[_,j]=g.useState(""),[w,N]=g.useState(""),[k,C]=g.useState(""),[A,P]=g.useState(!1),[O,T]=g.useState(!1);g.useEffect(()=>{K()},[]),g.useEffect(()=>{r&&(c(1),d(1),m(1),v(1))},[r]),g.useEffect(()=>{r&&r.name&&o(Gy(r.name))},[r]);const[$,L]=g.useState(null),[z,W]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!r||r.type!=="campaign"||!w){L(null);return}try{W(!0);const oe=await US(r.id,w),ee=oe.length||0;let re=0;ee>0&&(re=(await Promise.all(oe.map(ce=>kf(ce.id,w).catch(()=>[])))).reduce((ce,ae)=>ce+((ae==null?void 0:ae.length)||0),0)),L({adsets:ee,ads:re})}catch(oe){console.warn("Khng th m s lng i tng trong campaign:",oe),L(null)}finally{W(!1)}})()},[r,w]);const[B,G]=g.useState(null),[U,F]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!r||r.type!=="adset"||!w){G(null);return}try{F(!0);const oe=await kf(r.id,w);G(oe.length||0)}catch(oe){console.warn("Khng th m s ads trong ad set:",oe),G(null)}finally{F(!1)}})()},[r,w]);const K=async()=>{if(!(e!=null&&e.id))return;const oe=(await Vr(e.id)).find(ee=>ee.is_active);oe?(N(oe.access_token),C(oe.account_id),X(oe.account_id,oe.access_token)):xo({title:"Li",description:"Vui lng kch hot ti khon qung co trong Settings",variant:"destructive",duration:3e3})},X=async(Ne,oe)=>{try{P(!0);const ee=await $_e(Ne,oe);n(ee),ee.length===0&&xo({title:"Thng bo",description:"Khng tm thy campaigns no",duration:2e3})}catch(ee){console.error("Error loading campaigns:",ee),xo({title:"Li",description:ee instanceof Error?ee.message:"Khng th ti danh sch campaigns",variant:"destructive",duration:3e3})}finally{P(!1)}},se=Ne=>{a(Ne)},D=()=>{if(!r){xo({title:"Li",description:"Vui lng chn item cn nhn bn",variant:"destructive",duration:2e3});return}if(!i.trim()){xo({title:"Li",description:"Vui lng nhp tn mi",variant:"destructive",duration:2e3});return}T(!0)},Y=async()=>{var Ne;if(!r||!w||!k){xo({title:"Li",description:"Thiu thng tin cn thit  nhn bn",variant:"destructive"});return}T(!1);try{if(r.type==="campaign"){const oe=[];for(let ee=0;ee<l;ee++){const re=l>1?`${i} - Campaign ${ee+1}`:i,Z=await NK({campaignId:r.id,newName:re,deepCopy:!1,statusOption:x,adsetQuantity:u,adQuantity:h,accessToken:w,adAccountId:k,onProgress:()=>{}});if(Z.success&&Z.campaignId)oe.push(re);else throw new Error(Z.message||`Khng th nhn bn chin dch ${ee+1}`);ee<l-1&&await new Promise(ce=>setTimeout(ce,1e3))}xo({title:"Nhn bn thnh cng",description:` to ${oe.length} chin dch`}),setTimeout(()=>{X(k,w),a(null),o(""),c(1),d(1),m(1)},1e3)}else if(r.type==="adset")if(p>0){const oe=await kK({adsetId:r.id,newName:i,targetCampaignId:_||void 0,deepCopy:!1,statusOption:x,adQuantity:p,accessToken:w,adAccountId:k,onProgress:()=>{}});if(oe.success)xo({title:"Nhn bn thnh cng",description:` to nhm qung co vi ${((Ne=oe.adIds)==null?void 0:Ne.length)||0} ads`}),setTimeout(()=>{X(k,w),a(null),o(""),v(1)},1e3);else throw new Error(oe.message)}else{const oe=await nR({adsetId:r.id,newName:i,targetCampaignId:_||void 0,deepCopy:!1,statusOption:x,accessToken:w,adAccountId:k});if(oe.success)xo({title:"Nhn bn thnh cng",description:" to nhm qung co"}),setTimeout(()=>{X(k,w),a(null),o(""),v(1)},1e3);else throw new Error(oe.message)}else{const oe=await rb({adId:r.id,newName:i,statusOption:x,accessToken:w,adAccountId:k});if(oe.success)xo({title:"Nhn bn thnh cng",description:" to qung co"}),setTimeout(()=>{X(k,w),a(null),o("")},1e3);else throw new Error(oe.message)}}catch(oe){console.error("Clone error:",oe);const ee=oe instanceof Error?oe.message:"C li xy ra";xo({title:"Li",description:ee,variant:"destructive"})}},ue=()=>{if(!r)return{campaigns:0,adsets:0,ads:0};if(r.type==="campaign"){const Ne=u*l,oe=Ne*h;return{campaigns:l,adsets:Ne,ads:oe}}else return r.type==="adset"?{campaigns:0,adsets:1,ads:p}:{campaigns:0,adsets:0,ads:1}},xe={campaign:"Chin dch",adset:"Nhm qung co",ad:"Qung co"};return s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-3xl font-bold",children:"7. ADS Nng cao"})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsx(Be,{children:"Cu trc Campaign"})}),s.jsx(Re,{children:A?s.jsx("div",{className:"flex items-center justify-center h-[600px]",children:s.jsx("p",{className:"text-muted-foreground",children:"ang ti..."})}):s.jsx(b1e,{campaigns:t,accessToken:w,onSelectItem:se,selectedItem:r,onRefresh:()=>X(k,w)})})]}),s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsx(Be,{children:r?`Nhn bn ${xe[r.type]}`:"Chn item  nhn bn"})}),s.jsx(Re,{className:"space-y-6",children:r?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Item  chn:"}),s.jsx("p",{className:"font-medium",children:r.name}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Loi: ",xe[r.type]]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"newName",children:"Tn mi"}),s.jsx(Ke,{id:"newName",value:i,onChange:Ne=>o(Ne.target.value),placeholder:"Nhp tn mi..."})]}),r.type==="campaign"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 p-3",children:s.jsxs("p",{className:"text-xs text-blue-900 dark:text-blue-200",children:[" ",s.jsx("b",{children:"Cng thc nhn chin dch"}),s.jsx("br",{}),l," chin dch  ",u," nhm QC/chin dch  ",h," ads/nhm",s.jsx("br",{}),"= ",s.jsx("b",{children:l*u*h})," tng s i tng s to"]})}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"campaignQuantity",className:"text-xs font-medium",children:"S chin dch"}),s.jsx(Ke,{id:"campaignQuantity",type:"number",min:"1",max:"5",value:l,onChange:Ne=>c(Math.max(1,Math.min(5,parseInt(Ne.target.value)||1)))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Ti a 5"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"adsetQuantity",className:"text-xs font-medium",children:"S nhm QC/chin dch"}),s.jsx(Ke,{id:"adsetQuantity",type:"number",min:"1",max:($==null?void 0:$.adsets)||10,value:u,onChange:Ne=>d(Math.max(1,Math.min(($==null?void 0:$.adsets)||10,parseInt(Ne.target.value)||1)))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:z?"ang ti...":`Ti a ${($==null?void 0:$.adsets)||10}`})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"adQuantity",className:"text-xs font-medium",children:"S ads/nhm"}),s.jsx(Ke,{id:"adQuantity",type:"number",min:"0",max:"10",value:h,onChange:Ne=>m(Math.max(0,Math.min(10,parseInt(Ne.target.value)||0)))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"0-10 (0 = khng ads)"})]})]})]}),r.type==="adset"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"targetCampaign",children:"Chin dch ch (ty chn)"}),s.jsxs("select",{id:"targetCampaign",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",value:_,onChange:Ne=>j(Ne.target.value),children:[s.jsx("option",{value:"",children:"-- Gi nguyn chin dch gc --"}),t.map(Ne=>s.jsxs("option",{value:Ne.id,children:[Ne.name," (ID: ",Ne.id,")"]},Ne.id))]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:" trng s clone trong cng chin dch. Chn chin dch khc  chuyn nhm sang campaign mi."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"adsetAdQuantity",children:"S lng Ads cn nhn"}),s.jsx(Ke,{id:"adsetAdQuantity",type:"number",min:"0",value:p,onChange:Ne=>v(Math.max(0,parseInt(Ne.target.value)||1))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:U?"ang ti...":B!==null?`Nhm QC gc c ${B} ads. Mc nh: 1 ad. Nhp 0  ch clone Nhm QC.`:"Mc nh: 1 ad. Nhp 0  ch clone Nhm QC (khng ads). Khng gii hn s lng."})]}),s.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 p-3",children:s.jsx("p",{className:"text-xs text-blue-900 dark:text-blue-200",children:" Nhm QC s c to mi vi cu hnh ging ht bn gc. Bn c th chn s lng Ads cn nhn (0 = ch clone Nhm QC)."})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Trng thi sau khi to"}),s.jsxs(aR,{value:x,onValueChange:Ne=>b(Ne),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bx,{value:"PAUSED",id:"paused"}),s.jsx(ge,{htmlFor:"paused",className:"cursor-pointer",children:" PAUSED (Tm dng)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bx,{value:"ACTIVE",id:"active"}),s.jsx(ge,{htmlFor:"active",className:"cursor-pointer",children:" ACTIVE (Hot ng)"})]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(J,{variant:"outline",onClick:D,className:"flex-1",children:" Xem trc"}),s.jsx(J,{onClick:D,className:"flex-1",children:" Nhn bn"})]})]}):s.jsx("div",{className:"flex items-center justify-center h-[400px]",children:s.jsxs("p",{className:"text-muted-foreground text-center",children:["Chn mt campaign, ad set hoc ad ",s.jsx("br",{}),"t cy bn tri  nhn bn"]})})})]})]}),s.jsx(w1e,{open:O,onOpenChange:T,sourceType:(r==null?void 0:r.type)||"campaign",sourceName:(r==null?void 0:r.name)||"",targetName:i,campaignQuantity:l,adsetQuantity:u,adQuantity:h,estimatedObjects:ue(),targetStatus:x,onConfirm:Y})]})}const j1e=["spend","clicks","impressions","reach","frequency","ctr","cpm","cpc","cpp","results","cost_per_result","results_messaging_replied_7d","cost_per_messaging_replied_7d","started_7d","total_messaging_connection","link_click","messaging_welcome_message_view","post_engagement_action","post_interaction_gross","messaging_first_reply","video_view","post_reaction","page_engagement_action","replied_7d","depth_2_message","depth_3_message","cost_per_started_7d","cost_per_total_messaging_connection","cost_per_link_click","cost_per_messaging_welcome_message_view","cost_per_post_engagement","cost_per_post_interaction_gross","cost_per_messaging_first_reply","cost_per_video_view","cost_per_post_reaction","cost_per_page_engagement","cost_per_replied_7d","cost_per_depth_2_message","cost_per_depth_3_message","cost_per_messaging_user_depth_2","daily_budget","lifetime_budget","synced_at"],KS=async(e,t,n,r,a=0,i=1e4)=>{try{if(!e||!r)return console.error(" getInsightsByUserAndDate: Missing userId or accountId",{userId:e,accountId:r}),[];let o;r?o=encodeURIComponent(`(account_id,eq,${r})`):o=encodeURIComponent(`(user_id,eq,${e})`);const l=`${ht(It.TABLES.FACEBOOK_INSIGHTS_AUTO)}?where=${o}&offset=${a}&limit=${i}&sort=-date_start`,c=await fetch(l,{method:"GET",headers:lt()});if(!c.ok){const m=await c.text();throw console.error(" NocoDB error:",c.status,m),new Error(`NocoDB API error: ${c.status} ${c.statusText}`)}return((await c.json()).list||[]).filter(m=>{if(!m.date_start)return!1;const p=m.date_start.split(/[T ]/)[0];return p>=t&&p<=n}).map(m=>{if((m.started_7d===void 0||m.started_7d===0)&&m["Tr chuyn 7d"]!==void 0){const p=Number(m["Tr chuyn 7d"]);m.started_7d=isNaN(p)?0:Math.round(p)}return m.level||(m.level=m.ad_id?"ad":m.adset_id?"adset":"campaign",console.warn(" Auto-fixed missing level for record:",{id:m.Id,campaign_id:m.campaign_id,adset_id:m.adset_id,ad_id:m.ad_id,inferred_level:m.level})),m})}catch(o){throw console.error("Error fetching insights from NocoDB:",o),o}},S1e=async(e,t,n,r)=>{try{let a=[],i=0;const o=1e3;let l=!0;for(;l;){if(!e||!r)return console.error(" getAllInsightsByUserAndDate: Missing userId or accountId",{userId:e,accountId:r}),[];const d=encodeURIComponent(`(account_id,eq,${r})`),h=`${ht(It.TABLES.FACEBOOK_INSIGHTS_AUTO)}?where=${d}&offset=${i}&limit=${o}&sort=-date_start`,m=await fetch(h,{method:"GET",headers:lt()});if(!m.ok){const x=await m.text();throw console.error(" NocoDB error:",m.status,x),new Error(`NocoDB API error: ${m.status} ${m.statusText}`)}const p=await m.json(),v=p.list||[];a=a.concat(v),p.pageInfo&&!p.pageInfo.isLastPage?i+=o:l=!1}return a.filter(d=>{if(!d.date_start)return!1;const h=d.date_start.split(/[T ]/)[0];return h>=t&&h<=n}).map(d=>{if((d.started_7d===void 0||d.started_7d===0)&&d["Tr chuyn 7d"]!==void 0){const h=Number(d["Tr chuyn 7d"]);d.started_7d=isNaN(h)?0:Math.round(h)}return d.level||(d.level=d.ad_id?"ad":d.adset_id?"adset":"campaign"),d})}catch(a){throw console.error("Error fetching ALL insights from NocoDB:",a),a}},N1e=e=>{const t=r=>!r||r==="null"||r==="undefined"?"":String(r).toLowerCase().trim(),n=r=>r?r.split(/[T ]/)[0]:"";return[e.user_id||"",e.account_id||"",t(e.campaign_id),t(e.adset_id),t(e.ad_id),n(e.date_start)].join("|")},OG=async e=>{try{let n=0,r=0,a=0,i=0;for(let o=0;o<e.length;o+=50){const l=e.slice(o,o+50);await Promise.all(l.map(async c=>{var u;try{const d=N1e(c),h={...c,insight_key:d},m=encodeURIComponent(`(insight_key,eq,${d})`),p=`${ht(It.TABLES.FACEBOOK_INSIGHTS_AUTO)}?where=${m}&limit=1`,v=await fetch(p,{method:"GET",headers:lt()});if(!v.ok)throw new Error(`Check failed: ${v.status}`);const b=(u=(await v.json()).list)==null?void 0:u[0];if(b&&b.Id){const _={};for(const N of j1e)N==="synced_at"?_[N]=new Date().toISOString():N in c&&(_[N]=c[N]);const j=Object.fromEntries(Object.entries(_).filter(([N,k])=>k!=null)),w={};for(const[N,k]of Object.entries(j))b[N]!==k&&(w[N]=k);if(Object.keys(w).length===0)i++;else{const N=ht(It.TABLES.FACEBOOK_INSIGHTS_AUTO),k={Id:b.Id,...w};let C=0,A=!1;for(;C<3&&!A;){C++;const P=await fetch(N,{method:"PATCH",headers:lt(),body:JSON.stringify(k)});if(P.ok&&(P.status===200||P.status===204)){const O=await P.json().catch(()=>null);r++,A=!0}else if(P.status===404){const O=await P.text();if(console.warn(` 404 on PATCH attempt ${C}:`,{Id:b.Id,updateUrl:N,error:O}),C<3)await new Promise(T=>setTimeout(T,500));else if(console.error(` PATCH failed after ${C} attempts - Trying PUT fallback...`),(await fetch(N,{method:"PUT",headers:lt(),body:JSON.stringify(k)})).ok)r++,A=!0;else throw new Error(`Update failed: Record not found after ${C} attempts and PUT fallback failed`)}else{const O=await P.text(),T=await P.json().catch(()=>null);throw console.error(` Failed to update insight ID ${b.Id} (attempt ${C}):`,{status:P.status,error:O,body:T,updateUrl:N,payload_sample:Object.keys(w).slice(0,3)}),new Error(`Update failed: ${P.status} - ${O}`)}}}}else{const _=ht(It.TABLES.FACEBOOK_INSIGHTS_AUTO),j=await fetch(_,{method:"POST",headers:lt(),body:JSON.stringify(h)});if(!j.ok){const w=await j.text();throw console.error(" Failed to insert insight:",{status:j.status,error:w,insight:{level:c.level,campaign_id:c.campaign_id,adset_id:c.adset_id,ad_id:c.ad_id,date_start:c.date_start,results_messaging_replied_7d:c.results_messaging_replied_7d},cost_per_fields:{cost_per_started_7d:c.cost_per_started_7d,cost_per_total_messaging_connection:c.cost_per_total_messaging_connection,cost_per_link_click:c.cost_per_link_click,cost_per_messaging_welcome_message_view:c.cost_per_messaging_welcome_message_view,cost_per_post_engagement:c.cost_per_post_engagement,cost_per_post_interaction_gross:c.cost_per_post_interaction_gross,cost_per_messaging_first_reply:c.cost_per_messaging_first_reply,cost_per_video_view:c.cost_per_video_view,cost_per_post_reaction:c.cost_per_post_reaction,cost_per_page_engagement:c.cost_per_page_engagement,cost_per_messaging_user_depth_2:c.cost_per_messaging_user_depth_2}}),new Error(`Insert failed: ${j.status}`)}a++}n++}catch(d){console.error(" Upsert failed for insight:",{level:c.level,campaign_name:c.campaign_name,campaign_id:c.campaign_id,date_start:c.date_start,results_messaging_replied_7d:c.results_messaging_replied_7d,error:d instanceof Error?d.message:d})}}))}}catch(t){throw console.error(" Error bulk upserting insights:",t),t}},k1e=Object.freeze(Object.defineProperty({__proto__:null,bulkInsertInsights:OG,getAllInsightsByUserAndDate:S1e,getInsightsByUserAndDate:KS},Symbol.toStringTag,{value:"Module"})),C1e=async(e,t,n,r)=>{if(!e||!t)return console.warn(" getHistoricalInsightsByUserAndDate: Missing userId or accountId"),[];const a=It.TABLES.FACEBOOK_INSIGHTS_HISTORY,i=ht(a);try{const o=`(user_id,eq,${e})~and(account_id,eq,${t})`,l=1e4;let c=0,u=[],d=!0;for(;d;){const v=`${i}?where=${encodeURIComponent(o)}&limit=${l}&offset=${c}`,x=await fetch(v,{method:"GET",headers:lt()});if(!x.ok){const j=await x.text();throw console.error(" Failed to fetch historical insights:",x.status,j),new Error(`Failed to fetch historical insights: ${x.status}`)}const _=(await x.json()).list||[];u=u.concat(_),d=_.length===l,c+=l}const h=u;let m=h;return(n||r)&&(m=h.filter(v=>{var b;const x=(b=v.date_start)==null?void 0:b.split("T")[0];return!(!x||n&&x<n||r&&x>r)})),m.map(v=>{if(!v.spend&&v.amount_spent!==void 0&&(v.spend=v.amount_spent),!v.spend&&v.total_spend!==void 0&&(v.spend=v.total_spend),v.level||(v.adId&&v.adId!=="null"?v.level="ad":v.adsetId&&v.adsetId!=="null"?v.level="adset":v.campaignId&&v.campaignId!=="null"?v.level="campaign":v.level="account"),(v.started_7d===void 0||v.started_7d===0)&&v["Tr chuyn 7d"]!==void 0){const j=Number(v["Tr chuyn 7d"]);v.started_7d=isNaN(j)?0:Math.round(j)}const x=["impressions","reach","clicks","results","phones","unique_clicks","inline_link_clicks","outbound_clicks","results_messaging_replied_7d","messaging_connections","started_7d"],b=["spend","budget","cost_per_result","cpc","cpm","cpp","cost_per_unique_click","cost_per_phone","cost_per_messaging_replied_7d","cost_per_thruplay","cost_per_started_7d","cost_per_total_messaging_connection"],_=["ctr","frequency","purchase_roas"];return x.forEach(j=>{if(v[j]!==null&&v[j]!==void 0){const w=Number(v[j]);v[j]=isNaN(w)?0:Math.round(w)}else v[j]=0}),b.forEach(j=>{if(v[j]!==null&&v[j]!==void 0){const w=Number(v[j]);v[j]=isNaN(w)?0:Math.round(w)}else v[j]=0}),_.forEach(j=>{if(v[j]!==null&&v[j]!==void 0){const w=Number(v[j]);isNaN(w)?v[j]=0:v[j]=Math.round(w*100)/100}else v[j]=0}),v})}catch(o){throw console.error(" Error fetching historical insights:",o),o}},A1e=async e=>{try{const{data:t,error:n}=await wt.functions.invoke("sync-historical-insights",{body:{userId:e.userId,accountId:e.accountId,since:e.since,until:e.until}});if(n)throw console.error(" Error triggering historical sync:",n),new Error(n.message||"Failed to sync historical insights");return t}catch(t){throw console.error(" Exception in triggerHistoricalSync:",t),t}},Oy=[{field:"budget",label:"Ngn sch",group:"Cp Qung Co"},{field:"daily_budget",label:"Ngn sch hng ngy",group:"Cp Qung Co"},{field:"lifetime_budget",label:"Ngn sch trn i",group:"Cp Qung Co"},{field:"buying_type",label:"Loi mua",group:"Cp Qung Co"},{field:"bid_strategy",label:"Chin lc t gi",group:"Cp Qung Co"},{field:"bid_amount",label:"S tin t gi",group:"Cp Qung Co"},{field:"cost_per_phone",label:"Chi ph/ST",group:"Cp Qung Co"},{field:"cost_per_messaging_replied_7d",label:"Chi ph MKT trn ngy",group:"Cp Qung Co"},{field:"cost_per_action_type",label:"Chi ph/loi hnh ng",group:"Cp Qung Co"},{field:"spend",label:"Chi tiu",group:"Marketing - Chi ph"},{field:"cost_per_result",label:"Chi ph/Kt qu",group:"Marketing - Chi ph"},{field:"cpc",label:"CPC (Chi ph mi lt nhp)",group:"Marketing - Chi ph"},{field:"cpm",label:"CPM (Chi ph trn 1000 ln hin th)",group:"Marketing - Chi ph"},{field:"cpp",label:"CPP (Chi ph trn 1000 ngi tip cn)",group:"Marketing - Chi ph"},{field:"cost_per_unique_click",label:"Chi ph/lt nhp duy nht",group:"Marketing - Chi ph"},{field:"cost_per_inline_link_click",label:"Chi ph/nhp lin kt",group:"Marketing - Chi ph"},{field:"cost_per_thruplay",label:"Chi ph/lt ThruPlay",group:"Marketing - Chi ph"},{field:"cost_per_started_7d",label:"Chi ph/Tr chuyn 7d",group:"Marketing - Chi ph"},{field:"cost_per_total_messaging_connection",label:"Chi ph/Kt ni tin nhn",group:"Marketing - Chi ph"},{field:"cost_per_link_click",label:"Chi ph/Nhp lin kt",group:"Marketing - Chi ph"},{field:"cost_per_messaging_welcome_message_view",label:"Chi ph/Xem tin cho",group:"Marketing - Chi ph"},{field:"cost_per_post_engagement",label:"Chi ph/Tng tc bi vit",group:"Marketing - Chi ph"},{field:"cost_per_post_interaction_gross",label:"Chi ph/Tng tc tng",group:"Marketing - Chi ph"},{field:"cost_per_messaging_first_reply",label:"Chi ph/Tin nhn u",group:"Marketing - Chi ph"},{field:"cost_per_video_view",label:"Chi ph/Xem video",group:"Marketing - Chi ph"},{field:"cost_per_post_reaction",label:"Chi ph/Phn ng",group:"Marketing - Chi ph"},{field:"cost_per_page_engagement",label:"Chi ph/Tng tc trang",group:"Marketing - Chi ph"},{field:"cost_per_messaging_user_depth_2",label:"Chi ph/Tin nhn  su 2",group:"Marketing - Chi ph"},{field:"results",label:"Kt qu",group:"Marketing - Hiu sut"},{field:"results_messaging_replied_7d",label:"Kt qu (Mess 7d)",group:"Marketing - Hiu sut"},{field:"started_7d",label:"Tr chuyn 7d",group:"Marketing - Hiu sut"},{field:"impressions",label:"Hin th",group:"Marketing - Hiu sut"},{field:"reach",label:"Lt tip cn",group:"Marketing - Hiu sut"},{field:"frequency",label:"Tn sut",group:"Marketing - Hiu sut"},{field:"clicks",label:"Nhp chut",group:"Marketing - Hiu sut"},{field:"unique_clicks",label:"Lt nhp duy nht",group:"Marketing - Hiu sut"},{field:"inline_link_clicks",label:"Nhp vo lin kt",group:"Marketing - Hiu sut"},{field:"unique_inline_link_clicks",label:"Nhp lin kt duy nht",group:"Marketing - Hiu sut"},{field:"ctr",label:"CTR (T l nhp)",group:"Marketing - Hiu sut"},{field:"unique_ctr",label:"T l nhp duy nht",group:"Marketing - Hiu sut"},{field:"unique_inline_link_click_ctr",label:"T l nhp lin kt duy nht",group:"Marketing - Hiu sut"},{field:"engagement_rate_ranking",label:"Xp hng t l tng tc",group:"Marketing - Hiu sut"},{field:"quality_ranking",label:"Xp hng cht lng",group:"Marketing - Hiu sut"},{field:"conversion_rate_ranking",label:"Xp hng t l chuyn i",group:"Marketing - Hiu sut"},{field:"phones",label:"ST",group:"Marketing - Chuyn i"},{field:"result_label",label:"Loi kt qu",group:"Marketing - Chuyn i"},{field:"messaging_connections",label:"Kt qu tin nhn",group:"Marketing - Chuyn i"},{field:"action_type_used",label:"Action Type",group:"Marketing - Chuyn i"},{field:"purchase_roas",label:"ROAS mua hng",group:"Marketing - Chuyn i"},{field:"action_values",label:"Gi tr hnh ng",group:"Marketing - Chuyn i"},{field:"actions",label:"Hnh ng",group:"Marketing - Chuyn i"},{field:"video_play_actions",label:"Lt pht video",group:"Marketing - Chuyn i"},{field:"video_p25_watched_actions",label:"Xem video 25%",group:"Marketing - Chuyn i"},{field:"video_p50_watched_actions",label:"Xem video 50%",group:"Marketing - Chuyn i"},{field:"video_p75_watched_actions",label:"Xem video 75%",group:"Marketing - Chuyn i"},{field:"video_p100_watched_actions",label:"Xem video 100%",group:"Marketing - Chuyn i"},{field:"level",label:"Cp",group:"Marketing - Chuyn i"},{field:"labels",label:"Nhn dn",group:"Marketing - Chuyn i"},{field:"campaign_name",label:"Tn chin dch",group:"Marketing - Chuyn i"},{field:"adset_name",label:"Tn nhm qung co",group:"Marketing - Chuyn i"},{field:"ad_name",label:"Tn qung co",group:"Marketing - Chuyn i"},{field:"campaign_id",label:"ID Chin dch",group:"Marketing - Chuyn i"},{field:"adset_id",label:"ID Nhm qung co",group:"Marketing - Chuyn i"},{field:"ad_id",label:"ID Qung co",group:"Marketing - Chuyn i"},{field:"objective",label:"Mc tiu",group:"Marketing - Chuyn i"},{field:"status",label:"Trng thi",group:"Marketing - Chuyn i"},{field:"effective_status",label:"Trng thi phn phi",group:"Marketing - Chuyn i"},{field:"configured_status",label:"Trng thi ci t",group:"Marketing - Chuyn i"},{field:"date_start",label:"Ngy bt u",group:"Marketing - Chuyn i"},{field:"date_stop",label:"Ngy kt thc",group:"Marketing - Chuyn i"}],sb=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-x-auto",children:s.jsx("table",{ref:n,className:je("w-full min-w-full table-auto caption-bottom text-sm",e),...t})}));sb.displayName="Table";const Af=g.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:je("[&_tr]:border-b",e),...t}));Af.displayName="TableHeader";const Ef=g.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:je("[&_tr:last-child]:border-0",e),...t}));Ef.displayName="TableBody";const E1e=g.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:je("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));E1e.displayName="TableFooter";const Ma=g.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:je("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Ma.displayName="TableRow";const Rn=g.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:je("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Rn.displayName="TableHead";const Qt=g.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:je("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Qt.displayName="TableCell";const T1e=g.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:je("mt-4 text-sm text-muted-foreground",e),...t}));T1e.displayName="TableCaption";var GS="Checkbox",[P1e,sQe]=ga(GS),[O1e,vR]=P1e(GS);function I1e(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[m,p]=_i({prop:n,defaultProp:a??!1,onChange:c,caller:GS}),[v,x]=g.useState(null),[b,_]=g.useState(null),j=g.useRef(!1),w=v?!!o||!!v.closest("form"):!0,N={checked:m,disabled:i,setChecked:p,control:v,setControl:x,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:jd(a)?!1:a,isFormControl:w,bubbleInput:b,setBubbleInput:_};return s.jsx(O1e,{scope:t,...N,children:R1e(h)?h(N):r})}var IG="CheckboxTrigger",RG=g.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:v}=vR(IG,e),x=Dt(a,d),b=g.useRef(c);return g.useEffect(()=>{const _=i==null?void 0:i.form;if(_){const j=()=>h(b.current);return _.addEventListener("reset",j),()=>_.removeEventListener("reset",j)}},[i,h]),s.jsx(it.button,{type:"button",role:"checkbox","aria-checked":jd(c)?"mixed":c,"aria-required":u,"data-state":FG(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:x,onKeyDown:We(t,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:We(n,_=>{h(j=>jd(j)?!0:!j),v&&p&&(m.current=_.isPropagationStopped(),m.current||_.stopPropagation())})})});RG.displayName=IG;var yR=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return s.jsx(I1e,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(RG,{...h,ref:t,__scopeCheckbox:n}),m&&s.jsx(LG,{__scopeCheckbox:n})]})})});yR.displayName=GS;var $G="CheckboxIndicator",MG=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=vR($G,n);return s.jsx(Aa,{present:r||jd(i.checked)||i.checked===!0,children:s.jsx(it.span,{"data-state":FG(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});MG.displayName=$G;var DG="CheckboxBubbleInput",LG=g.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:m,setBubbleInput:p}=vR(DG,e),v=Dt(n,p),x=Z0(i),b=B0(r);g.useEffect(()=>{const j=m;if(!j)return;const w=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(w,"checked").set,C=!a.current;if(x!==i&&k){const A=new Event("click",{bubbles:C});j.indeterminate=jd(i),k.call(j,jd(i)?!1:i),j.dispatchEvent(A)}},[m,x,i,a]);const _=g.useRef(jd(i)?!1:i);return s.jsx(it.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:v,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});LG.displayName=DG;function R1e(e){return typeof e=="function"}function jd(e){return e==="indeterminate"}function FG(e){return jd(e)?"indeterminate":e?"checked":"unchecked"}const Xs=g.forwardRef(({className:e,...t},n)=>s.jsx(yR,{ref:n,className:je("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(MG,{className:je("flex items-center justify-center text-current"),children:s.jsx(Td,{className:"h-4 w-4"})})}));Xs.displayName=yR.displayName;const _A="column_customizer_presets",KF=({open:e,onOpenChange:t,selectedFields:n,onFieldsChange:r})=>{const{toast:a}=Lo(),[i,o]=g.useState(n),[l,c]=g.useState(""),[u,d]=g.useState([]),[h,m]=g.useState("");g.useEffect(()=>{o(n),p()},[n,e]);const p=()=>{try{const C=localStorage.getItem(_A);C&&d(JSON.parse(C))}catch(C){console.error("Error loading presets:",C)}},v=()=>{if(!l.trim()){a({title:"Li",description:"Vui lng nhp tn nh dng",variant:"destructive"});return}const C=Array.from(new Set(i)),A={name:l.trim(),fields:C},P=[...u.filter(O=>O.name!==A.name),A];d(P),localStorage.setItem(_A,JSON.stringify(P)),a({title:" lu",description:`nh dng "${A.name}"  c lu`}),c("")},x=C=>{const A=u.find(P=>P.name===C);if(A){const P=Array.from(new Set(A.fields));o(P),m(C)}},b=C=>{const A=u.filter(P=>P.name!==C);d(A),localStorage.setItem(_A,JSON.stringify(A)),h===C&&m(""),a({title:" xa",description:`nh dng "${C}"  c xa`})},_=Oy.reduce((C,A)=>(C[A.group]||(C[A.group]=[]),C[A.group].push(A),C),{}),j=C=>{o(A=>A.includes(C)?A.filter(P=>P!==C):[...A,C])},w=()=>{const C=Array.from(new Set(i));r(C),t(!1)},N=(C,A)=>{const P=A.map(T=>T.field),O=P.every(T=>i.includes(T));o(O?T=>T.filter($=>!P.includes($)):T=>{const $=[...T];return P.forEach(L=>{$.includes(L)||$.push(L)}),$})},k=C=>C.every(A=>i.includes(A.field));return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-4xl max-h-[85vh] bg-background",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"Ty chnh ct - Cp chi tit qung co"}),s.jsx(Ca,{children:"Chn cc ch s bn mun hin th trong phn tng quan."})]}),s.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Ke,{placeholder:"Nhp tn nh dng...",value:l,onChange:C=>c(C.target.value)})}),s.jsxs(J,{onClick:v,size:"sm",className:"gap-2",children:[s.jsx(cS,{className:"h-4 w-4"}),"Lu nh dng"]})]}),u.length>0&&s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(ge,{className:"text-sm whitespace-nowrap",children:"nh dng  lu:"}),s.jsxs(kn,{value:h,onValueChange:x,children:[s.jsx(wn,{className:"flex-1",children:s.jsx(Cn,{placeholder:"Chn nh dng..."})}),s.jsx(_n,{children:u.map(C=>s.jsxs(st,{value:C.name,children:[C.name," (",C.fields.length," ct)"]},C.name))})]}),h&&s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>b(h),className:"gap-2",children:s.jsx(ks,{className:"h-4 w-4"})})]})]}),s.jsx(As,{className:"h-[500px] pr-4",children:s.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-6",children:Object.entries(_).map(([C,A])=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-background pb-1 border-b",children:[s.jsx("h3",{className:"font-semibold text-sm",children:C}),s.jsx(J,{variant:"ghost",size:"sm",className:"h-6 text-xs px-2",onClick:()=>N(C,A),children:k(A)?"B chn tt c":"Chn tt c"})]}),s.jsx("div",{className:"space-y-1.5",children:A.map(P=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xs,{id:P.field,checked:i.includes(P.field),onCheckedChange:()=>j(P.field)}),s.jsx(ge,{htmlFor:P.field,className:"text-xs font-normal cursor-pointer leading-tight",children:P.label})]},P.field))})]},C))})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(J,{variant:"outline",onClick:()=>t(!1),children:"Hy"}),s.jsxs(J,{onClick:w,children:["p dng (",i.length," ct)"]})]})]})})},$1e=[{key:"weeklyBudget",label:"Ngn sch tun",group:"Cp Qung Co"},{key:"monthlyBudget",label:"Ngn sch thng",group:"Cp Qung Co"},{key:"quarterlyBudget",label:"Ngn sch qu",group:"Cp Qung Co"},{key:"yearlyBudget",label:"Ngn sch nm",group:"Cp Qung Co"},{key:"costPerPhone",label:"Chi ph/ST",group:"Cp Qung Co"},{key:"dailyMarketingCost",label:"Chi ph MKT trn ngy",group:"Cp Qung Co"},{key:"costPerActionType",label:"Chi ph/loi hnh ng",group:"Cp Qung Co"},{key:"spend",label:"Chi tiu",group:"Marketing - Chi ph"},{key:"costPerResult",label:"Chi ph/Kt qu",group:"Marketing - Chi ph"},{key:"budget",label:"Ngn sch",group:"Marketing - Chi ph"},{key:"adsetBudget",label:"Ngn sch nhm QC",group:"Marketing - Chi ph"},{key:"results",label:"Kt qu",group:"Marketing - Hiu sut"},{key:"impressions",label:"Hin th",group:"Marketing - Hiu sut"},{key:"clicks",label:"Nhp chut",group:"Marketing - Hiu sut"},{key:"phones",label:"SDT",group:"Marketing - Chuyn i"}],jA="summary_metric_presets",SA=({open:e,onOpenChange:t,selectedMetrics:n,onMetricsChange:r})=>{const{toast:a}=Lo(),[i,o]=g.useState(n),[l,c]=g.useState(""),[u,d]=g.useState([]),[h,m]=g.useState("");g.useEffect(()=>{o(n),p()},[n,e]);const p=()=>{try{const N=localStorage.getItem(jA);N&&d(JSON.parse(N))}catch(N){console.error("Error loading presets:",N)}},v=()=>{if(!l.trim()){a({title:"Li",description:"Vui lng nhp tn nh dng",variant:"destructive"});return}const N={name:l.trim(),metrics:i},k=[...u.filter(C=>C.name!==N.name),N];d(k),localStorage.setItem(jA,JSON.stringify(k)),a({title:" lu",description:`nh dng "${N.name}"  c lu`}),c("")},x=N=>{const k=u.find(C=>C.name===N);k&&(o(k.metrics),m(N))},b=N=>{const k=u.filter(C=>C.name!==N);d(k),localStorage.setItem(jA,JSON.stringify(k)),h===N&&m(""),a({title:" xa",description:`nh dng "${N}"  c xa`})},_=$1e.reduce((N,k)=>(N[k.group]||(N[k.group]=[]),N[k.group].push(k),N),{}),j=N=>{o(k=>k.includes(N)?k.filter(C=>C!==N):[...k,N])},w=()=>{r(i),t(!1)};return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-2xl max-h-[80vh] bg-background",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"Ty chnh ch s tng quan"}),s.jsx(Ca,{children:"Chn cc ch s bn mun hin th trong phn tng quan."})]}),s.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Ke,{placeholder:"Nhp tn nh dng...",value:l,onChange:N=>c(N.target.value)})}),s.jsxs(J,{onClick:v,size:"sm",className:"gap-2",children:[s.jsx(cS,{className:"h-4 w-4"}),"Lu nh dng"]})]}),u.length>0&&s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(ge,{className:"text-sm whitespace-nowrap",children:"nh dng  lu:"}),s.jsxs(kn,{value:h,onValueChange:x,children:[s.jsx(wn,{className:"flex-1",children:s.jsx(Cn,{placeholder:"Chn nh dng..."})}),s.jsx(_n,{children:u.map(N=>s.jsxs(st,{value:N.name,children:[N.name," (",N.metrics.length," ct)"]},N.name))})]}),h&&s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>b(h),className:"gap-2",children:s.jsx(ks,{className:"h-4 w-4"})})]})]}),s.jsx(As,{className:"h-[400px] pr-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(_).map(([N,k])=>s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-sm",children:N}),s.jsx("div",{className:"space-y-2",children:k.map(C=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xs,{id:C.key,checked:i.includes(C.key),onCheckedChange:()=>j(C.key)}),s.jsx(ge,{htmlFor:C.key,className:"text-sm font-normal cursor-pointer",children:C.label})]},C.key))})]},N))})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(J,{variant:"outline",onClick:()=>t(!1),children:"Hy"}),s.jsxs(J,{onClick:w,children:["p dng (",i.length," ct)"]})]})]})})};var Zt=function(){return Zt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zt.apply(this,arguments)};function M1e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function BG(e,t,n){for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function ib(e){return e.mode==="multiple"}function ob(e){return e.mode==="range"}function YS(e){return e.mode==="single"}var D1e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function L1e(e,t){return Bt(e,"LLLL y",t)}function F1e(e,t){return Bt(e,"d",t)}function B1e(e,t){return Bt(e,"LLLL",t)}function U1e(e){return"".concat(e)}function V1e(e,t){return Bt(e,"cccccc",t)}function z1e(e,t){return Bt(e,"yyyy",t)}var H1e=Object.freeze({__proto__:null,formatCaption:L1e,formatDay:F1e,formatMonthCaption:B1e,formatWeekNumber:U1e,formatWeekdayName:V1e,formatYearCaption:z1e}),W1e=function(e,t,n){return Bt(e,"do MMMM (EEEE)",n)},q1e=function(){return"Month: "},K1e=function(){return"Go to next month"},G1e=function(){return"Go to previous month"},Y1e=function(e,t){return Bt(e,"cccc",t)},Q1e=function(e){return"Week n. ".concat(e)},X1e=function(){return"Year: "},J1e=Object.freeze({__proto__:null,labelDay:W1e,labelMonthDropdown:q1e,labelNext:K1e,labelPrevious:G1e,labelWeekNumber:Q1e,labelWeekday:Y1e,labelYearDropdown:X1e});function Z1e(){var e="buttons",t=D1e,n=MI,r={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:H1e,labels:J1e,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function eSe(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return r?i=Qa(r):t&&(i=new Date(t,0,1)),a?o=_f(a):n&&(o=new Date(n,11,31)),{fromDate:i?No(i):void 0,toDate:o?No(o):void 0}}var UG=g.createContext(void 0);function tSe(e){var t,n=e.initialProps,r=Z1e(),a=eSe(n),i=a.fromDate,o=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(YS(n)||ib(n)||ob(n))&&(c=n.onSelect);var u=Zt(Zt(Zt({},r),n),{captionLayout:l,classNames:Zt(Zt({},r.classNames),n.classNames),components:Zt({},n.components),formatters:Zt(Zt({},r.formatters),n.formatters),fromDate:i,labels:Zt(Zt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Zt(Zt({},r.modifiers),n.modifiers),modifiersClassNames:Zt(Zt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Zt(Zt({},r.styles),n.styles),toDate:o});return s.jsx(UG.Provider,{value:u,children:e.children})}function kr(){var e=g.useContext(UG);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function VG(e){var t=kr(),n=t.locale,r=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:n})})}function nSe(e){return s.jsx("svg",Zt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function zG(e){var t,n,r=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,u=kr(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:nSe;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:r,children:i}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function rSe(e){var t,n=kr(),r=n.fromDate,a=n.toDate,i=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var h=[];if(Axe(r,a))for(var m=Qa(r),p=r.getMonth();p<=a.getMonth();p++)h.push(mA(m,p));else for(var m=Qa(new Date),p=0;p<=11;p++)h.push(mA(m,p));var v=function(b){var _=Number(b.target.value),j=mA(Qa(e.displayMonth),_);e.onChange(j)},x=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:zG;return s.jsx(x,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:v,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:h.map(function(b){return s.jsx("option",{value:b.getMonth(),children:l(b,{locale:o})},b.getMonth())})})}function aSe(e){var t,n=e.displayMonth,r=kr(),a=r.fromDate,i=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,h=r.labels.labelYearDropdown,m=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var p=a.getFullYear(),v=i.getFullYear(),x=p;x<=v;x++)m.push(AF(_j(new Date),x));var b=function(j){var w=AF(Qa(n),Number(j.target.value));e.onChange(w)},_=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:zG;return s.jsx(_,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:n.getFullYear(),caption:d(n,{locale:o}),children:m.map(function(j){return s.jsx("option",{value:j.getFullYear(),children:d(j,{locale:o})},j.getFullYear())})})}function sSe(e,t){var n=g.useState(e),r=n[0],a=n[1],i=t===void 0?r:t;return[i,a]}function iSe(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&eg(i,a)<0){var u=-1*(c-1);a=Zi(i,u)}return o&&eg(a,o)<0&&(a=o),Qa(a)}function oSe(){var e=kr(),t=iSe(e),n=sSe(t,e.month),r=n[0],a=n[1],i=function(o){var l;if(!e.disableNavigation){var c=Qa(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,i]}function lSe(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=Qa(e),i=Qa(Zi(a,r)),o=eg(i,a),l=[],c=0;c<o;c++){var u=Zi(a,c);l.push(u)}return n&&(l=l.reverse()),l}function cSe(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=r?i:1,l=Qa(e);if(!n)return Zi(l,o);var c=eg(n,e);if(!(c<i))return Zi(l,o)}}function uSe(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=r?i:1,l=Qa(e);if(!n)return Zi(l,-o);var c=eg(l,n);if(!(c<=0))return Zi(l,-o)}}var HG=g.createContext(void 0);function dSe(e){var t=kr(),n=oSe(),r=n[0],a=n[1],i=lSe(r,t),o=cSe(r,t),l=uSe(r,t),c=function(h){return i.some(function(m){return DI(h,m)})},u=function(h,m){c(h)||(m&&d7(h,m)?a(Zi(h,1+t.numberOfMonths*-1)):a(h))},d={currentMonth:r,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(HG.Provider,{value:d,children:e.children})}function lb(){var e=g.useContext(HG);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function GF(e){var t,n=kr(),r=n.classNames,a=n.styles,i=n.components,o=lb().goToMonth,l=function(d){o(Zi(d,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:VG,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:u}),s.jsx(rSe,{onChange:l,displayMonth:e.displayMonth}),s.jsx(aSe,{onChange:l,displayMonth:e.displayMonth})]})}function hSe(e){return s.jsx("svg",Zt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function fSe(e){return s.jsx("svg",Zt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Aj=g.forwardRef(function(e,t){var n=kr(),r=n.classNames,a=n.styles,i=[r.button_reset,r.button];e.className&&i.push(e.className);var o=i.join(" "),l=Zt(Zt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",Zt({},e,{ref:t,type:"button",className:o,style:l}))});function mSe(e){var t,n,r=kr(),a=r.dir,i=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,h=r.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var m=u(e.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),v=d(e.nextMonth,{locale:i}),x=[o.nav_button,o.nav_button_next].join(" "),b=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:fSe,_=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:hSe;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(Aj,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(b,{className:o.nav_icon,style:l.nav_icon}):s.jsx(_,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(Aj,{name:"next-month","aria-label":v,className:x,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(_,{className:o.nav_icon,style:l.nav_icon}):s.jsx(b,{className:o.nav_icon,style:l.nav_icon})})]})}function YF(e){var t=kr().numberOfMonths,n=lb(),r=n.previousMonth,a=n.nextMonth,i=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(v){return DI(e.displayMonth,v)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),h=t>1&&(u||!c),m=function(){r&&i(r)},p=function(){a&&i(a)};return s.jsx(mSe,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:h,nextMonth:a,previousMonth:r,onPreviousClick:m,onNextClick:p})}function pSe(e){var t,n=kr(),r=n.classNames,a=n.disableNavigation,i=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:VG,u;return a?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(GF,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(GF,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(YF,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(YF,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:r.caption,style:i.caption,children:u})}function gSe(e){var t=kr(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?s.jsx("tfoot",{className:a,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function vSe(e,t,n){for(var r=n?wf(new Date):ic(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=Us(r,i);a.push(o)}return a}function ySe(){var e=kr(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=vSe(a,i,o);return s.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,h){return s.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},h)})]})}function xSe(){var e,t=kr(),n=t.classNames,r=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:ySe;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(i,{})})}function bSe(e){var t=kr(),n=t.locale,r=t.formatters.formatDay;return s.jsx(s.Fragment,{children:r(e.date,{locale:n})})}var xR=g.createContext(void 0);function wSe(e){if(!ib(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(xR.Provider,{value:t,children:e.children})}return s.jsx(_Se,{initialProps:e.initialProps,children:e.children})}function _Se(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,i=t.max,o=function(u,d,h){var m,p;(m=t.onDayClick)===null||m===void 0||m.call(t,u,d,h);var v=!!(d.selected&&a&&(r==null?void 0:r.length)===a);if(!v){var x=!!(!d.selected&&i&&(r==null?void 0:r.length)===i);if(!x){var b=r?BG([],r):[];if(d.selected){var _=b.findIndex(function(j){return ma(u,j)});b.splice(_,1)}else b.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,b,u,d,h)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=i&&r.length>i-1,h=r.some(function(m){return ma(m,u)});return!!(d&&!h)});var c={selected:r,onDayClick:o,modifiers:l};return s.jsx(xR.Provider,{value:c,children:n})}function bR(){var e=g.useContext(xR);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function jSe(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?ma(a,e)&&ma(r,e)?void 0:ma(a,e)?{from:a,to:void 0}:ma(r,e)?void 0:UT(r,e)?{from:e,to:a}:{from:r,to:e}:a?UT(e,a)?{from:a,to:e}:{from:e,to:a}:r?d7(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var wR=g.createContext(void 0);function SSe(e){if(!ob(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(wR.Provider,{value:t,children:e.children})}return s.jsx(NSe,{initialProps:e.initialProps,children:e.children})}function NSe(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},i=a.from,o=a.to,l=t.min,c=t.max,u=function(p,v,x){var b,_;(b=t.onDayClick)===null||b===void 0||b.call(t,p,v,x);var j=jSe(p,r);(_=t.onSelect)===null||_===void 0||_.call(t,j,p,v,x)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],ma(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:ld(i,l-1),before:Us(i,l-1)}),i&&o&&d.disabled.push({after:i,before:Us(i,l-1)}),!i&&o&&d.disabled.push({after:ld(o,l-1),before:Us(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:Us(i,-c+1)}),d.disabled.push({after:Us(i,c-1)})),i&&o){var h=pl(o,i)+1,m=c-h;d.disabled.push({before:ld(i,m)}),d.disabled.push({after:Us(o,m)})}!i&&o&&(d.disabled.push({before:Us(o,-c+1)}),d.disabled.push({after:Us(o,c-1)}))}return s.jsx(wR.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function _R(){var e=g.useContext(wR);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function A_(e){return Array.isArray(e)?BG([],e):e!==void 0?[e]:[]}function kSe(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=A_(a)}),t}var Nl;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Nl||(Nl={}));var CSe=Nl.Selected,Ec=Nl.Disabled,ASe=Nl.Hidden,ESe=Nl.Today,NA=Nl.RangeEnd,kA=Nl.RangeMiddle,CA=Nl.RangeStart,TSe=Nl.Outside;function PSe(e,t,n){var r,a=(r={},r[CSe]=A_(e.selected),r[Ec]=A_(e.disabled),r[ASe]=A_(e.hidden),r[ESe]=[e.today],r[NA]=[],r[kA]=[],r[CA]=[],r[TSe]=[],r);return e.fromDate&&a[Ec].push({before:e.fromDate}),e.toDate&&a[Ec].push({after:e.toDate}),ib(e)?a[Ec]=a[Ec].concat(t.modifiers[Ec]):ob(e)&&(a[Ec]=a[Ec].concat(n.modifiers[Ec]),a[CA]=n.modifiers[CA],a[kA]=n.modifiers[kA],a[NA]=n.modifiers[NA]),a}var WG=g.createContext(void 0);function OSe(e){var t=kr(),n=bR(),r=_R(),a=PSe(t,n,r),i=kSe(t.modifiers),o=Zt(Zt({},a),i);return s.jsx(WG.Provider,{value:o,children:e.children})}function qG(){var e=g.useContext(WG);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function ISe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function RSe(e){return!!(e&&typeof e=="object"&&"from"in e)}function $Se(e){return!!(e&&typeof e=="object"&&"after"in e)}function MSe(e){return!!(e&&typeof e=="object"&&"before"in e)}function DSe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function LSe(e,t){var n,r=t.from,a=t.to;if(r&&a){var i=pl(a,r)<0;i&&(n=[a,r],r=n[0],a=n[1]);var o=pl(e,r)>=0&&pl(a,e)>=0;return o}return a?ma(a,e):r?ma(r,e):!1}function FSe(e){return RI(e)}function BSe(e){return Array.isArray(e)&&e.every(RI)}function USe(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(FSe(n))return ma(e,n);if(BSe(n))return n.includes(e);if(RSe(n))return LSe(e,n);if(DSe(n))return n.dayOfWeek.includes(e.getDay());if(ISe(n)){var r=pl(n.before,e),a=pl(n.after,e),i=r>0,o=a<0,l=UT(n.before,n.after);return l?o&&i:i||o}return $Se(n)?pl(e,n.after)>0:MSe(n)?pl(n.before,e)>0:typeof n=="function"?n(e):!1})}function jR(e,t,n){var r=Object.keys(t).reduce(function(i,o){var l=t[o];return USe(e,l)&&i.push(o),i},[]),a={};return r.forEach(function(i){return a[i]=!0}),n&&!DI(e,n)&&(a.outside=!0),a}function VSe(e,t){for(var n=Qa(e[0]),r=_f(e[e.length-1]),a,i,o=n;o<=r;){var l=jR(o,t),c=!l.disabled&&!l.hidden;if(!c){o=Us(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=Us(o,1)}return i||a}var zSe=365;function KG(e,t){var n=t.moveBy,r=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,h=a.locale,m={day:Us,week:BT,month:Zi,year:yye,startOfWeek:function(b){return a.ISOWeek?wf(b):ic(b,{locale:h,weekStartsOn:c})},endOfWeek:function(b){return a.ISOWeek?s7(b):$I(b,{locale:h,weekStartsOn:c})}},p=m[n](e,r==="after"?1:-1);r==="before"&&u?p=xye([u,p]):r==="after"&&d&&(p=r7([d,p]));var v=!0;if(i){var x=jR(p,i);v=!x.disabled&&!x.hidden}return v?p:l.count>zSe?l.lastFocused:KG(p,{moveBy:n,direction:r,context:a,modifiers:i,retry:Zt(Zt({},l),{count:l.count+1})})}var GG=g.createContext(void 0);function HSe(e){var t=lb(),n=qG(),r=g.useState(),a=r[0],i=r[1],o=g.useState(),l=o[0],c=o[1],u=VSe(t.displayMonths,n),d=a??(l&&t.isDateDisplayed(l))?l:u,h=function(){c(a),i(void 0)},m=function(b){i(b)},p=kr(),v=function(b,_){if(a){var j=KG(a,{moveBy:b,direction:_,context:p,modifiers:n});ma(a,j)||(t.goToDate(j,a),m(j))}},x={focusedDay:a,focusTarget:d,blur:h,focus:m,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return s.jsx(GG.Provider,{value:x,children:e.children})}function SR(){var e=g.useContext(GG);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function WSe(e,t){var n=qG(),r=jR(e,n,t);return r}var NR=g.createContext(void 0);function qSe(e){if(!YS(e.initialProps)){var t={selected:void 0};return s.jsx(NR.Provider,{value:t,children:e.children})}return s.jsx(KSe,{initialProps:e.initialProps,children:e.children})}function KSe(e){var t=e.initialProps,n=e.children,r=function(i,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:r};return s.jsx(NR.Provider,{value:a,children:n})}function YG(){var e=g.useContext(NR);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function GSe(e,t){var n=kr(),r=YG(),a=bR(),i=_R(),o=SR(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,m=o.focus,p=o.focusMonthBefore,v=o.focusMonthAfter,x=o.focusYearBefore,b=o.focusYearAfter,_=o.focusStartOfWeek,j=o.focusEndOfWeek,w=function(U){var F,K,X,se;YS(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,e,t,U):ib(n)?(K=a.onDayClick)===null||K===void 0||K.call(a,e,t,U):ob(n)?(X=i.onDayClick)===null||X===void 0||X.call(i,e,t,U):(se=n.onDayClick)===null||se===void 0||se.call(n,e,t,U)},N=function(U){var F;m(e),(F=n.onDayFocus)===null||F===void 0||F.call(n,e,t,U)},k=function(U){var F;h(),(F=n.onDayBlur)===null||F===void 0||F.call(n,e,t,U)},C=function(U){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,e,t,U)},A=function(U){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,e,t,U)},P=function(U){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,e,t,U)},O=function(U){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,e,t,U)},T=function(U){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,e,t,U)},$=function(U){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,e,t,U)},L=function(U){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,e,t,U)},z=function(U){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,e,t,U)},W=function(U){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,e,t,U)},B=function(U){var F;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),u();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),d();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?x():p();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?b():v();break;case"Home":U.preventDefault(),U.stopPropagation(),_();break;case"End":U.preventDefault(),U.stopPropagation(),j();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,e,t,U)},G={onClick:w,onFocus:N,onBlur:k,onKeyDown:B,onKeyUp:W,onMouseEnter:C,onMouseLeave:A,onPointerEnter:P,onPointerLeave:O,onTouchCancel:T,onTouchEnd:$,onTouchMove:L,onTouchStart:z};return G}function YSe(){var e=kr(),t=YG(),n=bR(),r=_R(),a=YS(e)?t.selected:ib(e)?n.selected:ob(e)?r.selected:void 0;return a}function QSe(e){return Object.values(Nl).includes(e)}function XSe(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(QSe(r)){var i=e.classNames["day_".concat(r)];i&&n.push(i)}}),n}function JSe(e,t){var n=Zt({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=Zt(Zt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function ZSe(e,t,n){var r,a,i,o=kr(),l=SR(),c=WSe(e,t),u=GSe(e,c),d=YSe(),h=!!(o.onDayClick||o.mode!=="default");g.useEffect(function(){var C;c.outside||l.focusedDay&&h&&ma(l.focusedDay,e)&&((C=n.current)===null||C===void 0||C.focus())},[l.focusedDay,e,n,h,c.outside]);var m=XSe(o,c).join(" "),p=JSe(o,c),v=!!(c.outside&&!o.showOutsideDays||c.hidden),x=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:bSe,b=s.jsx(x,{date:e,displayMonth:t,activeModifiers:c}),_={style:p,className:m,children:b,role:"gridcell"},j=l.focusTarget&&ma(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&ma(l.focusedDay,e),N=Zt(Zt(Zt({},_),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=w||j?0:-1,r)),u),k={isButton:h,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:N,divProps:_};return k}function eNe(e){var t=g.useRef(null),n=ZSe(e.date,e.displayMonth,t);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(Aj,Zt({name:"day",ref:t},n.buttonProps)):s.jsx("div",Zt({},n.divProps))}function tNe(e){var t=e.number,n=e.dates,r=kr(),a=r.onWeekNumberClick,i=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var h=c(Number(t),{locale:l}),m=function(p){a(t,n,p)};return s.jsx(Aj,{name:"week-number","aria-label":h,className:o.weeknumber,style:i.weeknumber,onClick:m,children:d})}function nNe(e){var t,n,r=kr(),a=r.styles,i=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:eNe,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:tNe,d;return o&&(d=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(h){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:h})},Nxe(h))})]})}function QF(e,t,n){for(var r=n!=null&&n.ISOWeek?s7(t):$I(t,n),a=n!=null&&n.ISOWeek?wf(e):ic(e,n),i=pl(r,a),o=[],l=0;l<=i;l++)o.push(Us(a,l));var c=o.reduce(function(u,d){var h=n!=null&&n.ISOWeek?o7(d):c7(d,n),m=u.find(function(p){return p.weekNumber===h});return m?(m.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function rNe(e,t){var n=QF(Qa(e),_f(e),t);if(t!=null&&t.useFixedWeeks){var r=Cxe(e,t);if(r<6){var a=n[n.length-1],i=a.dates[a.dates.length-1],o=BT(i,6-r),l=QF(BT(i,1),o,t);n.push.apply(n,l)}}return n}function aNe(e){var t,n,r,a=kr(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,h=a.weekStartsOn,m=a.firstWeekContainsDate,p=a.ISOWeek,v=rNe(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:i,weekStartsOn:h,firstWeekContainsDate:m}),x=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:xSe,b=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:nNe,_=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:gSe;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(x,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:v.map(function(j){return s.jsx(b,{displayMonth:e.displayMonth,dates:j.dates,weekNumber:j.weekNumber},j.weekNumber)})}),s.jsx(_,{displayMonth:e.displayMonth})]})}function sNe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var iNe=sNe()?g.useLayoutEffect:g.useEffect,AA=!1,oNe=0;function XF(){return"react-day-picker-".concat(++oNe)}function lNe(e){var t,n=e??(AA?XF():null),r=g.useState(n),a=r[0],i=r[1];return iNe(function(){a===null&&i(XF())},[]),g.useEffect(function(){AA===!1&&(AA=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function cNe(e){var t,n,r=kr(),a=r.dir,i=r.classNames,o=r.styles,l=r.components,c=lb().displayMonths,u=lNe(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,h=[i.month],m=o.month,p=e.displayIndex===0,v=e.displayIndex===c.length-1,x=!p&&!v;a==="rtl"&&(t=[p,v],v=t[0],p=t[1]),p&&(h.push(i.caption_start),m=Zt(Zt({},m),o.caption_start)),v&&(h.push(i.caption_end),m=Zt(Zt({},m),o.caption_end)),x&&(h.push(i.caption_between),m=Zt(Zt({},m),o.caption_between));var b=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:pSe;return s.jsxs("div",{className:h.join(" "),style:m,children:[s.jsx(b,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(aNe,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function uNe(e){var t=kr(),n=t.classNames,r=t.styles;return s.jsx("div",{className:n.months,style:r.months,children:e.children})}function dNe(e){var t,n,r=e.initialProps,a=kr(),i=SR(),o=lb(),l=g.useState(!1),c=l[0],u=l[1];g.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var h=Zt(Zt({},a.styles.root),a.style),m=Object.keys(r).filter(function(v){return v.startsWith("data-")}).reduce(function(v,x){var b;return Zt(Zt({},v),(b={},b[x]=r[x],b))},{}),p=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:uNe;return s.jsx("div",Zt({className:d.join(" "),style:h,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:s.jsx(p,{children:o.displayMonths.map(function(v,x){return s.jsx(cNe,{displayIndex:x,displayMonth:v},x)})})}))}function hNe(e){var t=e.children,n=M1e(e,["children"]);return s.jsx(tSe,{initialProps:n,children:s.jsx(dSe,{children:s.jsx(qSe,{initialProps:n,children:s.jsx(wSe,{initialProps:n,children:s.jsx(SSe,{initialProps:n,children:s.jsx(OSe,{children:s.jsx(HSe,{children:t})})})})})})})}function fNe(e){return s.jsx(hNe,Zt({},e,{children:s.jsx(dNe,{initialProps:e})}))}function QG({className:e,classNames:t,showOutsideDays:n=!0,...r}){return s.jsx(fNe,{showOutsideDays:n,className:je("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:je(Ox({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:je(Ox({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(vce,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(rj,{className:"h-4 w-4"})},...r})}QG.displayName="Calendar";const aP=({value:e,onChange:t})=>{const[n,r]=g.useState(!1),[a,i]=g.useState(e);g.useEffect(()=>{i(e)},[e]);const o=[{label:"Hm nay",getValue:()=>{const h=new Date;return{from:h,to:h}}},{label:"Hm qua",getValue:()=>{const h=ld(new Date,1);return{from:h,to:h}}},{label:"7 ngy qua",getValue:()=>({from:ld(new Date,6),to:new Date})},{label:"30 ngy qua",getValue:()=>({from:ld(new Date,29),to:new Date})},{label:"Thng ny",getValue:()=>({from:Qa(new Date),to:_f(new Date)})},{label:"Thng trc",getValue:()=>{const h=ld(Qa(new Date),1);return{from:Qa(h),to:_f(h)}}},{label:"Nm nay",getValue:()=>({from:_j(new Date),to:jF(new Date)})},{label:"Nm trc",getValue:()=>{const h=new Date;return h.setFullYear(h.getFullYear()-1),{from:_j(h),to:jF(h)}}},{label:"Ti a",getValue:()=>({from:No(new Date(2020,0,1)),to:Bh(new Date)})}],l=h=>{const m=h.getValue();t(m),r(!1)},c=h=>{if(!(h!=null&&h.from)){i(void 0);return}if(a!=null&&a.from&&(a!=null&&a.to)&&ma(a.from,a.to)&&ma(h.from,a.from)&&!h.to){i(void 0);return}if(a!=null&&a.from&&(a!=null&&a.to)&&!ma(a.from,a.to)&&h.from&&ma(h.from,a.from)&&!h.to){i({from:a.from,to:a.from});return}h.to?i(h):i({from:h.from,to:h.from})},u=()=>{t(a),r(!1)},d=()=>{i(e),r(!1)};return s.jsxs(Q0,{open:n,onOpenChange:h=>{r(h),h&&i(e)},children:[s.jsx(X0,{asChild:!0,children:s.jsxs(J,{variant:"outline",size:"sm",className:je("justify-start text-left font-normal h-6 px-1.5 text-[10px]",!e&&"text-muted-foreground"),children:[s.jsx(Ed,{className:"w-2.5 h-2.5 mr-1"}),e!=null&&e.from?e.to?Exe(e.from)&&ma(e.from,e.to)?s.jsx("span",{children:"Hm nay"}):ma(e.from,e.to)?Bt(e.from,"dd/MM/yyyy",{locale:Uh}):s.jsxs(s.Fragment,{children:[Bt(e.from,"dd/MM/yyyy",{locale:Uh})," -"," ",Bt(e.to,"dd/MM/yyyy",{locale:Uh})]}):Bt(e.from,"dd/MM/yyyy",{locale:Uh}):s.jsx("span",{children:"Chn khong thi gian"})]})}),s.jsx(Qg,{className:"w-auto p-0",align:"start",children:s.jsxs("div",{className:"flex",children:[s.jsxs("div",{className:"border-r py-2 space-y-0.5 w-[130px]",children:[s.jsx("div",{className:"text-xs font-semibold mb-2 px-3",children:"Chn nhanh"}),o.map(h=>s.jsx(J,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs h-7 px-3",onClick:()=>l(h),children:h.label},h.label))]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"p-3",children:s.jsx(QG,{mode:"range",selected:a,onSelect:c,numberOfMonths:2,locale:Uh,className:"pointer-events-auto",modifiers:{today:()=>!1},modifiersClassNames:{today:""}})}),s.jsxs("div",{className:"border-t px-3 py-2 flex justify-end gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:d,children:"Hy"}),s.jsx(J,{size:"sm",onClick:u,children:"Lu"})]})]})]})})]})},Ww=[{value:"ACTIVE",label:" Hot ng",icon:""},{value:"PAUSED",label:" Tm dng",icon:""},{value:"CAMPAIGN_PAUSED",label:" Tm dng do chin dch",icon:""},{value:"DELETED",label:"  xa",icon:""},{value:"ARCHIVED",label:"  lu tr",icon:""},{value:"IN_PROCESS",label:" ang x l",icon:""},{value:"WITH_ISSUES",label:" C vn ",icon:""}],mNe=({selectedStatuses:e,onChange:t})=>{const[n,r]=g.useState(!1),a=l=>{const c=e.includes(l)?e.filter(u=>u!==l):[...e,l];t(c)},i=()=>{e.length===Ww.length?t([]):t(Ww.map(l=>l.value))},o=()=>{t([])};return s.jsxs(Q0,{open:n,onOpenChange:r,children:[s.jsx(X0,{asChild:!0,children:s.jsxs(J,{variant:"outline",size:"sm",className:"h-6 px-1.5 text-[10px]",children:[s.jsx(_ce,{className:"w-2.5 h-2.5 mr-1"}),"Trng thi",e.length>0&&s.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-[9px] bg-primary text-primary-foreground rounded-full",children:e.length})]})}),s.jsx(Qg,{className:"w-64 p-4",align:"start",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Lc theo trng thi"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:"ghost",size:"sm",className:"h-auto p-1 text-xs",onClick:i,children:e.length===Ww.length?"B chn tt c":"Chn tt c"}),e.length>0&&s.jsx(J,{variant:"ghost",size:"sm",className:"h-auto p-1 text-xs",onClick:o,children:"Xa"})]})]}),s.jsx("div",{className:"space-y-2",children:Ww.map(l=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xs,{id:`status-${l.value}`,checked:e.includes(l.value),onCheckedChange:()=>a(l.value)}),s.jsx("label",{htmlFor:`status-${l.value}`,className:"text-sm cursor-pointer flex-1",children:l.label})]},l.value))})]})})]})};function Br(e,t,n){const[r,a]=g.useState(()=>{try{const o=window.localStorage.getItem(e);if(o){const l=JSON.parse(o);return n&&!n(l)?(console.warn(`Invalid value for localStorage key "${e}", using initialValue`),t):l}return t}catch(o){return console.error(`Error loading localStorage key "${e}":`,o),t}}),i=o=>{try{const l=o instanceof Function?o(r):o;a(l),window.localStorage.setItem(e,JSON.stringify(l))}catch(l){console.error(`Error saving localStorage key "${e}":`,l)}};return g.useEffect(()=>{const o=l=>{if(l.key===e&&l.newValue)try{a(JSON.parse(l.newValue))}catch(c){console.error(`Error parsing localStorage key "${e}":`,c)}};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[e]),[r,i]}var Ej={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ej.exports;(function(e,t){(function(){var n,r="4.17.21",a=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",h=1,m=2,p=4,v=1,x=2,b=1,_=2,j=4,w=8,N=16,k=32,C=64,A=128,P=256,O=512,T=30,$="...",L=800,z=16,W=1,B=2,G=3,U=1/0,F=9007199254740991,K=17976931348623157e292,X=NaN,se=4294967295,D=se-1,Y=se>>>1,ue=[["ary",A],["bind",b],["bindKey",_],["curry",w],["curryRight",N],["flip",O],["partial",k],["partialRight",C],["rearg",P]],xe="[object Arguments]",Ne="[object Array]",oe="[object AsyncFunction]",ee="[object Boolean]",re="[object Date]",Z="[object DOMException]",ce="[object Error]",ae="[object Function]",Ue="[object GeneratorFunction]",Ve="[object Map]",ut="[object Number]",Rt="[object Null]",mt="[object Object]",rn="[object Promise]",yn="[object Proxy]",dn="[object RegExp]",Tt="[object Set]",ve="[object String]",Ce="[object Symbol]",ye="[object Undefined]",dt="[object WeakMap]",pt="[object WeakSet]",tn="[object ArrayBuffer]",xn="[object DataView]",on="[object Float32Array]",zn="[object Float64Array]",ti="[object Int8Array]",Rr="[object Int16Array]",Ja="[object Int32Array]",ia="[object Uint8Array]",ni="[object Uint8ClampedArray]",va="[object Uint16Array]",Za="[object Uint32Array]",hc=/\b__p \+= '';/g,mr=/\b(__p \+=) '' \+/g,fc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ye=/&(?:amp|lt|gt|quot|#39);/g,El=/[&<>"']/g,ar=RegExp(Ye.source),mc=RegExp(El.source),tt=/<%-([\s\S]+?)%>/g,Dn=/<%([\s\S]+?)%>/g,mn=/<%=([\s\S]+?)%>/g,es=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cr=/^\w*$/,ya=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ts=/[\\^$.*+?()[\]{}|]/g,xa=RegExp(ts.source),Yr=/^\s+/,yu=/\s/,zo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,us=/\{\n\/\* \[wrapped with (.+)\] \*/,Hn=/,? & /,Es=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ds=/[()=,{}\[\]\/\s]/,Jf=/\\(\\)?/g,Zf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eh=/\w*$/,em=/^[-+]0x[0-9a-f]+$/i,bv=/^0b[01]+$/i,th=/^\[object .+?Constructor\]$/,nh=/^0o[0-7]+$/i,xu=/^(?:0|[1-9]\d*)$/,tm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pc=/($^)/,wv=/['\n\r\u2028\u2029\\]/g,gc="\\ud800-\\udfff",qe="\\u0300-\\u036f",St="\\ufe20-\\ufe2f",Pn="\\u20d0-\\u20ff",Lt=qe+St+Pn,Wt="\\u2700-\\u27bf",Wn="a-z\\xdf-\\xf6\\xf8-\\xff",Ln="\\xac\\xb1\\xd7\\xf7",hs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ro="\\u2000-\\u206f",fs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ao="A-Z\\xc0-\\xd6\\xd8-\\xde",On="\\ufe0e\\ufe0f",ri=Ln+hs+ro+fs,Ua="[']",so="["+gc+"]",vc="["+ri+"]",yc="["+Lt+"]",_v="\\d+",JN="["+Wt+"]",jv="["+Wn+"]",Sv="[^"+gc+ri+_v+Wt+Wn+ao+"]",ms="\\ud83c[\\udffb-\\udfff]",Nv="(?:"+yc+"|"+ms+")",ps="[^"+gc+"]",rh="(?:\\ud83c[\\udde6-\\uddff]){2}",io="[\\ud800-\\udbff][\\udc00-\\udfff]",Tl="["+ao+"]",Ts="\\u200d",ZN="(?:"+jv+"|"+Sv+")",xb="(?:"+Tl+"|"+Sv+")",ek="(?:"+Ua+"(?:d|ll|m|re|s|t|ve))?",kv="(?:"+Ua+"(?:D|LL|M|RE|S|T|VE))?",tk=Nv+"?",Cv="["+On+"]?",nk="(?:"+Ts+"(?:"+[ps,rh,io].join("|")+")"+Cv+tk+")*",ah="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Av="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",oo=Cv+tk+nk,Ev="(?:"+[JN,rh,io].join("|")+")"+oo,bu="(?:"+[ps+yc+"?",yc,rh,io,so].join("|")+")",sh=RegExp(Ua,"g"),nm=RegExp(yc,"g"),wu=RegExp(ms+"(?="+ms+")|"+bu+oo,"g"),rk=RegExp([Tl+"?"+jv+"+"+ek+"(?="+[vc,Tl,"$"].join("|")+")",xb+"+"+kv+"(?="+[vc,Tl+ZN,"$"].join("|")+")",Tl+"?"+ZN+"+"+ek,Tl+"+"+kv,Av,ah,_v,Ev].join("|"),"g"),ak=RegExp("["+Ts+gc+Lt+On+"]"),Tv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bb=-1,pr={};pr[on]=pr[zn]=pr[ti]=pr[Rr]=pr[Ja]=pr[ia]=pr[ni]=pr[va]=pr[Za]=!0,pr[xe]=pr[Ne]=pr[tn]=pr[ee]=pr[xn]=pr[re]=pr[ce]=pr[ae]=pr[Ve]=pr[ut]=pr[mt]=pr[dn]=pr[Tt]=pr[ve]=pr[dt]=!1;var cr={};cr[xe]=cr[Ne]=cr[tn]=cr[xn]=cr[ee]=cr[re]=cr[on]=cr[zn]=cr[ti]=cr[Rr]=cr[Ja]=cr[Ve]=cr[ut]=cr[mt]=cr[dn]=cr[Tt]=cr[ve]=cr[Ce]=cr[ia]=cr[ni]=cr[va]=cr[Za]=!0,cr[ce]=cr[ae]=cr[dt]=!1;var sk={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ik={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ok={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},am=parseFloat,wb=parseInt,_b=typeof Lc=="object"&&Lc&&Lc.Object===Object&&Lc,lk=typeof self=="object"&&self&&self.Object===Object&&self,Ea=_b||lk||Function("return this")(),ih=t&&!t.nodeType&&t,lo=ih&&!0&&e&&!e.nodeType&&e,Ov=lo&&lo.exports===ih,_u=Ov&&_b.process,ai=function(){try{var de=lo&&lo.require&&lo.require("util").types;return de||_u&&_u.binding&&_u.binding("util")}catch{}}(),jb=ai&&ai.isArrayBuffer,oh=ai&&ai.isDate,lh=ai&&ai.isMap,Iv=ai&&ai.isRegExp,Sb=ai&&ai.isSet,Nb=ai&&ai.isTypedArray;function Yt(de,Te,Se){switch(Se.length){case 0:return de.call(Te);case 1:return de.call(Te,Se[0]);case 2:return de.call(Te,Se[0],Se[1]);case 3:return de.call(Te,Se[0],Se[1],Se[2])}return de.apply(Te,Se)}function kb(de,Te,Se,xt){for(var nn=-1,Fn=de==null?0:de.length;++nn<Fn;){var oa=de[nn];Te(xt,oa,Se(oa),de)}return xt}function ba(de,Te){for(var Se=-1,xt=de==null?0:de.length;++Se<xt&&Te(de[Se],Se,de)!==!1;);return de}function ch(de,Te){for(var Se=de==null?0:de.length;Se--&&Te(de[Se],Se,de)!==!1;);return de}function uh(de,Te){for(var Se=-1,xt=de==null?0:de.length;++Se<xt;)if(!Te(de[Se],Se,de))return!1;return!0}function Pl(de,Te){for(var Se=-1,xt=de==null?0:de.length,nn=0,Fn=[];++Se<xt;){var oa=de[Se];Te(oa,Se,de)&&(Fn[nn++]=oa)}return Fn}function dh(de,Te){var Se=de==null?0:de.length;return!!Se&&Su(de,Te,0)>-1}function sm(de,Te,Se){for(var xt=-1,nn=de==null?0:de.length;++xt<nn;)if(Se(Te,de[xt]))return!0;return!1}function er(de,Te){for(var Se=-1,xt=de==null?0:de.length,nn=Array(xt);++Se<xt;)nn[Se]=Te(de[Se],Se,de);return nn}function Ho(de,Te){for(var Se=-1,xt=Te.length,nn=de.length;++Se<xt;)de[nn+Se]=Te[Se];return de}function Rv(de,Te,Se,xt){var nn=-1,Fn=de==null?0:de.length;for(xt&&Fn&&(Se=de[++nn]);++nn<Fn;)Se=Te(Se,de[nn],nn,de);return Se}function im(de,Te,Se,xt){var nn=de==null?0:de.length;for(xt&&nn&&(Se=de[--nn]);nn--;)Se=Te(Se,de[nn],nn,de);return Se}function ju(de,Te){for(var Se=-1,xt=de==null?0:de.length;++Se<xt;)if(Te(de[Se],Se,de))return!0;return!1}var Cb=Ar("length");function Ab(de){return de.split("")}function Eb(de){return de.match(Es)||[]}function Ol(de,Te,Se){var xt;return Se(de,function(nn,Fn,oa){if(Te(nn,Fn,oa))return xt=Fn,!1}),xt}function hh(de,Te,Se,xt){for(var nn=de.length,Fn=Se+(xt?1:-1);xt?Fn--:++Fn<nn;)if(Te(de[Fn],Fn,de))return Fn;return-1}function Su(de,Te,Se){return Te===Te?ph(de,Te,Se):hh(de,Pb,Se)}function Tb(de,Te,Se,xt){for(var nn=Se-1,Fn=de.length;++nn<Fn;)if(xt(de[nn],Te))return nn;return-1}function Pb(de){return de!==de}function xc(de,Te){var Se=de==null?0:de.length;return Se?Dv(de,Te)/Se:X}function Ar(de){return function(Te){return Te==null?n:Te[de]}}function $v(de){return function(Te){return de==null?n:de[Te]}}function fh(de,Te,Se,xt,nn){return nn(de,function(Fn,oa,sr){Se=xt?(xt=!1,Fn):Te(Se,Fn,oa,sr)}),Se}function Mv(de,Te){var Se=de.length;for(de.sort(Te);Se--;)de[Se]=de[Se].value;return de}function Dv(de,Te){for(var Se,xt=-1,nn=de.length;++xt<nn;){var Fn=Te(de[xt]);Fn!==n&&(Se=Se===n?Fn:Se+Fn)}return Se}function om(de,Te){for(var Se=-1,xt=Array(de);++Se<de;)xt[Se]=Te(Se);return xt}function lm(de,Te){return er(Te,function(Se){return[Se,de[Se]]})}function an(de){return de&&de.slice(0,Mb(de)+1).replace(Yr,"")}function Ps(de){return function(Te){return de(Te)}}function Lv(de,Te){return er(Te,function(Se){return de[Se]})}function mh(de,Te){return de.has(Te)}function cm(de,Te){for(var Se=-1,xt=de.length;++Se<xt&&Su(Te,de[Se],0)>-1;);return Se}function Ob(de,Te){for(var Se=de.length;Se--&&Su(Te,de[Se],0)>-1;);return Se}function Ib(de,Te){for(var Se=de.length,xt=0;Se--;)de[Se]===Te&&++xt;return xt}var Rb=$v(sk),Os=$v(ik);function ck(de){return"\\"+Pv[de]}function uk(de,Te){return de==null?n:de[Te]}function Nu(de){return ak.test(de)}function dk(de){return Tv.test(de)}function hk(de){for(var Te,Se=[];!(Te=de.next()).done;)Se.push(Te.value);return Se}function Fv(de){var Te=-1,Se=Array(de.size);return de.forEach(function(xt,nn){Se[++Te]=[nn,xt]}),Se}function $b(de,Te){return function(Se){return de(Te(Se))}}function Il(de,Te){for(var Se=-1,xt=de.length,nn=0,Fn=[];++Se<xt;){var oa=de[Se];(oa===Te||oa===d)&&(de[Se]=d,Fn[nn++]=Se)}return Fn}function um(de){var Te=-1,Se=Array(de.size);return de.forEach(function(xt){Se[++Te]=xt}),Se}function dm(de){var Te=-1,Se=Array(de.size);return de.forEach(function(xt){Se[++Te]=[xt,xt]}),Se}function ph(de,Te,Se){for(var xt=Se-1,nn=de.length;++xt<nn;)if(de[xt]===Te)return xt;return-1}function fk(de,Te,Se){for(var xt=Se+1;xt--;)if(de[xt]===Te)return xt;return xt}function ku(de){return Nu(de)?pk(de):Cb(de)}function Ci(de){return Nu(de)?gk(de):Ab(de)}function Mb(de){for(var Te=de.length;Te--&&yu.test(de.charAt(Te)););return Te}var mk=$v(ok);function pk(de){for(var Te=wu.lastIndex=0;wu.test(de);)++Te;return Te}function gk(de){return de.match(wu)||[]}function vk(de){return de.match(rk)||[]}var yk=function de(Te){Te=Te==null?Ea:Cu.defaults(Ea.Object(),Te,Cu.pick(Ea,rm));var Se=Te.Array,xt=Te.Date,nn=Te.Error,Fn=Te.Function,oa=Te.Math,sr=Te.Object,Bv=Te.RegExp,xk=Te.String,si=Te.TypeError,hm=Se.prototype,bk=Fn.prototype,Au=sr.prototype,fm=Te["__core-js_shared__"],mm=bk.toString,Qn=Au.hasOwnProperty,wk=0,Db=function(){var f=/[^.]+$/.exec(fm&&fm.keys&&fm.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),gh=Au.toString,_k=mm.call(sr),ns=Ea._,jk=Bv("^"+mm.call(Qn).replace(ts,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xn=Ov?Te.Buffer:n,Wo=Te.Symbol,Eu=Te.Uint8Array,la=Xn?Xn.allocUnsafe:n,Uv=$b(sr.getPrototypeOf,sr),Vv=sr.create,Sk=Au.propertyIsEnumerable,zv=hm.splice,Lr=Wo?Wo.isConcatSpreadable:n,vh=Wo?Wo.iterator:n,Rl=Wo?Wo.toStringTag:n,I=function(){try{var f=wh(sr,"defineProperty");return f({},"",{}),f}catch{}}(),q=Te.clearTimeout!==Ea.clearTimeout&&Te.clearTimeout,Q=xt&&xt.now!==Ea.Date.now&&xt.now,he=Te.setTimeout!==Ea.setTimeout&&Te.setTimeout,be=oa.ceil,fe=oa.floor,Ee=sr.getOwnPropertySymbols,$e=Xn?Xn.isBuffer:n,ot=Te.isFinite,we=hm.join,pe=$b(sr.keys,sr),le=oa.max,_e=oa.min,Ie=xt.now,Je=Te.parseInt,He=oa.random,nt=hm.reverse,ct=wh(Te,"DataView"),Ge=wh(Te,"Map"),In=wh(Te,"Promise"),br=wh(Te,"Set"),Ae=wh(Te,"WeakMap"),gt=wh(sr,"create"),vt=Ae&&new Ae,bt={},Qr=_h(ct),qn=_h(Ge),wa=_h(In),At=_h(br),Ai=_h(Ae),Ei=Wo?Wo.prototype:n,Ti=Ei?Ei.valueOf:n,$r=Ei?Ei.toString:n;function M(f){if(Xr(f)&&!hn(f)&&!(f instanceof Ft)){if(f instanceof Bn)return f;if(Qn.call(f,"__wrapped__"))return rD(f)}return new Bn(f)}var Nt=function(){function f(){}return function(y){if(!Fr(y))return{};if(Vv)return Vv(y);f.prototype=y;var S=new f;return f.prototype=n,S}}();function Ta(){}function Bn(f,y){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=n}M.templateSettings={escape:tt,evaluate:Dn,interpolate:mn,variable:"",imports:{_:M}},M.prototype=Ta.prototype,M.prototype.constructor=M,Bn.prototype=Nt(Ta.prototype),Bn.prototype.constructor=Bn;function Ft(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function ke(){var f=new Ft(this.__wrapped__);return f.__actions__=oi(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=oi(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=oi(this.__views__),f}function Vt(){if(this.__filtered__){var f=new Ft(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function tr(){var f=this.__wrapped__.value(),y=this.__dir__,S=hn(f),E=y<0,R=S?f.length:0,H=Yee(0,R,this.__views__),te=H.start,ie=H.end,me=ie-te,De=E?ie:te-1,Le=this.__iteratees__,ze=Le.length,ft=0,Pt=_e(me,this.__takeCount__);if(!S||!E&&R==me&&Pt==me)return kM(f,this.__actions__);var qt=[];e:for(;me--&&ft<Pt;){De+=y;for(var bn=-1,Kt=f[De];++bn<ze;){var En=Le[bn],$n=En.iteratee,Ii=En.type,$s=$n(Kt);if(Ii==B)Kt=$s;else if(!$s){if(Ii==W)continue e;break e}}qt[ft++]=Kt}return qt}Ft.prototype=Nt(Ta.prototype),Ft.prototype.constructor=Ft;function gr(f){var y=-1,S=f==null?0:f.length;for(this.clear();++y<S;){var E=f[y];this.set(E[0],E[1])}}function pm(){this.__data__=gt?gt(null):{},this.size=0}function gm(f){var y=this.has(f)&&delete this.__data__[f];return this.size-=y?1:0,y}function rt(f){var y=this.__data__;if(gt){var S=y[f];return S===c?n:S}return Qn.call(y,f)?y[f]:n}function ca(f){var y=this.__data__;return gt?y[f]!==n:Qn.call(y,f)}function Pa(f,y){var S=this.__data__;return this.size+=this.has(f)?0:1,S[f]=gt&&y===n?c:y,this}gr.prototype.clear=pm,gr.prototype.delete=gm,gr.prototype.get=rt,gr.prototype.has=ca,gr.prototype.set=Pa;function ua(f){var y=-1,S=f==null?0:f.length;for(this.clear();++y<S;){var E=f[y];this.set(E[0],E[1])}}function _a(){this.__data__=[],this.size=0}function ii(f){var y=this.__data__,S=Lb(y,f);if(S<0)return!1;var E=y.length-1;return S==E?y.pop():zv.call(y,S,1),--this.size,!0}function WZ(f){var y=this.__data__,S=Lb(y,f);return S<0?n:y[S][1]}function qZ(f){return Lb(this.__data__,f)>-1}function KZ(f,y){var S=this.__data__,E=Lb(S,f);return E<0?(++this.size,S.push([f,y])):S[E][1]=y,this}ua.prototype.clear=_a,ua.prototype.delete=ii,ua.prototype.get=WZ,ua.prototype.has=qZ,ua.prototype.set=KZ;function bc(f){var y=-1,S=f==null?0:f.length;for(this.clear();++y<S;){var E=f[y];this.set(E[0],E[1])}}function GZ(){this.size=0,this.__data__={hash:new gr,map:new(Ge||ua),string:new gr}}function YZ(f){var y=Qb(this,f).delete(f);return this.size-=y?1:0,y}function QZ(f){return Qb(this,f).get(f)}function XZ(f){return Qb(this,f).has(f)}function JZ(f,y){var S=Qb(this,f),E=S.size;return S.set(f,y),this.size+=S.size==E?0:1,this}bc.prototype.clear=GZ,bc.prototype.delete=YZ,bc.prototype.get=QZ,bc.prototype.has=XZ,bc.prototype.set=JZ;function yh(f){var y=-1,S=f==null?0:f.length;for(this.__data__=new bc;++y<S;)this.add(f[y])}function ZZ(f){return this.__data__.set(f,c),this}function eee(f){return this.__data__.has(f)}yh.prototype.add=yh.prototype.push=ZZ,yh.prototype.has=eee;function qo(f){var y=this.__data__=new ua(f);this.size=y.size}function tee(){this.__data__=new ua,this.size=0}function nee(f){var y=this.__data__,S=y.delete(f);return this.size=y.size,S}function ree(f){return this.__data__.get(f)}function aee(f){return this.__data__.has(f)}function see(f,y){var S=this.__data__;if(S instanceof ua){var E=S.__data__;if(!Ge||E.length<a-1)return E.push([f,y]),this.size=++S.size,this;S=this.__data__=new bc(E)}return S.set(f,y),this.size=S.size,this}qo.prototype.clear=tee,qo.prototype.delete=nee,qo.prototype.get=ree,qo.prototype.has=aee,qo.prototype.set=see;function rM(f,y){var S=hn(f),E=!S&&jh(f),R=!S&&!E&&Ru(f),H=!S&&!E&&!R&&bm(f),te=S||E||R||H,ie=te?om(f.length,xk):[],me=ie.length;for(var De in f)(y||Qn.call(f,De))&&!(te&&(De=="length"||R&&(De=="offset"||De=="parent")||H&&(De=="buffer"||De=="byteLength"||De=="byteOffset")||Sc(De,me)))&&ie.push(De);return ie}function aM(f){var y=f.length;return y?f[$k(0,y-1)]:n}function iee(f,y){return Xb(oi(f),xh(y,0,f.length))}function oee(f){return Xb(oi(f))}function Nk(f,y,S){(S!==n&&!Ko(f[y],S)||S===n&&!(y in f))&&wc(f,y,S)}function Hv(f,y,S){var E=f[y];(!(Qn.call(f,y)&&Ko(E,S))||S===n&&!(y in f))&&wc(f,y,S)}function Lb(f,y){for(var S=f.length;S--;)if(Ko(f[S][0],y))return S;return-1}function lee(f,y,S,E){return Tu(f,function(R,H,te){y(E,R,S(R),te)}),E}function sM(f,y){return f&&Ml(y,Va(y),f)}function cee(f,y){return f&&Ml(y,ci(y),f)}function wc(f,y,S){y=="__proto__"&&I?I(f,y,{configurable:!0,enumerable:!0,value:S,writable:!0}):f[y]=S}function kk(f,y){for(var S=-1,E=y.length,R=Se(E),H=f==null;++S<E;)R[S]=H?n:iC(f,y[S]);return R}function xh(f,y,S){return f===f&&(S!==n&&(f=f<=S?f:S),y!==n&&(f=f>=y?f:y)),f}function co(f,y,S,E,R,H){var te,ie=y&h,me=y&m,De=y&p;if(S&&(te=R?S(f,E,R,H):S(f)),te!==n)return te;if(!Fr(f))return f;var Le=hn(f);if(Le){if(te=Xee(f),!ie)return oi(f,te)}else{var ze=gs(f),ft=ze==ae||ze==Ue;if(Ru(f))return EM(f,ie);if(ze==mt||ze==xe||ft&&!R){if(te=me||ft?{}:GM(f),!ie)return me?Bee(f,cee(te,f)):Fee(f,sM(te,f))}else{if(!cr[ze])return R?f:{};te=Jee(f,ze,ie)}}H||(H=new qo);var Pt=H.get(f);if(Pt)return Pt;H.set(f,te),jD(f)?f.forEach(function(Kt){te.add(co(Kt,y,S,Kt,f,H))}):wD(f)&&f.forEach(function(Kt,En){te.set(En,co(Kt,y,S,En,f,H))});var qt=De?me?qk:Wk:me?ci:Va,bn=Le?n:qt(f);return ba(bn||f,function(Kt,En){bn&&(En=Kt,Kt=f[En]),Hv(te,En,co(Kt,y,S,En,f,H))}),te}function uee(f){var y=Va(f);return function(S){return iM(S,f,y)}}function iM(f,y,S){var E=S.length;if(f==null)return!E;for(f=sr(f);E--;){var R=S[E],H=y[R],te=f[R];if(te===n&&!(R in f)||!H(te))return!1}return!0}function oM(f,y,S){if(typeof f!="function")throw new si(o);return Xv(function(){f.apply(n,S)},y)}function Wv(f,y,S,E){var R=-1,H=dh,te=!0,ie=f.length,me=[],De=y.length;if(!ie)return me;S&&(y=er(y,Ps(S))),E?(H=sm,te=!1):y.length>=a&&(H=mh,te=!1,y=new yh(y));e:for(;++R<ie;){var Le=f[R],ze=S==null?Le:S(Le);if(Le=E||Le!==0?Le:0,te&&ze===ze){for(var ft=De;ft--;)if(y[ft]===ze)continue e;me.push(Le)}else H(y,ze,E)||me.push(Le)}return me}var Tu=RM($l),lM=RM(Ak,!0);function dee(f,y){var S=!0;return Tu(f,function(E,R,H){return S=!!y(E,R,H),S}),S}function Fb(f,y,S){for(var E=-1,R=f.length;++E<R;){var H=f[E],te=y(H);if(te!=null&&(ie===n?te===te&&!Oi(te):S(te,ie)))var ie=te,me=H}return me}function hee(f,y,S,E){var R=f.length;for(S=pn(S),S<0&&(S=-S>R?0:R+S),E=E===n||E>R?R:pn(E),E<0&&(E+=R),E=S>E?0:ND(E);S<E;)f[S++]=y;return f}function cM(f,y){var S=[];return Tu(f,function(E,R,H){y(E,R,H)&&S.push(E)}),S}function rs(f,y,S,E,R){var H=-1,te=f.length;for(S||(S=ete),R||(R=[]);++H<te;){var ie=f[H];y>0&&S(ie)?y>1?rs(ie,y-1,S,E,R):Ho(R,ie):E||(R[R.length]=ie)}return R}var Ck=$M(),uM=$M(!0);function $l(f,y){return f&&Ck(f,y,Va)}function Ak(f,y){return f&&uM(f,y,Va)}function Bb(f,y){return Pl(y,function(S){return Nc(f[S])})}function bh(f,y){y=Ou(y,f);for(var S=0,E=y.length;f!=null&&S<E;)f=f[Dl(y[S++])];return S&&S==E?f:n}function dM(f,y,S){var E=y(f);return hn(f)?E:Ho(E,S(f))}function Is(f){return f==null?f===n?ye:Rt:Rl&&Rl in sr(f)?Gee(f):ote(f)}function Ek(f,y){return f>y}function fee(f,y){return f!=null&&Qn.call(f,y)}function mee(f,y){return f!=null&&y in sr(f)}function pee(f,y,S){return f>=_e(y,S)&&f<le(y,S)}function Tk(f,y,S){for(var E=S?sm:dh,R=f[0].length,H=f.length,te=H,ie=Se(H),me=1/0,De=[];te--;){var Le=f[te];te&&y&&(Le=er(Le,Ps(y))),me=_e(Le.length,me),ie[te]=!S&&(y||R>=120&&Le.length>=120)?new yh(te&&Le):n}Le=f[0];var ze=-1,ft=ie[0];e:for(;++ze<R&&De.length<me;){var Pt=Le[ze],qt=y?y(Pt):Pt;if(Pt=S||Pt!==0?Pt:0,!(ft?mh(ft,qt):E(De,qt,S))){for(te=H;--te;){var bn=ie[te];if(!(bn?mh(bn,qt):E(f[te],qt,S)))continue e}ft&&ft.push(qt),De.push(Pt)}}return De}function gee(f,y,S,E){return $l(f,function(R,H,te){y(E,S(R),H,te)}),E}function qv(f,y,S){y=Ou(y,f),f=JM(f,y);var E=f==null?f:f[Dl(ho(y))];return E==null?n:Yt(E,f,S)}function hM(f){return Xr(f)&&Is(f)==xe}function vee(f){return Xr(f)&&Is(f)==tn}function yee(f){return Xr(f)&&Is(f)==re}function Kv(f,y,S,E,R){return f===y?!0:f==null||y==null||!Xr(f)&&!Xr(y)?f!==f&&y!==y:xee(f,y,S,E,Kv,R)}function xee(f,y,S,E,R,H){var te=hn(f),ie=hn(y),me=te?Ne:gs(f),De=ie?Ne:gs(y);me=me==xe?mt:me,De=De==xe?mt:De;var Le=me==mt,ze=De==mt,ft=me==De;if(ft&&Ru(f)){if(!Ru(y))return!1;te=!0,Le=!1}if(ft&&!Le)return H||(H=new qo),te||bm(f)?WM(f,y,S,E,R,H):qee(f,y,me,S,E,R,H);if(!(S&v)){var Pt=Le&&Qn.call(f,"__wrapped__"),qt=ze&&Qn.call(y,"__wrapped__");if(Pt||qt){var bn=Pt?f.value():f,Kt=qt?y.value():y;return H||(H=new qo),R(bn,Kt,S,E,H)}}return ft?(H||(H=new qo),Kee(f,y,S,E,R,H)):!1}function bee(f){return Xr(f)&&gs(f)==Ve}function Pk(f,y,S,E){var R=S.length,H=R,te=!E;if(f==null)return!H;for(f=sr(f);R--;){var ie=S[R];if(te&&ie[2]?ie[1]!==f[ie[0]]:!(ie[0]in f))return!1}for(;++R<H;){ie=S[R];var me=ie[0],De=f[me],Le=ie[1];if(te&&ie[2]){if(De===n&&!(me in f))return!1}else{var ze=new qo;if(E)var ft=E(De,Le,me,f,y,ze);if(!(ft===n?Kv(Le,De,v|x,E,ze):ft))return!1}}return!0}function fM(f){if(!Fr(f)||nte(f))return!1;var y=Nc(f)?jk:th;return y.test(_h(f))}function wee(f){return Xr(f)&&Is(f)==dn}function _ee(f){return Xr(f)&&gs(f)==Tt}function jee(f){return Xr(f)&&rw(f.length)&&!!pr[Is(f)]}function mM(f){return typeof f=="function"?f:f==null?ui:typeof f=="object"?hn(f)?vM(f[0],f[1]):gM(f):MD(f)}function Ok(f){if(!Qv(f))return pe(f);var y=[];for(var S in sr(f))Qn.call(f,S)&&S!="constructor"&&y.push(S);return y}function See(f){if(!Fr(f))return ite(f);var y=Qv(f),S=[];for(var E in f)E=="constructor"&&(y||!Qn.call(f,E))||S.push(E);return S}function Ik(f,y){return f<y}function pM(f,y){var S=-1,E=li(f)?Se(f.length):[];return Tu(f,function(R,H,te){E[++S]=y(R,H,te)}),E}function gM(f){var y=Gk(f);return y.length==1&&y[0][2]?QM(y[0][0],y[0][1]):function(S){return S===f||Pk(S,f,y)}}function vM(f,y){return Qk(f)&&YM(y)?QM(Dl(f),y):function(S){var E=iC(S,f);return E===n&&E===y?oC(S,f):Kv(y,E,v|x)}}function Ub(f,y,S,E,R){f!==y&&Ck(y,function(H,te){if(R||(R=new qo),Fr(H))Nee(f,y,te,S,Ub,E,R);else{var ie=E?E(Jk(f,te),H,te+"",f,y,R):n;ie===n&&(ie=H),Nk(f,te,ie)}},ci)}function Nee(f,y,S,E,R,H,te){var ie=Jk(f,S),me=Jk(y,S),De=te.get(me);if(De){Nk(f,S,De);return}var Le=H?H(ie,me,S+"",f,y,te):n,ze=Le===n;if(ze){var ft=hn(me),Pt=!ft&&Ru(me),qt=!ft&&!Pt&&bm(me);Le=me,ft||Pt||qt?hn(ie)?Le=ie:da(ie)?Le=oi(ie):Pt?(ze=!1,Le=EM(me,!0)):qt?(ze=!1,Le=TM(me,!0)):Le=[]:Jv(me)||jh(me)?(Le=ie,jh(ie)?Le=kD(ie):(!Fr(ie)||Nc(ie))&&(Le=GM(me))):ze=!1}ze&&(te.set(me,Le),R(Le,me,E,H,te),te.delete(me)),Nk(f,S,Le)}function yM(f,y){var S=f.length;if(S)return y+=y<0?S:0,Sc(y,S)?f[y]:n}function xM(f,y,S){y.length?y=er(y,function(H){return hn(H)?function(te){return bh(te,H.length===1?H[0]:H)}:H}):y=[ui];var E=-1;y=er(y,Ps(Ht()));var R=pM(f,function(H,te,ie){var me=er(y,function(De){return De(H)});return{criteria:me,index:++E,value:H}});return Mv(R,function(H,te){return Lee(H,te,S)})}function kee(f,y){return bM(f,y,function(S,E){return oC(f,E)})}function bM(f,y,S){for(var E=-1,R=y.length,H={};++E<R;){var te=y[E],ie=bh(f,te);S(ie,te)&&Gv(H,Ou(te,f),ie)}return H}function Cee(f){return function(y){return bh(y,f)}}function Rk(f,y,S,E){var R=E?Tb:Su,H=-1,te=y.length,ie=f;for(f===y&&(y=oi(y)),S&&(ie=er(f,Ps(S)));++H<te;)for(var me=0,De=y[H],Le=S?S(De):De;(me=R(ie,Le,me,E))>-1;)ie!==f&&zv.call(ie,me,1),zv.call(f,me,1);return f}function wM(f,y){for(var S=f?y.length:0,E=S-1;S--;){var R=y[S];if(S==E||R!==H){var H=R;Sc(R)?zv.call(f,R,1):Lk(f,R)}}return f}function $k(f,y){return f+fe(He()*(y-f+1))}function Aee(f,y,S,E){for(var R=-1,H=le(be((y-f)/(S||1)),0),te=Se(H);H--;)te[E?H:++R]=f,f+=S;return te}function Mk(f,y){var S="";if(!f||y<1||y>F)return S;do y%2&&(S+=f),y=fe(y/2),y&&(f+=f);while(y);return S}function Sn(f,y){return Zk(XM(f,y,ui),f+"")}function Eee(f){return aM(wm(f))}function Tee(f,y){var S=wm(f);return Xb(S,xh(y,0,S.length))}function Gv(f,y,S,E){if(!Fr(f))return f;y=Ou(y,f);for(var R=-1,H=y.length,te=H-1,ie=f;ie!=null&&++R<H;){var me=Dl(y[R]),De=S;if(me==="__proto__"||me==="constructor"||me==="prototype")return f;if(R!=te){var Le=ie[me];De=E?E(Le,me,ie):n,De===n&&(De=Fr(Le)?Le:Sc(y[R+1])?[]:{})}Hv(ie,me,De),ie=ie[me]}return f}var _M=vt?function(f,y){return vt.set(f,y),f}:ui,Pee=I?function(f,y){return I(f,"toString",{configurable:!0,enumerable:!1,value:cC(y),writable:!0})}:ui;function Oee(f){return Xb(wm(f))}function uo(f,y,S){var E=-1,R=f.length;y<0&&(y=-y>R?0:R+y),S=S>R?R:S,S<0&&(S+=R),R=y>S?0:S-y>>>0,y>>>=0;for(var H=Se(R);++E<R;)H[E]=f[E+y];return H}function Iee(f,y){var S;return Tu(f,function(E,R,H){return S=y(E,R,H),!S}),!!S}function Vb(f,y,S){var E=0,R=f==null?E:f.length;if(typeof y=="number"&&y===y&&R<=Y){for(;E<R;){var H=E+R>>>1,te=f[H];te!==null&&!Oi(te)&&(S?te<=y:te<y)?E=H+1:R=H}return R}return Dk(f,y,ui,S)}function Dk(f,y,S,E){var R=0,H=f==null?0:f.length;if(H===0)return 0;y=S(y);for(var te=y!==y,ie=y===null,me=Oi(y),De=y===n;R<H;){var Le=fe((R+H)/2),ze=S(f[Le]),ft=ze!==n,Pt=ze===null,qt=ze===ze,bn=Oi(ze);if(te)var Kt=E||qt;else De?Kt=qt&&(E||ft):ie?Kt=qt&&ft&&(E||!Pt):me?Kt=qt&&ft&&!Pt&&(E||!bn):Pt||bn?Kt=!1:Kt=E?ze<=y:ze<y;Kt?R=Le+1:H=Le}return _e(H,D)}function jM(f,y){for(var S=-1,E=f.length,R=0,H=[];++S<E;){var te=f[S],ie=y?y(te):te;if(!S||!Ko(ie,me)){var me=ie;H[R++]=te===0?0:te}}return H}function SM(f){return typeof f=="number"?f:Oi(f)?X:+f}function Pi(f){if(typeof f=="string")return f;if(hn(f))return er(f,Pi)+"";if(Oi(f))return $r?$r.call(f):"";var y=f+"";return y=="0"&&1/f==-U?"-0":y}function Pu(f,y,S){var E=-1,R=dh,H=f.length,te=!0,ie=[],me=ie;if(S)te=!1,R=sm;else if(H>=a){var De=y?null:Hee(f);if(De)return um(De);te=!1,R=mh,me=new yh}else me=y?[]:ie;e:for(;++E<H;){var Le=f[E],ze=y?y(Le):Le;if(Le=S||Le!==0?Le:0,te&&ze===ze){for(var ft=me.length;ft--;)if(me[ft]===ze)continue e;y&&me.push(ze),ie.push(Le)}else R(me,ze,S)||(me!==ie&&me.push(ze),ie.push(Le))}return ie}function Lk(f,y){return y=Ou(y,f),f=JM(f,y),f==null||delete f[Dl(ho(y))]}function NM(f,y,S,E){return Gv(f,y,S(bh(f,y)),E)}function zb(f,y,S,E){for(var R=f.length,H=E?R:-1;(E?H--:++H<R)&&y(f[H],H,f););return S?uo(f,E?0:H,E?H+1:R):uo(f,E?H+1:0,E?R:H)}function kM(f,y){var S=f;return S instanceof Ft&&(S=S.value()),Rv(y,function(E,R){return R.func.apply(R.thisArg,Ho([E],R.args))},S)}function Fk(f,y,S){var E=f.length;if(E<2)return E?Pu(f[0]):[];for(var R=-1,H=Se(E);++R<E;)for(var te=f[R],ie=-1;++ie<E;)ie!=R&&(H[R]=Wv(H[R]||te,f[ie],y,S));return Pu(rs(H,1),y,S)}function CM(f,y,S){for(var E=-1,R=f.length,H=y.length,te={};++E<R;){var ie=E<H?y[E]:n;S(te,f[E],ie)}return te}function Bk(f){return da(f)?f:[]}function Uk(f){return typeof f=="function"?f:ui}function Ou(f,y){return hn(f)?f:Qk(f,y)?[f]:nD(nr(f))}var Ree=Sn;function Iu(f,y,S){var E=f.length;return S=S===n?E:S,!y&&S>=E?f:uo(f,y,S)}var AM=q||function(f){return Ea.clearTimeout(f)};function EM(f,y){if(y)return f.slice();var S=f.length,E=la?la(S):new f.constructor(S);return f.copy(E),E}function Vk(f){var y=new f.constructor(f.byteLength);return new Eu(y).set(new Eu(f)),y}function $ee(f,y){var S=y?Vk(f.buffer):f.buffer;return new f.constructor(S,f.byteOffset,f.byteLength)}function Mee(f){var y=new f.constructor(f.source,eh.exec(f));return y.lastIndex=f.lastIndex,y}function Dee(f){return Ti?sr(Ti.call(f)):{}}function TM(f,y){var S=y?Vk(f.buffer):f.buffer;return new f.constructor(S,f.byteOffset,f.length)}function PM(f,y){if(f!==y){var S=f!==n,E=f===null,R=f===f,H=Oi(f),te=y!==n,ie=y===null,me=y===y,De=Oi(y);if(!ie&&!De&&!H&&f>y||H&&te&&me&&!ie&&!De||E&&te&&me||!S&&me||!R)return 1;if(!E&&!H&&!De&&f<y||De&&S&&R&&!E&&!H||ie&&S&&R||!te&&R||!me)return-1}return 0}function Lee(f,y,S){for(var E=-1,R=f.criteria,H=y.criteria,te=R.length,ie=S.length;++E<te;){var me=PM(R[E],H[E]);if(me){if(E>=ie)return me;var De=S[E];return me*(De=="desc"?-1:1)}}return f.index-y.index}function OM(f,y,S,E){for(var R=-1,H=f.length,te=S.length,ie=-1,me=y.length,De=le(H-te,0),Le=Se(me+De),ze=!E;++ie<me;)Le[ie]=y[ie];for(;++R<te;)(ze||R<H)&&(Le[S[R]]=f[R]);for(;De--;)Le[ie++]=f[R++];return Le}function IM(f,y,S,E){for(var R=-1,H=f.length,te=-1,ie=S.length,me=-1,De=y.length,Le=le(H-ie,0),ze=Se(Le+De),ft=!E;++R<Le;)ze[R]=f[R];for(var Pt=R;++me<De;)ze[Pt+me]=y[me];for(;++te<ie;)(ft||R<H)&&(ze[Pt+S[te]]=f[R++]);return ze}function oi(f,y){var S=-1,E=f.length;for(y||(y=Se(E));++S<E;)y[S]=f[S];return y}function Ml(f,y,S,E){var R=!S;S||(S={});for(var H=-1,te=y.length;++H<te;){var ie=y[H],me=E?E(S[ie],f[ie],ie,S,f):n;me===n&&(me=f[ie]),R?wc(S,ie,me):Hv(S,ie,me)}return S}function Fee(f,y){return Ml(f,Yk(f),y)}function Bee(f,y){return Ml(f,qM(f),y)}function Hb(f,y){return function(S,E){var R=hn(S)?kb:lee,H=y?y():{};return R(S,f,Ht(E,2),H)}}function vm(f){return Sn(function(y,S){var E=-1,R=S.length,H=R>1?S[R-1]:n,te=R>2?S[2]:n;for(H=f.length>3&&typeof H=="function"?(R--,H):n,te&&Rs(S[0],S[1],te)&&(H=R<3?n:H,R=1),y=sr(y);++E<R;){var ie=S[E];ie&&f(y,ie,E,H)}return y})}function RM(f,y){return function(S,E){if(S==null)return S;if(!li(S))return f(S,E);for(var R=S.length,H=y?R:-1,te=sr(S);(y?H--:++H<R)&&E(te[H],H,te)!==!1;);return S}}function $M(f){return function(y,S,E){for(var R=-1,H=sr(y),te=E(y),ie=te.length;ie--;){var me=te[f?ie:++R];if(S(H[me],me,H)===!1)break}return y}}function Uee(f,y,S){var E=y&b,R=Yv(f);function H(){var te=this&&this!==Ea&&this instanceof H?R:f;return te.apply(E?S:this,arguments)}return H}function MM(f){return function(y){y=nr(y);var S=Nu(y)?Ci(y):n,E=S?S[0]:y.charAt(0),R=S?Iu(S,1).join(""):y.slice(1);return E[f]()+R}}function ym(f){return function(y){return Rv(RD(ID(y).replace(sh,"")),f,"")}}function Yv(f){return function(){var y=arguments;switch(y.length){case 0:return new f;case 1:return new f(y[0]);case 2:return new f(y[0],y[1]);case 3:return new f(y[0],y[1],y[2]);case 4:return new f(y[0],y[1],y[2],y[3]);case 5:return new f(y[0],y[1],y[2],y[3],y[4]);case 6:return new f(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new f(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var S=Nt(f.prototype),E=f.apply(S,y);return Fr(E)?E:S}}function Vee(f,y,S){var E=Yv(f);function R(){for(var H=arguments.length,te=Se(H),ie=H,me=xm(R);ie--;)te[ie]=arguments[ie];var De=H<3&&te[0]!==me&&te[H-1]!==me?[]:Il(te,me);if(H-=De.length,H<S)return UM(f,y,Wb,R.placeholder,n,te,De,n,n,S-H);var Le=this&&this!==Ea&&this instanceof R?E:f;return Yt(Le,this,te)}return R}function DM(f){return function(y,S,E){var R=sr(y);if(!li(y)){var H=Ht(S,3);y=Va(y),S=function(ie){return H(R[ie],ie,R)}}var te=f(y,S,E);return te>-1?R[H?y[te]:te]:n}}function LM(f){return jc(function(y){var S=y.length,E=S,R=Bn.prototype.thru;for(f&&y.reverse();E--;){var H=y[E];if(typeof H!="function")throw new si(o);if(R&&!te&&Yb(H)=="wrapper")var te=new Bn([],!0)}for(E=te?E:S;++E<S;){H=y[E];var ie=Yb(H),me=ie=="wrapper"?Kk(H):n;me&&Xk(me[0])&&me[1]==(A|w|k|P)&&!me[4].length&&me[9]==1?te=te[Yb(me[0])].apply(te,me[3]):te=H.length==1&&Xk(H)?te[ie]():te.thru(H)}return function(){var De=arguments,Le=De[0];if(te&&De.length==1&&hn(Le))return te.plant(Le).value();for(var ze=0,ft=S?y[ze].apply(this,De):Le;++ze<S;)ft=y[ze].call(this,ft);return ft}})}function Wb(f,y,S,E,R,H,te,ie,me,De){var Le=y&A,ze=y&b,ft=y&_,Pt=y&(w|N),qt=y&O,bn=ft?n:Yv(f);function Kt(){for(var En=arguments.length,$n=Se(En),Ii=En;Ii--;)$n[Ii]=arguments[Ii];if(Pt)var $s=xm(Kt),Ri=Ib($n,$s);if(E&&($n=OM($n,E,R,Pt)),H&&($n=IM($n,H,te,Pt)),En-=Ri,Pt&&En<De){var ha=Il($n,$s);return UM(f,y,Wb,Kt.placeholder,S,$n,ha,ie,me,De-En)}var Go=ze?S:this,Cc=ft?Go[f]:f;return En=$n.length,ie?$n=lte($n,ie):qt&&En>1&&$n.reverse(),Le&&me<En&&($n.length=me),this&&this!==Ea&&this instanceof Kt&&(Cc=bn||Yv(Cc)),Cc.apply(Go,$n)}return Kt}function FM(f,y){return function(S,E){return gee(S,f,y(E),{})}}function qb(f,y){return function(S,E){var R;if(S===n&&E===n)return y;if(S!==n&&(R=S),E!==n){if(R===n)return E;typeof S=="string"||typeof E=="string"?(S=Pi(S),E=Pi(E)):(S=SM(S),E=SM(E)),R=f(S,E)}return R}}function zk(f){return jc(function(y){return y=er(y,Ps(Ht())),Sn(function(S){var E=this;return f(y,function(R){return Yt(R,E,S)})})})}function Kb(f,y){y=y===n?" ":Pi(y);var S=y.length;if(S<2)return S?Mk(y,f):y;var E=Mk(y,be(f/ku(y)));return Nu(y)?Iu(Ci(E),0,f).join(""):E.slice(0,f)}function zee(f,y,S,E){var R=y&b,H=Yv(f);function te(){for(var ie=-1,me=arguments.length,De=-1,Le=E.length,ze=Se(Le+me),ft=this&&this!==Ea&&this instanceof te?H:f;++De<Le;)ze[De]=E[De];for(;me--;)ze[De++]=arguments[++ie];return Yt(ft,R?S:this,ze)}return te}function BM(f){return function(y,S,E){return E&&typeof E!="number"&&Rs(y,S,E)&&(S=E=n),y=kc(y),S===n?(S=y,y=0):S=kc(S),E=E===n?y<S?1:-1:kc(E),Aee(y,S,E,f)}}function Gb(f){return function(y,S){return typeof y=="string"&&typeof S=="string"||(y=fo(y),S=fo(S)),f(y,S)}}function UM(f,y,S,E,R,H,te,ie,me,De){var Le=y&w,ze=Le?te:n,ft=Le?n:te,Pt=Le?H:n,qt=Le?n:H;y|=Le?k:C,y&=~(Le?C:k),y&j||(y&=~(b|_));var bn=[f,y,R,Pt,ze,qt,ft,ie,me,De],Kt=S.apply(n,bn);return Xk(f)&&ZM(Kt,bn),Kt.placeholder=E,eD(Kt,f,y)}function Hk(f){var y=oa[f];return function(S,E){if(S=fo(S),E=E==null?0:_e(pn(E),292),E&&ot(S)){var R=(nr(S)+"e").split("e"),H=y(R[0]+"e"+(+R[1]+E));return R=(nr(H)+"e").split("e"),+(R[0]+"e"+(+R[1]-E))}return y(S)}}var Hee=br&&1/um(new br([,-0]))[1]==U?function(f){return new br(f)}:hC;function VM(f){return function(y){var S=gs(y);return S==Ve?Fv(y):S==Tt?dm(y):lm(y,f(y))}}function _c(f,y,S,E,R,H,te,ie){var me=y&_;if(!me&&typeof f!="function")throw new si(o);var De=E?E.length:0;if(De||(y&=~(k|C),E=R=n),te=te===n?te:le(pn(te),0),ie=ie===n?ie:pn(ie),De-=R?R.length:0,y&C){var Le=E,ze=R;E=R=n}var ft=me?n:Kk(f),Pt=[f,y,S,E,R,Le,ze,H,te,ie];if(ft&&ste(Pt,ft),f=Pt[0],y=Pt[1],S=Pt[2],E=Pt[3],R=Pt[4],ie=Pt[9]=Pt[9]===n?me?0:f.length:le(Pt[9]-De,0),!ie&&y&(w|N)&&(y&=~(w|N)),!y||y==b)var qt=Uee(f,y,S);else y==w||y==N?qt=Vee(f,y,ie):(y==k||y==(b|k))&&!R.length?qt=zee(f,y,S,E):qt=Wb.apply(n,Pt);var bn=ft?_M:ZM;return eD(bn(qt,Pt),f,y)}function zM(f,y,S,E){return f===n||Ko(f,Au[S])&&!Qn.call(E,S)?y:f}function HM(f,y,S,E,R,H){return Fr(f)&&Fr(y)&&(H.set(y,f),Ub(f,y,n,HM,H),H.delete(y)),f}function Wee(f){return Jv(f)?n:f}function WM(f,y,S,E,R,H){var te=S&v,ie=f.length,me=y.length;if(ie!=me&&!(te&&me>ie))return!1;var De=H.get(f),Le=H.get(y);if(De&&Le)return De==y&&Le==f;var ze=-1,ft=!0,Pt=S&x?new yh:n;for(H.set(f,y),H.set(y,f);++ze<ie;){var qt=f[ze],bn=y[ze];if(E)var Kt=te?E(bn,qt,ze,y,f,H):E(qt,bn,ze,f,y,H);if(Kt!==n){if(Kt)continue;ft=!1;break}if(Pt){if(!ju(y,function(En,$n){if(!mh(Pt,$n)&&(qt===En||R(qt,En,S,E,H)))return Pt.push($n)})){ft=!1;break}}else if(!(qt===bn||R(qt,bn,S,E,H))){ft=!1;break}}return H.delete(f),H.delete(y),ft}function qee(f,y,S,E,R,H,te){switch(S){case xn:if(f.byteLength!=y.byteLength||f.byteOffset!=y.byteOffset)return!1;f=f.buffer,y=y.buffer;case tn:return!(f.byteLength!=y.byteLength||!H(new Eu(f),new Eu(y)));case ee:case re:case ut:return Ko(+f,+y);case ce:return f.name==y.name&&f.message==y.message;case dn:case ve:return f==y+"";case Ve:var ie=Fv;case Tt:var me=E&v;if(ie||(ie=um),f.size!=y.size&&!me)return!1;var De=te.get(f);if(De)return De==y;E|=x,te.set(f,y);var Le=WM(ie(f),ie(y),E,R,H,te);return te.delete(f),Le;case Ce:if(Ti)return Ti.call(f)==Ti.call(y)}return!1}function Kee(f,y,S,E,R,H){var te=S&v,ie=Wk(f),me=ie.length,De=Wk(y),Le=De.length;if(me!=Le&&!te)return!1;for(var ze=me;ze--;){var ft=ie[ze];if(!(te?ft in y:Qn.call(y,ft)))return!1}var Pt=H.get(f),qt=H.get(y);if(Pt&&qt)return Pt==y&&qt==f;var bn=!0;H.set(f,y),H.set(y,f);for(var Kt=te;++ze<me;){ft=ie[ze];var En=f[ft],$n=y[ft];if(E)var Ii=te?E($n,En,ft,y,f,H):E(En,$n,ft,f,y,H);if(!(Ii===n?En===$n||R(En,$n,S,E,H):Ii)){bn=!1;break}Kt||(Kt=ft=="constructor")}if(bn&&!Kt){var $s=f.constructor,Ri=y.constructor;$s!=Ri&&"constructor"in f&&"constructor"in y&&!(typeof $s=="function"&&$s instanceof $s&&typeof Ri=="function"&&Ri instanceof Ri)&&(bn=!1)}return H.delete(f),H.delete(y),bn}function jc(f){return Zk(XM(f,n,iD),f+"")}function Wk(f){return dM(f,Va,Yk)}function qk(f){return dM(f,ci,qM)}var Kk=vt?function(f){return vt.get(f)}:hC;function Yb(f){for(var y=f.name+"",S=bt[y],E=Qn.call(bt,y)?S.length:0;E--;){var R=S[E],H=R.func;if(H==null||H==f)return R.name}return y}function xm(f){var y=Qn.call(M,"placeholder")?M:f;return y.placeholder}function Ht(){var f=M.iteratee||uC;return f=f===uC?mM:f,arguments.length?f(arguments[0],arguments[1]):f}function Qb(f,y){var S=f.__data__;return tte(y)?S[typeof y=="string"?"string":"hash"]:S.map}function Gk(f){for(var y=Va(f),S=y.length;S--;){var E=y[S],R=f[E];y[S]=[E,R,YM(R)]}return y}function wh(f,y){var S=uk(f,y);return fM(S)?S:n}function Gee(f){var y=Qn.call(f,Rl),S=f[Rl];try{f[Rl]=n;var E=!0}catch{}var R=gh.call(f);return E&&(y?f[Rl]=S:delete f[Rl]),R}var Yk=Ee?function(f){return f==null?[]:(f=sr(f),Pl(Ee(f),function(y){return Sk.call(f,y)}))}:fC,qM=Ee?function(f){for(var y=[];f;)Ho(y,Yk(f)),f=Uv(f);return y}:fC,gs=Is;(ct&&gs(new ct(new ArrayBuffer(1)))!=xn||Ge&&gs(new Ge)!=Ve||In&&gs(In.resolve())!=rn||br&&gs(new br)!=Tt||Ae&&gs(new Ae)!=dt)&&(gs=function(f){var y=Is(f),S=y==mt?f.constructor:n,E=S?_h(S):"";if(E)switch(E){case Qr:return xn;case qn:return Ve;case wa:return rn;case At:return Tt;case Ai:return dt}return y});function Yee(f,y,S){for(var E=-1,R=S.length;++E<R;){var H=S[E],te=H.size;switch(H.type){case"drop":f+=te;break;case"dropRight":y-=te;break;case"take":y=_e(y,f+te);break;case"takeRight":f=le(f,y-te);break}}return{start:f,end:y}}function Qee(f){var y=f.match(us);return y?y[1].split(Hn):[]}function KM(f,y,S){y=Ou(y,f);for(var E=-1,R=y.length,H=!1;++E<R;){var te=Dl(y[E]);if(!(H=f!=null&&S(f,te)))break;f=f[te]}return H||++E!=R?H:(R=f==null?0:f.length,!!R&&rw(R)&&Sc(te,R)&&(hn(f)||jh(f)))}function Xee(f){var y=f.length,S=new f.constructor(y);return y&&typeof f[0]=="string"&&Qn.call(f,"index")&&(S.index=f.index,S.input=f.input),S}function GM(f){return typeof f.constructor=="function"&&!Qv(f)?Nt(Uv(f)):{}}function Jee(f,y,S){var E=f.constructor;switch(y){case tn:return Vk(f);case ee:case re:return new E(+f);case xn:return $ee(f,S);case on:case zn:case ti:case Rr:case Ja:case ia:case ni:case va:case Za:return TM(f,S);case Ve:return new E;case ut:case ve:return new E(f);case dn:return Mee(f);case Tt:return new E;case Ce:return Dee(f)}}function Zee(f,y){var S=y.length;if(!S)return f;var E=S-1;return y[E]=(S>1?"& ":"")+y[E],y=y.join(S>2?", ":" "),f.replace(zo,`{
/* [wrapped with `+y+`] */
`)}function ete(f){return hn(f)||jh(f)||!!(Lr&&f&&f[Lr])}function Sc(f,y){var S=typeof f;return y=y??F,!!y&&(S=="number"||S!="symbol"&&xu.test(f))&&f>-1&&f%1==0&&f<y}function Rs(f,y,S){if(!Fr(S))return!1;var E=typeof y;return(E=="number"?li(S)&&Sc(y,S.length):E=="string"&&y in S)?Ko(S[y],f):!1}function Qk(f,y){if(hn(f))return!1;var S=typeof f;return S=="number"||S=="symbol"||S=="boolean"||f==null||Oi(f)?!0:Cr.test(f)||!es.test(f)||y!=null&&f in sr(y)}function tte(f){var y=typeof f;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?f!=="__proto__":f===null}function Xk(f){var y=Yb(f),S=M[y];if(typeof S!="function"||!(y in Ft.prototype))return!1;if(f===S)return!0;var E=Kk(S);return!!E&&f===E[0]}function nte(f){return!!Db&&Db in f}var rte=fm?Nc:mC;function Qv(f){var y=f&&f.constructor,S=typeof y=="function"&&y.prototype||Au;return f===S}function YM(f){return f===f&&!Fr(f)}function QM(f,y){return function(S){return S==null?!1:S[f]===y&&(y!==n||f in sr(S))}}function ate(f){var y=tw(f,function(E){return S.size===u&&S.clear(),E}),S=y.cache;return y}function ste(f,y){var S=f[1],E=y[1],R=S|E,H=R<(b|_|A),te=E==A&&S==w||E==A&&S==P&&f[7].length<=y[8]||E==(A|P)&&y[7].length<=y[8]&&S==w;if(!(H||te))return f;E&b&&(f[2]=y[2],R|=S&b?0:j);var ie=y[3];if(ie){var me=f[3];f[3]=me?OM(me,ie,y[4]):ie,f[4]=me?Il(f[3],d):y[4]}return ie=y[5],ie&&(me=f[5],f[5]=me?IM(me,ie,y[6]):ie,f[6]=me?Il(f[5],d):y[6]),ie=y[7],ie&&(f[7]=ie),E&A&&(f[8]=f[8]==null?y[8]:_e(f[8],y[8])),f[9]==null&&(f[9]=y[9]),f[0]=y[0],f[1]=R,f}function ite(f){var y=[];if(f!=null)for(var S in sr(f))y.push(S);return y}function ote(f){return gh.call(f)}function XM(f,y,S){return y=le(y===n?f.length-1:y,0),function(){for(var E=arguments,R=-1,H=le(E.length-y,0),te=Se(H);++R<H;)te[R]=E[y+R];R=-1;for(var ie=Se(y+1);++R<y;)ie[R]=E[R];return ie[y]=S(te),Yt(f,this,ie)}}function JM(f,y){return y.length<2?f:bh(f,uo(y,0,-1))}function lte(f,y){for(var S=f.length,E=_e(y.length,S),R=oi(f);E--;){var H=y[E];f[E]=Sc(H,S)?R[H]:n}return f}function Jk(f,y){if(!(y==="constructor"&&typeof f[y]=="function")&&y!="__proto__")return f[y]}var ZM=tD(_M),Xv=he||function(f,y){return Ea.setTimeout(f,y)},Zk=tD(Pee);function eD(f,y,S){var E=y+"";return Zk(f,Zee(E,cte(Qee(E),S)))}function tD(f){var y=0,S=0;return function(){var E=Ie(),R=z-(E-S);if(S=E,R>0){if(++y>=L)return arguments[0]}else y=0;return f.apply(n,arguments)}}function Xb(f,y){var S=-1,E=f.length,R=E-1;for(y=y===n?E:y;++S<y;){var H=$k(S,R),te=f[H];f[H]=f[S],f[S]=te}return f.length=y,f}var nD=ate(function(f){var y=[];return f.charCodeAt(0)===46&&y.push(""),f.replace(ya,function(S,E,R,H){y.push(R?H.replace(Jf,"$1"):E||S)}),y});function Dl(f){if(typeof f=="string"||Oi(f))return f;var y=f+"";return y=="0"&&1/f==-U?"-0":y}function _h(f){if(f!=null){try{return mm.call(f)}catch{}try{return f+""}catch{}}return""}function cte(f,y){return ba(ue,function(S){var E="_."+S[0];y&S[1]&&!dh(f,E)&&f.push(E)}),f.sort()}function rD(f){if(f instanceof Ft)return f.clone();var y=new Bn(f.__wrapped__,f.__chain__);return y.__actions__=oi(f.__actions__),y.__index__=f.__index__,y.__values__=f.__values__,y}function ute(f,y,S){(S?Rs(f,y,S):y===n)?y=1:y=le(pn(y),0);var E=f==null?0:f.length;if(!E||y<1)return[];for(var R=0,H=0,te=Se(be(E/y));R<E;)te[H++]=uo(f,R,R+=y);return te}function dte(f){for(var y=-1,S=f==null?0:f.length,E=0,R=[];++y<S;){var H=f[y];H&&(R[E++]=H)}return R}function hte(){var f=arguments.length;if(!f)return[];for(var y=Se(f-1),S=arguments[0],E=f;E--;)y[E-1]=arguments[E];return Ho(hn(S)?oi(S):[S],rs(y,1))}var fte=Sn(function(f,y){return da(f)?Wv(f,rs(y,1,da,!0)):[]}),mte=Sn(function(f,y){var S=ho(y);return da(S)&&(S=n),da(f)?Wv(f,rs(y,1,da,!0),Ht(S,2)):[]}),pte=Sn(function(f,y){var S=ho(y);return da(S)&&(S=n),da(f)?Wv(f,rs(y,1,da,!0),n,S):[]});function gte(f,y,S){var E=f==null?0:f.length;return E?(y=S||y===n?1:pn(y),uo(f,y<0?0:y,E)):[]}function vte(f,y,S){var E=f==null?0:f.length;return E?(y=S||y===n?1:pn(y),y=E-y,uo(f,0,y<0?0:y)):[]}function yte(f,y){return f&&f.length?zb(f,Ht(y,3),!0,!0):[]}function xte(f,y){return f&&f.length?zb(f,Ht(y,3),!0):[]}function bte(f,y,S,E){var R=f==null?0:f.length;return R?(S&&typeof S!="number"&&Rs(f,y,S)&&(S=0,E=R),hee(f,y,S,E)):[]}function aD(f,y,S){var E=f==null?0:f.length;if(!E)return-1;var R=S==null?0:pn(S);return R<0&&(R=le(E+R,0)),hh(f,Ht(y,3),R)}function sD(f,y,S){var E=f==null?0:f.length;if(!E)return-1;var R=E-1;return S!==n&&(R=pn(S),R=S<0?le(E+R,0):_e(R,E-1)),hh(f,Ht(y,3),R,!0)}function iD(f){var y=f==null?0:f.length;return y?rs(f,1):[]}function wte(f){var y=f==null?0:f.length;return y?rs(f,U):[]}function _te(f,y){var S=f==null?0:f.length;return S?(y=y===n?1:pn(y),rs(f,y)):[]}function jte(f){for(var y=-1,S=f==null?0:f.length,E={};++y<S;){var R=f[y];E[R[0]]=R[1]}return E}function oD(f){return f&&f.length?f[0]:n}function Ste(f,y,S){var E=f==null?0:f.length;if(!E)return-1;var R=S==null?0:pn(S);return R<0&&(R=le(E+R,0)),Su(f,y,R)}function Nte(f){var y=f==null?0:f.length;return y?uo(f,0,-1):[]}var kte=Sn(function(f){var y=er(f,Bk);return y.length&&y[0]===f[0]?Tk(y):[]}),Cte=Sn(function(f){var y=ho(f),S=er(f,Bk);return y===ho(S)?y=n:S.pop(),S.length&&S[0]===f[0]?Tk(S,Ht(y,2)):[]}),Ate=Sn(function(f){var y=ho(f),S=er(f,Bk);return y=typeof y=="function"?y:n,y&&S.pop(),S.length&&S[0]===f[0]?Tk(S,n,y):[]});function Ete(f,y){return f==null?"":we.call(f,y)}function ho(f){var y=f==null?0:f.length;return y?f[y-1]:n}function Tte(f,y,S){var E=f==null?0:f.length;if(!E)return-1;var R=E;return S!==n&&(R=pn(S),R=R<0?le(E+R,0):_e(R,E-1)),y===y?fk(f,y,R):hh(f,Pb,R,!0)}function Pte(f,y){return f&&f.length?yM(f,pn(y)):n}var Ote=Sn(lD);function lD(f,y){return f&&f.length&&y&&y.length?Rk(f,y):f}function Ite(f,y,S){return f&&f.length&&y&&y.length?Rk(f,y,Ht(S,2)):f}function Rte(f,y,S){return f&&f.length&&y&&y.length?Rk(f,y,n,S):f}var $te=jc(function(f,y){var S=f==null?0:f.length,E=kk(f,y);return wM(f,er(y,function(R){return Sc(R,S)?+R:R}).sort(PM)),E});function Mte(f,y){var S=[];if(!(f&&f.length))return S;var E=-1,R=[],H=f.length;for(y=Ht(y,3);++E<H;){var te=f[E];y(te,E,f)&&(S.push(te),R.push(E))}return wM(f,R),S}function eC(f){return f==null?f:nt.call(f)}function Dte(f,y,S){var E=f==null?0:f.length;return E?(S&&typeof S!="number"&&Rs(f,y,S)?(y=0,S=E):(y=y==null?0:pn(y),S=S===n?E:pn(S)),uo(f,y,S)):[]}function Lte(f,y){return Vb(f,y)}function Fte(f,y,S){return Dk(f,y,Ht(S,2))}function Bte(f,y){var S=f==null?0:f.length;if(S){var E=Vb(f,y);if(E<S&&Ko(f[E],y))return E}return-1}function Ute(f,y){return Vb(f,y,!0)}function Vte(f,y,S){return Dk(f,y,Ht(S,2),!0)}function zte(f,y){var S=f==null?0:f.length;if(S){var E=Vb(f,y,!0)-1;if(Ko(f[E],y))return E}return-1}function Hte(f){return f&&f.length?jM(f):[]}function Wte(f,y){return f&&f.length?jM(f,Ht(y,2)):[]}function qte(f){var y=f==null?0:f.length;return y?uo(f,1,y):[]}function Kte(f,y,S){return f&&f.length?(y=S||y===n?1:pn(y),uo(f,0,y<0?0:y)):[]}function Gte(f,y,S){var E=f==null?0:f.length;return E?(y=S||y===n?1:pn(y),y=E-y,uo(f,y<0?0:y,E)):[]}function Yte(f,y){return f&&f.length?zb(f,Ht(y,3),!1,!0):[]}function Qte(f,y){return f&&f.length?zb(f,Ht(y,3)):[]}var Xte=Sn(function(f){return Pu(rs(f,1,da,!0))}),Jte=Sn(function(f){var y=ho(f);return da(y)&&(y=n),Pu(rs(f,1,da,!0),Ht(y,2))}),Zte=Sn(function(f){var y=ho(f);return y=typeof y=="function"?y:n,Pu(rs(f,1,da,!0),n,y)});function ene(f){return f&&f.length?Pu(f):[]}function tne(f,y){return f&&f.length?Pu(f,Ht(y,2)):[]}function nne(f,y){return y=typeof y=="function"?y:n,f&&f.length?Pu(f,n,y):[]}function tC(f){if(!(f&&f.length))return[];var y=0;return f=Pl(f,function(S){if(da(S))return y=le(S.length,y),!0}),om(y,function(S){return er(f,Ar(S))})}function cD(f,y){if(!(f&&f.length))return[];var S=tC(f);return y==null?S:er(S,function(E){return Yt(y,n,E)})}var rne=Sn(function(f,y){return da(f)?Wv(f,y):[]}),ane=Sn(function(f){return Fk(Pl(f,da))}),sne=Sn(function(f){var y=ho(f);return da(y)&&(y=n),Fk(Pl(f,da),Ht(y,2))}),ine=Sn(function(f){var y=ho(f);return y=typeof y=="function"?y:n,Fk(Pl(f,da),n,y)}),one=Sn(tC);function lne(f,y){return CM(f||[],y||[],Hv)}function cne(f,y){return CM(f||[],y||[],Gv)}var une=Sn(function(f){var y=f.length,S=y>1?f[y-1]:n;return S=typeof S=="function"?(f.pop(),S):n,cD(f,S)});function uD(f){var y=M(f);return y.__chain__=!0,y}function dne(f,y){return y(f),f}function Jb(f,y){return y(f)}var hne=jc(function(f){var y=f.length,S=y?f[0]:0,E=this.__wrapped__,R=function(H){return kk(H,f)};return y>1||this.__actions__.length||!(E instanceof Ft)||!Sc(S)?this.thru(R):(E=E.slice(S,+S+(y?1:0)),E.__actions__.push({func:Jb,args:[R],thisArg:n}),new Bn(E,this.__chain__).thru(function(H){return y&&!H.length&&H.push(n),H}))});function fne(){return uD(this)}function mne(){return new Bn(this.value(),this.__chain__)}function pne(){this.__values__===n&&(this.__values__=SD(this.value()));var f=this.__index__>=this.__values__.length,y=f?n:this.__values__[this.__index__++];return{done:f,value:y}}function gne(){return this}function vne(f){for(var y,S=this;S instanceof Ta;){var E=rD(S);E.__index__=0,E.__values__=n,y?R.__wrapped__=E:y=E;var R=E;S=S.__wrapped__}return R.__wrapped__=f,y}function yne(){var f=this.__wrapped__;if(f instanceof Ft){var y=f;return this.__actions__.length&&(y=new Ft(this)),y=y.reverse(),y.__actions__.push({func:Jb,args:[eC],thisArg:n}),new Bn(y,this.__chain__)}return this.thru(eC)}function xne(){return kM(this.__wrapped__,this.__actions__)}var bne=Hb(function(f,y,S){Qn.call(f,S)?++f[S]:wc(f,S,1)});function wne(f,y,S){var E=hn(f)?uh:dee;return S&&Rs(f,y,S)&&(y=n),E(f,Ht(y,3))}function _ne(f,y){var S=hn(f)?Pl:cM;return S(f,Ht(y,3))}var jne=DM(aD),Sne=DM(sD);function Nne(f,y){return rs(Zb(f,y),1)}function kne(f,y){return rs(Zb(f,y),U)}function Cne(f,y,S){return S=S===n?1:pn(S),rs(Zb(f,y),S)}function dD(f,y){var S=hn(f)?ba:Tu;return S(f,Ht(y,3))}function hD(f,y){var S=hn(f)?ch:lM;return S(f,Ht(y,3))}var Ane=Hb(function(f,y,S){Qn.call(f,S)?f[S].push(y):wc(f,S,[y])});function Ene(f,y,S,E){f=li(f)?f:wm(f),S=S&&!E?pn(S):0;var R=f.length;return S<0&&(S=le(R+S,0)),aw(f)?S<=R&&f.indexOf(y,S)>-1:!!R&&Su(f,y,S)>-1}var Tne=Sn(function(f,y,S){var E=-1,R=typeof y=="function",H=li(f)?Se(f.length):[];return Tu(f,function(te){H[++E]=R?Yt(y,te,S):qv(te,y,S)}),H}),Pne=Hb(function(f,y,S){wc(f,S,y)});function Zb(f,y){var S=hn(f)?er:pM;return S(f,Ht(y,3))}function One(f,y,S,E){return f==null?[]:(hn(y)||(y=y==null?[]:[y]),S=E?n:S,hn(S)||(S=S==null?[]:[S]),xM(f,y,S))}var Ine=Hb(function(f,y,S){f[S?0:1].push(y)},function(){return[[],[]]});function Rne(f,y,S){var E=hn(f)?Rv:fh,R=arguments.length<3;return E(f,Ht(y,4),S,R,Tu)}function $ne(f,y,S){var E=hn(f)?im:fh,R=arguments.length<3;return E(f,Ht(y,4),S,R,lM)}function Mne(f,y){var S=hn(f)?Pl:cM;return S(f,nw(Ht(y,3)))}function Dne(f){var y=hn(f)?aM:Eee;return y(f)}function Lne(f,y,S){(S?Rs(f,y,S):y===n)?y=1:y=pn(y);var E=hn(f)?iee:Tee;return E(f,y)}function Fne(f){var y=hn(f)?oee:Oee;return y(f)}function Bne(f){if(f==null)return 0;if(li(f))return aw(f)?ku(f):f.length;var y=gs(f);return y==Ve||y==Tt?f.size:Ok(f).length}function Une(f,y,S){var E=hn(f)?ju:Iee;return S&&Rs(f,y,S)&&(y=n),E(f,Ht(y,3))}var Vne=Sn(function(f,y){if(f==null)return[];var S=y.length;return S>1&&Rs(f,y[0],y[1])?y=[]:S>2&&Rs(y[0],y[1],y[2])&&(y=[y[0]]),xM(f,rs(y,1),[])}),ew=Q||function(){return Ea.Date.now()};function zne(f,y){if(typeof y!="function")throw new si(o);return f=pn(f),function(){if(--f<1)return y.apply(this,arguments)}}function fD(f,y,S){return y=S?n:y,y=f&&y==null?f.length:y,_c(f,A,n,n,n,n,y)}function mD(f,y){var S;if(typeof y!="function")throw new si(o);return f=pn(f),function(){return--f>0&&(S=y.apply(this,arguments)),f<=1&&(y=n),S}}var nC=Sn(function(f,y,S){var E=b;if(S.length){var R=Il(S,xm(nC));E|=k}return _c(f,E,y,S,R)}),pD=Sn(function(f,y,S){var E=b|_;if(S.length){var R=Il(S,xm(pD));E|=k}return _c(y,E,f,S,R)});function gD(f,y,S){y=S?n:y;var E=_c(f,w,n,n,n,n,n,y);return E.placeholder=gD.placeholder,E}function vD(f,y,S){y=S?n:y;var E=_c(f,N,n,n,n,n,n,y);return E.placeholder=vD.placeholder,E}function yD(f,y,S){var E,R,H,te,ie,me,De=0,Le=!1,ze=!1,ft=!0;if(typeof f!="function")throw new si(o);y=fo(y)||0,Fr(S)&&(Le=!!S.leading,ze="maxWait"in S,H=ze?le(fo(S.maxWait)||0,y):H,ft="trailing"in S?!!S.trailing:ft);function Pt(ha){var Go=E,Cc=R;return E=R=n,De=ha,te=f.apply(Cc,Go),te}function qt(ha){return De=ha,ie=Xv(En,y),Le?Pt(ha):te}function bn(ha){var Go=ha-me,Cc=ha-De,DD=y-Go;return ze?_e(DD,H-Cc):DD}function Kt(ha){var Go=ha-me,Cc=ha-De;return me===n||Go>=y||Go<0||ze&&Cc>=H}function En(){var ha=ew();if(Kt(ha))return $n(ha);ie=Xv(En,bn(ha))}function $n(ha){return ie=n,ft&&E?Pt(ha):(E=R=n,te)}function Ii(){ie!==n&&AM(ie),De=0,E=me=R=ie=n}function $s(){return ie===n?te:$n(ew())}function Ri(){var ha=ew(),Go=Kt(ha);if(E=arguments,R=this,me=ha,Go){if(ie===n)return qt(me);if(ze)return AM(ie),ie=Xv(En,y),Pt(me)}return ie===n&&(ie=Xv(En,y)),te}return Ri.cancel=Ii,Ri.flush=$s,Ri}var Hne=Sn(function(f,y){return oM(f,1,y)}),Wne=Sn(function(f,y,S){return oM(f,fo(y)||0,S)});function qne(f){return _c(f,O)}function tw(f,y){if(typeof f!="function"||y!=null&&typeof y!="function")throw new si(o);var S=function(){var E=arguments,R=y?y.apply(this,E):E[0],H=S.cache;if(H.has(R))return H.get(R);var te=f.apply(this,E);return S.cache=H.set(R,te)||H,te};return S.cache=new(tw.Cache||bc),S}tw.Cache=bc;function nw(f){if(typeof f!="function")throw new si(o);return function(){var y=arguments;switch(y.length){case 0:return!f.call(this);case 1:return!f.call(this,y[0]);case 2:return!f.call(this,y[0],y[1]);case 3:return!f.call(this,y[0],y[1],y[2])}return!f.apply(this,y)}}function Kne(f){return mD(2,f)}var Gne=Ree(function(f,y){y=y.length==1&&hn(y[0])?er(y[0],Ps(Ht())):er(rs(y,1),Ps(Ht()));var S=y.length;return Sn(function(E){for(var R=-1,H=_e(E.length,S);++R<H;)E[R]=y[R].call(this,E[R]);return Yt(f,this,E)})}),rC=Sn(function(f,y){var S=Il(y,xm(rC));return _c(f,k,n,y,S)}),xD=Sn(function(f,y){var S=Il(y,xm(xD));return _c(f,C,n,y,S)}),Yne=jc(function(f,y){return _c(f,P,n,n,n,y)});function Qne(f,y){if(typeof f!="function")throw new si(o);return y=y===n?y:pn(y),Sn(f,y)}function Xne(f,y){if(typeof f!="function")throw new si(o);return y=y==null?0:le(pn(y),0),Sn(function(S){var E=S[y],R=Iu(S,0,y);return E&&Ho(R,E),Yt(f,this,R)})}function Jne(f,y,S){var E=!0,R=!0;if(typeof f!="function")throw new si(o);return Fr(S)&&(E="leading"in S?!!S.leading:E,R="trailing"in S?!!S.trailing:R),yD(f,y,{leading:E,maxWait:y,trailing:R})}function Zne(f){return fD(f,1)}function ere(f,y){return rC(Uk(y),f)}function tre(){if(!arguments.length)return[];var f=arguments[0];return hn(f)?f:[f]}function nre(f){return co(f,p)}function rre(f,y){return y=typeof y=="function"?y:n,co(f,p,y)}function are(f){return co(f,h|p)}function sre(f,y){return y=typeof y=="function"?y:n,co(f,h|p,y)}function ire(f,y){return y==null||iM(f,y,Va(y))}function Ko(f,y){return f===y||f!==f&&y!==y}var ore=Gb(Ek),lre=Gb(function(f,y){return f>=y}),jh=hM(function(){return arguments}())?hM:function(f){return Xr(f)&&Qn.call(f,"callee")&&!Sk.call(f,"callee")},hn=Se.isArray,cre=jb?Ps(jb):vee;function li(f){return f!=null&&rw(f.length)&&!Nc(f)}function da(f){return Xr(f)&&li(f)}function ure(f){return f===!0||f===!1||Xr(f)&&Is(f)==ee}var Ru=$e||mC,dre=oh?Ps(oh):yee;function hre(f){return Xr(f)&&f.nodeType===1&&!Jv(f)}function fre(f){if(f==null)return!0;if(li(f)&&(hn(f)||typeof f=="string"||typeof f.splice=="function"||Ru(f)||bm(f)||jh(f)))return!f.length;var y=gs(f);if(y==Ve||y==Tt)return!f.size;if(Qv(f))return!Ok(f).length;for(var S in f)if(Qn.call(f,S))return!1;return!0}function mre(f,y){return Kv(f,y)}function pre(f,y,S){S=typeof S=="function"?S:n;var E=S?S(f,y):n;return E===n?Kv(f,y,n,S):!!E}function aC(f){if(!Xr(f))return!1;var y=Is(f);return y==ce||y==Z||typeof f.message=="string"&&typeof f.name=="string"&&!Jv(f)}function gre(f){return typeof f=="number"&&ot(f)}function Nc(f){if(!Fr(f))return!1;var y=Is(f);return y==ae||y==Ue||y==oe||y==yn}function bD(f){return typeof f=="number"&&f==pn(f)}function rw(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=F}function Fr(f){var y=typeof f;return f!=null&&(y=="object"||y=="function")}function Xr(f){return f!=null&&typeof f=="object"}var wD=lh?Ps(lh):bee;function vre(f,y){return f===y||Pk(f,y,Gk(y))}function yre(f,y,S){return S=typeof S=="function"?S:n,Pk(f,y,Gk(y),S)}function xre(f){return _D(f)&&f!=+f}function bre(f){if(rte(f))throw new nn(i);return fM(f)}function wre(f){return f===null}function _re(f){return f==null}function _D(f){return typeof f=="number"||Xr(f)&&Is(f)==ut}function Jv(f){if(!Xr(f)||Is(f)!=mt)return!1;var y=Uv(f);if(y===null)return!0;var S=Qn.call(y,"constructor")&&y.constructor;return typeof S=="function"&&S instanceof S&&mm.call(S)==_k}var sC=Iv?Ps(Iv):wee;function jre(f){return bD(f)&&f>=-F&&f<=F}var jD=Sb?Ps(Sb):_ee;function aw(f){return typeof f=="string"||!hn(f)&&Xr(f)&&Is(f)==ve}function Oi(f){return typeof f=="symbol"||Xr(f)&&Is(f)==Ce}var bm=Nb?Ps(Nb):jee;function Sre(f){return f===n}function Nre(f){return Xr(f)&&gs(f)==dt}function kre(f){return Xr(f)&&Is(f)==pt}var Cre=Gb(Ik),Are=Gb(function(f,y){return f<=y});function SD(f){if(!f)return[];if(li(f))return aw(f)?Ci(f):oi(f);if(vh&&f[vh])return hk(f[vh]());var y=gs(f),S=y==Ve?Fv:y==Tt?um:wm;return S(f)}function kc(f){if(!f)return f===0?f:0;if(f=fo(f),f===U||f===-U){var y=f<0?-1:1;return y*K}return f===f?f:0}function pn(f){var y=kc(f),S=y%1;return y===y?S?y-S:y:0}function ND(f){return f?xh(pn(f),0,se):0}function fo(f){if(typeof f=="number")return f;if(Oi(f))return X;if(Fr(f)){var y=typeof f.valueOf=="function"?f.valueOf():f;f=Fr(y)?y+"":y}if(typeof f!="string")return f===0?f:+f;f=an(f);var S=bv.test(f);return S||nh.test(f)?wb(f.slice(2),S?2:8):em.test(f)?X:+f}function kD(f){return Ml(f,ci(f))}function Ere(f){return f?xh(pn(f),-F,F):f===0?f:0}function nr(f){return f==null?"":Pi(f)}var Tre=vm(function(f,y){if(Qv(y)||li(y)){Ml(y,Va(y),f);return}for(var S in y)Qn.call(y,S)&&Hv(f,S,y[S])}),CD=vm(function(f,y){Ml(y,ci(y),f)}),sw=vm(function(f,y,S,E){Ml(y,ci(y),f,E)}),Pre=vm(function(f,y,S,E){Ml(y,Va(y),f,E)}),Ore=jc(kk);function Ire(f,y){var S=Nt(f);return y==null?S:sM(S,y)}var Rre=Sn(function(f,y){f=sr(f);var S=-1,E=y.length,R=E>2?y[2]:n;for(R&&Rs(y[0],y[1],R)&&(E=1);++S<E;)for(var H=y[S],te=ci(H),ie=-1,me=te.length;++ie<me;){var De=te[ie],Le=f[De];(Le===n||Ko(Le,Au[De])&&!Qn.call(f,De))&&(f[De]=H[De])}return f}),$re=Sn(function(f){return f.push(n,HM),Yt(AD,n,f)});function Mre(f,y){return Ol(f,Ht(y,3),$l)}function Dre(f,y){return Ol(f,Ht(y,3),Ak)}function Lre(f,y){return f==null?f:Ck(f,Ht(y,3),ci)}function Fre(f,y){return f==null?f:uM(f,Ht(y,3),ci)}function Bre(f,y){return f&&$l(f,Ht(y,3))}function Ure(f,y){return f&&Ak(f,Ht(y,3))}function Vre(f){return f==null?[]:Bb(f,Va(f))}function zre(f){return f==null?[]:Bb(f,ci(f))}function iC(f,y,S){var E=f==null?n:bh(f,y);return E===n?S:E}function Hre(f,y){return f!=null&&KM(f,y,fee)}function oC(f,y){return f!=null&&KM(f,y,mee)}var Wre=FM(function(f,y,S){y!=null&&typeof y.toString!="function"&&(y=gh.call(y)),f[y]=S},cC(ui)),qre=FM(function(f,y,S){y!=null&&typeof y.toString!="function"&&(y=gh.call(y)),Qn.call(f,y)?f[y].push(S):f[y]=[S]},Ht),Kre=Sn(qv);function Va(f){return li(f)?rM(f):Ok(f)}function ci(f){return li(f)?rM(f,!0):See(f)}function Gre(f,y){var S={};return y=Ht(y,3),$l(f,function(E,R,H){wc(S,y(E,R,H),E)}),S}function Yre(f,y){var S={};return y=Ht(y,3),$l(f,function(E,R,H){wc(S,R,y(E,R,H))}),S}var Qre=vm(function(f,y,S){Ub(f,y,S)}),AD=vm(function(f,y,S,E){Ub(f,y,S,E)}),Xre=jc(function(f,y){var S={};if(f==null)return S;var E=!1;y=er(y,function(H){return H=Ou(H,f),E||(E=H.length>1),H}),Ml(f,qk(f),S),E&&(S=co(S,h|m|p,Wee));for(var R=y.length;R--;)Lk(S,y[R]);return S});function Jre(f,y){return ED(f,nw(Ht(y)))}var Zre=jc(function(f,y){return f==null?{}:kee(f,y)});function ED(f,y){if(f==null)return{};var S=er(qk(f),function(E){return[E]});return y=Ht(y),bM(f,S,function(E,R){return y(E,R[0])})}function eae(f,y,S){y=Ou(y,f);var E=-1,R=y.length;for(R||(R=1,f=n);++E<R;){var H=f==null?n:f[Dl(y[E])];H===n&&(E=R,H=S),f=Nc(H)?H.call(f):H}return f}function tae(f,y,S){return f==null?f:Gv(f,y,S)}function nae(f,y,S,E){return E=typeof E=="function"?E:n,f==null?f:Gv(f,y,S,E)}var TD=VM(Va),PD=VM(ci);function rae(f,y,S){var E=hn(f),R=E||Ru(f)||bm(f);if(y=Ht(y,4),S==null){var H=f&&f.constructor;R?S=E?new H:[]:Fr(f)?S=Nc(H)?Nt(Uv(f)):{}:S={}}return(R?ba:$l)(f,function(te,ie,me){return y(S,te,ie,me)}),S}function aae(f,y){return f==null?!0:Lk(f,y)}function sae(f,y,S){return f==null?f:NM(f,y,Uk(S))}function iae(f,y,S,E){return E=typeof E=="function"?E:n,f==null?f:NM(f,y,Uk(S),E)}function wm(f){return f==null?[]:Lv(f,Va(f))}function oae(f){return f==null?[]:Lv(f,ci(f))}function lae(f,y,S){return S===n&&(S=y,y=n),S!==n&&(S=fo(S),S=S===S?S:0),y!==n&&(y=fo(y),y=y===y?y:0),xh(fo(f),y,S)}function cae(f,y,S){return y=kc(y),S===n?(S=y,y=0):S=kc(S),f=fo(f),pee(f,y,S)}function uae(f,y,S){if(S&&typeof S!="boolean"&&Rs(f,y,S)&&(y=S=n),S===n&&(typeof y=="boolean"?(S=y,y=n):typeof f=="boolean"&&(S=f,f=n)),f===n&&y===n?(f=0,y=1):(f=kc(f),y===n?(y=f,f=0):y=kc(y)),f>y){var E=f;f=y,y=E}if(S||f%1||y%1){var R=He();return _e(f+R*(y-f+am("1e-"+((R+"").length-1))),y)}return $k(f,y)}var dae=ym(function(f,y,S){return y=y.toLowerCase(),f+(S?OD(y):y)});function OD(f){return lC(nr(f).toLowerCase())}function ID(f){return f=nr(f),f&&f.replace(tm,Rb).replace(nm,"")}function hae(f,y,S){f=nr(f),y=Pi(y);var E=f.length;S=S===n?E:xh(pn(S),0,E);var R=S;return S-=y.length,S>=0&&f.slice(S,R)==y}function fae(f){return f=nr(f),f&&mc.test(f)?f.replace(El,Os):f}function mae(f){return f=nr(f),f&&xa.test(f)?f.replace(ts,"\\$&"):f}var pae=ym(function(f,y,S){return f+(S?"-":"")+y.toLowerCase()}),gae=ym(function(f,y,S){return f+(S?" ":"")+y.toLowerCase()}),vae=MM("toLowerCase");function yae(f,y,S){f=nr(f),y=pn(y);var E=y?ku(f):0;if(!y||E>=y)return f;var R=(y-E)/2;return Kb(fe(R),S)+f+Kb(be(R),S)}function xae(f,y,S){f=nr(f),y=pn(y);var E=y?ku(f):0;return y&&E<y?f+Kb(y-E,S):f}function bae(f,y,S){f=nr(f),y=pn(y);var E=y?ku(f):0;return y&&E<y?Kb(y-E,S)+f:f}function wae(f,y,S){return S||y==null?y=0:y&&(y=+y),Je(nr(f).replace(Yr,""),y||0)}function _ae(f,y,S){return(S?Rs(f,y,S):y===n)?y=1:y=pn(y),Mk(nr(f),y)}function jae(){var f=arguments,y=nr(f[0]);return f.length<3?y:y.replace(f[1],f[2])}var Sae=ym(function(f,y,S){return f+(S?"_":"")+y.toLowerCase()});function Nae(f,y,S){return S&&typeof S!="number"&&Rs(f,y,S)&&(y=S=n),S=S===n?se:S>>>0,S?(f=nr(f),f&&(typeof y=="string"||y!=null&&!sC(y))&&(y=Pi(y),!y&&Nu(f))?Iu(Ci(f),0,S):f.split(y,S)):[]}var kae=ym(function(f,y,S){return f+(S?" ":"")+lC(y)});function Cae(f,y,S){return f=nr(f),S=S==null?0:xh(pn(S),0,f.length),y=Pi(y),f.slice(S,S+y.length)==y}function Aae(f,y,S){var E=M.templateSettings;S&&Rs(f,y,S)&&(y=n),f=nr(f),y=sw({},y,E,zM);var R=sw({},y.imports,E.imports,zM),H=Va(R),te=Lv(R,H),ie,me,De=0,Le=y.interpolate||pc,ze="__p += '",ft=Bv((y.escape||pc).source+"|"+Le.source+"|"+(Le===mn?Zf:pc).source+"|"+(y.evaluate||pc).source+"|$","g"),Pt="//# sourceURL="+(Qn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bb+"]")+`
`;f.replace(ft,function(Kt,En,$n,Ii,$s,Ri){return $n||($n=Ii),ze+=f.slice(De,Ri).replace(wv,ck),En&&(ie=!0,ze+=`' +
__e(`+En+`) +
'`),$s&&(me=!0,ze+=`';
`+$s+`;
__p += '`),$n&&(ze+=`' +
((__t = (`+$n+`)) == null ? '' : __t) +
'`),De=Ri+Kt.length,Kt}),ze+=`';
`;var qt=Qn.call(y,"variable")&&y.variable;if(!qt)ze=`with (obj) {
`+ze+`
}
`;else if(ds.test(qt))throw new nn(l);ze=(me?ze.replace(hc,""):ze).replace(mr,"$1").replace(fc,"$1;"),ze="function("+(qt||"obj")+`) {
`+(qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ie?", __e = _.escape":"")+(me?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ze+`return __p
}`;var bn=$D(function(){return Fn(H,Pt+"return "+ze).apply(n,te)});if(bn.source=ze,aC(bn))throw bn;return bn}function Eae(f){return nr(f).toLowerCase()}function Tae(f){return nr(f).toUpperCase()}function Pae(f,y,S){if(f=nr(f),f&&(S||y===n))return an(f);if(!f||!(y=Pi(y)))return f;var E=Ci(f),R=Ci(y),H=cm(E,R),te=Ob(E,R)+1;return Iu(E,H,te).join("")}function Oae(f,y,S){if(f=nr(f),f&&(S||y===n))return f.slice(0,Mb(f)+1);if(!f||!(y=Pi(y)))return f;var E=Ci(f),R=Ob(E,Ci(y))+1;return Iu(E,0,R).join("")}function Iae(f,y,S){if(f=nr(f),f&&(S||y===n))return f.replace(Yr,"");if(!f||!(y=Pi(y)))return f;var E=Ci(f),R=cm(E,Ci(y));return Iu(E,R).join("")}function Rae(f,y){var S=T,E=$;if(Fr(y)){var R="separator"in y?y.separator:R;S="length"in y?pn(y.length):S,E="omission"in y?Pi(y.omission):E}f=nr(f);var H=f.length;if(Nu(f)){var te=Ci(f);H=te.length}if(S>=H)return f;var ie=S-ku(E);if(ie<1)return E;var me=te?Iu(te,0,ie).join(""):f.slice(0,ie);if(R===n)return me+E;if(te&&(ie+=me.length-ie),sC(R)){if(f.slice(ie).search(R)){var De,Le=me;for(R.global||(R=Bv(R.source,nr(eh.exec(R))+"g")),R.lastIndex=0;De=R.exec(Le);)var ze=De.index;me=me.slice(0,ze===n?ie:ze)}}else if(f.indexOf(Pi(R),ie)!=ie){var ft=me.lastIndexOf(R);ft>-1&&(me=me.slice(0,ft))}return me+E}function $ae(f){return f=nr(f),f&&ar.test(f)?f.replace(Ye,mk):f}var Mae=ym(function(f,y,S){return f+(S?" ":"")+y.toUpperCase()}),lC=MM("toUpperCase");function RD(f,y,S){return f=nr(f),y=S?n:y,y===n?dk(f)?vk(f):Eb(f):f.match(y)||[]}var $D=Sn(function(f,y){try{return Yt(f,n,y)}catch(S){return aC(S)?S:new nn(S)}}),Dae=jc(function(f,y){return ba(y,function(S){S=Dl(S),wc(f,S,nC(f[S],f))}),f});function Lae(f){var y=f==null?0:f.length,S=Ht();return f=y?er(f,function(E){if(typeof E[1]!="function")throw new si(o);return[S(E[0]),E[1]]}):[],Sn(function(E){for(var R=-1;++R<y;){var H=f[R];if(Yt(H[0],this,E))return Yt(H[1],this,E)}})}function Fae(f){return uee(co(f,h))}function cC(f){return function(){return f}}function Bae(f,y){return f==null||f!==f?y:f}var Uae=LM(),Vae=LM(!0);function ui(f){return f}function uC(f){return mM(typeof f=="function"?f:co(f,h))}function zae(f){return gM(co(f,h))}function Hae(f,y){return vM(f,co(y,h))}var Wae=Sn(function(f,y){return function(S){return qv(S,f,y)}}),qae=Sn(function(f,y){return function(S){return qv(f,S,y)}});function dC(f,y,S){var E=Va(y),R=Bb(y,E);S==null&&!(Fr(y)&&(R.length||!E.length))&&(S=y,y=f,f=this,R=Bb(y,Va(y)));var H=!(Fr(S)&&"chain"in S)||!!S.chain,te=Nc(f);return ba(R,function(ie){var me=y[ie];f[ie]=me,te&&(f.prototype[ie]=function(){var De=this.__chain__;if(H||De){var Le=f(this.__wrapped__),ze=Le.__actions__=oi(this.__actions__);return ze.push({func:me,args:arguments,thisArg:f}),Le.__chain__=De,Le}return me.apply(f,Ho([this.value()],arguments))})}),f}function Kae(){return Ea._===this&&(Ea._=ns),this}function hC(){}function Gae(f){return f=pn(f),Sn(function(y){return yM(y,f)})}var Yae=zk(er),Qae=zk(uh),Xae=zk(ju);function MD(f){return Qk(f)?Ar(Dl(f)):Cee(f)}function Jae(f){return function(y){return f==null?n:bh(f,y)}}var Zae=BM(),ese=BM(!0);function fC(){return[]}function mC(){return!1}function tse(){return{}}function nse(){return""}function rse(){return!0}function ase(f,y){if(f=pn(f),f<1||f>F)return[];var S=se,E=_e(f,se);y=Ht(y),f-=se;for(var R=om(E,y);++S<f;)y(S);return R}function sse(f){return hn(f)?er(f,Dl):Oi(f)?[f]:oi(nD(nr(f)))}function ise(f){var y=++wk;return nr(f)+y}var ose=qb(function(f,y){return f+y},0),lse=Hk("ceil"),cse=qb(function(f,y){return f/y},1),use=Hk("floor");function dse(f){return f&&f.length?Fb(f,ui,Ek):n}function hse(f,y){return f&&f.length?Fb(f,Ht(y,2),Ek):n}function fse(f){return xc(f,ui)}function mse(f,y){return xc(f,Ht(y,2))}function pse(f){return f&&f.length?Fb(f,ui,Ik):n}function gse(f,y){return f&&f.length?Fb(f,Ht(y,2),Ik):n}var vse=qb(function(f,y){return f*y},1),yse=Hk("round"),xse=qb(function(f,y){return f-y},0);function bse(f){return f&&f.length?Dv(f,ui):0}function wse(f,y){return f&&f.length?Dv(f,Ht(y,2)):0}return M.after=zne,M.ary=fD,M.assign=Tre,M.assignIn=CD,M.assignInWith=sw,M.assignWith=Pre,M.at=Ore,M.before=mD,M.bind=nC,M.bindAll=Dae,M.bindKey=pD,M.castArray=tre,M.chain=uD,M.chunk=ute,M.compact=dte,M.concat=hte,M.cond=Lae,M.conforms=Fae,M.constant=cC,M.countBy=bne,M.create=Ire,M.curry=gD,M.curryRight=vD,M.debounce=yD,M.defaults=Rre,M.defaultsDeep=$re,M.defer=Hne,M.delay=Wne,M.difference=fte,M.differenceBy=mte,M.differenceWith=pte,M.drop=gte,M.dropRight=vte,M.dropRightWhile=yte,M.dropWhile=xte,M.fill=bte,M.filter=_ne,M.flatMap=Nne,M.flatMapDeep=kne,M.flatMapDepth=Cne,M.flatten=iD,M.flattenDeep=wte,M.flattenDepth=_te,M.flip=qne,M.flow=Uae,M.flowRight=Vae,M.fromPairs=jte,M.functions=Vre,M.functionsIn=zre,M.groupBy=Ane,M.initial=Nte,M.intersection=kte,M.intersectionBy=Cte,M.intersectionWith=Ate,M.invert=Wre,M.invertBy=qre,M.invokeMap=Tne,M.iteratee=uC,M.keyBy=Pne,M.keys=Va,M.keysIn=ci,M.map=Zb,M.mapKeys=Gre,M.mapValues=Yre,M.matches=zae,M.matchesProperty=Hae,M.memoize=tw,M.merge=Qre,M.mergeWith=AD,M.method=Wae,M.methodOf=qae,M.mixin=dC,M.negate=nw,M.nthArg=Gae,M.omit=Xre,M.omitBy=Jre,M.once=Kne,M.orderBy=One,M.over=Yae,M.overArgs=Gne,M.overEvery=Qae,M.overSome=Xae,M.partial=rC,M.partialRight=xD,M.partition=Ine,M.pick=Zre,M.pickBy=ED,M.property=MD,M.propertyOf=Jae,M.pull=Ote,M.pullAll=lD,M.pullAllBy=Ite,M.pullAllWith=Rte,M.pullAt=$te,M.range=Zae,M.rangeRight=ese,M.rearg=Yne,M.reject=Mne,M.remove=Mte,M.rest=Qne,M.reverse=eC,M.sampleSize=Lne,M.set=tae,M.setWith=nae,M.shuffle=Fne,M.slice=Dte,M.sortBy=Vne,M.sortedUniq=Hte,M.sortedUniqBy=Wte,M.split=Nae,M.spread=Xne,M.tail=qte,M.take=Kte,M.takeRight=Gte,M.takeRightWhile=Yte,M.takeWhile=Qte,M.tap=dne,M.throttle=Jne,M.thru=Jb,M.toArray=SD,M.toPairs=TD,M.toPairsIn=PD,M.toPath=sse,M.toPlainObject=kD,M.transform=rae,M.unary=Zne,M.union=Xte,M.unionBy=Jte,M.unionWith=Zte,M.uniq=ene,M.uniqBy=tne,M.uniqWith=nne,M.unset=aae,M.unzip=tC,M.unzipWith=cD,M.update=sae,M.updateWith=iae,M.values=wm,M.valuesIn=oae,M.without=rne,M.words=RD,M.wrap=ere,M.xor=ane,M.xorBy=sne,M.xorWith=ine,M.zip=one,M.zipObject=lne,M.zipObjectDeep=cne,M.zipWith=une,M.entries=TD,M.entriesIn=PD,M.extend=CD,M.extendWith=sw,dC(M,M),M.add=ose,M.attempt=$D,M.camelCase=dae,M.capitalize=OD,M.ceil=lse,M.clamp=lae,M.clone=nre,M.cloneDeep=are,M.cloneDeepWith=sre,M.cloneWith=rre,M.conformsTo=ire,M.deburr=ID,M.defaultTo=Bae,M.divide=cse,M.endsWith=hae,M.eq=Ko,M.escape=fae,M.escapeRegExp=mae,M.every=wne,M.find=jne,M.findIndex=aD,M.findKey=Mre,M.findLast=Sne,M.findLastIndex=sD,M.findLastKey=Dre,M.floor=use,M.forEach=dD,M.forEachRight=hD,M.forIn=Lre,M.forInRight=Fre,M.forOwn=Bre,M.forOwnRight=Ure,M.get=iC,M.gt=ore,M.gte=lre,M.has=Hre,M.hasIn=oC,M.head=oD,M.identity=ui,M.includes=Ene,M.indexOf=Ste,M.inRange=cae,M.invoke=Kre,M.isArguments=jh,M.isArray=hn,M.isArrayBuffer=cre,M.isArrayLike=li,M.isArrayLikeObject=da,M.isBoolean=ure,M.isBuffer=Ru,M.isDate=dre,M.isElement=hre,M.isEmpty=fre,M.isEqual=mre,M.isEqualWith=pre,M.isError=aC,M.isFinite=gre,M.isFunction=Nc,M.isInteger=bD,M.isLength=rw,M.isMap=wD,M.isMatch=vre,M.isMatchWith=yre,M.isNaN=xre,M.isNative=bre,M.isNil=_re,M.isNull=wre,M.isNumber=_D,M.isObject=Fr,M.isObjectLike=Xr,M.isPlainObject=Jv,M.isRegExp=sC,M.isSafeInteger=jre,M.isSet=jD,M.isString=aw,M.isSymbol=Oi,M.isTypedArray=bm,M.isUndefined=Sre,M.isWeakMap=Nre,M.isWeakSet=kre,M.join=Ete,M.kebabCase=pae,M.last=ho,M.lastIndexOf=Tte,M.lowerCase=gae,M.lowerFirst=vae,M.lt=Cre,M.lte=Are,M.max=dse,M.maxBy=hse,M.mean=fse,M.meanBy=mse,M.min=pse,M.minBy=gse,M.stubArray=fC,M.stubFalse=mC,M.stubObject=tse,M.stubString=nse,M.stubTrue=rse,M.multiply=vse,M.nth=Pte,M.noConflict=Kae,M.noop=hC,M.now=ew,M.pad=yae,M.padEnd=xae,M.padStart=bae,M.parseInt=wae,M.random=uae,M.reduce=Rne,M.reduceRight=$ne,M.repeat=_ae,M.replace=jae,M.result=eae,M.round=yse,M.runInContext=de,M.sample=Dne,M.size=Bne,M.snakeCase=Sae,M.some=Une,M.sortedIndex=Lte,M.sortedIndexBy=Fte,M.sortedIndexOf=Bte,M.sortedLastIndex=Ute,M.sortedLastIndexBy=Vte,M.sortedLastIndexOf=zte,M.startCase=kae,M.startsWith=Cae,M.subtract=xse,M.sum=bse,M.sumBy=wse,M.template=Aae,M.times=ase,M.toFinite=kc,M.toInteger=pn,M.toLength=ND,M.toLower=Eae,M.toNumber=fo,M.toSafeInteger=Ere,M.toString=nr,M.toUpper=Tae,M.trim=Pae,M.trimEnd=Oae,M.trimStart=Iae,M.truncate=Rae,M.unescape=$ae,M.uniqueId=ise,M.upperCase=Mae,M.upperFirst=lC,M.each=dD,M.eachRight=hD,M.first=oD,dC(M,function(){var f={};return $l(M,function(y,S){Qn.call(M.prototype,S)||(f[S]=y)}),f}(),{chain:!1}),M.VERSION=r,ba(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){M[f].placeholder=M}),ba(["drop","take"],function(f,y){Ft.prototype[f]=function(S){S=S===n?1:le(pn(S),0);var E=this.__filtered__&&!y?new Ft(this):this.clone();return E.__filtered__?E.__takeCount__=_e(S,E.__takeCount__):E.__views__.push({size:_e(S,se),type:f+(E.__dir__<0?"Right":"")}),E},Ft.prototype[f+"Right"]=function(S){return this.reverse()[f](S).reverse()}}),ba(["filter","map","takeWhile"],function(f,y){var S=y+1,E=S==W||S==G;Ft.prototype[f]=function(R){var H=this.clone();return H.__iteratees__.push({iteratee:Ht(R,3),type:S}),H.__filtered__=H.__filtered__||E,H}}),ba(["head","last"],function(f,y){var S="take"+(y?"Right":"");Ft.prototype[f]=function(){return this[S](1).value()[0]}}),ba(["initial","tail"],function(f,y){var S="drop"+(y?"":"Right");Ft.prototype[f]=function(){return this.__filtered__?new Ft(this):this[S](1)}}),Ft.prototype.compact=function(){return this.filter(ui)},Ft.prototype.find=function(f){return this.filter(f).head()},Ft.prototype.findLast=function(f){return this.reverse().find(f)},Ft.prototype.invokeMap=Sn(function(f,y){return typeof f=="function"?new Ft(this):this.map(function(S){return qv(S,f,y)})}),Ft.prototype.reject=function(f){return this.filter(nw(Ht(f)))},Ft.prototype.slice=function(f,y){f=pn(f);var S=this;return S.__filtered__&&(f>0||y<0)?new Ft(S):(f<0?S=S.takeRight(-f):f&&(S=S.drop(f)),y!==n&&(y=pn(y),S=y<0?S.dropRight(-y):S.take(y-f)),S)},Ft.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Ft.prototype.toArray=function(){return this.take(se)},$l(Ft.prototype,function(f,y){var S=/^(?:filter|find|map|reject)|While$/.test(y),E=/^(?:head|last)$/.test(y),R=M[E?"take"+(y=="last"?"Right":""):y],H=E||/^find/.test(y);R&&(M.prototype[y]=function(){var te=this.__wrapped__,ie=E?[1]:arguments,me=te instanceof Ft,De=ie[0],Le=me||hn(te),ze=function(En){var $n=R.apply(M,Ho([En],ie));return E&&ft?$n[0]:$n};Le&&S&&typeof De=="function"&&De.length!=1&&(me=Le=!1);var ft=this.__chain__,Pt=!!this.__actions__.length,qt=H&&!ft,bn=me&&!Pt;if(!H&&Le){te=bn?te:new Ft(this);var Kt=f.apply(te,ie);return Kt.__actions__.push({func:Jb,args:[ze],thisArg:n}),new Bn(Kt,ft)}return qt&&bn?f.apply(this,ie):(Kt=this.thru(ze),qt?E?Kt.value()[0]:Kt.value():Kt)})}),ba(["pop","push","shift","sort","splice","unshift"],function(f){var y=hm[f],S=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",E=/^(?:pop|shift)$/.test(f);M.prototype[f]=function(){var R=arguments;if(E&&!this.__chain__){var H=this.value();return y.apply(hn(H)?H:[],R)}return this[S](function(te){return y.apply(hn(te)?te:[],R)})}}),$l(Ft.prototype,function(f,y){var S=M[y];if(S){var E=S.name+"";Qn.call(bt,E)||(bt[E]=[]),bt[E].push({name:y,func:S})}}),bt[Wb(n,_).name]=[{name:"wrapper",func:n}],Ft.prototype.clone=ke,Ft.prototype.reverse=Vt,Ft.prototype.value=tr,M.prototype.at=hne,M.prototype.chain=fne,M.prototype.commit=mne,M.prototype.next=pne,M.prototype.plant=vne,M.prototype.reverse=yne,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=xne,M.prototype.first=M.prototype.head,vh&&(M.prototype[vh]=gne),M},Cu=yk();lo?((lo.exports=Cu)._=Cu,ih._=Cu):Ea._=Cu}).call(Lc)})(Ej,Ej.exports);var pNe=Ej.exports;const JF={selectedFields:["effective_status","campaign_name","spend","results_messaging_replied_7d","cost_per_messaging_replied_7d","impressions","clicks","ctr","phones","cost_per_phone"],selectedMarketingMetrics:["spend","results","costPerResult","impressions","clicks","ctr"],marketingMetricOrder:["spend","results","costPerResult","impressions","clicks","ctr","budget","phones","costPerPhone","dailyMarketingCost"]},XG=()=>{const{user:e}=Mn(),[t,n]=g.useState(JF),[r,a]=g.useState(!0),[i,o]=g.useState(null);g.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{a(!0);const h=await Nf(e.id);h!=null&&h.report_settings&&n(m=>({...JF,...h.report_settings}))}catch(h){console.error(" Error loading report settings:",h),o("Failed to load settings")}finally{a(!1)}})()},[e==null?void 0:e.id]);const l=g.useRef(t),c=g.useCallback(pNe.debounce(async(d,h)=>{try{await vK(h,{report_settings:d}),console.log(" Report settings saved to DB")}catch(m){console.error(" Error saving report settings:",m)}},1e3),[]),u=g.useCallback(d=>{e!=null&&e.id&&n(h=>{const m={...h,...d};return l.current=m,c(m,e.id),m})},[e==null?void 0:e.id,c]);return{settings:t,loading:r,error:i,updateSettings:u}};var QS="Switch",[gNe,iQe]=ga(QS),[vNe,yNe]=gNe(QS),JG=g.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[m,p]=g.useState(null),v=Dt(t,w=>p(w)),x=g.useRef(!1),b=m?d||!!m.closest("form"):!0,[_,j]=_i({prop:a,defaultProp:i??!1,onChange:u,caller:QS});return s.jsxs(vNe,{scope:n,checked:_,disabled:l,children:[s.jsx(it.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":nY(_),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:We(e.onClick,w=>{j(N=>!N),b&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),b&&s.jsx(tY,{control:m,bubbles:!x.current,name:r,value:c,checked:_,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});JG.displayName=QS;var ZG="SwitchThumb",eY=g.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=yNe(ZG,n);return s.jsx(it.span,{"data-state":nY(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});eY.displayName=ZG;var xNe="SwitchBubbleInput",tY=g.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=g.useRef(null),l=Dt(o,i),c=Z0(n),u=B0(t);return g.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const v=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(v)}},[c,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});tY.displayName=xNe;function nY(e){return e?"checked":"unchecked"}var rY=JG,bNe=eY;const Ki=g.forwardRef(({className:e,...t},n)=>s.jsx(rY,{className:je("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:s.jsx(bNe,{className:je("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ki.displayName=rY.displayName;var wNe=Array.isArray,ki=wNe,_Ne=typeof Lc=="object"&&Lc&&Lc.Object===Object&&Lc,aY=_Ne,jNe=aY,SNe=typeof self=="object"&&self&&self.Object===Object&&self,NNe=jNe||SNe||Function("return this")(),uc=NNe,kNe=uc,CNe=kNe.Symbol,cb=CNe,ZF=cb,sY=Object.prototype,ANe=sY.hasOwnProperty,ENe=sY.toString,fy=ZF?ZF.toStringTag:void 0;function TNe(e){var t=ANe.call(e,fy),n=e[fy];try{e[fy]=void 0;var r=!0}catch{}var a=ENe.call(e);return r&&(t?e[fy]=n:delete e[fy]),a}var PNe=TNe,ONe=Object.prototype,INe=ONe.toString;function RNe(e){return INe.call(e)}var $Ne=RNe,e3=cb,MNe=PNe,DNe=$Ne,LNe="[object Null]",FNe="[object Undefined]",t3=e3?e3.toStringTag:void 0;function BNe(e){return e==null?e===void 0?FNe:LNe:t3&&t3 in Object(e)?MNe(e):DNe(e)}var mu=BNe;function UNe(e){return e!=null&&typeof e=="object"}var pu=UNe,VNe=mu,zNe=pu,HNe="[object Symbol]";function WNe(e){return typeof e=="symbol"||zNe(e)&&VNe(e)==HNe}var nv=WNe,qNe=ki,KNe=nv,GNe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,YNe=/^\w*$/;function QNe(e,t){if(qNe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||KNe(e)?!0:YNe.test(e)||!GNe.test(e)||t!=null&&e in Object(t)}var kR=QNe;function XNe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Yd=XNe;const rv=Zn(Yd);var JNe=mu,ZNe=Yd,eke="[object AsyncFunction]",tke="[object Function]",nke="[object GeneratorFunction]",rke="[object Proxy]";function ake(e){if(!ZNe(e))return!1;var t=JNe(e);return t==tke||t==nke||t==eke||t==rke}var CR=ake;const Ut=Zn(CR);var ske=uc,ike=ske["__core-js_shared__"],oke=ike,EA=oke,n3=function(){var e=/[^.]+$/.exec(EA&&EA.keys&&EA.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function lke(e){return!!n3&&n3 in e}var cke=lke,uke=Function.prototype,dke=uke.toString;function hke(e){if(e!=null){try{return dke.call(e)}catch{}try{return e+""}catch{}}return""}var iY=hke,fke=CR,mke=cke,pke=Yd,gke=iY,vke=/[\\^$.*+?()[\]{}|]/g,yke=/^\[object .+?Constructor\]$/,xke=Function.prototype,bke=Object.prototype,wke=xke.toString,_ke=bke.hasOwnProperty,jke=RegExp("^"+wke.call(_ke).replace(vke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ske(e){if(!pke(e)||mke(e))return!1;var t=fke(e)?jke:yke;return t.test(gke(e))}var Nke=Ske;function kke(e,t){return e==null?void 0:e[t]}var Cke=kke,Ake=Nke,Eke=Cke;function Tke(e,t){var n=Eke(e,t);return Ake(n)?n:void 0}var Kf=Tke,Pke=Kf,Oke=Pke(Object,"create"),XS=Oke,r3=XS;function Ike(){this.__data__=r3?r3(null):{},this.size=0}var Rke=Ike;function $ke(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Mke=$ke,Dke=XS,Lke="__lodash_hash_undefined__",Fke=Object.prototype,Bke=Fke.hasOwnProperty;function Uke(e){var t=this.__data__;if(Dke){var n=t[e];return n===Lke?void 0:n}return Bke.call(t,e)?t[e]:void 0}var Vke=Uke,zke=XS,Hke=Object.prototype,Wke=Hke.hasOwnProperty;function qke(e){var t=this.__data__;return zke?t[e]!==void 0:Wke.call(t,e)}var Kke=qke,Gke=XS,Yke="__lodash_hash_undefined__";function Qke(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Gke&&t===void 0?Yke:t,this}var Xke=Qke,Jke=Rke,Zke=Mke,eCe=Vke,tCe=Kke,nCe=Xke;function av(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}av.prototype.clear=Jke;av.prototype.delete=Zke;av.prototype.get=eCe;av.prototype.has=tCe;av.prototype.set=nCe;var rCe=av;function aCe(){this.__data__=[],this.size=0}var sCe=aCe;function iCe(e,t){return e===t||e!==e&&t!==t}var AR=iCe,oCe=AR;function lCe(e,t){for(var n=e.length;n--;)if(oCe(e[n][0],t))return n;return-1}var JS=lCe,cCe=JS,uCe=Array.prototype,dCe=uCe.splice;function hCe(e){var t=this.__data__,n=cCe(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():dCe.call(t,n,1),--this.size,!0}var fCe=hCe,mCe=JS;function pCe(e){var t=this.__data__,n=mCe(t,e);return n<0?void 0:t[n][1]}var gCe=pCe,vCe=JS;function yCe(e){return vCe(this.__data__,e)>-1}var xCe=yCe,bCe=JS;function wCe(e,t){var n=this.__data__,r=bCe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var _Ce=wCe,jCe=sCe,SCe=fCe,NCe=gCe,kCe=xCe,CCe=_Ce;function sv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sv.prototype.clear=jCe;sv.prototype.delete=SCe;sv.prototype.get=NCe;sv.prototype.has=kCe;sv.prototype.set=CCe;var ZS=sv,ACe=Kf,ECe=uc,TCe=ACe(ECe,"Map"),ER=TCe,a3=rCe,PCe=ZS,OCe=ER;function ICe(){this.size=0,this.__data__={hash:new a3,map:new(OCe||PCe),string:new a3}}var RCe=ICe;function $Ce(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var MCe=$Ce,DCe=MCe;function LCe(e,t){var n=e.__data__;return DCe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var eN=LCe,FCe=eN;function BCe(e){var t=FCe(this,e).delete(e);return this.size-=t?1:0,t}var UCe=BCe,VCe=eN;function zCe(e){return VCe(this,e).get(e)}var HCe=zCe,WCe=eN;function qCe(e){return WCe(this,e).has(e)}var KCe=qCe,GCe=eN;function YCe(e,t){var n=GCe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var QCe=YCe,XCe=RCe,JCe=UCe,ZCe=HCe,eAe=KCe,tAe=QCe;function iv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}iv.prototype.clear=XCe;iv.prototype.delete=JCe;iv.prototype.get=ZCe;iv.prototype.has=eAe;iv.prototype.set=tAe;var TR=iv,oY=TR,nAe="Expected a function";function PR(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(nAe);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(PR.Cache||oY),n}PR.Cache=oY;var lY=PR;const rAe=Zn(lY);var aAe=lY,sAe=500;function iAe(e){var t=aAe(e,function(r){return n.size===sAe&&n.clear(),r}),n=t.cache;return t}var oAe=iAe,lAe=oAe,cAe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,uAe=/\\(\\)?/g,dAe=lAe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(cAe,function(n,r,a,i){t.push(a?i.replace(uAe,"$1"):r||n)}),t}),hAe=dAe;function fAe(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var OR=fAe,s3=cb,mAe=OR,pAe=ki,gAe=nv,vAe=1/0,i3=s3?s3.prototype:void 0,o3=i3?i3.toString:void 0;function cY(e){if(typeof e=="string")return e;if(pAe(e))return mAe(e,cY)+"";if(gAe(e))return o3?o3.call(e):"";var t=e+"";return t=="0"&&1/e==-vAe?"-0":t}var yAe=cY,xAe=yAe;function bAe(e){return e==null?"":xAe(e)}var uY=bAe,wAe=ki,_Ae=kR,jAe=hAe,SAe=uY;function NAe(e,t){return wAe(e)?e:_Ae(e,t)?[e]:jAe(SAe(e))}var dY=NAe,kAe=nv,CAe=1/0;function AAe(e){if(typeof e=="string"||kAe(e))return e;var t=e+"";return t=="0"&&1/e==-CAe?"-0":t}var tN=AAe,EAe=dY,TAe=tN;function PAe(e,t){t=EAe(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[TAe(t[n++])];return n&&n==r?e:void 0}var IR=PAe,OAe=IR;function IAe(e,t,n){var r=e==null?void 0:OAe(e,t);return r===void 0?n:r}var hY=IAe;const Qi=Zn(hY);function RAe(e){return e==null}var $Ae=RAe;const en=Zn($Ae);var MAe=mu,DAe=ki,LAe=pu,FAe="[object String]";function BAe(e){return typeof e=="string"||!DAe(e)&&LAe(e)&&MAe(e)==FAe}var UAe=BAe;const Tf=Zn(UAe);var fY={exports:{}},lr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR=Symbol.for("react.element"),$R=Symbol.for("react.portal"),nN=Symbol.for("react.fragment"),rN=Symbol.for("react.strict_mode"),aN=Symbol.for("react.profiler"),sN=Symbol.for("react.provider"),iN=Symbol.for("react.context"),VAe=Symbol.for("react.server_context"),oN=Symbol.for("react.forward_ref"),lN=Symbol.for("react.suspense"),cN=Symbol.for("react.suspense_list"),uN=Symbol.for("react.memo"),dN=Symbol.for("react.lazy"),zAe=Symbol.for("react.offscreen"),mY;mY=Symbol.for("react.module.reference");function Bo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case RR:switch(e=e.type,e){case nN:case aN:case rN:case lN:case cN:return e;default:switch(e=e&&e.$$typeof,e){case VAe:case iN:case oN:case dN:case uN:case sN:return e;default:return t}}case $R:return t}}}lr.ContextConsumer=iN;lr.ContextProvider=sN;lr.Element=RR;lr.ForwardRef=oN;lr.Fragment=nN;lr.Lazy=dN;lr.Memo=uN;lr.Portal=$R;lr.Profiler=aN;lr.StrictMode=rN;lr.Suspense=lN;lr.SuspenseList=cN;lr.isAsyncMode=function(){return!1};lr.isConcurrentMode=function(){return!1};lr.isContextConsumer=function(e){return Bo(e)===iN};lr.isContextProvider=function(e){return Bo(e)===sN};lr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===RR};lr.isForwardRef=function(e){return Bo(e)===oN};lr.isFragment=function(e){return Bo(e)===nN};lr.isLazy=function(e){return Bo(e)===dN};lr.isMemo=function(e){return Bo(e)===uN};lr.isPortal=function(e){return Bo(e)===$R};lr.isProfiler=function(e){return Bo(e)===aN};lr.isStrictMode=function(e){return Bo(e)===rN};lr.isSuspense=function(e){return Bo(e)===lN};lr.isSuspenseList=function(e){return Bo(e)===cN};lr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===nN||e===aN||e===rN||e===lN||e===cN||e===zAe||typeof e=="object"&&e!==null&&(e.$$typeof===dN||e.$$typeof===uN||e.$$typeof===sN||e.$$typeof===iN||e.$$typeof===oN||e.$$typeof===mY||e.getModuleId!==void 0)};lr.typeOf=Bo;fY.exports=lr;var HAe=fY.exports,WAe=mu,qAe=pu,KAe="[object Number]";function GAe(e){return typeof e=="number"||qAe(e)&&WAe(e)==KAe}var pY=GAe;const YAe=Zn(pY);var QAe=pY;function XAe(e){return QAe(e)&&e!=+e}var JAe=XAe;const ov=Zn(JAe);var Ks=function(t){return t===0?0:t>0?1:-1},Gh=function(t){return Tf(t)&&t.indexOf("%")===t.length-1},Qe=function(t){return YAe(t)&&!ov(t)},ZAe=function(t){return en(t)},La=function(t){return Qe(t)||Tf(t)},eEe=0,Gf=function(t){var n=++eEe;return"".concat(t||"").concat(n)},Gs=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Qe(t)&&!Tf(t))return r;var i;if(Gh(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return ov(i)&&(i=r),a&&i>n&&(i=n),i},Ju=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},tEe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},Hr=function(t,n){return Qe(t)&&Qe(n)?function(r){return t+r*(n-t)}:function(){return n}};function Tj(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Qi(r,t))===n})}var nEe=function(t,n){return Qe(t)&&Qe(n)?t-n:Tf(t)&&Tf(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function jp(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function sP(e){"@babel/helpers - typeof";return sP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sP(e)}var rEe=["viewBox","children"],aEe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],l3=["points","pathLength"],TA={svg:rEe,polygon:l3,polyline:l3},MR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Pj=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(g.isValidElement(t)&&(r=t.props),!rv(r))return null;var a={};return Object.keys(r).forEach(function(i){MR.includes(i)&&(a[i]=n||function(o){return r[i](r,o)})}),a},sEe=function(t,n,r){return function(a){return t(n,r,a),null}},Pf=function(t,n,r){if(!rv(t)||sP(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];MR.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=sEe(o,n,r))}),a},iEe=["children"],oEe=["children"];function c3(e,t){if(e==null)return{};var n=lEe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lEe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function iP(e){"@babel/helpers - typeof";return iP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iP(e)}var u3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Kc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},d3=null,PA=null,DR=function e(t){if(t===d3&&Array.isArray(PA))return PA;var n=[];return g.Children.forEach(t,function(r){en(r)||(HAe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),PA=n,d3=t,n};function Xi(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return Kc(a)}):r=[Kc(t)],DR(e).forEach(function(a){var i=Qi(a,"type.displayName")||Qi(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}function Bi(e,t){var n=Xi(e,t);return n&&n[0]}var h3=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!Qe(r)||r<=0||!Qe(a)||a<=0)},cEe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],uEe=function(t){return t&&t.type&&Tf(t.type)&&cEe.indexOf(t.type)>=0},gY=function(t){return t&&iP(t)==="object"&&"clipDot"in t},dEe=function(t,n,r,a){var i,o=(i=TA==null?void 0:TA[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Ut(t)&&(a&&o.includes(n)||aEe.includes(n))||r&&MR.includes(n)},kt=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(g.isValidElement(t)&&(a=t.props),!rv(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;dEe((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(i[o]=a[o])}),i},oP=function e(t,n){if(t===n)return!0;var r=g.Children.count(t);if(r!==g.Children.count(n))return!1;if(r===0)return!0;if(r===1)return f3(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!f3(i,o))return!1}return!0},f3=function(t,n){if(en(t)&&en(n))return!0;if(!en(t)&&!en(n)){var r=t.props||{},a=r.children,i=c3(r,iEe),o=n.props||{},l=o.children,c=c3(o,oEe);return a&&l?jp(i,c)&&oP(a,l):!a&&!l?jp(i,c):!1}return!1},m3=function(t,n){var r=[],a={};return DR(t).forEach(function(i,o){if(uEe(i))r.push(i);else if(i){var l=Kc(i.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var h=u(i,l,o);r.push(h),a[l]=!0}}}),r},hEe=function(t){var n=t&&t.type;return n&&u3[n]?u3[n]:null},fEe=function(t,n){return DR(n).indexOf(t)},mEe=["children","width","height","viewBox","className","style","title","desc"];function lP(){return lP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lP.apply(this,arguments)}function pEe(e,t){if(e==null)return{};var n=gEe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gEe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cP(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=pEe(e,mEe),d=a||{width:n,height:r,x:0,y:0},h=Xt("recharts-surface",i);return V.createElement("svg",lP({},kt(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),V.createElement("title",null,l),V.createElement("desc",null,c),t)}var vEe=["children","className"];function uP(){return uP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uP.apply(this,arguments)}function yEe(e,t){if(e==null)return{};var n=xEe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xEe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var jn=V.forwardRef(function(e,t){var n=e.children,r=e.className,a=yEe(e,vEe),i=Xt("recharts-layer",r);return V.createElement("g",uP({className:i},kt(a,!0),{ref:t}),n)}),bl=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]};function bEe(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var wEe=bEe,_Ee=wEe;function jEe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:_Ee(e,t,n)}var SEe=jEe,NEe="\\ud800-\\udfff",kEe="\\u0300-\\u036f",CEe="\\ufe20-\\ufe2f",AEe="\\u20d0-\\u20ff",EEe=kEe+CEe+AEe,TEe="\\ufe0e\\ufe0f",PEe="\\u200d",OEe=RegExp("["+PEe+NEe+EEe+TEe+"]");function IEe(e){return OEe.test(e)}var vY=IEe;function REe(e){return e.split("")}var $Ee=REe,yY="\\ud800-\\udfff",MEe="\\u0300-\\u036f",DEe="\\ufe20-\\ufe2f",LEe="\\u20d0-\\u20ff",FEe=MEe+DEe+LEe,BEe="\\ufe0e\\ufe0f",UEe="["+yY+"]",dP="["+FEe+"]",hP="\\ud83c[\\udffb-\\udfff]",VEe="(?:"+dP+"|"+hP+")",xY="[^"+yY+"]",bY="(?:\\ud83c[\\udde6-\\uddff]){2}",wY="[\\ud800-\\udbff][\\udc00-\\udfff]",zEe="\\u200d",_Y=VEe+"?",jY="["+BEe+"]?",HEe="(?:"+zEe+"(?:"+[xY,bY,wY].join("|")+")"+jY+_Y+")*",WEe=jY+_Y+HEe,qEe="(?:"+[xY+dP+"?",dP,bY,wY,UEe].join("|")+")",KEe=RegExp(hP+"(?="+hP+")|"+qEe+WEe,"g");function GEe(e){return e.match(KEe)||[]}var YEe=GEe,QEe=$Ee,XEe=vY,JEe=YEe;function ZEe(e){return XEe(e)?JEe(e):QEe(e)}var eTe=ZEe,tTe=SEe,nTe=vY,rTe=eTe,aTe=uY;function sTe(e){return function(t){t=aTe(t);var n=nTe(t)?rTe(t):void 0,r=n?n[0]:t.charAt(0),a=n?tTe(n,1).join(""):t.slice(1);return r[e]()+a}}var iTe=sTe,oTe=iTe,lTe=oTe("toUpperCase"),cTe=lTe;const hN=Zn(cTe);function Sr(e){return function(){return e}}const SY=Math.cos,Oj=Math.sin,Al=Math.sqrt,Ij=Math.PI,fN=2*Ij,fP=Math.PI,mP=2*fP,Rh=1e-6,uTe=mP-Rh;function NY(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function dTe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return NY;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class hTe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?NY:dTe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,d=o-t,h=l-n,m=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>Rh)if(!(Math.abs(h*c-u*d)>Rh)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-o,v=a-l,x=c*c+u*u,b=p*p+v*v,_=Math.sqrt(x),j=Math.sqrt(m),w=i*Math.tan((fP-Math.acos((x+m-b)/(2*_*j)))/2),N=w/j,k=w/_;Math.abs(N-1)>Rh&&this._append`L${t+N*d},${n+N*h}`,this._append`A${i},${i},0,0,${+(h*p>d*v)},${this._x1=t+k*c},${this._y1=n+k*u}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,d=n+c,h=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Rh||Math.abs(this._y1-d)>Rh)&&this._append`L${u},${d}`,r&&(m<0&&(m=m%mP+mP),m>uTe?this._append`A${r},${r},0,1,${h},${t-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:m>Rh&&this._append`A${r},${r},0,${+(m>=fP)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function LR(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new hTe(t)}function FR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kY(e){this._context=e}kY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function mN(e){return new kY(e)}function CY(e){return e[0]}function AY(e){return e[1]}function EY(e,t){var n=Sr(!0),r=null,a=mN,i=null,o=LR(l);e=typeof e=="function"?e:e===void 0?CY:Sr(e),t=typeof t=="function"?t:t===void 0?AY:Sr(t);function l(c){var u,d=(c=FR(c)).length,h,m=!1,p;for(r==null&&(i=a(p=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(h,u,c),+t(h,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Sr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Sr(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Sr(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(i=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=i=null:i=a(r=c),l):r},l}function qw(e,t,n){var r=null,a=Sr(!0),i=null,o=mN,l=null,c=LR(u);e=typeof e=="function"?e:e===void 0?CY:Sr(+e),t=typeof t=="function"?t:Sr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?AY:Sr(+n);function u(h){var m,p,v,x=(h=FR(h)).length,b,_=!1,j,w=new Array(x),N=new Array(x);for(i==null&&(l=o(j=c())),m=0;m<=x;++m){if(!(m<x&&a(b=h[m],m,h))===_)if(_=!_)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=p;--v)l.point(w[v],N[v]);l.lineEnd(),l.areaEnd()}_&&(w[m]=+e(b,m,h),N[m]=+t(b,m,h),l.point(r?+r(b,m,h):w[m],n?+n(b,m,h):N[m]))}if(j)return l=null,j+""||null}function d(){return EY().defined(a).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Sr(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Sr(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Sr(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Sr(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Sr(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Sr(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Sr(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class TY{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function fTe(e){return new TY(e,!0)}function mTe(e){return new TY(e,!1)}const BR={draw(e,t){const n=Al(t/Ij);e.moveTo(n,0),e.arc(0,0,n,0,fN)}},pTe={draw(e,t){const n=Al(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},PY=Al(1/3),gTe=PY*2,vTe={draw(e,t){const n=Al(t/gTe),r=n*PY;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},yTe={draw(e,t){const n=Al(t),r=-n/2;e.rect(r,r,n,n)}},xTe=.8908130915292852,OY=Oj(Ij/10)/Oj(7*Ij/10),bTe=Oj(fN/10)*OY,wTe=-SY(fN/10)*OY,_Te={draw(e,t){const n=Al(t*xTe),r=bTe*n,a=wTe*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=fN*i/5,l=SY(o),c=Oj(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},OA=Al(3),jTe={draw(e,t){const n=-Al(t/(OA*3));e.moveTo(0,n*2),e.lineTo(-OA*n,-n),e.lineTo(OA*n,-n),e.closePath()}},go=-.5,vo=Al(3)/2,pP=1/Al(12),STe=(pP/2+1)*3,NTe={draw(e,t){const n=Al(t/STe),r=n/2,a=n*pP,i=r,o=n*pP+n,l=-i,c=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(go*r-vo*a,vo*r+go*a),e.lineTo(go*i-vo*o,vo*i+go*o),e.lineTo(go*l-vo*c,vo*l+go*c),e.lineTo(go*r+vo*a,go*a-vo*r),e.lineTo(go*i+vo*o,go*o-vo*i),e.lineTo(go*l+vo*c,go*c-vo*l),e.closePath()}};function kTe(e,t){let n=null,r=LR(a);e=typeof e=="function"?e:Sr(e||BR),t=typeof t=="function"?t:Sr(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Sr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Sr(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function Rj(){}function $j(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function IY(e){this._context=e}IY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$j(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$j(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CTe(e){return new IY(e)}function RY(e){this._context=e}RY.prototype={areaStart:Rj,areaEnd:Rj,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$j(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ATe(e){return new RY(e)}function $Y(e){this._context=e}$Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$j(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ETe(e){return new $Y(e)}function MY(e){this._context=e}MY.prototype={areaStart:Rj,areaEnd:Rj,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function TTe(e){return new MY(e)}function p3(e){return e<0?-1:1}function g3(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(p3(i)+p3(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function v3(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function IA(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function Mj(e){this._context=e}Mj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:IA(this,this._t0,v3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,IA(this,v3(this,n=g3(this,e,t)),n);break;default:IA(this,this._t0,n=g3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function DY(e){this._context=new LY(e)}(DY.prototype=Object.create(Mj.prototype)).point=function(e,t){Mj.prototype.point.call(this,t,e)};function LY(e){this._context=e}LY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function PTe(e){return new Mj(e)}function OTe(e){return new DY(e)}function FY(e){this._context=e}FY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=y3(e),a=y3(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function y3(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function ITe(e){return new FY(e)}function pN(e,t){this._context=e,this._t=t}pN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function RTe(e){return new pN(e,.5)}function $Te(e){return new pN(e,0)}function MTe(e){return new pN(e,1)}function ag(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function gP(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function DTe(e,t){return e[t]}function LTe(e){const t=[];return t.key=e,t}function FTe(){var e=Sr([]),t=gP,n=ag,r=DTe;function a(i){var o=Array.from(e.apply(this,arguments),LTe),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,i)]).data=h;for(l=0,d=FR(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Sr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:Sr(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?gP:typeof i=="function"?i:Sr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??ag,a):n},a}function BTe(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}ag(e,t)}}function UTe(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}ag(e,t)}}function VTe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[r][1]||0,m=d[r-1][1]||0,p=(h-m)/2,v=0;v<l;++v){var x=e[t[v]],b=x[r][1]||0,_=x[r-1][1]||0;p+=b-_}c+=h,u+=p*h}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,ag(e,t)}}function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}var zTe=["type","size","sizeType"];function vP(){return vP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vP.apply(this,arguments)}function x3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function b3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x3(Object(n),!0).forEach(function(r){HTe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HTe(e,t,n){return t=WTe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WTe(e){var t=qTe(e,"string");return Ux(t)=="symbol"?t:t+""}function qTe(e,t){if(Ux(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ux(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KTe(e,t){if(e==null)return{};var n=GTe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function GTe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var BY={symbolCircle:BR,symbolCross:pTe,symbolDiamond:vTe,symbolSquare:yTe,symbolStar:_Te,symbolTriangle:jTe,symbolWye:NTe},YTe=Math.PI/180,QTe=function(t){var n="symbol".concat(hN(t));return BY[n]||BR},XTe=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*YTe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},JTe=function(t,n){BY["symbol".concat(hN(t))]=n},UR=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=KTe(t,zTe),u=b3(b3({},c),{},{type:r,size:i,sizeType:l}),d=function(){var b=QTe(r),_=kTe().type(b).size(XTe(i,l,r));return _()},h=u.className,m=u.cx,p=u.cy,v=kt(u,!0);return m===+m&&p===+p&&i===+i?V.createElement("path",vP({},v,{className:Xt("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(p,")"),d:d()})):null};UR.registerSymbol=JTe;function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function yP(){return yP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yP.apply(this,arguments)}function w3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ZTe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w3(Object(n),!0).forEach(function(r){Vx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ePe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tPe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VY(r.key),r)}}function nPe(e,t,n){return t&&tPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rPe(e,t,n){return t=Dj(t),aPe(e,UY()?Reflect.construct(t,n||[],Dj(e).constructor):t.apply(e,n))}function aPe(e,t){if(t&&(sg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sPe(e)}function sPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UY=function(){return!!e})()}function Dj(e){return Dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dj(e)}function iPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xP(e,t)}function xP(e,t){return xP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},xP(e,t)}function Vx(e,t,n){return t=VY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VY(e){var t=oPe(e,"string");return sg(t)=="symbol"?t:t+""}function oPe(e,t){if(sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yo=32,VR=function(e){function t(){return ePe(this,t),rPe(this,t,arguments)}return iPe(t,e),nPe(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,i=yo/2,o=yo/6,l=yo/3,c=r.inactive?a:r.color;if(r.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:yo,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(yo,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return V.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(yo/8,"h").concat(yo,"v").concat(yo*3/4,"h").concat(-yo,"z"),className:"recharts-legend-icon"});if(V.isValidElement(r.legendIcon)){var u=ZTe({},r);return delete u.legendIcon,V.cloneElement(r.legendIcon,u)}return V.createElement(UR,{fill:c,cx:i,cy:i,size:yo,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:yo,height:yo},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,v){var x=p.formatter||c,b=Xt(Vx(Vx({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var _=Ut(p.value)?null:p.value;bl(!Ut(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var j=p.inactive?u:p.color;return V.createElement("li",yP({className:b,style:h,key:"legend-item-".concat(v)},Pf(r.props,p,v)),V.createElement(cP,{width:o,height:o,viewBox:d,style:m},r.renderIcon(p)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},x?x(_,p,v):_))})}},{key:"render",value:function(){var r=this.props,a=r.payload,i=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(g.PureComponent);Vx(VR,"displayName","Legend");Vx(VR,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var lPe=ZS;function cPe(){this.__data__=new lPe,this.size=0}var uPe=cPe;function dPe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var hPe=dPe;function fPe(e){return this.__data__.get(e)}var mPe=fPe;function pPe(e){return this.__data__.has(e)}var gPe=pPe,vPe=ZS,yPe=ER,xPe=TR,bPe=200;function wPe(e,t){var n=this.__data__;if(n instanceof vPe){var r=n.__data__;if(!yPe||r.length<bPe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new xPe(r)}return n.set(e,t),this.size=n.size,this}var _Pe=wPe,jPe=ZS,SPe=uPe,NPe=hPe,kPe=mPe,CPe=gPe,APe=_Pe;function lv(e){var t=this.__data__=new jPe(e);this.size=t.size}lv.prototype.clear=SPe;lv.prototype.delete=NPe;lv.prototype.get=kPe;lv.prototype.has=CPe;lv.prototype.set=APe;var zY=lv,EPe="__lodash_hash_undefined__";function TPe(e){return this.__data__.set(e,EPe),this}var PPe=TPe;function OPe(e){return this.__data__.has(e)}var IPe=OPe,RPe=TR,$Pe=PPe,MPe=IPe;function Lj(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new RPe;++t<n;)this.add(e[t])}Lj.prototype.add=Lj.prototype.push=$Pe;Lj.prototype.has=MPe;var HY=Lj;function DPe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var WY=DPe;function LPe(e,t){return e.has(t)}var qY=LPe,FPe=HY,BPe=WY,UPe=qY,VPe=1,zPe=2;function HPe(e,t,n,r,a,i){var o=n&VPe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var h=-1,m=!0,p=n&zPe?new FPe:void 0;for(i.set(e,t),i.set(t,e);++h<l;){var v=e[h],x=t[h];if(r)var b=o?r(x,v,h,t,e,i):r(v,x,h,e,t,i);if(b!==void 0){if(b)continue;m=!1;break}if(p){if(!BPe(t,function(_,j){if(!UPe(p,j)&&(v===_||a(v,_,n,r,i)))return p.push(j)})){m=!1;break}}else if(!(v===x||a(v,x,n,r,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var KY=HPe,WPe=uc,qPe=WPe.Uint8Array,KPe=qPe;function GPe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var YPe=GPe;function QPe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var zR=QPe,_3=cb,j3=KPe,XPe=AR,JPe=KY,ZPe=YPe,eOe=zR,tOe=1,nOe=2,rOe="[object Boolean]",aOe="[object Date]",sOe="[object Error]",iOe="[object Map]",oOe="[object Number]",lOe="[object RegExp]",cOe="[object Set]",uOe="[object String]",dOe="[object Symbol]",hOe="[object ArrayBuffer]",fOe="[object DataView]",S3=_3?_3.prototype:void 0,RA=S3?S3.valueOf:void 0;function mOe(e,t,n,r,a,i,o){switch(n){case fOe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case hOe:return!(e.byteLength!=t.byteLength||!i(new j3(e),new j3(t)));case rOe:case aOe:case oOe:return XPe(+e,+t);case sOe:return e.name==t.name&&e.message==t.message;case lOe:case uOe:return e==t+"";case iOe:var l=ZPe;case cOe:var c=r&tOe;if(l||(l=eOe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=nOe,o.set(e,t);var d=JPe(l(e),l(t),r,a,i,o);return o.delete(e),d;case dOe:if(RA)return RA.call(e)==RA.call(t)}return!1}var pOe=mOe;function gOe(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var GY=gOe,vOe=GY,yOe=ki;function xOe(e,t,n){var r=t(e);return yOe(e)?r:vOe(r,n(e))}var bOe=xOe;function wOe(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var _Oe=wOe;function jOe(){return[]}var SOe=jOe,NOe=_Oe,kOe=SOe,COe=Object.prototype,AOe=COe.propertyIsEnumerable,N3=Object.getOwnPropertySymbols,EOe=N3?function(e){return e==null?[]:(e=Object(e),NOe(N3(e),function(t){return AOe.call(e,t)}))}:kOe,TOe=EOe;function POe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var OOe=POe,IOe=mu,ROe=pu,$Oe="[object Arguments]";function MOe(e){return ROe(e)&&IOe(e)==$Oe}var DOe=MOe,k3=DOe,LOe=pu,YY=Object.prototype,FOe=YY.hasOwnProperty,BOe=YY.propertyIsEnumerable,UOe=k3(function(){return arguments}())?k3:function(e){return LOe(e)&&FOe.call(e,"callee")&&!BOe.call(e,"callee")},HR=UOe,Fj={exports:{}};function VOe(){return!1}var zOe=VOe;Fj.exports;(function(e,t){var n=uc,r=zOe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(Fj,Fj.exports);var QY=Fj.exports,HOe=9007199254740991,WOe=/^(?:0|[1-9]\d*)$/;function qOe(e,t){var n=typeof e;return t=t??HOe,!!t&&(n=="number"||n!="symbol"&&WOe.test(e))&&e>-1&&e%1==0&&e<t}var WR=qOe,KOe=9007199254740991;function GOe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=KOe}var qR=GOe,YOe=mu,QOe=qR,XOe=pu,JOe="[object Arguments]",ZOe="[object Array]",e2e="[object Boolean]",t2e="[object Date]",n2e="[object Error]",r2e="[object Function]",a2e="[object Map]",s2e="[object Number]",i2e="[object Object]",o2e="[object RegExp]",l2e="[object Set]",c2e="[object String]",u2e="[object WeakMap]",d2e="[object ArrayBuffer]",h2e="[object DataView]",f2e="[object Float32Array]",m2e="[object Float64Array]",p2e="[object Int8Array]",g2e="[object Int16Array]",v2e="[object Int32Array]",y2e="[object Uint8Array]",x2e="[object Uint8ClampedArray]",b2e="[object Uint16Array]",w2e="[object Uint32Array]",Pr={};Pr[f2e]=Pr[m2e]=Pr[p2e]=Pr[g2e]=Pr[v2e]=Pr[y2e]=Pr[x2e]=Pr[b2e]=Pr[w2e]=!0;Pr[JOe]=Pr[ZOe]=Pr[d2e]=Pr[e2e]=Pr[h2e]=Pr[t2e]=Pr[n2e]=Pr[r2e]=Pr[a2e]=Pr[s2e]=Pr[i2e]=Pr[o2e]=Pr[l2e]=Pr[c2e]=Pr[u2e]=!1;function _2e(e){return XOe(e)&&QOe(e.length)&&!!Pr[YOe(e)]}var j2e=_2e;function S2e(e){return function(t){return e(t)}}var XY=S2e,Bj={exports:{}};Bj.exports;(function(e,t){var n=aY,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Bj,Bj.exports);var N2e=Bj.exports,k2e=j2e,C2e=XY,C3=N2e,A3=C3&&C3.isTypedArray,A2e=A3?C2e(A3):k2e,JY=A2e,E2e=OOe,T2e=HR,P2e=ki,O2e=QY,I2e=WR,R2e=JY,$2e=Object.prototype,M2e=$2e.hasOwnProperty;function D2e(e,t){var n=P2e(e),r=!n&&T2e(e),a=!n&&!r&&O2e(e),i=!n&&!r&&!a&&R2e(e),o=n||r||a||i,l=o?E2e(e.length,String):[],c=l.length;for(var u in e)(t||M2e.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||I2e(u,c)))&&l.push(u);return l}var L2e=D2e,F2e=Object.prototype;function B2e(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||F2e;return e===n}var U2e=B2e;function V2e(e,t){return function(n){return e(t(n))}}var ZY=V2e,z2e=ZY,H2e=z2e(Object.keys,Object),W2e=H2e,q2e=U2e,K2e=W2e,G2e=Object.prototype,Y2e=G2e.hasOwnProperty;function Q2e(e){if(!q2e(e))return K2e(e);var t=[];for(var n in Object(e))Y2e.call(e,n)&&n!="constructor"&&t.push(n);return t}var X2e=Q2e,J2e=CR,Z2e=qR;function eIe(e){return e!=null&&Z2e(e.length)&&!J2e(e)}var ub=eIe,tIe=L2e,nIe=X2e,rIe=ub;function aIe(e){return rIe(e)?tIe(e):nIe(e)}var gN=aIe,sIe=bOe,iIe=TOe,oIe=gN;function lIe(e){return sIe(e,oIe,iIe)}var cIe=lIe,E3=cIe,uIe=1,dIe=Object.prototype,hIe=dIe.hasOwnProperty;function fIe(e,t,n,r,a,i){var o=n&uIe,l=E3(e),c=l.length,u=E3(t),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var m=l[h];if(!(o?m in t:hIe.call(t,m)))return!1}var p=i.get(e),v=i.get(t);if(p&&v)return p==t&&v==e;var x=!0;i.set(e,t),i.set(t,e);for(var b=o;++h<c;){m=l[h];var _=e[m],j=t[m];if(r)var w=o?r(j,_,m,t,e,i):r(_,j,m,e,t,i);if(!(w===void 0?_===j||a(_,j,n,r,i):w)){x=!1;break}b||(b=m=="constructor")}if(x&&!b){var N=e.constructor,k=t.constructor;N!=k&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof k=="function"&&k instanceof k)&&(x=!1)}return i.delete(e),i.delete(t),x}var mIe=fIe,pIe=Kf,gIe=uc,vIe=pIe(gIe,"DataView"),yIe=vIe,xIe=Kf,bIe=uc,wIe=xIe(bIe,"Promise"),_Ie=wIe,jIe=Kf,SIe=uc,NIe=jIe(SIe,"Set"),eQ=NIe,kIe=Kf,CIe=uc,AIe=kIe(CIe,"WeakMap"),EIe=AIe,bP=yIe,wP=ER,_P=_Ie,jP=eQ,SP=EIe,tQ=mu,cv=iY,T3="[object Map]",TIe="[object Object]",P3="[object Promise]",O3="[object Set]",I3="[object WeakMap]",R3="[object DataView]",PIe=cv(bP),OIe=cv(wP),IIe=cv(_P),RIe=cv(jP),$Ie=cv(SP),$h=tQ;(bP&&$h(new bP(new ArrayBuffer(1)))!=R3||wP&&$h(new wP)!=T3||_P&&$h(_P.resolve())!=P3||jP&&$h(new jP)!=O3||SP&&$h(new SP)!=I3)&&($h=function(e){var t=tQ(e),n=t==TIe?e.constructor:void 0,r=n?cv(n):"";if(r)switch(r){case PIe:return R3;case OIe:return T3;case IIe:return P3;case RIe:return O3;case $Ie:return I3}return t});var MIe=$h,$A=zY,DIe=KY,LIe=pOe,FIe=mIe,$3=MIe,M3=ki,D3=QY,BIe=JY,UIe=1,L3="[object Arguments]",F3="[object Array]",Kw="[object Object]",VIe=Object.prototype,B3=VIe.hasOwnProperty;function zIe(e,t,n,r,a,i){var o=M3(e),l=M3(t),c=o?F3:$3(e),u=l?F3:$3(t);c=c==L3?Kw:c,u=u==L3?Kw:u;var d=c==Kw,h=u==Kw,m=c==u;if(m&&D3(e)){if(!D3(t))return!1;o=!0,d=!1}if(m&&!d)return i||(i=new $A),o||BIe(e)?DIe(e,t,n,r,a,i):LIe(e,t,c,n,r,a,i);if(!(n&UIe)){var p=d&&B3.call(e,"__wrapped__"),v=h&&B3.call(t,"__wrapped__");if(p||v){var x=p?e.value():e,b=v?t.value():t;return i||(i=new $A),a(x,b,n,r,i)}}return m?(i||(i=new $A),FIe(e,t,n,r,a,i)):!1}var HIe=zIe,WIe=HIe,U3=pu;function nQ(e,t,n,r,a){return e===t?!0:e==null||t==null||!U3(e)&&!U3(t)?e!==e&&t!==t:WIe(e,t,n,r,nQ,a)}var KR=nQ,qIe=zY,KIe=KR,GIe=1,YIe=2;function QIe(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var h=new qIe;if(r)var m=r(u,d,c,e,t,h);if(!(m===void 0?KIe(d,u,GIe|YIe,r,h):m))return!1}}return!0}var XIe=QIe,JIe=Yd;function ZIe(e){return e===e&&!JIe(e)}var rQ=ZIe,eRe=rQ,tRe=gN;function nRe(e){for(var t=tRe(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,eRe(a)]}return t}var rRe=nRe;function aRe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var aQ=aRe,sRe=XIe,iRe=rRe,oRe=aQ;function lRe(e){var t=iRe(e);return t.length==1&&t[0][2]?oRe(t[0][0],t[0][1]):function(n){return n===e||sRe(n,e,t)}}var cRe=lRe;function uRe(e,t){return e!=null&&t in Object(e)}var dRe=uRe,hRe=dY,fRe=HR,mRe=ki,pRe=WR,gRe=qR,vRe=tN;function yRe(e,t,n){t=hRe(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=vRe(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&gRe(a)&&pRe(o,a)&&(mRe(e)||fRe(e)))}var xRe=yRe,bRe=dRe,wRe=xRe;function _Re(e,t){return e!=null&&wRe(e,t,bRe)}var jRe=_Re,SRe=KR,NRe=hY,kRe=jRe,CRe=kR,ARe=rQ,ERe=aQ,TRe=tN,PRe=1,ORe=2;function IRe(e,t){return CRe(e)&&ARe(t)?ERe(TRe(e),t):function(n){var r=NRe(n,e);return r===void 0&&r===t?kRe(n,e):SRe(t,r,PRe|ORe)}}var RRe=IRe;function $Re(e){return e}var uv=$Re;function MRe(e){return function(t){return t==null?void 0:t[e]}}var DRe=MRe,LRe=IR;function FRe(e){return function(t){return LRe(t,e)}}var BRe=FRe,URe=DRe,VRe=BRe,zRe=kR,HRe=tN;function WRe(e){return zRe(e)?URe(HRe(e)):VRe(e)}var qRe=WRe,KRe=cRe,GRe=RRe,YRe=uv,QRe=ki,XRe=qRe;function JRe(e){return typeof e=="function"?e:e==null?YRe:typeof e=="object"?QRe(e)?GRe(e[0],e[1]):KRe(e):XRe(e)}var dc=JRe;function ZRe(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var sQ=ZRe;function e$e(e){return e!==e}var t$e=e$e;function n$e(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var r$e=n$e,a$e=sQ,s$e=t$e,i$e=r$e;function o$e(e,t,n){return t===t?i$e(e,t,n):a$e(e,s$e,n)}var l$e=o$e,c$e=l$e;function u$e(e,t){var n=e==null?0:e.length;return!!n&&c$e(e,t,0)>-1}var d$e=u$e;function h$e(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var f$e=h$e;function m$e(){}var p$e=m$e,MA=eQ,g$e=p$e,v$e=zR,y$e=1/0,x$e=MA&&1/v$e(new MA([,-0]))[1]==y$e?function(e){return new MA(e)}:g$e,b$e=x$e,w$e=HY,_$e=d$e,j$e=f$e,S$e=qY,N$e=b$e,k$e=zR,C$e=200;function A$e(e,t,n){var r=-1,a=_$e,i=e.length,o=!0,l=[],c=l;if(n)o=!1,a=j$e;else if(i>=C$e){var u=t?null:N$e(e);if(u)return k$e(u);o=!1,a=S$e,c=new w$e}else c=t?[]:l;e:for(;++r<i;){var d=e[r],h=t?t(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var m=c.length;m--;)if(c[m]===h)continue e;t&&c.push(h),l.push(d)}else a(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var E$e=A$e,T$e=dc,P$e=E$e;function O$e(e,t){return e&&e.length?P$e(e,T$e(t)):[]}var I$e=O$e;const V3=Zn(I$e);function iQ(e,t,n){return t===!0?V3(e,n):Ut(t)?V3(e,t):e}function ig(e){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(e)}var R$e=["ref"];function z3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z3(Object(n),!0).forEach(function(r){vN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lQ(r.key),r)}}function M$e(e,t,n){return t&&H3(e.prototype,t),n&&H3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D$e(e,t,n){return t=Uj(t),L$e(e,oQ()?Reflect.construct(t,n||[],Uj(e).constructor):t.apply(e,n))}function L$e(e,t){if(t&&(ig(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F$e(e)}function F$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oQ=function(){return!!e})()}function Uj(e){return Uj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uj(e)}function B$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NP(e,t)}function NP(e,t){return NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},NP(e,t)}function vN(e,t,n){return t=lQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lQ(e){var t=U$e(e,"string");return ig(t)=="symbol"?t:t+""}function U$e(e,t){if(ig(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V$e(e,t){if(e==null)return{};var n=z$e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function z$e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function H$e(e){return e.value}function W$e(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var n=V$e(t,R$e);return V.createElement(VR,n)}var W3=1,Vs=function(e){function t(){var n;$$e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=D$e(this,t,[].concat(a)),vN(n,"lastBoundingBox",{width:-1,height:-1}),n}return B$e(t,e),M$e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>W3||Math.abs(a.height-this.lastBoundingBox.height)>W3)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Tc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,h,m;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();h={left:((u||0)-p.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((d||0)-v.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Tc(Tc({},h),m)}},{key:"render",value:function(){var r=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,h=Tc(Tc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return V.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(p){r.wrapperNode=p}},W$e(i,Tc(Tc({},this.props),{},{payload:iQ(d,u,H$e)})))}}],[{key:"getWithHeight",value:function(r,a){var i=Tc(Tc({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&Qe(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(g.PureComponent);vN(Vs,"displayName","Legend");vN(Vs,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var q3=cb,q$e=HR,K$e=ki,K3=q3?q3.isConcatSpreadable:void 0;function G$e(e){return K$e(e)||q$e(e)||!!(K3&&e&&e[K3])}var Y$e=G$e,Q$e=GY,X$e=Y$e;function cQ(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=X$e),a||(a=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?cQ(l,t-1,n,r,a):Q$e(a,l):r||(a[a.length]=l)}return a}var uQ=cQ;function J$e(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(i[c],c,i)===!1)break}return t}}var Z$e=J$e,eMe=Z$e,tMe=eMe(),nMe=tMe,rMe=nMe,aMe=gN;function sMe(e,t){return e&&rMe(e,t,aMe)}var dQ=sMe,iMe=ub;function oMe(e,t){return function(n,r){if(n==null)return n;if(!iMe(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var lMe=oMe,cMe=dQ,uMe=lMe,dMe=uMe(cMe),GR=dMe,hMe=GR,fMe=ub;function mMe(e,t){var n=-1,r=fMe(e)?Array(e.length):[];return hMe(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var hQ=mMe;function pMe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var gMe=pMe,G3=nv;function vMe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,i=G3(e),o=t!==void 0,l=t===null,c=t===t,u=G3(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!i&&!u&&e<t||u&&n&&a&&!r&&!i||l&&n&&a||!o&&a||!c)return-1}return 0}var yMe=vMe,xMe=yMe;function bMe(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,o=a.length,l=n.length;++r<o;){var c=xMe(a[r],i[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var wMe=bMe,DA=OR,_Me=IR,jMe=dc,SMe=hQ,NMe=gMe,kMe=XY,CMe=wMe,AMe=uv,EMe=ki;function TMe(e,t,n){t.length?t=DA(t,function(i){return EMe(i)?function(o){return _Me(o,i.length===1?i[0]:i)}:i}):t=[AMe];var r=-1;t=DA(t,kMe(jMe));var a=SMe(e,function(i,o,l){var c=DA(t,function(u){return u(i)});return{criteria:c,index:++r,value:i}});return NMe(a,function(i,o){return CMe(i,o,n)})}var PMe=TMe;function OMe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var IMe=OMe,RMe=IMe,Y3=Math.max;function $Me(e,t,n){return t=Y3(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=Y3(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),RMe(e,this,l)}}var MMe=$Me;function DMe(e){return function(){return e}}var LMe=DMe,FMe=Kf,BMe=function(){try{var e=FMe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fQ=BMe,UMe=LMe,Q3=fQ,VMe=uv,zMe=Q3?function(e,t){return Q3(e,"toString",{configurable:!0,enumerable:!1,value:UMe(t),writable:!0})}:VMe,HMe=zMe,WMe=800,qMe=16,KMe=Date.now;function GMe(e){var t=0,n=0;return function(){var r=KMe(),a=qMe-(r-n);if(n=r,a>0){if(++t>=WMe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var YMe=GMe,QMe=HMe,XMe=YMe,JMe=XMe(QMe),ZMe=JMe,eDe=uv,tDe=MMe,nDe=ZMe;function rDe(e,t){return nDe(tDe(e,t,eDe),e+"")}var aDe=rDe,sDe=AR,iDe=ub,oDe=WR,lDe=Yd;function cDe(e,t,n){if(!lDe(n))return!1;var r=typeof t;return(r=="number"?iDe(n)&&oDe(t,n.length):r=="string"&&t in n)?sDe(n[t],e):!1}var yN=cDe,uDe=uQ,dDe=PMe,hDe=aDe,X3=yN,fDe=hDe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&X3(e,t[0],t[1])?t=[]:n>2&&X3(t[0],t[1],t[2])&&(t=[t[0]]),dDe(e,uDe(t,1),[])}),mDe=fDe;const YR=Zn(mDe);function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function kP(){return kP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kP.apply(this,arguments)}function pDe(e,t){return xDe(e)||yDe(e,t)||vDe(e,t)||gDe()}function gDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vDe(e,t){if(e){if(typeof e=="string")return J3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J3(e,t)}}function J3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yDe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function xDe(e){if(Array.isArray(e))return e}function Z3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function LA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z3(Object(n),!0).forEach(function(r){bDe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bDe(e,t,n){return t=wDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wDe(e){var t=_De(e,"string");return zx(t)=="symbol"?t:t+""}function _De(e,t){if(zx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jDe(e){return Array.isArray(e)&&La(e[0])&&La(e[1])?e.join(" ~ "):e}var SDe=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,h=t.formatter,m=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,x=t.label,b=t.labelFormatter,_=t.accessibilityLayer,j=_===void 0?!1:_,w=function(){if(d&&d.length){var L={padding:0,margin:0},z=(m?YR(d,m):d).map(function(W,B){if(W.type==="none")return null;var G=LA({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},l),U=W.formatter||h||jDe,F=W.value,K=W.name,X=F,se=K;if(U&&X!=null&&se!=null){var D=U(F,K,W,B,d);if(Array.isArray(D)){var Y=pDe(D,2);X=Y[0],se=Y[1]}else X=D}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:G},La(se)?V.createElement("span",{className:"recharts-tooltip-item-name"},se):null,La(se)?V.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,V.createElement("span",{className:"recharts-tooltip-item-value"},X),V.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:L},z)}return null},N=LA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),k=LA({margin:0},u),C=!en(x),A=C?x:"",P=Xt("recharts-default-tooltip",p),O=Xt("recharts-tooltip-label",v);C&&b&&d!==void 0&&d!==null&&(A=b(x,d));var T=j?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",kP({className:P,style:N},T),V.createElement("p",{className:O,style:k},V.isValidElement(A)?A:"".concat(A)),w())};function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function Gw(e,t,n){return t=NDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NDe(e){var t=kDe(e,"string");return Hx(t)=="symbol"?t:t+""}function kDe(e,t){if(Hx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var my="recharts-tooltip-wrapper",CDe={visibility:"hidden"};function ADe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Xt(my,Gw(Gw(Gw(Gw({},"".concat(my,"-right"),Qe(n)&&t&&Qe(t.x)&&n>=t.x),"".concat(my,"-left"),Qe(n)&&t&&Qe(t.x)&&n<t.x),"".concat(my,"-bottom"),Qe(r)&&t&&Qe(t.y)&&r>=t.y),"".concat(my,"-top"),Qe(r)&&t&&Qe(t.y)&&r<t.y))}function e5(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Qe(i[r]))return i[r];var d=n[r]-l-a,h=n[r]+a;if(t[r])return o[r]?d:h;if(o[r]){var m=d,p=c[r];return m<p?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+l,x=c[r]+u;return v>x?Math.max(d,c[r]):Math.max(h,c[r])}function EDe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function TDe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=e5({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=e5({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=EDe({translateX:d,translateY:h,useTranslate3d:l})):u=CDe,{cssProperties:u,cssClasses:ADe({translateX:d,translateY:h,coordinate:n})}}function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function t5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function n5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t5(Object(n),!0).forEach(function(r){AP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ODe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pQ(r.key),r)}}function IDe(e,t,n){return t&&ODe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RDe(e,t,n){return t=Vj(t),$De(e,mQ()?Reflect.construct(t,n||[],Vj(e).constructor):t.apply(e,n))}function $De(e,t){if(t&&(og(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MDe(e)}function MDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mQ=function(){return!!e})()}function Vj(e){return Vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vj(e)}function DDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CP(e,t)}function CP(e,t){return CP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},CP(e,t)}function AP(e,t,n){return t=pQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pQ(e){var t=LDe(e,"string");return og(t)=="symbol"?t:t+""}function LDe(e,t){if(og(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r5=1,FDe=function(e){function t(){var n;PDe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=RDe(this,t,[].concat(a)),AP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),AP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return DDe(t,e),IDe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>r5||Math.abs(r.height-this.state.lastBoundingBox.height)>r5)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,h=a.hasPayload,m=a.isAnimationActive,p=a.offset,v=a.position,x=a.reverseDirection,b=a.useTranslate3d,_=a.viewBox,j=a.wrapperStyle,w=TDe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:v,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:_}),N=w.cssClasses,k=w.cssProperties,C=n5(n5({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},j);return V.createElement("div",{tabIndex:-1,className:N,style:C,ref:function(P){r.wrapperNode=P}},u)}}])}(g.PureComponent),BDe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Io={isSsr:BDe(),get:function(t){return Io[t]},set:function(t,n){if(typeof t=="string")Io[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){Io[a]=t[a]})}}};function lg(e){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(e)}function a5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function s5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a5(Object(n),!0).forEach(function(r){QR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VDe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vQ(r.key),r)}}function zDe(e,t,n){return t&&VDe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HDe(e,t,n){return t=zj(t),WDe(e,gQ()?Reflect.construct(t,n||[],zj(e).constructor):t.apply(e,n))}function WDe(e,t){if(t&&(lg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qDe(e)}function qDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gQ=function(){return!!e})()}function zj(e){return zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zj(e)}function KDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EP(e,t)}function EP(e,t){return EP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},EP(e,t)}function QR(e,t,n){return t=vQ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vQ(e){var t=GDe(e,"string");return lg(t)=="symbol"?t:t+""}function GDe(e,t){if(lg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YDe(e){return e.dataKey}function QDe(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(SDe,t)}var wo=function(e){function t(){return UDe(this,t),HDe(this,t,arguments)}return KDe(t,e),zDe(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,h=a.filterNull,m=a.isAnimationActive,p=a.offset,v=a.payload,x=a.payloadUniqBy,b=a.position,_=a.reverseDirection,j=a.useTranslate3d,w=a.viewBox,N=a.wrapperStyle,k=v??[];h&&k.length&&(k=iQ(v.filter(function(A){return A.value!=null&&(A.hide!==!0||r.props.includeHidden)}),x,YDe));var C=k.length>0;return V.createElement(FDe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:d,hasPayload:C,offset:p,position:b,reverseDirection:_,useTranslate3d:j,viewBox:w,wrapperStyle:N},QDe(u,s5(s5({},this.props),{},{payload:k})))}}])}(g.PureComponent);QR(wo,"displayName","Tooltip");QR(wo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Io.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var XDe=uc,JDe=function(){return XDe.Date.now()},ZDe=JDe,eLe=/\s/;function tLe(e){for(var t=e.length;t--&&eLe.test(e.charAt(t)););return t}var nLe=tLe,rLe=nLe,aLe=/^\s+/;function sLe(e){return e&&e.slice(0,rLe(e)+1).replace(aLe,"")}var iLe=sLe,oLe=iLe,i5=Yd,lLe=nv,o5=NaN,cLe=/^[-+]0x[0-9a-f]+$/i,uLe=/^0b[01]+$/i,dLe=/^0o[0-7]+$/i,hLe=parseInt;function fLe(e){if(typeof e=="number")return e;if(lLe(e))return o5;if(i5(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=i5(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=oLe(e);var n=uLe.test(e);return n||dLe.test(e)?hLe(e.slice(2),n?2:8):cLe.test(e)?o5:+e}var yQ=fLe,mLe=Yd,FA=ZDe,l5=yQ,pLe="Expected a function",gLe=Math.max,vLe=Math.min;function yLe(e,t,n){var r,a,i,o,l,c,u=0,d=!1,h=!1,m=!0;if(typeof e!="function")throw new TypeError(pLe);t=l5(t)||0,mLe(n)&&(d=!!n.leading,h="maxWait"in n,i=h?gLe(l5(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m);function p(C){var A=r,P=a;return r=a=void 0,u=C,o=e.apply(P,A),o}function v(C){return u=C,l=setTimeout(_,t),d?p(C):o}function x(C){var A=C-c,P=C-u,O=t-A;return h?vLe(O,i-P):O}function b(C){var A=C-c,P=C-u;return c===void 0||A>=t||A<0||h&&P>=i}function _(){var C=FA();if(b(C))return j(C);l=setTimeout(_,x(C))}function j(C){return l=void 0,m&&r?p(C):(r=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function N(){return l===void 0?o:j(FA())}function k(){var C=FA(),A=b(C);if(r=arguments,a=this,c=C,A){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(_,t),p(c)}return l===void 0&&(l=setTimeout(_,t)),o}return k.cancel=w,k.flush=N,k}var xLe=yLe,bLe=xLe,wLe=Yd,_Le="Expected a function";function jLe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(_Le);return wLe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),bLe(e,t,{leading:r,maxWait:t,trailing:a})}var SLe=jLe;const xQ=Zn(SLe);function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function c5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c5(Object(n),!0).forEach(function(r){NLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NLe(e,t,n){return t=kLe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kLe(e){var t=CLe(e,"string");return Wx(t)=="symbol"?t:t+""}function CLe(e,t){if(Wx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ALe(e,t){return OLe(e)||PLe(e,t)||TLe(e,t)||ELe()}function ELe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TLe(e,t){if(e){if(typeof e=="string")return u5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u5(e,t)}}function u5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function PLe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function OLe(e){if(Array.isArray(e))return e}var TP=g.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,m=e.maxHeight,p=e.children,v=e.debounce,x=v===void 0?0:v,b=e.id,_=e.className,j=e.onResize,w=e.style,N=w===void 0?{}:w,k=g.useRef(null),C=g.useRef();C.current=j,g.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var A=g.useState({containerWidth:a.width,containerHeight:a.height}),P=ALe(A,2),O=P[0],T=P[1],$=g.useCallback(function(z,W){T(function(B){var G=Math.round(z),U=Math.round(W);return B.containerWidth===G&&B.containerHeight===U?B:{containerWidth:G,containerHeight:U}})},[]);g.useEffect(function(){var z=function(K){var X,se=K[0].contentRect,D=se.width,Y=se.height;$(D,Y),(X=C.current)===null||X===void 0||X.call(C,D,Y)};x>0&&(z=xQ(z,x,{trailing:!0,leading:!1}));var W=new ResizeObserver(z),B=k.current.getBoundingClientRect(),G=B.width,U=B.height;return $(G,U),W.observe(k.current),function(){W.disconnect()}},[$,x]);var L=g.useMemo(function(){var z=O.containerWidth,W=O.containerHeight;if(z<0||W<0)return null;bl(Gh(o)||Gh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),bl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var B=Gh(o)?z:o,G=Gh(c)?W:c;n&&n>0&&(B?G=B/n:G&&(B=G*n),m&&G>m&&(G=m)),bl(B>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,G,o,c,d,h,n);var U=!Array.isArray(p)&&Kc(p.type).endsWith("Chart");return V.Children.map(p,function(F){return V.isValidElement(F)?g.cloneElement(F,Yw({width:B,height:G},U?{style:Yw({height:"100%",width:"100%",maxHeight:G,maxWidth:B},F.props.style)}:{})):F})},[n,p,c,m,h,d,O,o]);return V.createElement("div",{id:b?"".concat(b):void 0,className:Xt("recharts-responsive-container",_),style:Yw(Yw({},N),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:m}),ref:k},L)}),cd=function(t){return null};cd.displayName="Cell";function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function d5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function PP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d5(Object(n),!0).forEach(function(r){ILe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ILe(e,t,n){return t=RLe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RLe(e){var t=$Le(e,"string");return qx(t)=="symbol"?t:t+""}function $Le(e,t){if(qx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rm={widthCache:{},cacheCount:0},MLe=2e3,DLe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},h5="recharts_measurement_span";function LLe(e){var t=PP({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Yy=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Io.isSsr)return{width:0,height:0};var r=LLe(n),a=JSON.stringify({text:t,copyStyle:r});if(Rm.widthCache[a])return Rm.widthCache[a];try{var i=document.getElementById(h5);i||(i=document.createElement("span"),i.setAttribute("id",h5),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=PP(PP({},DLe),r);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Rm.widthCache[a]=c,++Rm.cacheCount>MLe&&(Rm.cacheCount=0,Rm.widthCache={}),c}catch{return{width:0,height:0}}},FLe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function Hj(e,t){return zLe(e)||VLe(e,t)||ULe(e,t)||BLe()}function BLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ULe(e,t){if(e){if(typeof e=="string")return f5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f5(e,t)}}function f5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VLe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function zLe(e){if(Array.isArray(e))return e}function HLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qLe(r.key),r)}}function WLe(e,t,n){return t&&m5(e.prototype,t),n&&m5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qLe(e){var t=KLe(e,"string");return Kx(t)=="symbol"?t:t+""}function KLe(e,t){if(Kx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Kx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var p5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,GLe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,YLe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bQ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},QLe=Object.keys(bQ),sp="NaN";function XLe(e,t){return e*bQ[t]}var Qw=function(){function e(t,n){HLe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!GLe.test(n)&&(this.num=NaN,this.unit=""),QLe.includes(n)&&(this.num=XLe(t,n),this.unit="px")}return WLe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=YLe.exec(n))!==null&&r!==void 0?r:[],i=Hj(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function wQ(e){if(e.includes(sp))return sp;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=p5.exec(t))!==null&&n!==void 0?n:[],a=Hj(r,4),i=a[1],o=a[2],l=a[3],c=Qw.parse(i??""),u=Qw.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return sp;t=t.replace(p5,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,m=(h=g5.exec(t))!==null&&h!==void 0?h:[],p=Hj(m,4),v=p[1],x=p[2],b=p[3],_=Qw.parse(v??""),j=Qw.parse(b??""),w=x==="+"?_.add(j):_.subtract(j);if(w.isNaN())return sp;t=t.replace(g5,w.toString())}return t}var v5=/\(([^()]*)\)/;function JLe(e){for(var t=e;t.includes("(");){var n=v5.exec(t),r=Hj(n,2),a=r[1];t=t.replace(v5,wQ(a))}return t}function ZLe(e){var t=e.replace(/\s+/g,"");return t=JLe(t),t=wQ(t),t}function e4e(e){try{return ZLe(e)}catch{return sp}}function BA(e){var t=e4e(e.slice(5,-1));return t===sp?"":t}var t4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],n4e=["dx","dy","angle","className","breakAll"];function OP(){return OP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OP.apply(this,arguments)}function y5(e,t){if(e==null)return{};var n=r4e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function r4e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function x5(e,t){return o4e(e)||i4e(e,t)||s4e(e,t)||a4e()}function a4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s4e(e,t){if(e){if(typeof e=="string")return b5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b5(e,t)}}function b5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i4e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function o4e(e){if(Array.isArray(e))return e}var _Q=/[ \f\n\r\t\v\u2028\u2029]+/,jQ=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var i=[];en(n)||(r?i=n.toString().split(""):i=n.toString().split(_Q));var o=i.map(function(c){return{word:c,width:Yy(c,a).width}}),l=r?0:Yy("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},l4e=function(t,n,r,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Qe(o),h=l,m=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(G,U){var F=U.word,K=U.width,X=G[G.length-1];if(X&&(a==null||i||X.width+K+r<Number(a)))X.words.push(F),X.width+=K+r;else{var se={words:[F],width:K};G.push(se)}return G},[])},p=m(n),v=function(B){return B.reduce(function(G,U){return G.width>U.width?G:U})};if(!d)return p;for(var x="",b=function(B){var G=h.slice(0,B),U=jQ({breakAll:u,style:c,children:G+x}).wordsWithComputedWidth,F=m(U),K=F.length>o||v(F).width>Number(a);return[K,F]},_=0,j=h.length-1,w=0,N;_<=j&&w<=h.length-1;){var k=Math.floor((_+j)/2),C=k-1,A=b(C),P=x5(A,2),O=P[0],T=P[1],$=b(k),L=x5($,1),z=L[0];if(!O&&!z&&(_=k+1),O&&z&&(j=k-1),!O&&z){N=T;break}w++}return N||p},w5=function(t){var n=en(t)?[]:t.toString().split(_Q);return[{words:n}]},c4e=function(t){var n=t.width,r=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!Io.isSsr){var c,u,d=jQ({breakAll:o,children:a,style:i});if(d){var h=d.wordsWithComputedWidth,m=d.spaceWidth;c=h,u=m}else return w5(a);return l4e({breakAll:o,children:a,maxLines:l,style:i},c,u,n,r)}return w5(a)},_5="#808080",Of=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,h=d===void 0?!1:d,m=t.textAnchor,p=m===void 0?"start":m,v=t.verticalAnchor,x=v===void 0?"end":v,b=t.fill,_=b===void 0?_5:b,j=y5(t,t4e),w=g.useMemo(function(){return c4e({breakAll:j.breakAll,children:j.children,maxLines:j.maxLines,scaleToFit:h,style:j.style,width:j.width})},[j.breakAll,j.children,j.maxLines,h,j.style,j.width]),N=j.dx,k=j.dy,C=j.angle,A=j.className,P=j.breakAll,O=y5(j,n4e);if(!La(r)||!La(i))return null;var T=r+(Qe(N)?N:0),$=i+(Qe(k)?k:0),L;switch(x){case"start":L=BA("calc(".concat(u,")"));break;case"middle":L=BA("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:L=BA("calc(".concat(w.length-1," * -").concat(l,")"));break}var z=[];if(h){var W=w[0].width,B=j.width;z.push("scale(".concat((Qe(B)?B/W:1)/W,")"))}return C&&z.push("rotate(".concat(C,", ").concat(T,", ").concat($,")")),z.length&&(O.transform=z.join(" ")),V.createElement("text",OP({},kt(O,!0),{x:T,y:$,className:Xt("recharts-text",A),textAnchor:p,fill:_.includes("url")?_5:_}),w.map(function(G,U){var F=G.words.join(P?"":" ");return V.createElement("tspan",{x:T,dy:U===0?L:l,key:"".concat(F,"-").concat(U)},F)}))};function Sd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function u4e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function XR(e){let t,n,r;e.length!==2?(t=Sd,n=(l,c)=>Sd(e(l),c),r=(l,c)=>e(l)-c):(t=e===Sd||e===u4e?e:d4e,n=e,r=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function d4e(){return 0}function SQ(e){return e===null?NaN:+e}function*h4e(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const f4e=XR(Sd),db=f4e.right;XR(SQ).center;class j5 extends Map{constructor(t,n=g4e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(S5(this,t))}has(t){return super.has(S5(this,t))}set(t,n){return super.set(m4e(this,t),n)}delete(t){return super.delete(p4e(this,t))}}function S5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function m4e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function p4e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function g4e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function v4e(e=Sd){if(e===Sd)return NQ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function NQ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const y4e=Math.sqrt(50),x4e=Math.sqrt(10),b4e=Math.sqrt(2);function Wj(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=y4e?10:i>=x4e?5:i>=b4e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?Wj(e,t,n*2):[l,c,u]}function IP(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?Wj(t,e,n):Wj(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function RP(e,t,n){return t=+t,e=+e,n=+n,Wj(e,t,n)[2]}function $P(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?RP(t,e,n):RP(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function N5(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function k5(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function kQ(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?NQ:v4e(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),p=Math.max(n,Math.floor(t-u*h/c+m)),v=Math.min(r,Math.floor(t+(c-u)*h/c+m));kQ(e,t,p,v,a)}const i=e[t];let o=n,l=r;for(py(e,n,t),a(e[r],i)>0&&py(e,n,r);o<l;){for(py(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?py(e,n,l):(++l,py(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function py(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function w4e(e,t,n){if(e=Float64Array.from(h4e(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return k5(e);if(t>=1)return N5(e);var r,a=(r-1)*t,i=Math.floor(a),o=N5(kQ(e,i).subarray(0,i+1)),l=k5(e.subarray(i+1));return o+(l-o)*(a-i)}}function _4e(e,t,n=SQ){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function j4e(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Uo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function gu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const MP=Symbol("implicit");function JR(){var e=new j5,t=[],n=[],r=MP;function a(i){let o=e.get(i);if(o===void 0){if(r!==MP)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new j5;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return JR(t,n).unknown(r)},Uo.apply(a,arguments),a}function Gx(){var e=JR().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var m=t().length,p=a<r,v=p?a:r,x=p?r:a;i=(x-v)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),v+=(x-v-i*(m-c))*d,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=j4e(m).map(function(_){return v+i*_});return n(p?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([r,a]=m,r=+r,a=+a,h()):[r,a]},e.rangeRound=function(m){return[r,a]=m,r=+r,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,h()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),h()):d},e.copy=function(){return Gx(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Uo.apply(h(),arguments)}function CQ(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return CQ(t())},e}function Qy(){return CQ(Gx.apply(null,arguments).paddingInner(1))}function ZR(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function AQ(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hb(){}var Yx=.7,qj=1/Yx,Sp="\\s*([+-]?\\d+)\\s*",Qx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S4e=/^#([0-9a-f]{3,8})$/,N4e=new RegExp(`^rgb\\(${Sp},${Sp},${Sp}\\)$`),k4e=new RegExp(`^rgb\\(${tc},${tc},${tc}\\)$`),C4e=new RegExp(`^rgba\\(${Sp},${Sp},${Sp},${Qx}\\)$`),A4e=new RegExp(`^rgba\\(${tc},${tc},${tc},${Qx}\\)$`),E4e=new RegExp(`^hsl\\(${Qx},${tc},${tc}\\)$`),T4e=new RegExp(`^hsla\\(${Qx},${tc},${tc},${Qx}\\)$`),C5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ZR(hb,Xx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:A5,formatHex:A5,formatHex8:P4e,formatHsl:O4e,formatRgb:E5,toString:E5});function A5(){return this.rgb().formatHex()}function P4e(){return this.rgb().formatHex8()}function O4e(){return EQ(this).formatHsl()}function E5(){return this.rgb().formatRgb()}function Xx(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=S4e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?T5(t):n===3?new yi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=N4e.exec(e))?new yi(t[1],t[2],t[3],1):(t=k4e.exec(e))?new yi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=C4e.exec(e))?Xw(t[1],t[2],t[3],t[4]):(t=A4e.exec(e))?Xw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=E4e.exec(e))?I5(t[1],t[2]/100,t[3]/100,1):(t=T4e.exec(e))?I5(t[1],t[2]/100,t[3]/100,t[4]):C5.hasOwnProperty(e)?T5(C5[e]):e==="transparent"?new yi(NaN,NaN,NaN,0):null}function T5(e){return new yi(e>>16&255,e>>8&255,e&255,1)}function Xw(e,t,n,r){return r<=0&&(e=t=n=NaN),new yi(e,t,n,r)}function I4e(e){return e instanceof hb||(e=Xx(e)),e?(e=e.rgb(),new yi(e.r,e.g,e.b,e.opacity)):new yi}function DP(e,t,n,r){return arguments.length===1?I4e(e):new yi(e,t,n,r??1)}function yi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ZR(yi,DP,AQ(hb,{brighter(e){return e=e==null?qj:Math.pow(qj,e),new yi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yx:Math.pow(Yx,e),new yi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yi(cf(this.r),cf(this.g),cf(this.b),Kj(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P5,formatHex:P5,formatHex8:R4e,formatRgb:O5,toString:O5}));function P5(){return`#${Yh(this.r)}${Yh(this.g)}${Yh(this.b)}`}function R4e(){return`#${Yh(this.r)}${Yh(this.g)}${Yh(this.b)}${Yh((isNaN(this.opacity)?1:this.opacity)*255)}`}function O5(){const e=Kj(this.opacity);return`${e===1?"rgb(":"rgba("}${cf(this.r)}, ${cf(this.g)}, ${cf(this.b)}${e===1?")":`, ${e})`}`}function Kj(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yh(e){return e=cf(e),(e<16?"0":"")+e.toString(16)}function I5(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ml(e,t,n,r)}function EQ(e){if(e instanceof ml)return new ml(e.h,e.s,e.l,e.opacity);if(e instanceof hb||(e=Xx(e)),!e)return new ml;if(e instanceof ml)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new ml(o,l,c,e.opacity)}function $4e(e,t,n,r){return arguments.length===1?EQ(e):new ml(e,t,n,r??1)}function ml(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ZR(ml,$4e,AQ(hb,{brighter(e){return e=e==null?qj:Math.pow(qj,e),new ml(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yx:Math.pow(Yx,e),new ml(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new yi(UA(e>=240?e-240:e+120,a,r),UA(e,a,r),UA(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new ml(R5(this.h),Jw(this.s),Jw(this.l),Kj(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kj(this.opacity);return`${e===1?"hsl(":"hsla("}${R5(this.h)}, ${Jw(this.s)*100}%, ${Jw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function R5(e){return e=(e||0)%360,e<0?e+360:e}function Jw(e){return Math.max(0,Math.min(1,e||0))}function UA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const e$=e=>()=>e;function M4e(e,t){return function(n){return e+n*t}}function D4e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function L4e(e){return(e=+e)==1?TQ:function(t,n){return n-t?D4e(t,n,e):e$(isNaN(t)?n:t)}}function TQ(e,t){var n=t-e;return n?M4e(e,n):e$(isNaN(e)?t:e)}const $5=function e(t){var n=L4e(t);function r(a,i){var o=n((a=DP(a)).r,(i=DP(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),u=TQ(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return r.gamma=e,r}(1);function F4e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function B4e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function U4e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=dv(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function V4e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Gj(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function z4e(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=dv(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var LP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,VA=new RegExp(LP.source,"g");function H4e(e){return function(){return e}}function W4e(e){return function(t){return e(t)+""}}function q4e(e,t){var n=LP.lastIndex=VA.lastIndex=0,r,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=LP.exec(e))&&(a=VA.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Gj(r,a)})),n=VA.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?W4e(c[0].x):H4e(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function dv(e,t){var n=typeof t,r;return t==null||n==="boolean"?e$(t):(n==="number"?Gj:n==="string"?(r=Xx(t))?(t=r,$5):q4e:t instanceof Xx?$5:t instanceof Date?V4e:B4e(t)?F4e:Array.isArray(t)?U4e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?z4e:Gj)(e,t)}function t$(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function K4e(e,t){t===void 0&&(t=e,e=dv);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function G4e(e){return function(){return e}}function Yj(e){return+e}var M5=[0,1];function Ys(e){return e}function FP(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:G4e(isNaN(t)?NaN:.5)}function Y4e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Q4e(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=FP(a,r),i=n(o,i)):(r=FP(r,a),i=n(i,o)),function(l){return i(r(l))}}function X4e(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=FP(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=db(e,l,1,r)-1;return i[c](a[c](l))}}function fb(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xN(){var e=M5,t=M5,n=dv,r,a,i,o=Ys,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==Ys&&(o=Y4e(e[0],e[m-1])),l=m>2?X4e:Q4e,c=u=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(r),t,n)))(r(o(m)))}return h.invert=function(m){return o(a((u||(u=l(t,e.map(r),Gj)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,Yj),d()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),n=t$,d()},h.clamp=function(m){return arguments.length?(o=m?!0:Ys,d()):o!==Ys},h.interpolate=function(m){return arguments.length?(n=m,d()):n},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,p){return r=m,a=p,d()}}function n$(){return xN()(Ys,Ys)}function J4e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qj(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function cg(e){return e=Qj(Math.abs(e)),e?e[1]:NaN}function Z4e(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function eFe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var tFe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jx(e){if(!(t=tFe.exec(e)))throw new Error("invalid format: "+e);var t;return new r$({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jx.prototype=r$.prototype;function r$(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}r$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nFe(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var PQ;function rFe(e,t){var n=Qj(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(PQ=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Qj(e,Math.max(0,t+i-1))[0]}function D5(e,t){var n=Qj(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const L5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:J4e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>D5(e*100,t),r:D5,s:rFe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function F5(e){return e}var B5=Array.prototype.map,U5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aFe(e){var t=e.grouping===void 0||e.thousands===void 0?F5:Z4e(B5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?F5:eFe(B5.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Jx(h);var m=h.fill,p=h.align,v=h.sign,x=h.symbol,b=h.zero,_=h.width,j=h.comma,w=h.precision,N=h.trim,k=h.type;k==="n"?(j=!0,k="g"):L5[k]||(w===void 0&&(w=12),N=!0,k="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var C=x==="$"?n:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",A=x==="$"?r:/[%p]/.test(k)?o:"",P=L5[k],O=/[defgprs%]/.test(k);w=w===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T($){var L=C,z=A,W,B,G;if(k==="c")z=P($)+z,$="";else{$=+$;var U=$<0||1/$<0;if($=isNaN($)?c:P(Math.abs($),w),N&&($=nFe($)),U&&+$==0&&v!=="+"&&(U=!1),L=(U?v==="("?v:l:v==="-"||v==="("?"":v)+L,z=(k==="s"?U5[8+PQ/3]:"")+z+(U&&v==="("?")":""),O){for(W=-1,B=$.length;++W<B;)if(G=$.charCodeAt(W),48>G||G>57){z=(G===46?a+$.slice(W+1):$.slice(W))+z,$=$.slice(0,W);break}}}j&&!b&&($=t($,1/0));var F=L.length+$.length+z.length,K=F<_?new Array(_-F+1).join(m):"";switch(j&&b&&($=t(K+$,K.length?_-z.length:1/0),K=""),p){case"<":$=L+$+z+K;break;case"=":$=L+K+$+z;break;case"^":$=K.slice(0,F=K.length>>1)+L+$+z+K.slice(F);break;default:$=K+L+$+z;break}return i($)}return T.toString=function(){return h+""},T}function d(h,m){var p=u((h=Jx(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(cg(m)/3)))*3,x=Math.pow(10,-v),b=U5[8+v/3];return function(_){return p(x*_)+b}}return{format:u,formatPrefix:d}}var Zw,a$,OQ;sFe({thousands:",",grouping:[3],currency:["$",""]});function sFe(e){return Zw=aFe(e),a$=Zw.format,OQ=Zw.formatPrefix,Zw}function iFe(e){return Math.max(0,-cg(Math.abs(e)))}function oFe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cg(t)/3)))*3-cg(Math.abs(e)))}function lFe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cg(t)-cg(e))+1}function IQ(e,t,n,r){var a=$P(e,t,n),i;switch(r=Jx(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=oFe(a,o))&&(r.precision=i),OQ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=lFe(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=iFe(a))&&(r.precision=i-(r.type==="%")*2);break}}return a$(r)}function Qd(e){var t=e.domain;return e.ticks=function(n){var r=t();return IP(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return IQ(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],l=r[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=RP(o,l,n),u===c)return r[a]=o,r[i]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Xj(){var e=n$();return e.copy=function(){return fb(e,Xj())},Uo.apply(e,arguments),Qd(e)}function RQ(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Yj),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return RQ(e).unknown(t)},e=arguments.length?Array.from(e,Yj):[0,1],Qd(n)}function $Q(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function V5(e){return Math.log(e)}function z5(e){return Math.exp(e)}function cFe(e){return-Math.log(-e)}function uFe(e){return-Math.exp(-e)}function dFe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function hFe(e){return e===10?dFe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function fFe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function H5(e){return(t,n)=>-e(-t,n)}function s$(e){const t=e(V5,z5),n=t.domain;let r=10,a,i;function o(){return a=fFe(r),i=hFe(r),n()[0]<0?(a=H5(a),i=H5(i),e(cFe,uFe)):e(V5,z5),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let m=a(u),p=a(d),v,x;const b=l==null?10:+l;let _=[];if(!(r%1)&&p-m<b){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(v=1;v<r;++v)if(x=m<0?v/i(-m):v*i(m),!(x<u)){if(x>d)break;_.push(x)}}else for(;m<=p;++m)for(v=r-1;v>=1;--v)if(x=m>0?v/i(-m):v*i(m),!(x<u)){if(x>d)break;_.push(x)}_.length*2<b&&(_=IP(u,d,b))}else _=IP(m,p,Math.min(p-m,b)).map(i);return h?_.reverse():_},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Jx(c)).precision==null&&(c.trim=!0),c=a$(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let h=d/i(Math.round(a(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},t.nice=()=>n($Q(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function MQ(){const e=s$(xN()).domain([1,10]);return e.copy=()=>fb(e,MQ()).base(e.base()),Uo.apply(e,arguments),e}function W5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function q5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function i$(e){var t=1,n=e(W5(t),q5(t));return n.constant=function(r){return arguments.length?e(W5(t=+r),q5(t)):t},Qd(n)}function DQ(){var e=i$(xN());return e.copy=function(){return fb(e,DQ()).constant(e.constant())},Uo.apply(e,arguments)}function K5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function mFe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pFe(e){return e<0?-e*e:e*e}function o$(e){var t=e(Ys,Ys),n=1;function r(){return n===1?e(Ys,Ys):n===.5?e(mFe,pFe):e(K5(n),K5(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Qd(t)}function l$(){var e=o$(xN());return e.copy=function(){return fb(e,l$()).exponent(e.exponent())},Uo.apply(e,arguments),e}function gFe(){return l$.apply(null,arguments).exponent(.5)}function G5(e){return Math.sign(e)*e*e}function vFe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function LQ(){var e=n$(),t=[0,1],n=!1,r;function a(i){var o=vFe(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(G5(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Yj)).map(G5)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return LQ(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Uo.apply(a,arguments),Qd(a)}function FQ(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=_4e(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:t[db(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Sd),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return FQ().domain(e).range(t).unknown(r)},Uo.apply(i,arguments)}function BQ(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[db(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return BQ().domain([e,t]).range(a).unknown(i)},Uo.apply(Qd(o),arguments)}function UQ(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[db(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return UQ().domain(e).range(t).unknown(n)},Uo.apply(a,arguments)}const zA=new Date,HA=new Date;function Ba(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>Ba(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(zA.setTime(+i),HA.setTime(+o),e(zA),e(HA),Math.floor(n(zA,HA))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Jj=Ba(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Jj.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ba(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Jj);Jj.range;const Vc=1e3,Ao=Vc*60,zc=Ao*60,su=zc*24,c$=su*7,Y5=su*30,WA=su*365,Qh=Ba(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Vc)},(e,t)=>(t-e)/Vc,e=>e.getUTCSeconds());Qh.range;const u$=Ba(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vc)},(e,t)=>{e.setTime(+e+t*Ao)},(e,t)=>(t-e)/Ao,e=>e.getMinutes());u$.range;const d$=Ba(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ao)},(e,t)=>(t-e)/Ao,e=>e.getUTCMinutes());d$.range;const h$=Ba(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vc-e.getMinutes()*Ao)},(e,t)=>{e.setTime(+e+t*zc)},(e,t)=>(t-e)/zc,e=>e.getHours());h$.range;const f$=Ba(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*zc)},(e,t)=>(t-e)/zc,e=>e.getUTCHours());f$.range;const mb=Ba(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ao)/su,e=>e.getDate()-1);mb.range;const bN=Ba(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/su,e=>e.getUTCDate()-1);bN.range;const VQ=Ba(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/su,e=>Math.floor(e/su));VQ.range;function Yf(e){return Ba(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ao)/c$)}const wN=Yf(0),Zj=Yf(1),yFe=Yf(2),xFe=Yf(3),ug=Yf(4),bFe=Yf(5),wFe=Yf(6);wN.range;Zj.range;yFe.range;xFe.range;ug.range;bFe.range;wFe.range;function Qf(e){return Ba(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/c$)}const _N=Qf(0),e1=Qf(1),_Fe=Qf(2),jFe=Qf(3),dg=Qf(4),SFe=Qf(5),NFe=Qf(6);_N.range;e1.range;_Fe.range;jFe.range;dg.range;SFe.range;NFe.range;const m$=Ba(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());m$.range;const p$=Ba(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());p$.range;const iu=Ba(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());iu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ba(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});iu.range;const ou=Ba(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ou.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ba(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ou.range;function zQ(e,t,n,r,a,i){const o=[[Qh,1,Vc],[Qh,5,5*Vc],[Qh,15,15*Vc],[Qh,30,30*Vc],[i,1,Ao],[i,5,5*Ao],[i,15,15*Ao],[i,30,30*Ao],[a,1,zc],[a,3,3*zc],[a,6,6*zc],[a,12,12*zc],[r,1,su],[r,2,2*su],[n,1,c$],[t,1,Y5],[t,3,3*Y5],[e,1,WA]];function l(u,d,h){const m=d<u;m&&([u,d]=[d,u]);const p=h&&typeof h.range=="function"?h:c(u,d,h),v=p?p.range(u,+d+1):[];return m?v.reverse():v}function c(u,d,h){const m=Math.abs(d-u)/h,p=XR(([,,b])=>b).right(o,m);if(p===o.length)return e.every($P(u/WA,d/WA,h));if(p===0)return Jj.every(Math.max($P(u,d,h),1));const[v,x]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return v.every(x)}return[l,c]}const[kFe,CFe]=zQ(ou,p$,_N,VQ,f$,d$),[AFe,EFe]=zQ(iu,m$,wN,mb,h$,u$);function qA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function KA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function gy(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function TFe(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=vy(a),d=yy(a),h=vy(i),m=yy(i),p=vy(o),v=yy(o),x=vy(l),b=yy(l),_=vy(c),j=yy(c),w={a:U,A:F,b:K,B:X,c:null,d:tB,e:tB,f:ZFe,g:c3e,G:d3e,H:QFe,I:XFe,j:JFe,L:HQ,m:e3e,M:t3e,p:se,q:D,Q:aB,s:sB,S:n3e,u:r3e,U:a3e,V:s3e,w:i3e,W:o3e,x:null,X:null,y:l3e,Y:u3e,Z:h3e,"%":rB},N={a:Y,A:ue,b:xe,B:Ne,c:null,d:nB,e:nB,f:g3e,g:k3e,G:A3e,H:f3e,I:m3e,j:p3e,L:qQ,m:v3e,M:y3e,p:oe,q:ee,Q:aB,s:sB,S:x3e,u:b3e,U:w3e,V:_3e,w:j3e,W:S3e,x:null,X:null,y:N3e,Y:C3e,Z:E3e,"%":rB},k={a:T,A:$,b:L,B:z,c:W,d:Z5,e:Z5,f:qFe,g:J5,G:X5,H:eB,I:eB,j:VFe,L:WFe,m:UFe,M:zFe,p:O,q:BFe,Q:GFe,s:YFe,S:HFe,u:$Fe,U:MFe,V:DFe,w:RFe,W:LFe,x:B,X:G,y:J5,Y:X5,Z:FFe,"%":KFe};w.x=C(n,w),w.X=C(r,w),w.c=C(t,w),N.x=C(n,N),N.X=C(r,N),N.c=C(t,N);function C(re,Z){return function(ce){var ae=[],Ue=-1,Ve=0,ut=re.length,Rt,mt,rn;for(ce instanceof Date||(ce=new Date(+ce));++Ue<ut;)re.charCodeAt(Ue)===37&&(ae.push(re.slice(Ve,Ue)),(mt=Q5[Rt=re.charAt(++Ue)])!=null?Rt=re.charAt(++Ue):mt=Rt==="e"?" ":"0",(rn=Z[Rt])&&(Rt=rn(ce,mt)),ae.push(Rt),Ve=Ue+1);return ae.push(re.slice(Ve,Ue)),ae.join("")}}function A(re,Z){return function(ce){var ae=gy(1900,void 0,1),Ue=P(ae,re,ce+="",0),Ve,ut;if(Ue!=ce.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(Z&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(Ve=KA(gy(ae.y,0,1)),ut=Ve.getUTCDay(),Ve=ut>4||ut===0?e1.ceil(Ve):e1(Ve),Ve=bN.offset(Ve,(ae.V-1)*7),ae.y=Ve.getUTCFullYear(),ae.m=Ve.getUTCMonth(),ae.d=Ve.getUTCDate()+(ae.w+6)%7):(Ve=qA(gy(ae.y,0,1)),ut=Ve.getDay(),Ve=ut>4||ut===0?Zj.ceil(Ve):Zj(Ve),Ve=mb.offset(Ve,(ae.V-1)*7),ae.y=Ve.getFullYear(),ae.m=Ve.getMonth(),ae.d=Ve.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),ut="Z"in ae?KA(gy(ae.y,0,1)).getUTCDay():qA(gy(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(ut+5)%7:ae.w+ae.U*7-(ut+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,KA(ae)):qA(ae)}}function P(re,Z,ce,ae){for(var Ue=0,Ve=Z.length,ut=ce.length,Rt,mt;Ue<Ve;){if(ae>=ut)return-1;if(Rt=Z.charCodeAt(Ue++),Rt===37){if(Rt=Z.charAt(Ue++),mt=k[Rt in Q5?Z.charAt(Ue++):Rt],!mt||(ae=mt(re,ce,ae))<0)return-1}else if(Rt!=ce.charCodeAt(ae++))return-1}return ae}function O(re,Z,ce){var ae=u.exec(Z.slice(ce));return ae?(re.p=d.get(ae[0].toLowerCase()),ce+ae[0].length):-1}function T(re,Z,ce){var ae=p.exec(Z.slice(ce));return ae?(re.w=v.get(ae[0].toLowerCase()),ce+ae[0].length):-1}function $(re,Z,ce){var ae=h.exec(Z.slice(ce));return ae?(re.w=m.get(ae[0].toLowerCase()),ce+ae[0].length):-1}function L(re,Z,ce){var ae=_.exec(Z.slice(ce));return ae?(re.m=j.get(ae[0].toLowerCase()),ce+ae[0].length):-1}function z(re,Z,ce){var ae=x.exec(Z.slice(ce));return ae?(re.m=b.get(ae[0].toLowerCase()),ce+ae[0].length):-1}function W(re,Z,ce){return P(re,t,Z,ce)}function B(re,Z,ce){return P(re,n,Z,ce)}function G(re,Z,ce){return P(re,r,Z,ce)}function U(re){return o[re.getDay()]}function F(re){return i[re.getDay()]}function K(re){return c[re.getMonth()]}function X(re){return l[re.getMonth()]}function se(re){return a[+(re.getHours()>=12)]}function D(re){return 1+~~(re.getMonth()/3)}function Y(re){return o[re.getUTCDay()]}function ue(re){return i[re.getUTCDay()]}function xe(re){return c[re.getUTCMonth()]}function Ne(re){return l[re.getUTCMonth()]}function oe(re){return a[+(re.getUTCHours()>=12)]}function ee(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var Z=C(re+="",w);return Z.toString=function(){return re},Z},parse:function(re){var Z=A(re+="",!1);return Z.toString=function(){return re},Z},utcFormat:function(re){var Z=C(re+="",N);return Z.toString=function(){return re},Z},utcParse:function(re){var Z=A(re+="",!0);return Z.toString=function(){return re},Z}}}var Q5={"-":"",_:" ",0:"0"},Xa=/^\s*\d+/,PFe=/^%/,OFe=/[\\^$*+?|[\]().{}]/g;function Yn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function IFe(e){return e.replace(OFe,"\\$&")}function vy(e){return new RegExp("^(?:"+e.map(IFe).join("|")+")","i")}function yy(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function RFe(e,t,n){var r=Xa.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function $Fe(e,t,n){var r=Xa.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function MFe(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function DFe(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function LFe(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function X5(e,t,n){var r=Xa.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function J5(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function FFe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function BFe(e,t,n){var r=Xa.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function UFe(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Z5(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function VFe(e,t,n){var r=Xa.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function eB(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function zFe(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function HFe(e,t,n){var r=Xa.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function WFe(e,t,n){var r=Xa.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function qFe(e,t,n){var r=Xa.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function KFe(e,t,n){var r=PFe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function GFe(e,t,n){var r=Xa.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function YFe(e,t,n){var r=Xa.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function tB(e,t){return Yn(e.getDate(),t,2)}function QFe(e,t){return Yn(e.getHours(),t,2)}function XFe(e,t){return Yn(e.getHours()%12||12,t,2)}function JFe(e,t){return Yn(1+mb.count(iu(e),e),t,3)}function HQ(e,t){return Yn(e.getMilliseconds(),t,3)}function ZFe(e,t){return HQ(e,t)+"000"}function e3e(e,t){return Yn(e.getMonth()+1,t,2)}function t3e(e,t){return Yn(e.getMinutes(),t,2)}function n3e(e,t){return Yn(e.getSeconds(),t,2)}function r3e(e){var t=e.getDay();return t===0?7:t}function a3e(e,t){return Yn(wN.count(iu(e)-1,e),t,2)}function WQ(e){var t=e.getDay();return t>=4||t===0?ug(e):ug.ceil(e)}function s3e(e,t){return e=WQ(e),Yn(ug.count(iu(e),e)+(iu(e).getDay()===4),t,2)}function i3e(e){return e.getDay()}function o3e(e,t){return Yn(Zj.count(iu(e)-1,e),t,2)}function l3e(e,t){return Yn(e.getFullYear()%100,t,2)}function c3e(e,t){return e=WQ(e),Yn(e.getFullYear()%100,t,2)}function u3e(e,t){return Yn(e.getFullYear()%1e4,t,4)}function d3e(e,t){var n=e.getDay();return e=n>=4||n===0?ug(e):ug.ceil(e),Yn(e.getFullYear()%1e4,t,4)}function h3e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yn(t/60|0,"0",2)+Yn(t%60,"0",2)}function nB(e,t){return Yn(e.getUTCDate(),t,2)}function f3e(e,t){return Yn(e.getUTCHours(),t,2)}function m3e(e,t){return Yn(e.getUTCHours()%12||12,t,2)}function p3e(e,t){return Yn(1+bN.count(ou(e),e),t,3)}function qQ(e,t){return Yn(e.getUTCMilliseconds(),t,3)}function g3e(e,t){return qQ(e,t)+"000"}function v3e(e,t){return Yn(e.getUTCMonth()+1,t,2)}function y3e(e,t){return Yn(e.getUTCMinutes(),t,2)}function x3e(e,t){return Yn(e.getUTCSeconds(),t,2)}function b3e(e){var t=e.getUTCDay();return t===0?7:t}function w3e(e,t){return Yn(_N.count(ou(e)-1,e),t,2)}function KQ(e){var t=e.getUTCDay();return t>=4||t===0?dg(e):dg.ceil(e)}function _3e(e,t){return e=KQ(e),Yn(dg.count(ou(e),e)+(ou(e).getUTCDay()===4),t,2)}function j3e(e){return e.getUTCDay()}function S3e(e,t){return Yn(e1.count(ou(e)-1,e),t,2)}function N3e(e,t){return Yn(e.getUTCFullYear()%100,t,2)}function k3e(e,t){return e=KQ(e),Yn(e.getUTCFullYear()%100,t,2)}function C3e(e,t){return Yn(e.getUTCFullYear()%1e4,t,4)}function A3e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?dg(e):dg.ceil(e),Yn(e.getUTCFullYear()%1e4,t,4)}function E3e(){return"+0000"}function rB(){return"%"}function aB(e){return+e}function sB(e){return Math.floor(+e/1e3)}var $m,GQ,YQ;T3e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function T3e(e){return $m=TFe(e),GQ=$m.format,$m.parse,YQ=$m.utcFormat,$m.utcParse,$m}function P3e(e){return new Date(e)}function O3e(e){return e instanceof Date?+e:+new Date(+e)}function g$(e,t,n,r,a,i,o,l,c,u){var d=n$(),h=d.invert,m=d.domain,p=u(".%L"),v=u(":%S"),x=u("%I:%M"),b=u("%I %p"),_=u("%a %d"),j=u("%b %d"),w=u("%B"),N=u("%Y");function k(C){return(c(C)<C?p:l(C)<C?v:o(C)<C?x:i(C)<C?b:r(C)<C?a(C)<C?_:j:n(C)<C?w:N)(C)}return d.invert=function(C){return new Date(h(C))},d.domain=function(C){return arguments.length?m(Array.from(C,O3e)):m().map(P3e)},d.ticks=function(C){var A=m();return e(A[0],A[A.length-1],C??10)},d.tickFormat=function(C,A){return A==null?k:u(A)},d.nice=function(C){var A=m();return(!C||typeof C.range!="function")&&(C=t(A[0],A[A.length-1],C??10)),C?m($Q(A,C)):d},d.copy=function(){return fb(d,g$(e,t,n,r,a,i,o,l,c,u))},d}function I3e(){return Uo.apply(g$(AFe,EFe,iu,m$,wN,mb,h$,u$,Qh,GQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function R3e(){return Uo.apply(g$(kFe,CFe,ou,p$,_N,bN,f$,d$,Qh,YQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function jN(){var e=0,t=1,n,r,a,i,o=Ys,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-n)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(m){var p,v;return arguments.length?([p,v]=m,o=h(p,v),u):[o(0),o(1)]}}return u.range=d(dv),u.rangeRound=d(t$),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,n=h(e),r=h(t),a=n===r?0:1/(r-n),u}}function Xd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function QQ(){var e=Qd(jN()(Ys));return e.copy=function(){return Xd(e,QQ())},gu.apply(e,arguments)}function XQ(){var e=s$(jN()).domain([1,10]);return e.copy=function(){return Xd(e,XQ()).base(e.base())},gu.apply(e,arguments)}function JQ(){var e=i$(jN());return e.copy=function(){return Xd(e,JQ()).constant(e.constant())},gu.apply(e,arguments)}function v$(){var e=o$(jN());return e.copy=function(){return Xd(e,v$()).exponent(e.exponent())},gu.apply(e,arguments)}function $3e(){return v$.apply(null,arguments).exponent(.5)}function ZQ(){var e=[],t=Ys;function n(r){if(r!=null&&!isNaN(r=+r))return t((db(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Sd),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>w4e(e,i/r))},n.copy=function(){return ZQ(t).domain(e)},gu.apply(n,arguments)}function SN(){var e=0,t=.5,n=1,r=1,a,i,o,l,c,u=Ys,d,h=!1,m;function p(x){return isNaN(x=+x)?m:(x=.5+((x=+d(x))-i)*(r*x<r*i?l:c),u(h?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([e,t,n]=x,a=d(e=+e),i=d(t=+t),o=d(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,p):[e,t,n]},p.clamp=function(x){return arguments.length?(h=!!x,p):h},p.interpolator=function(x){return arguments.length?(u=x,p):u};function v(x){return function(b){var _,j,w;return arguments.length?([_,j,w]=b,u=K4e(x,[_,j,w]),p):[u(0),u(.5),u(1)]}}return p.range=v(dv),p.rangeRound=v(t$),p.unknown=function(x){return arguments.length?(m=x,p):m},function(x){return d=x,a=x(e),i=x(t),o=x(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,p}}function eX(){var e=Qd(SN()(Ys));return e.copy=function(){return Xd(e,eX())},gu.apply(e,arguments)}function tX(){var e=s$(SN()).domain([.1,1,10]);return e.copy=function(){return Xd(e,tX()).base(e.base())},gu.apply(e,arguments)}function nX(){var e=i$(SN());return e.copy=function(){return Xd(e,nX()).constant(e.constant())},gu.apply(e,arguments)}function y$(){var e=o$(SN());return e.copy=function(){return Xd(e,y$()).exponent(e.exponent())},gu.apply(e,arguments)}function M3e(){return y$.apply(null,arguments).exponent(.5)}const iB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Gx,scaleDiverging:eX,scaleDivergingLog:tX,scaleDivergingPow:y$,scaleDivergingSqrt:M3e,scaleDivergingSymlog:nX,scaleIdentity:RQ,scaleImplicit:MP,scaleLinear:Xj,scaleLog:MQ,scaleOrdinal:JR,scalePoint:Qy,scalePow:l$,scaleQuantile:FQ,scaleQuantize:BQ,scaleRadial:LQ,scaleSequential:QQ,scaleSequentialLog:XQ,scaleSequentialPow:v$,scaleSequentialQuantile:ZQ,scaleSequentialSqrt:$3e,scaleSequentialSymlog:JQ,scaleSqrt:gFe,scaleSymlog:DQ,scaleThreshold:UQ,scaleTime:I3e,scaleUtc:R3e,tickFormat:IQ},Symbol.toStringTag,{value:"Module"}));var D3e=nv;function L3e(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],o=t(i);if(o!=null&&(l===void 0?o===o&&!D3e(o):n(o,l)))var l=o,c=i}return c}var NN=L3e;function F3e(e,t){return e>t}var rX=F3e,B3e=NN,U3e=rX,V3e=uv;function z3e(e){return e&&e.length?B3e(e,V3e,U3e):void 0}var H3e=z3e;const ud=Zn(H3e);function W3e(e,t){return e<t}var aX=W3e,q3e=NN,K3e=aX,G3e=uv;function Y3e(e){return e&&e.length?q3e(e,G3e,K3e):void 0}var Q3e=Y3e;const kN=Zn(Q3e);var X3e=OR,J3e=dc,Z3e=hQ,e5e=ki;function t5e(e,t){var n=e5e(e)?X3e:Z3e;return n(e,J3e(t))}var n5e=t5e,r5e=uQ,a5e=n5e;function s5e(e,t){return r5e(a5e(e,t),1)}var i5e=s5e;const o5e=Zn(i5e);var l5e=KR;function c5e(e,t){return l5e(e,t)}var u5e=c5e;const $d=Zn(u5e);var hv=1e9,d5e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},b$,Dr=!0,Mo="[DecimalError] ",uf=Mo+"Invalid argument: ",x$=Mo+"Exponent out of range: ",fv=Math.floor,Mh=Math.pow,h5e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wi,za=1e7,Or=7,sX=9007199254740991,t1=fv(sX/Or),jt={};jt.absoluteValue=jt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};jt.comparedTo=jt.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};jt.decimalPlaces=jt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Or;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};jt.dividedBy=jt.div=function(e){return Gc(this,new this.constructor(e))};jt.dividedToIntegerBy=jt.idiv=function(e){var t=this,n=t.constructor;return xr(Gc(t,new n(e),0,1),n.precision)};jt.equals=jt.eq=function(e){return!this.cmp(e)};jt.exponent=function(){return ka(this)};jt.greaterThan=jt.gt=function(e){return this.cmp(e)>0};jt.greaterThanOrEqualTo=jt.gte=function(e){return this.cmp(e)>=0};jt.isInteger=jt.isint=function(){return this.e>this.d.length-2};jt.isNegative=jt.isneg=function(){return this.s<0};jt.isPositive=jt.ispos=function(){return this.s>0};jt.isZero=function(){return this.s===0};jt.lessThan=jt.lt=function(e){return this.cmp(e)<0};jt.lessThanOrEqualTo=jt.lte=function(e){return this.cmp(e)<1};jt.logarithm=jt.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Wi))throw Error(Mo+"NaN");if(n.s<1)throw Error(Mo+(n.s?"NaN":"-Infinity"));return n.eq(Wi)?new r(0):(Dr=!1,t=Gc(Zx(n,i),Zx(e,i),i),Dr=!0,xr(t,a))};jt.minus=jt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lX(t,e):iX(t,(e.s=-e.s,e))};jt.modulo=jt.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(Mo+"NaN");return n.s?(Dr=!1,t=Gc(n,e,0,1).times(e),Dr=!0,n.minus(t)):xr(new r(n),a)};jt.naturalExponential=jt.exp=function(){return oX(this)};jt.naturalLogarithm=jt.ln=function(){return Zx(this)};jt.negated=jt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};jt.plus=jt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?iX(t,e):lX(t,(e.s=-e.s,e))};jt.precision=jt.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(uf+e);if(t=ka(a)+1,r=a.d.length-1,n=r*Or+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};jt.squareRoot=jt.sqrt=function(){var e,t,n,r,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Mo+"NaN")}for(e=ka(l),Dr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Gl(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=fv((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=r,r=i.plus(Gc(l,i,o+2)).times(.5),Gl(i.d).slice(0,o)===(t=Gl(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(xr(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(t!="9999")break;o+=4}return Dr=!0,xr(r,n)};jt.times=jt.mul=function(e){var t,n,r,a,i,o,l,c,u,d=this,h=d.constructor,m=d.d,p=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,c=m.length,u=p.length,c<u&&(i=m,m=p,p=i,o=c,c=u,u=o),i=[],o=c+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=i[a]+p[r]*m[a-r-1]+t,i[a--]=l%za|0,t=l/za|0;i[a]=(i[a]+t)%za|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Dr?xr(e,h.precision):e};jt.toDecimalPlaces=jt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(oc(e,0,hv),t===void 0?t=r.rounding:oc(t,0,8),xr(n,e+ka(n)+1,t))};jt.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=If(r,!0):(oc(e,0,hv),t===void 0?t=a.rounding:oc(t,0,8),r=xr(new a(r),e+1,t),n=If(r,!0,e+1)),n};jt.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?If(a):(oc(e,0,hv),t===void 0?t=i.rounding:oc(t,0,8),r=xr(new i(a),e+ka(a)+1,t),n=If(r.abs(),!1,e+ka(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};jt.toInteger=jt.toint=function(){var e=this,t=e.constructor;return xr(new t(e),ka(e)+1,t.rounding)};jt.toNumber=function(){return+this};jt.toPower=jt.pow=function(e){var t,n,r,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Wi);if(l=new c(l),!l.s){if(e.s<1)throw Error(Mo+"Infinity");return l}if(l.eq(Wi))return l;if(r=c.precision,e.eq(Wi))return xr(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=d<0?-d:d)<=sX){for(a=new c(Wi),t=Math.ceil(r/Or+4),Dr=!1;n%2&&(a=a.times(l),lB(a.d,t)),n=fv(n/2),n!==0;)l=l.times(l),lB(l.d,t);return Dr=!0,e.s<0?new c(Wi).div(a):xr(a,r)}}else if(i<0)throw Error(Mo+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Dr=!1,a=e.times(Zx(l,r+u)),Dr=!0,a=oX(a),a.s=i,a};jt.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=ka(a),r=If(a,n<=i.toExpNeg||n>=i.toExpPos)):(oc(e,1,hv),t===void 0?t=i.rounding:oc(t,0,8),a=xr(new i(a),e,t),n=ka(a),r=If(a,e<=n||n<=i.toExpNeg,e)),r};jt.toSignificantDigits=jt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(oc(e,1,hv),t===void 0?t=r.rounding:oc(t,0,8)),xr(new r(n),e,t)};jt.toString=jt.valueOf=jt.val=jt.toJSON=jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ka(e),n=e.constructor;return If(e,t<=n.toExpNeg||t>=n.toExpPos)};function iX(e,t){var n,r,a,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Dr?xr(t,h):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(h/Or),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/za|0,c[i]%=za;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Dr?xr(t,h):t}function oc(e,t,n){if(e!==~~e||e<t||e>n)throw Error(uf+e)}function Gl(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=Or-r.length,n&&(i+=Ku(n)),i+=r;o=e[t],r=o+"",n=Or-r.length,n&&(i+=Ku(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Gc=function(){function e(r,a){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*a+o,r[l]=i%za|0,o=i/za|0;return o&&r.unshift(o),r}function t(r,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*za+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var l,c,u,d,h,m,p,v,x,b,_,j,w,N,k,C,A,P,O=r.constructor,T=r.s==a.s?1:-1,$=r.d,L=a.d;if(!r.s)return new O(r);if(!a.s)throw Error(Mo+"Division by zero");for(c=r.e-a.e,A=L.length,k=$.length,p=new O(T),v=p.d=[],u=0;L[u]==($[u]||0);)++u;if(L[u]>($[u]||0)&&--c,i==null?j=i=O.precision:o?j=i+(ka(r)-ka(a))+1:j=i,j<0)return new O(0);if(j=j/Or+2|0,u=0,A==1)for(d=0,L=L[0],j++;(u<k||d)&&j--;u++)w=d*za+($[u]||0),v[u]=w/L|0,d=w%L|0;else{for(d=za/(L[0]+1)|0,d>1&&(L=e(L,d),$=e($,d),A=L.length,k=$.length),N=A,x=$.slice(0,A),b=x.length;b<A;)x[b++]=0;P=L.slice(),P.unshift(0),C=L[0],L[1]>=za/2&&++C;do d=0,l=t(L,x,A,b),l<0?(_=x[0],A!=b&&(_=_*za+(x[1]||0)),d=_/C|0,d>1?(d>=za&&(d=za-1),h=e(L,d),m=h.length,b=x.length,l=t(h,x,m,b),l==1&&(d--,n(h,A<m?P:L,m))):(d==0&&(l=d=1),h=L.slice()),m=h.length,m<b&&h.unshift(0),n(x,h,b),l==-1&&(b=x.length,l=t(L,x,A,b),l<1&&(d++,n(x,A<b?P:L,b))),b=x.length):l===0&&(d++,x=[0]),v[u++]=d,l&&x[0]?x[b++]=$[N]||0:(x=[$[N]],b=1);while((N++<k||x[0]!==void 0)&&j--)}return v[0]||v.shift(),p.e=c,xr(p,o?i+ka(p)+1:i)}}();function oX(e,t){var n,r,a,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(ka(e)>16)throw Error(x$+ka(e));if(!e.s)return new d(Wi);for(t==null?(Dr=!1,l=h):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(Mh(2,u))/Math.LN10*2+5|0,l+=r,n=a=i=new d(Wi),d.precision=l;;){if(a=xr(a.times(e),l),n=n.times(++c),o=i.plus(Gc(a,n,l)),Gl(o.d).slice(0,l)===Gl(i.d).slice(0,l)){for(;u--;)i=xr(i.times(i),l);return d.precision=h,t==null?(Dr=!0,xr(i,h)):i}i=o}}function ka(e){for(var t=e.e*Or,n=e.d[0];n>=10;n/=10)t++;return t}function GA(e,t,n){if(t>e.LN10.sd())throw Dr=!0,n&&(e.precision=n),Error(Mo+"LN10 precision limit exceeded");return xr(new e(e.LN10),t)}function Ku(e){for(var t="";e--;)t+="0";return t}function Zx(e,t){var n,r,a,i,o,l,c,u,d,h=1,m=10,p=e,v=p.d,x=p.constructor,b=x.precision;if(p.s<1)throw Error(Mo+(p.s?"NaN":"-Infinity"));if(p.eq(Wi))return new x(0);if(t==null?(Dr=!1,u=b):u=t,p.eq(10))return t==null&&(Dr=!0),GA(x,u);if(u+=m,x.precision=u,n=Gl(v),r=n.charAt(0),i=ka(p),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Gl(p.d),r=n.charAt(0),h++;i=ka(p),r>1?(p=new x("0."+n),i++):p=new x(r+"."+n.slice(1))}else return c=GA(x,u+2,b).times(i+""),p=Zx(new x(r+"."+n.slice(1)),u-m).plus(c),x.precision=b,t==null?(Dr=!0,xr(p,b)):p;for(l=o=p=Gc(p.minus(Wi),p.plus(Wi),u),d=xr(p.times(p),u),a=3;;){if(o=xr(o.times(d),u),c=l.plus(Gc(o,new x(a),u)),Gl(c.d).slice(0,u)===Gl(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(GA(x,u+2,b).times(i+""))),l=Gc(l,new x(h),u),x.precision=b,t==null?(Dr=!0,xr(l,b)):l;l=c,a+=2}}function oB(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=fv(n/Or),e.d=[],r=(n+1)%Or,n<0&&(r+=Or),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Or;r<a;)e.d.push(+t.slice(r,r+=Or));t=t.slice(r),r=Or-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Dr&&(e.e>t1||e.e<-t1))throw Error(x$+n)}else e.s=0,e.e=0,e.d=[0];return e}function xr(e,t,n){var r,a,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=Or,a=t,u=h[d=0];else{if(d=Math.ceil((r+1)/Or),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;r%=Or,a=r-Or+o}if(n!==void 0&&(i=Mh(10,o-a-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/Mh(10,o-a):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=ka(e),h.length=1,t=t-i-1,h[0]=Mh(10,(Or-t%Or)%Or),e.e=fv(-t/Or)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=d,i=1,d--):(h.length=d+1,i=Mh(10,Or-r),h[d]=a>0?(u/Mh(10,o-a)%Mh(10,a)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==za&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=za)break;h[d--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(Dr&&(e.e>t1||e.e<-t1))throw Error(x$+ka(e));return e}function lX(e,t){var n,r,a,i,o,l,c,u,d,h,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Dr?xr(t,p):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),a=Math.max(Math.ceil(p/Or),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=za-1;--c[i],c[a]+=za}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Dr?xr(t,p):t):new m(0)}function If(e,t,n){var r,a=ka(e),i=Gl(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ku(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Ku(-a-1)+i,n&&(r=n-o)>0&&(i+=Ku(r))):a>=o?(i+=Ku(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+Ku(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=Ku(r))),e.s<0?"-"+i:i}function lB(e,t){if(e.length>t)return e.length=t,!0}function cX(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(uf+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return oB(o,i.toString())}else if(typeof i!="string")throw Error(uf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,h5e.test(i))oB(o,i);else throw Error(uf+i)}if(a.prototype=jt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=cX,a.config=a.set=f5e,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function f5e(e){if(!e||typeof e!="object")throw Error(Mo+"Object expected");var t,n,r,a=["precision",1,hv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(fv(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(uf+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(uf+n+": "+r);return this}var b$=cX(d5e);Wi=new b$(1);const ur=b$;function m5e(e){return y5e(e)||v5e(e)||g5e(e)||p5e()}function p5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g5e(e,t){if(e){if(typeof e=="string")return BP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BP(e,t)}}function v5e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function y5e(e){if(Array.isArray(e))return BP(e)}function BP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x5e=function(t){return t},uX={"@@functional/placeholder":!0},dX=function(t){return t===uX},cB=function(t){return function n(){return arguments.length===0||arguments.length===1&&dX(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},b5e=function e(t,n){return t===1?n:cB(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==uX}).length;return o>=t?n.apply(void 0,a):e(t-o,cB(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(h){return dX(h)?c.shift():h});return n.apply(void 0,m5e(d).concat(c))}))})},CN=function(t){return b5e(t.length,t)},UP=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},w5e=CN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),_5e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return x5e;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},VP=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},hX=function(t){var n=null,r=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,r=t.apply(void 0,i)),r}};function j5e(e){var t;return e===0?t=1:t=Math.floor(new ur(e).abs().log(10).toNumber())+1,t}function S5e(e,t,n){for(var r=new ur(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var N5e=CN(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),k5e=CN(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),C5e=CN(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const AN={rangeStep:S5e,getDigitCount:j5e,interpolateNumber:N5e,uninterpolateNumber:k5e,uninterpolateTruncation:C5e};function zP(e){return T5e(e)||E5e(e)||fX(e)||A5e()}function A5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function T5e(e){if(Array.isArray(e))return HP(e)}function e0(e,t){return I5e(e)||O5e(e,t)||fX(e,t)||P5e()}function P5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fX(e,t){if(e){if(typeof e=="string")return HP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HP(e,t)}}function HP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O5e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function I5e(e){if(Array.isArray(e))return e}function mX(e){var t=e0(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function pX(e,t,n){if(e.lte(0))return new ur(0);var r=AN.getDigitCount(e.toNumber()),a=new ur(10).pow(r),i=e.div(a),o=r!==1?.05:.1,l=new ur(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new ur(Math.ceil(c))}function R5e(e,t,n){var r=1,a=new ur(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new ur(10).pow(AN.getDigitCount(e)-1),a=new ur(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new ur(Math.floor(e)))}else e===0?a=new ur(Math.floor((t-1)/2)):n||(a=new ur(Math.floor(e)));var o=Math.floor((t-1)/2),l=_5e(w5e(function(c){return a.add(new ur(c-o).mul(r)).toNumber()}),UP);return l(0,t)}function gX(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new ur(0),tickMin:new ur(0),tickMax:new ur(0)};var i=pX(new ur(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new ur(0):(o=new ur(e).add(t).div(2),o=o.sub(new ur(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new ur(t).sub(o).div(i).toNumber()),u=l+c+1;return u>n?gX(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:i,tickMin:o.sub(new ur(l).mul(i)),tickMax:o.add(new ur(c).mul(i))})}function $5e(e){var t=e0(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=mX([n,r]),c=e0(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(zP(UP(0,a-1).map(function(){return 1/0}))):[].concat(zP(UP(0,a-1).map(function(){return-1/0})),[d]);return n>r?VP(h):h}if(u===d)return R5e(u,a,i);var m=gX(u,d,o,i),p=m.step,v=m.tickMin,x=m.tickMax,b=AN.rangeStep(v,x.add(new ur(.1).mul(p)),p);return n>r?VP(b):b}function M5e(e,t){var n=e0(e,2),r=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=mX([r,a]),l=e0(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var d=Math.max(t,2),h=pX(new ur(u).sub(c).div(d-1),i,0),m=[].concat(zP(AN.rangeStep(new ur(c),new ur(u).sub(new ur(.99).mul(h)),h)),[u]);return r>a?VP(m):m}var D5e=hX($5e),L5e=hX(M5e),F5e="Invariant failed";function Rf(e,t){throw new Error(F5e)}var B5e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n1.apply(this,arguments)}function U5e(e,t){return W5e(e)||H5e(e,t)||z5e(e,t)||V5e()}function V5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z5e(e,t){if(e){if(typeof e=="string")return uB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uB(e,t)}}function uB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H5e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function W5e(e){if(Array.isArray(e))return e}function q5e(e,t){if(e==null)return{};var n=K5e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function K5e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function G5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y5e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xX(r.key),r)}}function Q5e(e,t,n){return t&&Y5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function X5e(e,t,n){return t=r1(t),J5e(e,vX()?Reflect.construct(t,n||[],r1(e).constructor):t.apply(e,n))}function J5e(e,t){if(t&&(hg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z5e(e)}function Z5e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vX=function(){return!!e})()}function r1(e){return r1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r1(e)}function eBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WP(e,t)}function WP(e,t){return WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},WP(e,t)}function yX(e,t,n){return t=xX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xX(e){var t=tBe(e,"string");return hg(t)=="symbol"?t:t+""}function tBe(e,t){if(hg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pb=function(e){function t(){return G5e(this,t),X5e(this,t,arguments)}return eBe(t,e),Q5e(t,[{key:"render",value:function(){var r=this.props,a=r.offset,i=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,m=q5e(r,B5e),p=kt(m,!1);this.props.direction==="x"&&d.type!=="number"&&Rf();var v=c.map(function(x){var b=u(x,l),_=b.x,j=b.y,w=b.value,N=b.errorVal;if(!N)return null;var k=[],C,A;if(Array.isArray(N)){var P=U5e(N,2);C=P[0],A=P[1]}else C=A=N;if(i==="vertical"){var O=d.scale,T=j+a,$=T+o,L=T-o,z=O(w-C),W=O(w+A);k.push({x1:W,y1:$,x2:W,y2:L}),k.push({x1:z,y1:T,x2:W,y2:T}),k.push({x1:z,y1:$,x2:z,y2:L})}else if(i==="horizontal"){var B=h.scale,G=_+a,U=G-o,F=G+o,K=B(w-C),X=B(w+A);k.push({x1:U,y1:X,x2:F,y2:X}),k.push({x1:G,y1:K,x2:G,y2:X}),k.push({x1:U,y1:K,x2:F,y2:K})}return V.createElement(jn,n1({className:"recharts-errorBar",key:"bar-".concat(k.map(function(se){return"".concat(se.x1,"-").concat(se.x2,"-").concat(se.y1,"-").concat(se.y2)}))},p),k.map(function(se){return V.createElement("line",n1({},se,{key:"line-".concat(se.x1,"-").concat(se.x2,"-").concat(se.y1,"-").concat(se.y2)}))}))});return V.createElement(jn,{className:"recharts-errorBars"},v)}}])}(V.Component);yX(pb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});yX(pb,"displayName","ErrorBar");function t0(e){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t0(e)}function dB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dB(Object(n),!0).forEach(function(r){nBe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nBe(e,t,n){return t=rBe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rBe(e){var t=aBe(e,"string");return t0(t)=="symbol"?t:t+""}function aBe(e,t){if(t0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(t0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bX=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Bi(n,Vs);if(!o)return null;var l=Vs.defaultProps,c=l!==void 0?kh(kh({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(r||[]).reduce(function(d,h){var m=h.item,p=h.props,v=p.sectors||p.data||[];return d.concat(v.map(function(x){return{type:o.props.iconType||m.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(r||[]).map(function(d){var h=d.item,m=h.type.defaultProps,p=m!==void 0?kh(kh({},m),h.props):{},v=p.dataKey,x=p.name,b=p.legendType,_=p.hide;return{inactive:_,dataKey:v,type:c.iconType||b||"square",color:w$(h),value:x||v,payload:p}}),kh(kh(kh({},c),Vs.getWithHeight(o,a)),{},{payload:u,item:o})};function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n0(e)}function hB(e){return lBe(e)||oBe(e)||iBe(e)||sBe()}function sBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iBe(e,t){if(e){if(typeof e=="string")return qP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qP(e,t)}}function oBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lBe(e){if(Array.isArray(e))return qP(e)}function qP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fB(Object(n),!0).forEach(function(r){Np(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Np(e,t,n){return t=cBe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cBe(e){var t=uBe(e,"string");return n0(t)=="symbol"?t:t+""}function uBe(e,t){if(n0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(n0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wr(e,t,n){return en(e)||en(t)?n:La(t)?Qi(e,t,n):Ut(t)?t(e):n}function Xy(e,t,n,r){var a=o5e(e,function(l){return Wr(l,t)});if(n==="number"){var i=a.filter(function(l){return Qe(l)||parseFloat(l)});return i.length?[kN(i),ud(i)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!en(l)}):a;return o.map(function(l){return La(l)||l instanceof Date?l:""})}var dBe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,h=a[u].coordinate,m=u>=l-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(Ks(h-d)!==Ks(m-h)){var v=[];if(Ks(m-h)===Ks(c[1]-c[0])){p=m;var x=h+c[1]-c[0];v[0]=Math.min(x,(x+d)/2),v[1]=Math.max(x,(x+d)/2)}else{p=d;var b=m+c[1]-c[0];v[0]=Math.min(h,(b+h)/2),v[1]=Math.max(h,(b+h)/2)}var _=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(t>_[0]&&t<=_[1]||t>=v[0]&&t<=v[1]){o=a[u].index;break}}else{var j=Math.min(d,m),w=Math.max(d,m);if(t>(j+h)/2&&t<=(w+h)/2){o=a[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(r[N].coordinate+r[N+1].coordinate)/2||N>0&&N<l-1&&t>(r[N].coordinate+r[N-1].coordinate)/2&&t<=(r[N].coordinate+r[N+1].coordinate)/2||N===l-1&&t>(r[N].coordinate+r[N-1].coordinate)/2){o=r[N].index;break}return o},w$=function(t){var n,r=t,a=r.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ra(ra({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},hBe=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,h=Object.keys(d),m=0,p=h.length;m<p;m++){var v=d[h[m]],x=v.items,b=v.cateAxisId,_=x.filter(function(A){return Kc(A.type).indexOf("Bar")>=0});if(_&&_.length){var j=_[0].type.defaultProps,w=j!==void 0?ra(ra({},j),_[0].props):_[0].props,N=w.barSize,k=w[b];o[k]||(o[k]=[]);var C=en(N)?n:N;o[k].push({item:_[0],stackList:_.slice(1),barSize:en(C)?void 0:Gs(C,r,0)})}}return o},fBe=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Gs(n,a,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=a/c,v=o.reduce(function(N,k){return N+k.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&p>0&&(m=!0,p*=.9,v=c*p);var x=(a-v)/2>>0,b={offset:x-u,size:0};d=o.reduce(function(N,k){var C={item:k.item,position:{offset:b.offset+b.size+u,size:m?p:k.barSize}},A=[].concat(hB(N),[C]);return b=A[A.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(P){A.push({item:P,position:b})}),A},h)}else{var _=Gs(r,a,0,!0);a-2*_-(c-1)*u<=0&&(u=0);var j=(a-2*_-(c-1)*u)/c;j>1&&(j>>=0);var w=l===+l?Math.min(j,l):j;d=o.reduce(function(N,k,C){var A=[].concat(hB(N),[{item:k.item,position:{offset:_+(j+u)*C+(j-w)/2,size:w}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(P){A.push({item:P,position:A[A.length-1].position})}),A},h)}return d},mBe=function(t,n,r,a){var i=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=bX({children:i,legendWidth:c});if(u){var d=a||{},h=d.width,m=d.height,p=u.align,v=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&v==="middle")&&p!=="center"&&Qe(t[p]))return ra(ra({},t),{},Np({},p,t[p]+(h||0)));if((x==="horizontal"||x==="vertical"&&p==="center")&&v!=="middle"&&Qe(t[v]))return ra(ra({},t),{},Np({},v,t[v]+(m||0)))}return t},pBe=function(t,n,r){return en(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},wX=function(t,n,r,a,i){var o=n.props.children,l=Xi(o,pb).filter(function(u){return pBe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=Wr(d,r);if(en(h))return u;var m=Array.isArray(h)?[kN(h),ud(h)]:[h,h],p=c.reduce(function(v,x){var b=Wr(d,x,0),_=m[0]-Math.abs(Array.isArray(b)?b[0]:b),j=m[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(_,v[0]),Math.max(j,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},gBe=function(t,n,r,a,i){var o=n.map(function(l){return wX(t,l,r,i,a)}).filter(function(l){return!en(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},_X=function(t,n,r,a,i){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&wX(t,c,u,a)||Xy(t,u,r,i)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},jX=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},SX=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(r),l},Hc=function(t,n,r){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ks(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var m=i?i.indexOf(h):h;return{coordinate:a(m)+u,value:h,offset:u}});return d.filter(function(h){return!ov(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,m){return{coordinate:a(h)+u,value:h,index:m,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+u,value:h,offset:u}}):a.domain().map(function(h,m){return{coordinate:a(h)+u,value:i?i[h]:h,index:m,offset:u}})},YA=new WeakMap,e_=function(t,n){if(typeof n!="function")return t;YA.has(t)||YA.set(t,new WeakMap);var r=YA.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},NX=function(t,n,r){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Gx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Xj(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Qy(),realScaleType:"point"}:i==="category"?{scale:Gx(),realScaleType:"band"}:{scale:Xj(),realScaleType:"linear"};if(Tf(a)){var c="scale".concat(hN(a));return{scale:(iB[c]||Qy)(),realScaleType:iB[c]?c:"point"}}return Ut(a)?{scale:a}:{scale:Qy(),realScaleType:"point"}},mB=1e-4,kX=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),i=Math.min(a[0],a[1])-mB,o=Math.max(a[0],a[1])+mB,l=t(n[0]),c=t(n[r-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[r-1]])}},vBe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},yBe=function(t,n){if(!n||n.length!==2||!Qe(n[0])||!Qe(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!Qe(t[0])||t[0]<r)&&(i[0]=r),(!Qe(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<r&&(i[1]=r),i},xBe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0,l=0;l<n;++l){var c=ov(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=i,t[l][r][1]=i+c,i=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},bBe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0;o<n;++o){var l=ov(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},wBe={sign:xBe,expand:BTe,none:ag,silhouette:UTe,wiggle:VTe,positive:bBe},_Be=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),i=wBe[r],o=FTe().keys(a).value(function(l,c){return+Wr(l,c,0)}).order(gP).offset(i);return o(t)},jBe=function(t,n,r,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,m){var p,v=(p=m.type)!==null&&p!==void 0&&p.defaultProps?ra(ra({},m.type.defaultProps),m.props):m.props,x=v.stackId,b=v.hide;if(b)return h;var _=v[r],j=h[_]||{hasStack:!1,stackGroups:{}};if(La(x)){var w=j.stackGroups[x]||{numericAxisId:r,cateAxisId:a,items:[]};w.items.push(m),j.hasStack=!0,j.stackGroups[x]=w}else j.stackGroups[Gf("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[m]};return ra(ra({},h),{},Np({},_,j))},c),d={};return Object.keys(u).reduce(function(h,m){var p=u[m];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(x,b){var _=p.stackGroups[b];return ra(ra({},x),{},Np({},b,{numericAxisId:r,cateAxisId:a,items:_.items,stackedData:_Be(t,_.items,i)}))},v)}return ra(ra({},h),{},Np({},m,p))},d)},CX=function(t,n){var r=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=D5e(u,i,l);return t.domain([kN(d),ud(d)]),{niceTicks:d}}if(i&&a==="number"){var h=t.domain(),m=L5e(h,i,l);return{niceTicks:m}}return null};function a1(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!en(a[t.dataKey])){var l=Tj(n,"value",a[t.dataKey]);if(l)return l.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=Wr(a,en(o)?t.dataKey:o);return en(c)?null:t.scale(c)}var pB=function(t){var n=t.axis,r=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=Wr(o,n.dataKey,n.domain[l]);return en(c)?null:n.scale(c)-i/2+a},SBe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return a<=0&&i>=0?0:i<0?i:a}return r[0]},NBe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ra(ra({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(La(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},kBe=function(t){return t.reduce(function(n,r){return[kN(r.concat([n[0]]).filter(Qe)),ud(r.concat([n[1]]).filter(Qe))]},[1/0,-1/0])},AX=function(t,n,r){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var h=kBe(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},gB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KP=function(t,n,r){if(Ut(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(Qe(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(gB.test(t[0])){var i=+gB.exec(t[0])[1];a[0]=n[0]-i}else Ut(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(Qe(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(vB.test(t[1])){var o=+vB.exec(t[1])[1];a[1]=n[1]+o}else Ut(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},s1=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var i=YR(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},yB=function(t,n,r){return!t||!t.length||$d(t,Qi(r,"type.defaultProps.domain"))?n:t},EX=function(t,n){var r=t.type.defaultProps?ra(ra({},t.type.defaultProps),t.props):t.props,a=r.dataKey,i=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return ra(ra({},kt(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:w$(t),value:Wr(n,a),type:c,payload:n,chartType:u,hide:d})};function r0(e){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r0(e)}function xB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xB(Object(n),!0).forEach(function(r){TX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TX(e,t,n){return t=CBe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CBe(e){var t=ABe(e,"string");return r0(t)=="symbol"?t:t+""}function ABe(e,t){if(r0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(r0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EBe(e,t){return IBe(e)||OBe(e,t)||PBe(e,t)||TBe()}function TBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PBe(e,t){if(e){if(typeof e=="string")return bB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bB(e,t)}}function bB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OBe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function IBe(e){if(Array.isArray(e))return e}var i1=Math.PI/180,RBe=function(t){return t*180/Math.PI},Jn=function(t,n,r,a){return{x:t+Math.cos(-i1*a)*r,y:n+Math.sin(-i1*a)*r}},PX=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},OX=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Gs(t.cx,o,o/2),h=Gs(t.cy,l,l/2),m=PX(o,l,r),p=Gs(t.innerRadius,m,0),v=Gs(t.outerRadius,m,m*.8),x=Object.keys(n);return x.reduce(function(b,_){var j=n[_],w=j.domain,N=j.reversed,k;if(en(j.range))a==="angleAxis"?k=[c,u]:a==="radiusAxis"&&(k=[p,v]),N&&(k=[k[1],k[0]]);else{k=j.range;var C=k,A=EBe(C,2);c=A[0],u=A[1]}var P=NX(j,i),O=P.realScaleType,T=P.scale;T.domain(w).range(k),kX(T);var $=CX(T,$c($c({},j),{},{realScaleType:O})),L=$c($c($c({},j),$),{},{range:k,radius:v,realScaleType:O,scale:T,cx:d,cy:h,innerRadius:p,outerRadius:v,startAngle:c,endAngle:u});return $c($c({},b),{},TX({},_,L))},{})},$Be=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-o,2))},MBe=function(t,n){var r=t.x,a=t.y,i=n.cx,o=n.cy,l=$Be({x:r,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(r-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:RBe(u),angleInRadian:u}},DBe=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:r-o*360}},LBe=function(t,n){var r=n.startAngle,a=n.endAngle,i=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},wB=function(t,n){var r=t.x,a=t.y,i=MBe({x:r,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=DBe(n),h=d.startAngle,m=d.endAngle,p=l,v;if(h<=m){for(;p>m;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=m}else{for(;p>h;)p-=360;for(;p<m;)p+=360;v=p>=m&&p<=h}return v?$c($c({},n),{},{radius:o,angle:LBe(p,n)}):null},IX=function(t){return!g.isValidElement(t)&&!Ut(t)&&typeof t!="boolean"?t.className:""};function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a0(e)}var FBe=["offset"];function BBe(e){return HBe(e)||zBe(e)||VBe(e)||UBe()}function UBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VBe(e,t){if(e){if(typeof e=="string")return GP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GP(e,t)}}function zBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HBe(e){if(Array.isArray(e))return GP(e)}function GP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WBe(e,t){if(e==null)return{};var n=qBe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qBe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ia(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_B(Object(n),!0).forEach(function(r){KBe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_B(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KBe(e,t,n){return t=GBe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GBe(e){var t=YBe(e,"string");return a0(t)=="symbol"?t:t+""}function YBe(e,t){if(a0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(a0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s0(){return s0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s0.apply(this,arguments)}var QBe=function(t){var n=t.value,r=t.formatter,a=en(t.children)?n:t.children;return Ut(r)?r(a):a},XBe=function(t,n){var r=Ks(n-t),a=Math.min(Math.abs(n-t),360);return r*a},JBe=function(t,n,r){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,h=c.innerRadius,m=c.outerRadius,p=c.startAngle,v=c.endAngle,x=c.clockWise,b=(h+m)/2,_=XBe(p,v),j=_>=0?1:-1,w,N;a==="insideStart"?(w=p+j*o,N=x):a==="insideEnd"?(w=v-j*o,N=!x):a==="end"&&(w=v+j*o,N=x),N=_<=0?N:!N;var k=Jn(u,d,b,w),C=Jn(u,d,b,w+(N?1:-1)*359),A="M".concat(k.x,",").concat(k.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(N?0:1,`,
    `).concat(C.x,",").concat(C.y),P=en(t.id)?Gf("recharts-radial-line-"):t.id;return V.createElement("text",s0({},r,{dominantBaseline:"central",className:Xt("recharts-radial-bar-label",l)}),V.createElement("defs",null,V.createElement("path",{id:P,d:A})),V.createElement("textPath",{xlinkHref:"#".concat(P)},n))},ZBe=function(t){var n=t.viewBox,r=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,h=i.endAngle,m=(d+h)/2;if(a==="outside"){var p=Jn(o,l,u+r,m),v=p.x,x=p.y;return{x:v,y:x,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(c+u)/2,_=Jn(o,l,b,m),j=_.x,w=_.y;return{x:j,y:w,textAnchor:"middle",verticalAnchor:"middle"}},eUe=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,m=h*a,p=h>0?"end":"start",v=h>0?"start":"end",x=u>=0?1:-1,b=x*a,_=x>0?"end":"start",j=x>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-h*a,textAnchor:"middle",verticalAnchor:p};return Ia(Ia({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(i==="bottom"){var N={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:v};return Ia(Ia({},N),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(i==="left"){var k={x:l-b,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return Ia(Ia({},k),r?{width:Math.max(k.x-r.x,0),height:d}:{})}if(i==="right"){var C={x:l+u+b,y:c+d/2,textAnchor:j,verticalAnchor:"middle"};return Ia(Ia({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:d}:{})}var A=r?{width:u,height:d}:{};return i==="insideLeft"?Ia({x:l+b,y:c+d/2,textAnchor:j,verticalAnchor:"middle"},A):i==="insideRight"?Ia({x:l+u-b,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},A):i==="insideTop"?Ia({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:v},A):i==="insideBottom"?Ia({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:p},A):i==="insideTopLeft"?Ia({x:l+b,y:c+m,textAnchor:j,verticalAnchor:v},A):i==="insideTopRight"?Ia({x:l+u-b,y:c+m,textAnchor:_,verticalAnchor:v},A):i==="insideBottomLeft"?Ia({x:l+b,y:c+d-m,textAnchor:j,verticalAnchor:p},A):i==="insideBottomRight"?Ia({x:l+u-b,y:c+d-m,textAnchor:_,verticalAnchor:p},A):rv(i)&&(Qe(i.x)||Gh(i.x))&&(Qe(i.y)||Gh(i.y))?Ia({x:l+Gs(i.x,u),y:c+Gs(i.y,d),textAnchor:"end",verticalAnchor:"end"},A):Ia({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},A)},tUe=function(t){return"cx"in t&&Qe(t.cx)};function Wa(e){var t=e.offset,n=t===void 0?5:t,r=WBe(e,FBe),a=Ia({offset:n},r),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,h=d===void 0?"":d,m=a.textBreakAll;if(!i||en(l)&&en(c)&&!g.isValidElement(u)&&!Ut(u))return null;if(g.isValidElement(u))return g.cloneElement(u,a);var p;if(Ut(u)){if(p=g.createElement(u,a),g.isValidElement(p))return p}else p=QBe(a);var v=tUe(i),x=kt(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return JBe(a,p,x);var b=v?ZBe(a):eUe(a);return V.createElement(Of,s0({className:Xt("recharts-label",h)},x,b,{breakAll:m}),p)}Wa.displayName="Label";var RX=function(t){var n=t.cx,r=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,m=t.y,p=t.top,v=t.left,x=t.width,b=t.height,_=t.clockWise,j=t.labelViewBox;if(j)return j;if(Qe(x)&&Qe(b)){if(Qe(h)&&Qe(m))return{x:h,y:m,width:x,height:b};if(Qe(p)&&Qe(v))return{x:p,y:v,width:x,height:b}}return Qe(h)&&Qe(m)?{x:h,y:m,width:0,height:0}:Qe(n)&&Qe(r)?{cx:n,cy:r,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:_}:t.viewBox?t.viewBox:{}},nUe=function(t,n){return t?t===!0?V.createElement(Wa,{key:"label-implicit",viewBox:n}):La(t)?V.createElement(Wa,{key:"label-implicit",viewBox:n,value:t}):g.isValidElement(t)?t.type===Wa?g.cloneElement(t,{key:"label-implicit",viewBox:n}):V.createElement(Wa,{key:"label-implicit",content:t,viewBox:n}):Ut(t)?V.createElement(Wa,{key:"label-implicit",content:t,viewBox:n}):rv(t)?V.createElement(Wa,s0({viewBox:n},t,{key:"label-implicit"})):null:null},rUe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,i=RX(t),o=Xi(a,Wa).map(function(c,u){return g.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var l=nUe(t.label,n||i);return[l].concat(BBe(o))};Wa.parseViewBox=RX;Wa.renderCallByParent=rUe;function aUe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var sUe=aUe;const $X=Zn(sUe);function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i0(e)}var iUe=["valueAccessor"],oUe=["data","dataKey","clockWise","id","textBreakAll"];function lUe(e){return hUe(e)||dUe(e)||uUe(e)||cUe()}function cUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uUe(e,t){if(e){if(typeof e=="string")return YP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YP(e,t)}}function dUe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hUe(e){if(Array.isArray(e))return YP(e)}function YP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o1(){return o1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o1.apply(this,arguments)}function jB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function SB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jB(Object(n),!0).forEach(function(r){fUe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fUe(e,t,n){return t=mUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mUe(e){var t=pUe(e,"string");return i0(t)=="symbol"?t:t+""}function pUe(e,t){if(i0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(i0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NB(e,t){if(e==null)return{};var n=gUe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gUe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var vUe=function(t){return Array.isArray(t.value)?$X(t.value):t.value};function wl(e){var t=e.valueAccessor,n=t===void 0?vUe:t,r=NB(e,iUe),a=r.data,i=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=NB(r,oUe);return!a||!a.length?null:V.createElement(jn,{className:"recharts-label-list"},a.map(function(d,h){var m=en(i)?n(d,h):Wr(d&&d.payload,i),p=en(l)?{}:{id:"".concat(l,"-").concat(h)};return V.createElement(Wa,o1({},kt(d,!0),u,p,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:Wa.parseViewBox(en(o)?d:SB(SB({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}wl.displayName="LabelList";function yUe(e,t){return e?e===!0?V.createElement(wl,{key:"labelList-implicit",data:t}):V.isValidElement(e)||Ut(e)?V.createElement(wl,{key:"labelList-implicit",data:t,content:e}):rv(e)?V.createElement(wl,o1({data:t},e,{key:"labelList-implicit"})):null:null}function xUe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=Xi(r,wl).map(function(o,l){return g.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=yUe(e.label,t);return[i].concat(lUe(a))}wl.renderCallByParent=xUe;function o0(e){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o0(e)}function QP(){return QP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QP.apply(this,arguments)}function kB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function CB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(n),!0).forEach(function(r){bUe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bUe(e,t,n){return t=wUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wUe(e){var t=_Ue(e,"string");return o0(t)=="symbol"?t:t+""}function _Ue(e,t){if(o0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(o0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jUe=function(t,n){var r=Ks(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},t_=function(t){var n=t.cx,r=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,h=Math.asin(c/d)/i1,m=u?i:i+o*h,p=Jn(n,r,d,m),v=Jn(n,r,a,m),x=u?i-o*h:i,b=Jn(n,r,d*Math.cos(h*i1),x);return{center:p,circleTangency:v,lineTangency:b,theta:h}},MX=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=jUe(o,l),u=o+c,d=Jn(n,r,i,o),h=Jn(n,r,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var p=Jn(n,r,a,o),v=Jn(n,r,a,u);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(n,",").concat(r," Z");return m},SUe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=Ks(d-u),m=t_({cx:n,cy:r,radius:i,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,v=m.lineTangency,x=m.theta,b=t_({cx:n,cy:r,radius:i,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),_=b.circleTangency,j=b.lineTangency,w=b.theta,N=c?Math.abs(u-d):Math.abs(u-d)-x-w;if(N<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):MX({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var k="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
  `);if(a>0){var C=t_({cx:n,cy:r,radius:a,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=C.circleTangency,P=C.lineTangency,O=C.theta,T=t_({cx:n,cy:r,radius:a,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),$=T.circleTangency,L=T.lineTangency,z=T.theta,W=c?Math.abs(u-d):Math.abs(u-d)-O-z;if(W<0&&o===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(L.x,",").concat(L.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat($.x,",").concat($.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(W>180),",").concat(+(h>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},NUe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DX=function(t){var n=CB(CB({},NUe),t),r=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,m=n.className;if(o<i||d===h)return null;var p=Xt("recharts-sector",m),v=o-i,x=Gs(l,v,0,!0),b;return x>0&&Math.abs(d-h)<360?b=SUe({cx:r,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):b=MX({cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h}),V.createElement("path",QP({},kt(n,!0),{className:p,d:b,role:"img"}))};function l0(e){"@babel/helpers - typeof";return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l0(e)}function XP(){return XP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XP.apply(this,arguments)}function AB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function EB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AB(Object(n),!0).forEach(function(r){kUe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kUe(e,t,n){return t=CUe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CUe(e){var t=AUe(e,"string");return l0(t)=="symbol"?t:t+""}function AUe(e,t){if(l0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(l0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TB={curveBasisClosed:ATe,curveBasisOpen:ETe,curveBasis:CTe,curveBumpX:fTe,curveBumpY:mTe,curveLinearClosed:TTe,curveLinear:mN,curveMonotoneX:PTe,curveMonotoneY:OTe,curveNatural:ITe,curveStep:RTe,curveStepAfter:MTe,curveStepBefore:$Te},n_=function(t){return t.x===+t.x&&t.y===+t.y},xy=function(t){return t.x},by=function(t){return t.y},EUe=function(t,n){if(Ut(t))return t;var r="curve".concat(hN(t));return(r==="curveMonotone"||r==="curveBump")&&n?TB["".concat(r).concat(n==="vertical"?"Y":"X")]:TB[r]||mN},TUe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=EUe(r,l),h=u?i.filter(function(x){return n_(x)}):i,m;if(Array.isArray(o)){var p=u?o.filter(function(x){return n_(x)}):o,v=h.map(function(x,b){return EB(EB({},x),{},{base:p[b]})});return l==="vertical"?m=qw().y(by).x1(xy).x0(function(x){return x.base.x}):m=qw().x(xy).y1(by).y0(function(x){return x.base.y}),m.defined(n_).curve(d),m(v)}return l==="vertical"&&Qe(o)?m=qw().y(by).x1(xy).x0(o):Qe(o)?m=qw().x(xy).y1(by).y0(o):m=EY().x(xy).y(by),m.defined(n_).curve(d),m(h)},df=function(t){var n=t.className,r=t.points,a=t.path,i=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?TUe(t):a;return g.createElement("path",XP({},kt(t,!1),Pj(t),{className:Xt("recharts-curve",n),d:o,ref:i}))},LX={exports:{}},PUe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",OUe=PUe,IUe=OUe;function FX(){}function BX(){}BX.resetWarningCache=FX;var RUe=function(){function e(r,a,i,o,l,c){if(c!==IUe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:BX,resetWarningCache:FX};return n.PropTypes=n,n};LX.exports=RUe();var $Ue=LX.exports;const rr=Zn($Ue);var MUe=Object.getOwnPropertyNames,DUe=Object.getOwnPropertySymbols,LUe=Object.prototype.hasOwnProperty;function PB(e,t){return function(r,a,i){return e(r,a,i)&&t(r,a,i)}}function r_(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var i=a.cache,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);var c=e(n,r,a);return i.delete(n),i.delete(r),c}}function OB(e){return MUe(e).concat(DUe(e))}var FUe=Object.hasOwn||function(e,t){return LUe.call(e,t)};function Xf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var BUe="__v",UUe="__o",VUe="_owner",IB=Object.getOwnPropertyDescriptor,RB=Object.keys;function zUe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function HUe(e,t){return Xf(e.getTime(),t.getTime())}function WUe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function qUe(e,t){return e===t}function $B(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(a[h]){h++;continue}var m=o.value,p=l.value;if(n.equals(m[0],p[0],c,h,e,t,n)&&n.equals(m[1],p[1],m[0],p[0],e,t,n)){d=a[h]=!0;break}h++}if(!d)return!1;c++}return!0}var KUe=Xf;function GUe(e,t,n){var r=RB(e),a=r.length;if(RB(t).length!==a)return!1;for(;a-- >0;)if(!UX(e,t,n,r[a]))return!1;return!0}function wy(e,t,n){var r=OB(e),a=r.length;if(OB(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=r[a],!UX(e,t,n,i)||(o=IB(e,i),l=IB(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function YUe(e,t){return Xf(e.valueOf(),t.valueOf())}function QUe(e,t){return e.source===t.source&&e.flags===t.flags}function MB(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function XUe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function JUe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function UX(e,t,n,r){return(r===VUe||r===UUe||r===BUe)&&(e.$$typeof||t.$$typeof)?!0:FUe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var ZUe="[object Arguments]",e6e="[object Boolean]",t6e="[object Date]",n6e="[object Error]",r6e="[object Map]",a6e="[object Number]",s6e="[object Object]",i6e="[object RegExp]",o6e="[object Set]",l6e="[object String]",c6e="[object URL]",u6e=Array.isArray,DB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,LB=Object.assign,d6e=Object.prototype.toString.call.bind(Object.prototype.toString);function h6e(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(v,x,b){if(v===x)return!0;if(v==null||x==null)return!1;var _=typeof v;if(_!==typeof x)return!1;if(_!=="object")return _==="number"?o(v,x,b):_==="function"?a(v,x,b):!1;var j=v.constructor;if(j!==x.constructor)return!1;if(j===Object)return l(v,x,b);if(u6e(v))return t(v,x,b);if(DB!=null&&DB(v))return h(v,x,b);if(j===Date)return n(v,x,b);if(j===RegExp)return u(v,x,b);if(j===Map)return i(v,x,b);if(j===Set)return d(v,x,b);var w=d6e(v);return w===t6e?n(v,x,b):w===i6e?u(v,x,b):w===r6e?i(v,x,b):w===o6e?d(v,x,b):w===s6e?typeof v.then!="function"&&typeof x.then!="function"&&l(v,x,b):w===c6e?m(v,x,b):w===n6e?r(v,x,b):w===ZUe?l(v,x,b):w===e6e||w===a6e||w===l6e?c(v,x,b):!1}}function f6e(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?wy:zUe,areDatesEqual:HUe,areErrorsEqual:WUe,areFunctionsEqual:qUe,areMapsEqual:r?PB($B,wy):$B,areNumbersEqual:KUe,areObjectsEqual:r?wy:GUe,arePrimitiveWrappersEqual:YUe,areRegExpsEqual:QUe,areSetsEqual:r?PB(MB,wy):MB,areTypedArraysEqual:r?wy:XUe,areUrlsEqual:JUe};if(n&&(a=LB({},a,n(a))),t){var i=r_(a.areArraysEqual),o=r_(a.areMapsEqual),l=r_(a.areObjectsEqual),c=r_(a.areSetsEqual);a=LB({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function m6e(e){return function(t,n,r,a,i,o,l){return e(t,n,l)}}function p6e(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,i=e.strict;if(r)return function(c,u){var d=r(),h=d.cache,m=h===void 0?t?new WeakMap:void 0:h,p=d.meta;return n(c,u,{cache:m,equals:a,meta:p,strict:i})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return n(c,u,o)}}var g6e=Jd();Jd({strict:!0});Jd({circular:!0});Jd({circular:!0,strict:!0});Jd({createInternalComparator:function(){return Xf}});Jd({strict:!0,createInternalComparator:function(){return Xf}});Jd({circular:!0,createInternalComparator:function(){return Xf}});Jd({circular:!0,createInternalComparator:function(){return Xf},strict:!0});function Jd(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=f6e(e),c=h6e(l),u=r?r(c):m6e(c);return p6e({circular:n,comparator:c,createState:a,equals:u,strict:o})}function v6e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function FB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):v6e(a)};requestAnimationFrame(r)}function JP(e){"@babel/helpers - typeof";return JP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JP(e)}function y6e(e){return _6e(e)||w6e(e)||b6e(e)||x6e()}function x6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b6e(e,t){if(e){if(typeof e=="string")return BB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BB(e,t)}}function BB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _6e(e){if(Array.isArray(e))return e}function j6e(){var e={},t=function(){return null},n=!1,r=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=y6e(o),c=l[0],u=l.slice(1);if(typeof c=="number"){FB(a.bind(null,u),c);return}a(c),FB(a.bind(null,u));return}JP(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function c0(e){"@babel/helpers - typeof";return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c0(e)}function UB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function VB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UB(Object(n),!0).forEach(function(r){VX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VX(e,t,n){return t=S6e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S6e(e){var t=N6e(e,"string");return c0(t)==="symbol"?t:String(t)}function N6e(e,t){if(c0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(c0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k6e=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(i){return a.includes(i)})})},C6e=function(t){return t},A6e=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Jy=function(t,n){return Object.keys(n).reduce(function(r,a){return VB(VB({},r),{},VX({},a,t(a,n[a])))},{})},zB=function(t,n,r){return t.map(function(a){return"".concat(A6e(a)," ").concat(n,"ms ").concat(r)}).join(",")};function E6e(e,t){return O6e(e)||P6e(e,t)||zX(e,t)||T6e()}function T6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P6e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function O6e(e){if(Array.isArray(e))return e}function I6e(e){return M6e(e)||$6e(e)||zX(e)||R6e()}function R6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zX(e,t){if(e){if(typeof e=="string")return ZP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZP(e,t)}}function $6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function M6e(e){if(Array.isArray(e))return ZP(e)}function ZP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l1=1e-4,HX=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},WX=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},HB=function(t,n){return function(r){var a=HX(t,n);return WX(a,r)}},D6e=function(t,n){return function(r){var a=HX(t,n),i=[].concat(I6e(a.map(function(o,l){return o*l}).slice(1)),[0]);return WX(i,r)}},WB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=E6e(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var h=HB(a,o),m=HB(i,l),p=D6e(a,o),v=function(_){return _>1?1:_<0?0:_},x=function(_){for(var j=_>1?1:_,w=j,N=0;N<8;++N){var k=h(w)-j,C=p(w);if(Math.abs(k-j)<l1||C<l1)return m(w);w=v(w-k/C)}return m(w)};return x.isStepper=!1,x},L6e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,h,m){var p=-(d-h)*r,v=m*i,x=m+(p-v)*l/1e3,b=m*l/1e3+d;return Math.abs(b-h)<l1&&Math.abs(x)<l1?[h,0]:[b,x]};return c.isStepper=!0,c.dt=l,c},F6e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return WB(a);case"spring":return L6e();default:if(a.split("(")[0]==="cubic-bezier")return WB(a)}return typeof a=="function"?a:null};function u0(e){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u0(e)}function qB(e){return V6e(e)||U6e(e)||qX(e)||B6e()}function B6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U6e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V6e(e){if(Array.isArray(e))return tO(e)}function KB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KB(Object(n),!0).forEach(function(r){eO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eO(e,t,n){return t=z6e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z6e(e){var t=H6e(e,"string");return u0(t)==="symbol"?t:String(t)}function H6e(e,t){if(u0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(u0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W6e(e,t){return G6e(e)||K6e(e,t)||qX(e,t)||q6e()}function q6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qX(e,t){if(e){if(typeof e=="string")return tO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(e,t)}}function tO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K6e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function G6e(e){if(Array.isArray(e))return e}var c1=function(t,n,r){return t+(n-t)*r},nO=function(t){var n=t.from,r=t.to;return n!==r},Y6e=function e(t,n,r){var a=Jy(function(i,o){if(nO(o)){var l=t(o.from,o.to,o.velocity),c=W6e(l,2),u=c[0],d=c[1];return as(as({},o),{},{from:u,velocity:d})}return o},n);return r<1?Jy(function(i,o){return nO(o)?as(as({},o),{},{velocity:c1(o.velocity,a[i].velocity,r),from:c1(o.from,a[i].from,r)}):o},n):e(t,a,r-1)};const Q6e=function(e,t,n,r,a){var i=k6e(e,t),o=i.reduce(function(b,_){return as(as({},b),{},eO({},_,[e[_],t[_]]))},{}),l=i.reduce(function(b,_){return as(as({},b),{},eO({},_,{from:e[_],velocity:0,to:t[_]}))},{}),c=-1,u,d,h=function(){return null},m=function(){return Jy(function(_,j){return j.from},l)},p=function(){return!Object.values(l).filter(nO).length},v=function(_){u||(u=_);var j=_-u,w=j/n.dt;l=Y6e(n,l,w),a(as(as(as({},e),t),m())),u=_,p()||(c=requestAnimationFrame(h))},x=function(_){d||(d=_);var j=(_-d)/r,w=Jy(function(k,C){return c1.apply(void 0,qB(C).concat([n(j)]))},o);if(a(as(as(as({},e),t),w)),j<1)c=requestAnimationFrame(h);else{var N=Jy(function(k,C){return c1.apply(void 0,qB(C).concat([n(1)]))},o);a(as(as(as({},e),t),N))}};return h=n.isStepper?v:x,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}var X6e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function J6e(e,t){if(e==null)return{};var n=Z6e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Z6e(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function QA(e){return rVe(e)||nVe(e)||tVe(e)||eVe()}function eVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tVe(e,t){if(e){if(typeof e=="string")return rO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(e,t)}}function nVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rVe(e){if(Array.isArray(e))return rO(e)}function rO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GB(Object(n),!0).forEach(function(r){Iy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iy(e,t,n){return t=KX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sVe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KX(r.key),r)}}function iVe(e,t,n){return t&&sVe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KX(e){var t=oVe(e,"string");return fg(t)==="symbol"?t:String(t)}function oVe(e,t){if(fg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aO(e,t)}function aO(e,t){return aO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},aO(e,t)}function cVe(e){var t=uVe();return function(){var r=u1(e),a;if(t){var i=u1(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return sO(this,a)}}function sO(e,t){if(t&&(fg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iO(e)}function iO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uVe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u1(e){return u1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},u1(e)}var Do=function(e){lVe(n,e);var t=cVe(n);function n(r,a){var i;aVe(this,n),i=t.call(this,r,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(iO(i)),i.changeStyle=i.changeStyle.bind(iO(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:d}),sO(i);if(h&&h.length)i.state={style:h[0].style};else if(u){if(typeof m=="function")return i.state={style:u},sO(i);i.state={style:c?Iy({},c,u):u}}else i.state={style:{}};return i}return iVe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,h=i.from,m=this.state.style;if(l){if(!o){var p={style:c?Iy({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(p);return}if(!(g6e(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=v||u?h:a.to;if(this.state&&m){var b={style:c?Iy({},c,x):x};(c&&m[c]!==x||!c&&m!==x)&&this.setState(b)}this.runAnimation(Xo(Xo({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,h=a.onAnimationEnd,m=a.onAnimationStart,p=Q6e(o,l,F6e(u),c,this.changeStyle),v=function(){i.stopJSAnimation=p()};this.manager.start([m,d,v,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,h=u.duration,m=h===void 0?0:h,p=function(x,b,_){if(_===0)return x;var j=b.duration,w=b.easing,N=w===void 0?"ease":w,k=b.style,C=b.properties,A=b.onAnimationEnd,P=_>0?o[_-1]:b,O=C||Object.keys(k);if(typeof N=="function"||N==="spring")return[].concat(QA(x),[i.runJSAnimation.bind(i,{from:P.style,to:k,duration:j,easing:N}),j]);var T=zB(O,j,N),$=Xo(Xo(Xo({},P.style),k),{},{transition:T});return[].concat(QA(x),[$,j,A]).filter(C6e)};return this.manager.start([c].concat(QA(o.reduce(p,[d,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=j6e());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,h=a.onAnimationEnd,m=a.steps,p=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var x=l?Iy({},l,c):c,b=zB(Object.keys(x),o,u);v.start([d,i,Xo(Xo({},x),{},{transition:b}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=J6e(a,X6e),u=g.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var h=function(p){var v=p.props,x=v.style,b=x===void 0?{}:x,_=v.className,j=g.cloneElement(p,Xo(Xo({},c),{},{style:Xo(Xo({},b),d),className:_}));return j};return u===1?h(g.Children.only(i)):V.createElement("div",null,g.Children.map(i,function(m){return h(m)}))}}]),n}(g.PureComponent);Do.displayName="Animate";Do.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Do.propTypes={from:rr.oneOfType([rr.object,rr.string]),to:rr.oneOfType([rr.object,rr.string]),attributeName:rr.string,duration:rr.number,begin:rr.number,easing:rr.oneOfType([rr.string,rr.func]),steps:rr.arrayOf(rr.shape({duration:rr.number.isRequired,style:rr.object.isRequired,easing:rr.oneOfType([rr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),rr.func]),properties:rr.arrayOf("string"),onAnimationEnd:rr.func})),children:rr.oneOfType([rr.node,rr.func]),isActive:rr.bool,canBegin:rr.bool,onAnimationEnd:rr.func,shouldReAnimate:rr.bool,onAnimationStart:rr.func,onAnimationReStart:rr.func};function d0(e){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d0(e)}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d1.apply(this,arguments)}function dVe(e,t){return pVe(e)||mVe(e,t)||fVe(e,t)||hVe()}function hVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fVe(e,t){if(e){if(typeof e=="string")return YB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YB(e,t)}}function YB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mVe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function pVe(e){if(Array.isArray(e))return e}function QB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function XB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QB(Object(n),!0).forEach(function(r){gVe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gVe(e,t,n){return t=vVe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vVe(e){var t=yVe(e,"string");return d0(t)=="symbol"?t:t+""}function yVe(e,t){if(d0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(d0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JB=function(t,n,r,a,i){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,d;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,p=4;m<p;m++)h[m]=i[m]>o?o:i[m];d="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(n)),d+="L ".concat(t+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*h[1])),d+="L ".concat(t+r,",").concat(n+a-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-c*h[2],",").concat(n+a)),d+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*h[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);d="M ".concat(t,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(n,`
            L `).concat(t+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*v,`
            L `).concat(t+r,",").concat(n+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+r-c*v,",").concat(n+a,`
            L `).concat(t+c*v,",").concat(n+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*v," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},xVe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),h=Math.min(o,o+c),m=Math.max(o,o+c);return r>=u&&r<=d&&a>=h&&a<=m}return!1},bVe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_$=function(t){var n=XB(XB({},bVe),t),r=g.useRef(),a=g.useState(-1),i=dVe(a,2),o=i[0],l=i[1];g.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,m=n.radius,p=n.className,v=n.animationEasing,x=n.animationDuration,b=n.animationBegin,_=n.isAnimationActive,j=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var w=Xt("recharts-rectangle",p);return j?V.createElement(Do,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:x,animationEasing:v,isActive:j},function(N){var k=N.width,C=N.height,A=N.x,P=N.y;return V.createElement(Do,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,isActive:_,easing:v},V.createElement("path",d1({},kt(n,!0),{className:w,d:JB(A,P,k,C,m),ref:r})))}):V.createElement("path",d1({},kt(n,!0),{className:w,d:JB(c,u,d,h,m)}))},wVe=["points","className","baseLinePoints","connectNulls"];function ip(){return ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ip.apply(this,arguments)}function _Ve(e,t){if(e==null)return{};var n=jVe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jVe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ZB(e){return CVe(e)||kVe(e)||NVe(e)||SVe()}function SVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NVe(e,t){if(e){if(typeof e=="string")return oO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oO(e,t)}}function kVe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CVe(e){if(Array.isArray(e))return oO(e)}function oO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var eU=function(t){return t&&t.x===+t.x&&t.y===+t.y},AVe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){eU(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),eU(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Zy=function(t,n){var r=AVe(t);n&&(r=[r.reduce(function(i,o){return[].concat(ZB(i),ZB(o))},[])]);var a=r.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},EVe=function(t,n,r){var a=Zy(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Zy(n.reverse(),r).slice(1))},GX=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,o=_Ve(t,wVe);if(!n||!n.length)return null;var l=Xt("recharts-polygon",r);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=EVe(n,a,i);return V.createElement("g",{className:l},V.createElement("path",ip({},kt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?V.createElement("path",ip({},kt(o,!0),{fill:"none",d:Zy(n,i)})):null,c?V.createElement("path",ip({},kt(o,!0),{fill:"none",d:Zy(a,i)})):null)}var d=Zy(n,i);return V.createElement("path",ip({},kt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function lO(){return lO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lO.apply(this,arguments)}var mv=function(t){var n=t.cx,r=t.cy,a=t.r,i=t.className,o=Xt("recharts-dot",i);return n===+n&&r===+r&&a===+a?g.createElement("circle",lO({},kt(t,!1),Pj(t),{className:o,cx:n,cy:r,r:a})):null};function h0(e){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h0(e)}var TVe=["x","y","top","left","width","height","className"];function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cO.apply(this,arguments)}function tU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function PVe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tU(Object(n),!0).forEach(function(r){OVe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OVe(e,t,n){return t=IVe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IVe(e){var t=RVe(e,"string");return h0(t)=="symbol"?t:t+""}function RVe(e,t){if(h0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(h0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Ve(e,t){if(e==null)return{};var n=MVe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function MVe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var DVe=function(t,n,r,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},LVe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,h=d===void 0?0:d,m=t.height,p=m===void 0?0:m,v=t.className,x=$Ve(t,TVe),b=PVe({x:r,y:i,top:l,left:u,width:h,height:p},x);return!Qe(r)||!Qe(i)||!Qe(h)||!Qe(p)||!Qe(l)||!Qe(u)?null:V.createElement("path",cO({},kt(b,!0),{className:Xt("recharts-cross",v),d:DVe(r,i,h,p,l,u)}))},FVe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function f0(e){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f0(e)}function BVe(e,t){if(e==null)return{};var n=UVe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function UVe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function lu(){return lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lu.apply(this,arguments)}function nU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function m0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nU(Object(n),!0).forEach(function(r){VVe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VVe(e,t,n){return t=zVe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zVe(e){var t=HVe(e,"string");return f0(t)=="symbol"?t:t+""}function HVe(e,t){if(f0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(f0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WVe=function(t,n,r,a){var i="";return a.forEach(function(o,l){var c=Jn(n,r,t,o);l?i+="L ".concat(c.x,",").concat(c.y):i+="M ".concat(c.x,",").concat(c.y)}),i+="Z",i},qVe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var c=m0({stroke:"#ccc"},kt(t,!1));return V.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(u){var d=Jn(n,r,a,u),h=Jn(n,r,i,u);return V.createElement("line",lu({},c,{key:"line-".concat(u),x1:d.x,y1:d.y,x2:h.x,y2:h.y}))}))},KVe=function(t){var n=t.cx,r=t.cy,a=t.radius,i=t.index,o=m0(m0({stroke:"#ccc"},kt(t,!1)),{},{fill:"none"});return V.createElement("circle",lu({},o,{className:Xt("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:n,cy:r,r:a}))},GVe=function(t){var n=t.radius,r=t.index,a=m0(m0({stroke:"#ccc"},kt(t,!1)),{},{fill:"none"});return V.createElement("path",lu({},a,{className:Xt("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(r),d:WVe(n,t.cx,t.cy,t.polarAngles)}))},YVe=function(t){var n=t.polarRadius,r=t.gridType;return!n||!n.length?null:V.createElement("g",{className:"recharts-polar-grid-concentric"},n.map(function(a,i){var o=i;return r==="circle"?V.createElement(KVe,lu({key:o},t,{radius:a,index:i})):V.createElement(GVe,lu({key:o},t,{radius:a,index:i}))}))},YX=function(t){var n=t.cx,r=n===void 0?0:n,a=t.cy,i=a===void 0?0:a,o=t.innerRadius,l=o===void 0?0:o,c=t.outerRadius,u=c===void 0?0:c,d=t.gridType,h=d===void 0?"polygon":d,m=t.radialLines,p=m===void 0?!0:m,v=BVe(t,FVe);return u<=0?null:V.createElement("g",{className:"recharts-polar-grid"},V.createElement(qVe,lu({cx:r,cy:i,innerRadius:l,outerRadius:u,gridType:h,radialLines:p},v)),V.createElement(YVe,lu({cx:r,cy:i,innerRadius:l,outerRadius:u,gridType:h,radialLines:p},v)))};YX.displayName="PolarGrid";var QVe=NN,XVe=rX,JVe=dc;function ZVe(e,t){return e&&e.length?QVe(e,JVe(t),XVe):void 0}var e8e=ZVe;const t8e=Zn(e8e);var n8e=NN,r8e=dc,a8e=aX;function s8e(e,t){return e&&e.length?n8e(e,r8e(t),a8e):void 0}var i8e=s8e;const o8e=Zn(i8e);var l8e=["cx","cy","angle","ticks","axisLine"],c8e=["ticks","tick","angle","tickFormatter","stroke"];function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ex.apply(this,arguments)}function rU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ch(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rU(Object(n),!0).forEach(function(r){EN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aU(e,t){if(e==null)return{};var n=u8e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function u8e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function d8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XX(r.key),r)}}function h8e(e,t,n){return t&&sU(e.prototype,t),n&&sU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f8e(e,t,n){return t=h1(t),m8e(e,QX()?Reflect.construct(t,n||[],h1(e).constructor):t.apply(e,n))}function m8e(e,t){if(t&&(mg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p8e(e)}function p8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QX=function(){return!!e})()}function h1(e){return h1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},h1(e)}function g8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uO(e,t)}function uO(e,t){return uO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},uO(e,t)}function EN(e,t,n){return t=XX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XX(e){var t=v8e(e,"string");return mg(t)=="symbol"?t:t+""}function v8e(e,t){if(mg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pv=function(e){function t(){return d8e(this,t),f8e(this,t,arguments)}return g8e(t,e),h8e(t,[{key:"getTickValueCoord",value:function(r){var a=r.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Jn(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,a;switch(r){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=t8e(l,function(d){return d.coordinate||0}),u=o8e(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=aU(r,l8e),d=l.reduce(function(v,x){return[Math.min(v[0],x.coordinate),Math.max(v[1],x.coordinate)]},[1/0,-1/0]),h=Jn(a,i,d[0],o),m=Jn(a,i,d[1],o),p=Ch(Ch(Ch({},kt(u,!1)),{},{fill:"none"},kt(c,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return V.createElement("line",ex({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=aU(a,c8e),h=this.getTickTextAnchor(),m=kt(d,!1),p=kt(o,!1),v=i.map(function(x,b){var _=r.getTickValueCoord(x),j=Ch(Ch(Ch(Ch({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(_.x,", ").concat(_.y,")")},m),{},{stroke:"none",fill:u},p),{},{index:b},_),{},{payload:x});return V.createElement(jn,ex({className:Xt("recharts-polar-radius-axis-tick",IX(o)),key:"tick-".concat(x.coordinate)},Pf(r.props,x,b)),t.renderTickItem(o,j,c?c(x.value,b):x.value))});return V.createElement(jn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.axisLine,o=r.tick;return!a||!a.length?null:V.createElement(jn,{className:Xt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Wa.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,a,i){var o;return V.isValidElement(r)?o=V.cloneElement(r,a):Ut(r)?o=r(a):o=V.createElement(Of,ex({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(g.PureComponent);EN(pv,"displayName","PolarRadiusAxis");EN(pv,"axisType","radiusAxis");EN(pv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function pg(e){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pg(e)}function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vh.apply(this,arguments)}function iU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ah(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iU(Object(n),!0).forEach(function(r){TN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZX(r.key),r)}}function x8e(e,t,n){return t&&oU(e.prototype,t),n&&oU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b8e(e,t,n){return t=f1(t),w8e(e,JX()?Reflect.construct(t,n||[],f1(e).constructor):t.apply(e,n))}function w8e(e,t){if(t&&(pg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _8e(e)}function _8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JX=function(){return!!e})()}function f1(e){return f1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},f1(e)}function j8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dO(e,t)}function dO(e,t){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},dO(e,t)}function TN(e,t,n){return t=ZX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZX(e){var t=S8e(e,"string");return pg(t)=="symbol"?t:t+""}function S8e(e,t){if(pg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N8e=Math.PI/180,lU=1e-5,gv=function(e){function t(){return y8e(this,t),b8e(this,t,arguments)}return j8e(t,e),x8e(t,[{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,h=Jn(i,o,l,r.coordinate),m=Jn(i,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(r){var a=this.props.orientation,i=Math.cos(-r.coordinate*N8e),o;return i>lU?o=a==="outer"?"start":"end":i<-lU?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=Ah(Ah({},kt(this.props,!1)),{},{fill:"none"},kt(l,!1));if(c==="circle")return V.createElement(mv,Vh({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,h=d.map(function(m){return Jn(a,i,o,m.coordinate)});return V.createElement(GX,Vh({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=kt(this.props,!1),h=kt(o,!1),m=Ah(Ah({},d),{},{fill:"none"},kt(l,!1)),p=i.map(function(v,x){var b=r.getTickLineCoord(v),_=r.getTickTextAnchor(v),j=Ah(Ah(Ah({textAnchor:_},d),{},{stroke:"none",fill:u},h),{},{index:x,payload:v,x:b.x2,y:b.y2});return V.createElement(jn,Vh({className:Xt("recharts-polar-angle-axis-tick",IX(o)),key:"tick-".concat(v.coordinate)},Pf(r.props,v,x)),l&&V.createElement("line",Vh({className:"recharts-polar-angle-axis-tick-line"},m,b)),o&&t.renderTickItem(o,j,c?c(v.value,x):v.value))});return V.createElement(jn,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!a||!a.length?null:V.createElement(jn,{className:Xt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,a,i){var o;return V.isValidElement(r)?o=V.cloneElement(r,a):Ut(r)?o=r(a):o=V.createElement(Of,Vh({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(g.PureComponent);TN(gv,"displayName","PolarAngleAxis");TN(gv,"axisType","angleAxis");TN(gv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var k8e=ZY,C8e=k8e(Object.getPrototypeOf,Object),A8e=C8e,E8e=mu,T8e=A8e,P8e=pu,O8e="[object Object]",I8e=Function.prototype,R8e=Object.prototype,eJ=I8e.toString,$8e=R8e.hasOwnProperty,M8e=eJ.call(Object);function D8e(e){if(!P8e(e)||E8e(e)!=O8e)return!1;var t=T8e(e);if(t===null)return!0;var n=$8e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&eJ.call(n)==M8e}var L8e=D8e;const F8e=Zn(L8e);var B8e=mu,U8e=pu,V8e="[object Boolean]";function z8e(e){return e===!0||e===!1||U8e(e)&&B8e(e)==V8e}var H8e=z8e;const W8e=Zn(H8e);function p0(e){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p0(e)}function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m1.apply(this,arguments)}function q8e(e,t){return Q8e(e)||Y8e(e,t)||G8e(e,t)||K8e()}function K8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G8e(e,t){if(e){if(typeof e=="string")return cU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cU(e,t)}}function cU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y8e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Q8e(e){if(Array.isArray(e))return e}function uU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function dU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uU(Object(n),!0).forEach(function(r){X8e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X8e(e,t,n){return t=J8e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J8e(e){var t=Z8e(e,"string");return p0(t)=="symbol"?t:t+""}function Z8e(e,t){if(p0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(p0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hU=function(t,n,r,a,i){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+i),l+="L ".concat(t+r-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},eze={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tze=function(t){var n=dU(dU({},eze),t),r=g.useRef(),a=g.useState(-1),i=q8e(a,2),o=i[0],l=i[1];g.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,m=n.height,p=n.className,v=n.animationEasing,x=n.animationDuration,b=n.animationBegin,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||m!==+m||d===0&&h===0||m===0)return null;var j=Xt("recharts-trapezoid",p);return _?V.createElement(Do,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:m,x:c,y:u},duration:x,animationEasing:v,isActive:_},function(w){var N=w.upperWidth,k=w.lowerWidth,C=w.height,A=w.x,P=w.y;return V.createElement(Do,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,easing:v},V.createElement("path",m1({},kt(n,!0),{className:j,d:hU(A,P,N,k,C),ref:r})))}):V.createElement("g",null,V.createElement("path",m1({},kt(n,!0),{className:j,d:hU(c,u,d,h,m)})))},nze=["option","shapeType","propTransformer","activeClassName","isActive"];function g0(e){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g0(e)}function rze(e,t){if(e==null)return{};var n=aze(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aze(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function p1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fU(Object(n),!0).forEach(function(r){sze(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sze(e,t,n){return t=ize(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ize(e){var t=oze(e,"string");return g0(t)=="symbol"?t:t+""}function oze(e,t){if(g0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(g0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lze(e,t){return p1(p1({},t),e)}function cze(e,t){return e==="symbols"}function mU(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return V.createElement(_$,n);case"trapezoid":return V.createElement(tze,n);case"sector":return V.createElement(DX,n);case"symbols":if(cze(t))return V.createElement(UR,n);break;default:return null}}function uze(e){return g.isValidElement(e)?e.props:e}function tJ(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?lze:r,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=rze(e,nze),u;if(g.isValidElement(t))u=g.cloneElement(t,p1(p1({},c),uze(t)));else if(Ut(t))u=t(c);else if(F8e(t)&&!W8e(t)){var d=a(t,c);u=V.createElement(mU,{shapeType:n,elementProps:d})}else{var h=c;u=V.createElement(mU,{shapeType:n,elementProps:h})}return l?V.createElement(jn,{className:o},u):u}function PN(e,t){return t!=null&&"trapezoids"in e.props}function ON(e,t){return t!=null&&"sectors"in e.props}function v0(e,t){return t!=null&&"points"in e.props}function dze(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&i}function hze(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function fze(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function mze(e,t){var n;return PN(e,t)?n=dze:ON(e,t)?n=hze:v0(e,t)&&(n=fze),n}function pze(e,t){var n;return PN(e,t)?n="trapezoids":ON(e,t)?n="sectors":v0(e,t)&&(n="points"),n}function gze(e,t){if(PN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(ON(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return v0(e,t)?t.payload:{}}function vze(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=pze(n,t),i=gze(n,t),o=r.filter(function(c,u){var d=$d(i,c),h=n.props[a].filter(function(v){var x=mze(n,t);return x(v,t)}),m=n.props[a].indexOf(h[h.length-1]),p=u===m;return d&&p}),l=r.indexOf(o[o.length-1]);return l}var E_;function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},op.apply(this,arguments)}function pU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pU(Object(n),!0).forEach(function(r){ko(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rJ(r.key),r)}}function xze(e,t,n){return t&&gU(e.prototype,t),n&&gU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bze(e,t,n){return t=g1(t),wze(e,nJ()?Reflect.construct(t,n||[],g1(e).constructor):t.apply(e,n))}function wze(e,t){if(t&&(gg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ze(e)}function _ze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nJ=function(){return!!e})()}function g1(e){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},g1(e)}function jze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hO(e,t)}function hO(e,t){return hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},hO(e,t)}function ko(e,t,n){return t=rJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rJ(e){var t=Sze(e,"string");return gg(t)=="symbol"?t:t+""}function Sze(e,t){if(gg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kl=function(e){function t(n){var r;return yze(this,t),r=bze(this,t,[n]),ko(r,"pieRef",null),ko(r,"sectorRefs",[]),ko(r,"id",Gf("recharts-pie-")),ko(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ut(a)&&a()}),ko(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ut(a)&&a()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return jze(t,e),xze(t,[{key:"isActiveIndex",value:function(r){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(r)!==-1:r===a}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=kt(this.props,!1),h=kt(o,!1),m=kt(l,!1),p=o&&o.offsetRadius||20,v=r.map(function(x,b){var _=(x.startAngle+x.endAngle)/2,j=Jn(x.cx,x.cy,x.outerRadius+p,_),w=jr(jr(jr(jr({},d),x),{},{stroke:"none"},h),{},{index:b,textAnchor:t.getTextAnchor(j.x,x.cx)},j),N=jr(jr(jr(jr({},d),x),{},{fill:"none",stroke:x.fill},m),{},{index:b,points:[Jn(x.cx,x.cy,x.outerRadius,_),j]}),k=c;return en(c)&&en(u)?k="value":en(c)&&(k=u),V.createElement(jn,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(b)},l&&t.renderLabelLineItem(l,N,"line"),t.renderLabelItem(o,w,Wr(x,k)))});return V.createElement(jn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=a.isActiveIndex(d),m=c&&a.hasActiveIndex()?c:null,p=h?o:m,v=jr(jr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return V.createElement(jn,op({ref:function(b){b&&!a.sectorRefs.includes(b)&&a.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Pf(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),V.createElement(tJ,op({option:p,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=this.state,m=h.prevSectors,p=h.prevIsAnimationActive;return V.createElement(Do,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var x=v.t,b=[],_=i&&i[0],j=_.startAngle;return i.forEach(function(w,N){var k=m&&m[N],C=N>0?Qi(w,"paddingAngle",0):0;if(k){var A=Hr(k.endAngle-k.startAngle,w.endAngle-w.startAngle),P=jr(jr({},w),{},{startAngle:j+C,endAngle:j+A(x)+C});b.push(P),j=P.endAngle}else{var O=w.endAngle,T=w.startAngle,$=Hr(0,O-T),L=$(x),z=jr(jr({},w),{},{startAngle:j+C,endAngle:j+L+C});b.push(z),j=z.endAngle}}),V.createElement(jn,null,r.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(r){var a=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,a=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!$d(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,h=a.innerRadius,m=a.outerRadius,p=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!Qe(u)||!Qe(d)||!Qe(h)||!Qe(m))return null;var x=Xt("recharts-pie",l);return V.createElement(jn,{tabIndex:this.props.rootTabIndex,className:x,ref:function(_){r.pieRef=_}},this.renderSectors(),c&&this.renderLabels(o),Wa.renderCallByParent(this.props,null,!1),(!p||v)&&wl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return a.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:r.sectors!==a.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,a){return r>a?"start":r<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,a,i){if(V.isValidElement(r))return V.cloneElement(r,a);if(Ut(r))return r(a);var o=Xt("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return V.createElement(df,op({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,a,i){if(V.isValidElement(r))return V.cloneElement(r,a);var o=i;if(Ut(r)&&(o=r(a),V.isValidElement(o)))return o;var l=Xt("recharts-pie-label-text",typeof r!="boolean"&&!Ut(r)?r.className:"");return V.createElement(Of,op({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(g.PureComponent);E_=kl;ko(kl,"displayName","Pie");ko(kl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Io.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ko(kl,"parseDeltaAngle",function(e,t){var n=Ks(t-e),r=Math.min(Math.abs(t-e),360);return n*r});ko(kl,"getRealPieData",function(e){var t=e.data,n=e.children,r=kt(e,!1),a=Xi(n,cd);return t&&t.length?t.map(function(i,o){return jr(jr(jr({payload:i},r),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return jr(jr({},r),i.props)}):[]});ko(kl,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,o=PX(a,i),l=r+Gs(e.cx,a,a/2),c=n+Gs(e.cy,i,i/2),u=Gs(e.innerRadius,o,0),d=Gs(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});ko(kl,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?jr(jr({},t.type.defaultProps),t.props):t.props,a=E_.getRealPieData(r);if(!a||!a.length)return null;var i=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,m=r.tooltipType,p=Math.abs(r.minAngle),v=E_.parseCoordinateOfPie(r,n),x=E_.parseDeltaAngle(o,l),b=Math.abs(x),_=u;en(u)&&en(h)?(bl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):en(u)&&(bl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=h);var j=a.filter(function(P){return Wr(P,_,0)!==0}).length,w=(b>=360?j:j-1)*c,N=b-j*p-w,k=a.reduce(function(P,O){var T=Wr(O,_,0);return P+(Qe(T)?T:0)},0),C;if(k>0){var A;C=a.map(function(P,O){var T=Wr(P,_,0),$=Wr(P,d,O),L=(Qe(T)?T:0)/k,z;O?z=A.endAngle+Ks(x)*c*(T!==0?1:0):z=o;var W=z+Ks(x)*((T!==0?p:0)+L*N),B=(z+W)/2,G=(v.innerRadius+v.outerRadius)/2,U=[{name:$,value:T,payload:P,dataKey:_,type:m}],F=Jn(v.cx,v.cy,G,B);return A=jr(jr(jr({percent:L,cornerRadius:i,name:$,tooltipPayload:U,midAngle:B,middleRadius:G,tooltipPosition:F},P),v),{},{value:Wr(P,_),startAngle:z,endAngle:W,payload:P,paddingAngle:Ks(x)*c}),A})}return jr(jr({},v),{},{sectors:C,data:a})});function Nze(e){return e&&e.length?e[0]:void 0}var kze=Nze,Cze=kze;const Aze=Zn(Cze);var Eze=["key"];function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function Tze(e,t){if(e==null)return{};var n=Pze(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pze(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function v1(){return v1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v1.apply(this,arguments)}function vU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vU(Object(n),!0).forEach(function(r){Fc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sJ(r.key),r)}}function Ize(e,t,n){return t&&yU(e.prototype,t),n&&yU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rze(e,t,n){return t=y1(t),$ze(e,aJ()?Reflect.construct(t,n||[],y1(e).constructor):t.apply(e,n))}function $ze(e,t){if(t&&(vg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mze(e)}function Mze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aJ=function(){return!!e})()}function y1(e){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},y1(e)}function Dze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fO(e,t)}function fO(e,t){return fO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},fO(e,t)}function Fc(e,t,n){return t=sJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sJ(e){var t=Lze(e,"string");return vg(t)=="symbol"?t:t+""}function Lze(e,t){if(vg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gb=function(e){function t(){var n;Oze(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Rze(this,t,[].concat(a)),Fc(n,"state",{isAnimationFinished:!1}),Fc(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ut(o)&&o()}),Fc(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ut(o)&&o()}),Fc(n,"handleMouseEnter",function(o){var l=n.props.onMouseEnter;l&&l(n.props,o)}),Fc(n,"handleMouseLeave",function(o){var l=n.props.onMouseLeave;l&&l(n.props,o)}),n}return Dze(t,e),Ize(t,[{key:"renderDots",value:function(r){var a=this.props,i=a.dot,o=a.dataKey,l=kt(this.props,!1),c=kt(i,!0),u=r.map(function(d,h){var m=Fs(Fs(Fs({key:"dot-".concat(h),r:3},l),c),{},{dataKey:o,cx:d.x,cy:d.y,index:h,payload:d});return t.renderDotItem(i,m)});return V.createElement(jn,{className:"recharts-radar-dots"},u)}},{key:"renderPolygonStatically",value:function(r){var a=this.props,i=a.shape,o=a.dot,l=a.isRange,c=a.baseLinePoints,u=a.connectNulls,d;return V.isValidElement(i)?d=V.cloneElement(i,Fs(Fs({},this.props),{},{points:r})):Ut(i)?d=i(Fs(Fs({},this.props),{},{points:r})):d=V.createElement(GX,v1({},kt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:r,baseLinePoints:l?c:null,connectNulls:u})),V.createElement(jn,{className:"recharts-radar-polygon"},d,o?this.renderDots(r):null)}},{key:"renderPolygonWithAnimation",value:function(){var r=this,a=this.props,i=a.points,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=this.state.prevPoints;return V.createElement(Do,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"radar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var p=m.t,v=h&&h.length/i.length,x=i.map(function(b,_){var j=h&&h[Math.floor(_*v)];if(j){var w=Hr(j.x,b.x),N=Hr(j.y,b.y);return Fs(Fs({},b),{},{x:w(p),y:N(p)})}var k=Hr(b.cx,b.x),C=Hr(b.cy,b.y);return Fs(Fs({},b),{},{x:k(p),y:C(p)})});return r.renderPolygonStatically(x)})}},{key:"renderPolygon",value:function(){var r=this.props,a=r.points,i=r.isAnimationActive,o=r.isRange,l=this.state.prevPoints;return i&&a&&a.length&&!o&&(!l||!$d(l,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.className,o=r.points,l=r.isAnimationActive;if(a||!o||!o.length)return null;var c=this.state.isAnimationFinished,u=Xt("recharts-radar",i);return V.createElement(jn,{className:u},this.renderPolygon(),(!l||c)&&wl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:a.curPoints}:r.points!==a.curPoints?{curPoints:r.points}:null}},{key:"renderDotItem",value:function(r,a){var i;if(V.isValidElement(r))i=V.cloneElement(r,a);else if(Ut(r))i=r(a);else{var o=a.key,l=Tze(a,Eze);i=V.createElement(mv,v1({},l,{key:o,className:Xt("recharts-radar-dot",typeof r!="boolean"?r.className:"")}))}return i}}])}(g.PureComponent);Fc(gb,"displayName","Radar");Fc(gb,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Io.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Fc(gb,"getComposedData",function(e){var t=e.radiusAxis,n=e.angleAxis,r=e.displayedData,a=e.dataKey,i=e.bandSize,o=n.cx,l=n.cy,c=!1,u=[],d=n.type!=="number"?i??0:0;r.forEach(function(m,p){var v=Wr(m,n.dataKey,p),x=Wr(m,a),b=n.scale(v)+d,_=Array.isArray(x)?$X(x):x,j=en(_)?void 0:t.scale(_);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(Fs(Fs({},Jn(o,l,j,b)),{},{name:v,value:x,cx:o,cy:l,radius:j,angle:b,payload:m}))});var h=[];return c&&u.forEach(function(m){if(Array.isArray(m.value)){var p=Aze(m.value),v=en(p)?void 0:t.scale(p);h.push(Fs(Fs({},m),{},{radius:v},Jn(o,l,v,m.angle)))}else h.push(m)}),{points:u,isRange:c,baseLinePoints:h}});var Fze=Math.ceil,Bze=Math.max;function Uze(e,t,n,r){for(var a=-1,i=Bze(Fze((t-e)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=e,e+=n;return o}var Vze=Uze,zze=yQ,xU=1/0,Hze=17976931348623157e292;function Wze(e){if(!e)return e===0?e:0;if(e=zze(e),e===xU||e===-xU){var t=e<0?-1:1;return t*Hze}return e===e?e:0}var iJ=Wze,qze=Vze,Kze=yN,XA=iJ;function Gze(e){return function(t,n,r){return r&&typeof r!="number"&&Kze(t,n,r)&&(n=r=void 0),t=XA(t),n===void 0?(n=t,t=0):n=XA(n),r=r===void 0?t<n?1:-1:XA(r),qze(t,n,r,e)}}var Yze=Gze,Qze=Yze,Xze=Qze(),Jze=Xze;const x1=Zn(Jze);function y0(e){"@babel/helpers - typeof";return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y0(e)}function bU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bU(Object(n),!0).forEach(function(r){oJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oJ(e,t,n){return t=Zze(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zze(e){var t=eHe(e,"string");return y0(t)=="symbol"?t:t+""}function eHe(e,t){if(y0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(y0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tHe=["Webkit","Moz","O","ms"],nHe=function(t,n){var r=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=tHe.reduce(function(i,o){return wU(wU({},i),{},oJ({},o+r,n))},{});return a[t]=n,a};function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}function b1(){return b1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b1.apply(this,arguments)}function _U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function JA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_U(Object(n),!0).forEach(function(r){Mi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_U(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cJ(r.key),r)}}function aHe(e,t,n){return t&&jU(e.prototype,t),n&&jU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sHe(e,t,n){return t=w1(t),iHe(e,lJ()?Reflect.construct(t,n||[],w1(e).constructor):t.apply(e,n))}function iHe(e,t){if(t&&(yg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oHe(e)}function oHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lJ=function(){return!!e})()}function w1(e){return w1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w1(e)}function lHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mO(e,t)}function mO(e,t){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},mO(e,t)}function Mi(e,t,n){return t=cJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cJ(e){var t=cHe(e,"string");return yg(t)=="symbol"?t:t+""}function cHe(e,t){if(yg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(yg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uHe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Qy().domain(x1(0,c)).range([i,i+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:d}},SU=function(t){return t.changedTouches&&!!t.changedTouches.length},xg=function(e){function t(n){var r;return rHe(this,t),r=sHe(this,t,[n]),Mi(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Mi(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Mi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),r.detachDragEndListener()}),Mi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Mi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Mi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Mi(r,"handleSlideDragStart",function(a){var i=SU(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return lHe(t,e),aHe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,i=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(a,i),m=Math.max(a,i),p=t.getIndexInRange(o,h),v=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=Wr(i[r],l,r);return Ut(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,m=c.startIndex,p=c.endIndex,v=c.onChange,x=r.pageX-i;x>0?x=Math.min(x,u+d-h-l,u+d-h-o):x<0&&(x=Math.max(x,u-o,u-l));var b=this.getIndex({startX:o+x,endX:l+x});(b.startIndex!==m||b.endIndex!==p)&&v&&v(b),this.setState({startX:o+x,endX:l+x,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var i=SU(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,h=d.x,m=d.width,p=d.travellerWidth,v=d.onChange,x=d.gap,b=d.data,_={startX:this.state.startX,endX:this.state.endX},j=r.pageX-i;j>0?j=Math.min(j,h+m-p-u):j<0&&(j=Math.max(j,h-u)),_[o]=u+j;var w=this.getIndex(_),N=w.startIndex,k=w.endIndex,C=function(){var P=b.length-1;return o==="startX"&&(l>c?N%x===0:k%x===0)||l<c&&k===P||o==="endX"&&(l>c?k%x===0:N%x===0)||l>c&&k===P};this.setState(Mi(Mi({},o,u+j),"brushMoveStartX",r.pageX),function(){v&&C()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],h=l.indexOf(d);if(h!==-1){var m=h+r;if(!(m===-1||m>=l.length)){var p=l[m];a==="startX"&&p>=u||a==="endX"&&p<=c||this.setState(Mi({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return V.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=g.Children.only(u);return h?V.cloneElement(h,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,m=c.traveller,p=c.ariaLabel,v=c.data,x=c.startIndex,b=c.endIndex,_=Math.max(r,this.props.x),j=JA(JA({},kt(this.props,!1)),{},{x:_,y:u,width:d,height:h}),w=p||"Min value: ".concat((i=v[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[b])===null||o===void 0?void 0:o.name);return V.createElement(jn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,j))}},{key:"renderSlide",value:function(r,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(r,a)+u,h=Math.max(Math.abs(a-r)-u,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,i=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,m=d.endX,p=5,v={pointerEvents:"none",fill:u};return V.createElement(jn,{className:"recharts-brush-texts"},V.createElement(Of,b1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-p,y:o+l/2},v),this.getTextOfTick(a)),V.createElement(Of,b1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+c+p,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,a=r.data,i=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,m=this.state,p=m.startX,v=m.endX,x=m.isTextActive,b=m.isSlideMoving,_=m.isTravellerMoving,j=m.isTravellerFocused;if(!a||!a.length||!Qe(l)||!Qe(c)||!Qe(u)||!Qe(d)||u<=0||d<=0)return null;var w=Xt("recharts-brush",i),N=V.Children.count(o)===1,k=nHe("userSelect","none");return V.createElement(jn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(x||b||_||j||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,i=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(i+l/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),V.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var i;return V.isValidElement(r)?i=V.cloneElement(r,a):Ut(r)?i=r(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(r,a){var i=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return JA({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?uHe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(r,a){for(var i=r.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(g.PureComponent);Mi(xg,"displayName","Brush");Mi(xg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var dHe=GR;function hHe(e,t){var n;return dHe(e,function(r,a,i){return n=t(r,a,i),!n}),!!n}var fHe=hHe,mHe=WY,pHe=dc,gHe=fHe,vHe=ki,yHe=yN;function xHe(e,t,n){var r=vHe(e)?mHe:gHe;return n&&yHe(e,t,n)&&(t=void 0),r(e,pHe(t))}var bHe=xHe;const wHe=Zn(bHe);var nc=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},NU=fQ;function _He(e,t,n){t=="__proto__"&&NU?NU(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var jHe=_He,SHe=jHe,NHe=dQ,kHe=dc;function CHe(e,t){var n={};return t=kHe(t),NHe(e,function(r,a,i){SHe(n,a,t(r,a,i))}),n}var AHe=CHe;const EHe=Zn(AHe);function THe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var PHe=THe,OHe=GR;function IHe(e,t){var n=!0;return OHe(e,function(r,a,i){return n=!!t(r,a,i),n}),n}var RHe=IHe,$He=PHe,MHe=RHe,DHe=dc,LHe=ki,FHe=yN;function BHe(e,t,n){var r=LHe(e)?$He:MHe;return n&&FHe(e,t,n)&&(t=void 0),r(e,DHe(t))}var UHe=BHe;const uJ=Zn(UHe);var VHe=["x","y"];function x0(e){"@babel/helpers - typeof";return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x0(e)}function pO(){return pO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pO.apply(this,arguments)}function kU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kU(Object(n),!0).forEach(function(r){zHe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zHe(e,t,n){return t=HHe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HHe(e){var t=WHe(e,"string");return x0(t)=="symbol"?t:t+""}function WHe(e,t){if(x0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(x0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qHe(e,t){if(e==null)return{};var n=KHe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function KHe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function GHe(e,t){var n=e.x,r=e.y,a=qHe(e,VHe),i="".concat(n),o=parseInt(i,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),h="".concat(t.width||a.width),m=parseInt(h,10);return _y(_y(_y(_y(_y({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function CU(e){return V.createElement(tJ,pO({shapeType:"rectangle",propTransformer:GHe,activeClassName:"recharts-active-bar"},e))}var YHe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var i=Qe(r)||ZAe(r);return i?t(r,a):(i||Rf(),n)}},QHe=["value","background"],dJ;function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function XHe(e,t){if(e==null)return{};var n=JHe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function JHe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _1(){return _1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_1.apply(this,arguments)}function AU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AU(Object(n),!0).forEach(function(r){dd(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fJ(r.key),r)}}function eWe(e,t,n){return t&&EU(e.prototype,t),n&&EU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tWe(e,t,n){return t=j1(t),nWe(e,hJ()?Reflect.construct(t,n||[],j1(e).constructor):t.apply(e,n))}function nWe(e,t){if(t&&(bg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rWe(e)}function rWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hJ=function(){return!!e})()}function j1(e){return j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},j1(e)}function aWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gO(e,t)}function gO(e,t){return gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},gO(e,t)}function dd(e,t,n){return t=fJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fJ(e){var t=sWe(e,"string");return bg(t)=="symbol"?t:t+""}function sWe(e,t){if(bg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Md=function(e){function t(){var n;ZHe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=tWe(this,t,[].concat(a)),dd(n,"state",{isAnimationFinished:!1}),dd(n,"id",Gf("recharts-bar-")),dd(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),dd(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return aWe(t,e),eWe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=kt(this.props,!1);return r&&r.map(function(h,m){var p=m===c,v=p?u:o,x=ja(ja(ja({},d),h),{},{isActive:p,option:v,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return V.createElement(jn,_1({className:"recharts-bar-rectangle"},Pf(a.props,h,m),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(m)}),V.createElement(CU,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,h=a.animationId,m=this.state.prevData;return V.createElement(Do,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,x=i.map(function(b,_){var j=m&&m[_];if(j){var w=Hr(j.x,b.x),N=Hr(j.y,b.y),k=Hr(j.width,b.width),C=Hr(j.height,b.height);return ja(ja({},b),{},{x:w(v),y:N(v),width:k(v),height:C(v)})}if(o==="horizontal"){var A=Hr(0,b.height),P=A(v);return ja(ja({},b),{},{y:b.y+b.height-P,height:P})}var O=Hr(0,b.width),T=O(v);return ja(ja({},b),{},{width:T})});return V.createElement(jn,null,r.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!$d(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=kt(this.props.background,!1);return i.map(function(u,d){u.value;var h=u.background,m=XHe(u,QHe);if(!h)return null;var p=ja(ja(ja(ja(ja({},m),{},{fill:"#eee"},h),c),Pf(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return V.createElement(CU,_1({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=Xi(d,pb);if(!h)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,p=function(b,_){var j=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:j,errorVal:Wr(b,_)}},v={clipPath:r?"url(#clipPath-".concat(a,")"):null};return V.createElement(jn,v,h.map(function(x){return V.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,m=r.height,p=r.isAnimationActive,v=r.background,x=r.id;if(a||!i||!i.length)return null;var b=this.state.isAnimationFinished,_=Xt("recharts-bar",o),j=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,N=j||w,k=en(x)?this.id:x;return V.createElement(jn,{className:_},j||w?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(k)},V.createElement("rect",{x:j?u:u-h/2,y:w?d:d-m/2,width:j?h:h*2,height:w?m:m*2}))):null,V.createElement(jn,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(k,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,k),(!p||b)&&wl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(g.PureComponent);dJ=Md;dd(Md,"displayName","Bar");dd(Md,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Io.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});dd(Md,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,p=vBe(r,n);if(!p)return null;var v=t.layout,x=n.type.defaultProps,b=x!==void 0?ja(ja({},x),n.props):n.props,_=b.dataKey,j=b.children,w=b.minPointSize,N=v==="horizontal"?o:i,k=u?N.scale.domain():null,C=SBe({numericAxis:N}),A=Xi(j,cd),P=h.map(function(O,T){var $,L,z,W,B,G;u?$=yBe(u[d+T],k):($=Wr(O,_),Array.isArray($)||($=[C,$]));var U=YHe(w,dJ.defaultProps.minPointSize)($[1],T);if(v==="horizontal"){var F,K=[o.scale($[0]),o.scale($[1])],X=K[0],se=K[1];L=pB({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:O,index:T}),z=(F=se??X)!==null&&F!==void 0?F:void 0,W=p.size;var D=X-se;if(B=Number.isNaN(D)?0:D,G={x:L,y:o.y,width:W,height:o.height},Math.abs(U)>0&&Math.abs(B)<Math.abs(U)){var Y=Ks(B||U)*(Math.abs(U)-Math.abs(B));z-=Y,B+=Y}}else{var ue=[i.scale($[0]),i.scale($[1])],xe=ue[0],Ne=ue[1];if(L=xe,z=pB({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:O,index:T}),W=Ne-xe,B=p.size,G={x:i.x,y:z,width:i.width,height:B},Math.abs(U)>0&&Math.abs(W)<Math.abs(U)){var oe=Ks(W||U)*(Math.abs(U)-Math.abs(W));W+=oe}}return ja(ja(ja({},O),{},{x:L,y:z,width:W,height:B,value:u?$:$[1],payload:O,background:G},A&&A[T]&&A[T].props),{},{tooltipPayload:[EX(n,O)],tooltipPosition:{x:L+W/2,y:z+B/2}})});return ja({data:P,layout:v},m)});function b0(e){"@babel/helpers - typeof";return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b0(e)}function iWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mJ(r.key),r)}}function oWe(e,t,n){return t&&TU(e.prototype,t),n&&TU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function PU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PU(Object(n),!0).forEach(function(r){IN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IN(e,t,n){return t=mJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mJ(e){var t=lWe(e,"string");return b0(t)=="symbol"?t:t+""}function lWe(e,t){if(b0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(b0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j$=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},m=!!Bi(u,Md);return d.reduce(function(p,v){var x=n[v],b=x.orientation,_=x.domain,j=x.padding,w=j===void 0?{}:j,N=x.mirror,k=x.reversed,C="".concat(b).concat(N?"Mirror":""),A,P,O,T,$;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var L=_[1]-_[0],z=1/0,W=x.categoricalDomain.sort(nEe);if(W.forEach(function(ue,xe){xe>0&&(z=Math.min((ue||0)-(W[xe-1]||0),z))}),Number.isFinite(z)){var B=z/L,G=x.layout==="vertical"?r.height:r.width;if(x.padding==="gap"&&(A=B*G/2),x.padding==="no-gap"){var U=Gs(t.barCategoryGap,B*G),F=B*G/2;A=F-U-(F-U)/G*U}}}a==="xAxis"?P=[r.left+(w.left||0)+(A||0),r.left+r.width-(w.right||0)-(A||0)]:a==="yAxis"?P=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(A||0),r.top+r.height-(w.bottom||0)-(A||0)]:P=x.range,k&&(P=[P[1],P[0]]);var K=NX(x,i,m),X=K.scale,se=K.realScaleType;X.domain(_).range(P),kX(X);var D=CX(X,cl(cl({},x),{},{realScaleType:se}));a==="xAxis"?($=b==="top"&&!N||b==="bottom"&&N,O=r.left,T=h[C]-$*x.height):a==="yAxis"&&($=b==="left"&&!N||b==="right"&&N,O=h[C]-$*x.width,T=r.top);var Y=cl(cl(cl({},x),D),{},{realScaleType:se,x:O,y:T,scale:X,width:a==="xAxis"?r.width:x.width,height:a==="yAxis"?r.height:x.height});return Y.bandSize=s1(Y,D),!x.hide&&a==="xAxis"?h[C]+=($?-1:1)*Y.height:x.hide||(h[C]+=($?-1:1)*Y.width),cl(cl({},p),{},IN({},v,Y))},{})},pJ=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(a,o),width:Math.abs(i-r),height:Math.abs(o-a)}},cWe=function(t){var n=t.x1,r=t.y1,a=t.x2,i=t.y2;return pJ({x:n,y:r},{x:a,y:i})},gJ=function(){function e(t){iWe(this,e),this.scale=t}return oWe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],i=r[r.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();IN(gJ,"EPS",1e-4);var S$=function(t){var n=Object.keys(t).reduce(function(r,a){return cl(cl({},r),{},IN({},a,gJ.create(t[a])))},{});return cl(cl({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return EHe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return uJ(a,function(i,o){return n[o].isInRange(i)})}})};function uWe(e){return(e%180+180)%180}var dWe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=uWe(a),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},hWe=dc,fWe=ub,mWe=gN;function pWe(e){return function(t,n,r){var a=Object(t);if(!fWe(t)){var i=hWe(n);t=mWe(t),n=function(l){return i(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var gWe=pWe,vWe=iJ;function yWe(e){var t=vWe(e),n=t%1;return t===t?n?t-n:t:0}var xWe=yWe,bWe=sQ,wWe=dc,_We=xWe,jWe=Math.max;function SWe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:_We(n);return a<0&&(a=jWe(r+a,0)),bWe(e,wWe(t),a)}var NWe=SWe,kWe=gWe,CWe=NWe,AWe=kWe(CWe),EWe=AWe;const TWe=Zn(EWe);var PWe=rAe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),N$=g.createContext(void 0),k$=g.createContext(void 0),vJ=g.createContext(void 0),yJ=g.createContext({}),xJ=g.createContext(void 0),bJ=g.createContext(0),wJ=g.createContext(0),OU=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=PWe(i);return V.createElement(N$.Provider,{value:r},V.createElement(k$.Provider,{value:a},V.createElement(yJ.Provider,{value:i},V.createElement(vJ.Provider,{value:d},V.createElement(xJ.Provider,{value:o},V.createElement(bJ.Provider,{value:u},V.createElement(wJ.Provider,{value:c},l)))))))},OWe=function(){return g.useContext(xJ)},_J=function(t){var n=g.useContext(N$);n==null&&Rf();var r=n[t];return r==null&&Rf(),r},IWe=function(){var t=g.useContext(N$);return Ju(t)},RWe=function(){var t=g.useContext(k$),n=TWe(t,function(r){return uJ(r.domain,Number.isFinite)});return n||Ju(t)},jJ=function(t){var n=g.useContext(k$);n==null&&Rf();var r=n[t];return r==null&&Rf(),r},$We=function(){var t=g.useContext(vJ);return t},MWe=function(){return g.useContext(yJ)},C$=function(){return g.useContext(wJ)},A$=function(){return g.useContext(bJ)};function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function DWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LWe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NJ(r.key),r)}}function FWe(e,t,n){return t&&LWe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BWe(e,t,n){return t=S1(t),UWe(e,SJ()?Reflect.construct(t,n||[],S1(e).constructor):t.apply(e,n))}function UWe(e,t){if(t&&(wg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VWe(e)}function VWe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SJ=function(){return!!e})()}function S1(e){return S1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S1(e)}function zWe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vO(e,t)}function vO(e,t){return vO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},vO(e,t)}function IU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function RU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IU(Object(n),!0).forEach(function(r){E$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E$(e,t,n){return t=NJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NJ(e){var t=HWe(e,"string");return wg(t)=="symbol"?t:t+""}function HWe(e,t){if(wg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WWe(e,t){return YWe(e)||GWe(e,t)||KWe(e,t)||qWe()}function qWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KWe(e,t){if(e){if(typeof e=="string")return $U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $U(e,t)}}function $U(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GWe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function YWe(e){if(Array.isArray(e))return e}function yO(){return yO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yO.apply(this,arguments)}var QWe=function(t,n){var r;return V.isValidElement(t)?r=V.cloneElement(t,n):Ut(t)?r=t(n):r=V.createElement("line",yO({},n,{className:"recharts-reference-line-line"})),r},XWe=function(t,n,r,a,i,o,l,c,u){var d=i.x,h=i.y,m=i.width,p=i.height;if(r){var v=u.y,x=t.y.apply(v,{position:o});if(nc(u,"discard")&&!t.y.isInRange(x))return null;var b=[{x:d+m,y:x},{x:d,y:x}];return c==="left"?b.reverse():b}if(n){var _=u.x,j=t.x.apply(_,{position:o});if(nc(u,"discard")&&!t.x.isInRange(j))return null;var w=[{x:j,y:h+p},{x:j,y:h}];return l==="top"?w.reverse():w}if(a){var N=u.segment,k=N.map(function(C){return t.apply(C,{position:o})});return nc(u,"discard")&&wHe(k,function(C){return!t.isInRange(C)})?null:k}return null};function JWe(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=OWe(),d=_J(a),h=jJ(i),m=$We();if(!u||!m)return null;bl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=S$({x:d.scale,y:h.scale}),v=La(t),x=La(n),b=r&&r.length===2,_=XWe(p,v,x,b,m,e.position,d.orientation,h.orientation,e);if(!_)return null;var j=WWe(_,2),w=j[0],N=w.x,k=w.y,C=j[1],A=C.x,P=C.y,O=nc(e,"hidden")?"url(#".concat(u,")"):void 0,T=RU(RU({clipPath:O},kt(e,!0)),{},{x1:N,y1:k,x2:A,y2:P});return V.createElement(jn,{className:Xt("recharts-reference-line",l)},QWe(o,T),Wa.renderCallByParent(e,cWe({x1:N,y1:k,x2:A,y2:P})))}var T$=function(e){function t(){return DWe(this,t),BWe(this,t,arguments)}return zWe(t,e),FWe(t,[{key:"render",value:function(){return V.createElement(JWe,this.props)}}])}(V.Component);E$(T$,"displayName","ReferenceLine");E$(T$,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function xO(){return xO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xO.apply(this,arguments)}function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}function MU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function DU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MU(Object(n),!0).forEach(function(r){RN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eqe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CJ(r.key),r)}}function tqe(e,t,n){return t&&eqe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nqe(e,t,n){return t=N1(t),rqe(e,kJ()?Reflect.construct(t,n||[],N1(e).constructor):t.apply(e,n))}function rqe(e,t){if(t&&(_g(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aqe(e)}function aqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kJ=function(){return!!e})()}function N1(e){return N1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},N1(e)}function sqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bO(e,t)}function bO(e,t){return bO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},bO(e,t)}function RN(e,t,n){return t=CJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CJ(e){var t=iqe(e,"string");return _g(t)=="symbol"?t:t+""}function iqe(e,t){if(_g(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_g(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oqe=function(t){var n=t.x,r=t.y,a=t.xAxis,i=t.yAxis,o=S$({x:a.scale,y:i.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return nc(t,"discard")&&!o.isInRange(l)?null:l},$N=function(e){function t(){return ZWe(this,t),nqe(this,t,arguments)}return sqe(t,e),tqe(t,[{key:"render",value:function(){var r=this.props,a=r.x,i=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=La(a),d=La(i);if(bl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=oqe(this.props);if(!h)return null;var m=h.x,p=h.y,v=this.props,x=v.shape,b=v.className,_=nc(this.props,"hidden")?"url(#".concat(c,")"):void 0,j=DU(DU({clipPath:_},kt(this.props,!0)),{},{cx:m,cy:p});return V.createElement(jn,{className:Xt("recharts-reference-dot",b)},t.renderDot(x,j),Wa.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])}(V.Component);RN($N,"displayName","ReferenceDot");RN($N,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});RN($N,"renderDot",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):Ut(e)?n=e(t):n=V.createElement(mv,xO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function wO(){return wO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wO.apply(this,arguments)}function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function LU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function FU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LU(Object(n),!0).forEach(function(r){MN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cqe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,EJ(r.key),r)}}function uqe(e,t,n){return t&&cqe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dqe(e,t,n){return t=k1(t),hqe(e,AJ()?Reflect.construct(t,n||[],k1(e).constructor):t.apply(e,n))}function hqe(e,t){if(t&&(jg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fqe(e)}function fqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AJ=function(){return!!e})()}function k1(e){return k1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k1(e)}function mqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_O(e,t)}function _O(e,t){return _O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},_O(e,t)}function MN(e,t,n){return t=EJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EJ(e){var t=pqe(e,"string");return jg(t)=="symbol"?t:t+""}function pqe(e,t){if(jg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gqe=function(t,n,r,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,h=i.yAxis;if(!d||!h)return null;var m=S$({x:d.scale,y:h.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:r?m.y.apply(c,{position:"start"}):m.y.rangeMin},v={x:n?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(u,{position:"end"}):m.y.rangeMax};return nc(i,"discard")&&(!m.isInRange(p)||!m.isInRange(v))?null:pJ(p,v)},DN=function(e){function t(){return lqe(this,t),dqe(this,t,arguments)}return mqe(t,e),uqe(t,[{key:"render",value:function(){var r=this.props,a=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;bl(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=La(a),m=La(i),p=La(o),v=La(l),x=this.props.shape;if(!h&&!m&&!p&&!v&&!x)return null;var b=gqe(h,m,p,v,this.props);if(!b&&!x)return null;var _=nc(this.props,"hidden")?"url(#".concat(d,")"):void 0;return V.createElement(jn,{className:Xt("recharts-reference-area",c)},t.renderRect(x,FU(FU({clipPath:_},kt(this.props,!0)),b)),Wa.renderCallByParent(this.props,b))}}])}(V.Component);MN(DN,"displayName","ReferenceArea");MN(DN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});MN(DN,"renderRect",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):Ut(e)?n=e(t):n=V.createElement(_$,wO({},t,{className:"recharts-reference-area-rect"})),n});function TJ(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function vqe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return dWe(r,n)}function yqe(e,t,n){var r=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:r?a:i,end:r?a+o:i+l}:{start:r?a+o:i+l,end:r?a:i}}function C1(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function xqe(e,t){return TJ(e,t+1)}function bqe(e,t,n,r,a){for(var i=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:TJ(r,u)};var x=c,b,_=function(){return b===void 0&&(b=n(v,x)),b},j=v.coordinate,w=c===0||C1(e,j,_,d,l);w||(c=0,d=o,u+=1),w&&(d=j+e*(_()/2+a),c+=u)},m;u<=i.length;)if(m=h(),m)return m.v;return[]}function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}function BU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BU(Object(n),!0).forEach(function(r){wqe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wqe(e,t,n){return t=_qe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _qe(e){var t=jqe(e,"string");return w0(t)=="symbol"?t:t+""}function jqe(e,t){if(w0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(w0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sqe(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var p=i[m],v,x=function(){return v===void 0&&(v=n(p,m)),v};if(m===o-1){var b=e*(p.coordinate+e*x()/2-c);i[m]=p=_s(_s({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[m]=p=_s(_s({},p),{},{tickCoord:p.coordinate});var _=C1(e,p.tickCoord,x,l,c);_&&(c=p.tickCoord-e*(x()/2+a),i[m]=_s(_s({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function Nqe(e,t,n,r,a,i){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=r[l-1],h=n(d,l-1),m=e*(d.coordinate+e*h/2-u);o[l-1]=d=_s(_s({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var p=C1(e,d.tickCoord,function(){return h},c,u);p&&(u=d.tickCoord-e*(h/2+a),o[l-1]=_s(_s({},d),{},{isShow:!0}))}for(var v=i?l-1:l,x=function(j){var w=o[j],N,k=function(){return N===void 0&&(N=n(w,j)),N};if(j===0){var C=e*(w.coordinate-e*k()/2-c);o[j]=w=_s(_s({},w),{},{tickCoord:C<0?w.coordinate-C*e:w.coordinate})}else o[j]=w=_s(_s({},w),{},{tickCoord:w.coordinate});var A=C1(e,w.tickCoord,k,c,u);A&&(c=w.tickCoord+e*(k()/2+a),o[j]=_s(_s({},w),{},{isShow:!0}))},b=0;b<v;b++)x(b);return o}function P$(e,t,n){var r=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!a||!a.length||!r)return[];if(Qe(c)||Io.isSsr)return xqe(a,typeof c=="number"&&Qe(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",v=d&&p==="width"?Yy(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},x=function(w,N){var k=Ut(u)?u(w.value,N):w.value;return p==="width"?vqe(Yy(k,{fontSize:t,letterSpacing:n}),v,h):Yy(k,{fontSize:t,letterSpacing:n})[p]},b=a.length>=2?Ks(a[1].coordinate-a[0].coordinate):1,_=yqe(i,b,p);return c==="equidistantPreserveStart"?bqe(b,_,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=Nqe(b,_,x,a,o,c==="preserveStartEnd"):m=Sqe(b,_,x,a,o),m.filter(function(j){return j.isShow}))}var kqe=["viewBox"],Cqe=["viewBox"],Aqe=["ticks"];function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function lp(){return lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lp.apply(this,arguments)}function UU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UU(Object(n),!0).forEach(function(r){O$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZA(e,t){if(e==null)return{};var n=Eqe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Eqe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Tqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OJ(r.key),r)}}function Pqe(e,t,n){return t&&VU(e.prototype,t),n&&VU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oqe(e,t,n){return t=A1(t),Iqe(e,PJ()?Reflect.construct(t,n||[],A1(e).constructor):t.apply(e,n))}function Iqe(e,t){if(t&&(Sg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rqe(e)}function Rqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PJ=function(){return!!e})()}function A1(e){return A1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},A1(e)}function $qe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jO(e,t)}function jO(e,t){return jO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},jO(e,t)}function O$(e,t,n){return t=OJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OJ(e){var t=Mqe(e,"string");return Sg(t)=="symbol"?t:t+""}function Mqe(e,t){if(Sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vv=function(e){function t(n){var r;return Tqe(this,t),r=Oqe(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return $qe(t,e),Pqe(t,[{key:"shouldComponentUpdate",value:function(r,a){var i=r.viewBox,o=ZA(r,kqe),l=this.props,c=l.viewBox,u=ZA(l,Cqe);return!jp(i,c)||!jp(o,u)||!jp(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,h=a.mirror,m=a.tickMargin,p,v,x,b,_,j,w=h?-1:1,N=r.tickSize||d,k=Qe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=v=r.coordinate,b=o+ +!h*c,x=b-w*N,j=x-w*m,_=k;break;case"left":x=b=r.coordinate,v=i+ +!h*l,p=v-w*N,_=p-w*m,j=k;break;case"right":x=b=r.coordinate,v=i+ +h*l,p=v+w*N,_=p+w*m,j=k;break;default:p=v=r.coordinate,b=o+ +h*c,x=b+w*N,j=x+w*m,_=k;break}return{line:{x1:p,y1:x,x2:v,y2:b},tick:{x:_,y:j}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Oa(Oa(Oa({},kt(this.props,!1)),kt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);h=Oa(Oa({},h),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);h=Oa(Oa({},h),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+l})}return V.createElement("line",lp({},h,{className:Xt("recharts-cartesian-axis-line",Qi(d,"className"))}))}},{key:"renderTicks",value:function(r,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,m=l.unit,p=P$(Oa(Oa({},this.props),{},{ticks:r}),a,i),v=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),b=kt(this.props,!1),_=kt(d,!1),j=Oa(Oa({},b),{},{fill:"none"},kt(c,!1)),w=p.map(function(N,k){var C=o.getTickLineCoord(N),A=C.line,P=C.tick,O=Oa(Oa(Oa(Oa({textAnchor:v,verticalAnchor:x},b),{},{stroke:"none",fill:u},_),P),{},{index:k,payload:N,visibleTicksCount:p.length,tickFormatter:h});return V.createElement(jn,lp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Pf(o.props,N,k)),c&&V.createElement("line",lp({},j,A,{className:Xt("recharts-cartesian-axis-tick-line",Qi(c,"className"))})),d&&t.renderTickItem(d,O,"".concat(Ut(h)?h(N.value,k):N.value).concat(m||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var h=this.props,m=h.ticks,p=ZA(h,Aqe),v=m;return Ut(c)&&(v=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!v||!v.length?null:V.createElement(jn,{className:Xt("recharts-cartesian-axis",u),ref:function(b){r.layerReference=b}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Wa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,i){var o,l=Xt(a.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(r)?o=V.cloneElement(r,Oa(Oa({},a),{},{className:l})):Ut(r)?o=r(Oa(Oa({},a),{},{className:l})):o=V.createElement(Of,lp({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(g.Component);O$(vv,"displayName","CartesianAxis");O$(vv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Dqe=["x1","y1","x2","y2","key"],Lqe=["offset"];function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function zU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zU(Object(n),!0).forEach(function(r){Fqe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fqe(e,t,n){return t=Bqe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bqe(e){var t=Uqe(e,"string");return $f(t)=="symbol"?t:t+""}function Uqe(e,t){if($f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xh.apply(this,arguments)}function HU(e,t){if(e==null)return{};var n=Vqe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vqe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var zqe=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return V.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function IJ(e,t){var n;if(V.isValidElement(e))n=V.cloneElement(e,t);else if(Ut(e))n=e(t);else{var r=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=HU(t,Dqe),u=kt(c,!1);u.offset;var d=HU(u,Lqe);n=V.createElement("line",Xh({},d,{x1:r,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function Hqe(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Ss(Ss({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return IJ(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Wqe(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Ss(Ss({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return IJ(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function qqe(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+a-a)}).sort(function(m,p){return m-p});a!==d[0]&&d.unshift(0);var h=d.map(function(m,p){var v=!d[p+1],x=v?a+o-m:d[p+1]-m;if(x<=0)return null;var b=p%t.length;return V.createElement("rect",{key:"react-".concat(p),y:m,x:r,height:x,width:i,stroke:"none",fill:t[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Kqe(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==d[0]&&d.unshift(0);var h=d.map(function(m,p){var v=!d[p+1],x=v?i+l-m:d[p+1]-m;if(x<=0)return null;var b=p%r.length;return V.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:x,height:c,stroke:"none",fill:r[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Gqe=function(t,n){var r=t.xAxis,a=t.width,i=t.height,o=t.offset;return SX(P$(Ss(Ss(Ss({},vv.defaultProps),r),{},{ticks:Hc(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},Yqe=function(t,n){var r=t.yAxis,a=t.width,i=t.height,o=t.offset;return SX(P$(Ss(Ss(Ss({},vv.defaultProps),r),{},{ticks:Hc(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},Mm={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function cp(e){var t,n,r,a,i,o,l=C$(),c=A$(),u=MWe(),d=Ss(Ss({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Mm.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Mm.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Mm.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Mm.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Mm.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Mm.verticalFill,x:Qe(e.x)?e.x:u.left,y:Qe(e.y)?e.y:u.top,width:Qe(e.width)?e.width:u.width,height:Qe(e.height)?e.height:u.height}),h=d.x,m=d.y,p=d.width,v=d.height,x=d.syncWithTicks,b=d.horizontalValues,_=d.verticalValues,j=IWe(),w=RWe();if(!Qe(p)||p<=0||!Qe(v)||v<=0||!Qe(h)||h!==+h||!Qe(m)||m!==+m)return null;var N=d.verticalCoordinatesGenerator||Gqe,k=d.horizontalCoordinatesGenerator||Yqe,C=d.horizontalPoints,A=d.verticalPoints;if((!C||!C.length)&&Ut(k)){var P=b&&b.length,O=k({yAxis:w?Ss(Ss({},w),{},{ticks:P?b:w.ticks}):void 0,width:l,height:c,offset:u},P?!0:x);bl(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($f(O),"]")),Array.isArray(O)&&(C=O)}if((!A||!A.length)&&Ut(N)){var T=_&&_.length,$=N({xAxis:j?Ss(Ss({},j),{},{ticks:T?_:j.ticks}):void 0,width:l,height:c,offset:u},T?!0:x);bl(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($f($),"]")),Array.isArray($)&&(A=$)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(zqe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),V.createElement(Hqe,Xh({},d,{offset:u,horizontalPoints:C,xAxis:j,yAxis:w})),V.createElement(Wqe,Xh({},d,{offset:u,verticalPoints:A,xAxis:j,yAxis:w})),V.createElement(qqe,Xh({},d,{horizontalPoints:C})),V.createElement(Kqe,Xh({},d,{verticalPoints:A})))}cp.displayName="CartesianGrid";var Qqe=["type","layout","connectNulls","ref"],Xqe=["key"];function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function WU(e,t){if(e==null)return{};var n=Jqe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jqe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function tx(){return tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tx.apply(this,arguments)}function qU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qU(Object(n),!0).forEach(function(r){ul(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dm(e){return n7e(e)||t7e(e)||e7e(e)||Zqe()}function Zqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e7e(e,t){if(e){if(typeof e=="string")return SO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SO(e,t)}}function t7e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function n7e(e){if(Array.isArray(e))return SO(e)}function SO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$J(r.key),r)}}function a7e(e,t,n){return t&&KU(e.prototype,t),n&&KU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s7e(e,t,n){return t=E1(t),i7e(e,RJ()?Reflect.construct(t,n||[],E1(e).constructor):t.apply(e,n))}function i7e(e,t){if(t&&(Ng(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o7e(e)}function o7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RJ=function(){return!!e})()}function E1(e){return E1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},E1(e)}function l7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NO(e,t)}function NO(e,t){return NO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},NO(e,t)}function ul(e,t,n){return t=$J(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $J(e){var t=c7e(e,"string");return Ng(t)=="symbol"?t:t+""}function c7e(e,t){if(Ng(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yv=function(e){function t(){var n;r7e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=s7e(this,t,[].concat(a)),ul(n,"state",{isAnimationFinished:!0,totalLength:0}),ul(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),ul(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(_,j){return _+j});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),h=o%u,m=l-o,p=[],v=0,x=0;v<c.length;x+=c[v],++v)if(x+c[v]>h){p=[].concat(Dm(c.slice(0,v)),[h-x]);break}var b=p.length%2===0?[0,m]:[m];return[].concat(Dm(t.repeat(c,d)),Dm(p),b).map(function(_){return"".concat(_,"px")}).join(", ")}),ul(n,"id",Gf("recharts-line-")),ul(n,"pathRef",function(o){n.mainCurve=o}),ul(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ul(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return l7e(t,e),a7e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=Xi(d,pb);if(!h)return null;var m=function(x,b){return{x:x.x,y:x.y,value:x.value,errorVal:Wr(x.payload,b)}},p={clipPath:r?"url(#clipPath-".concat(a,")"):null};return V.createElement(jn,p,h.map(function(v){return V.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=kt(this.props,!1),m=kt(c,!0),p=u.map(function(x,b){var _=$i($i($i({key:"dot-".concat(b),r:3},h),m),{},{index:b,cx:x.x,cy:x.y,value:x.value,dataKey:d,payload:x.payload,points:u});return t.renderDotItem(c,_)}),v={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return V.createElement(jn,tx({className:"recharts-line-dots",key:"dots"},v),p)}},{key:"renderCurveStatically",value:function(r,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=WU(l,Qqe),m=$i($i($i({},kt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:d});return V.createElement(df,tx({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,p=o.animationId,v=o.animateNewValues,x=o.width,b=o.height,_=this.state,j=_.prevPoints,w=_.totalLength;return V.createElement(Do,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var k=N.t;if(j){var C=j.length/l.length,A=l.map(function(L,z){var W=Math.floor(z*C);if(j[W]){var B=j[W],G=Hr(B.x,L.x),U=Hr(B.y,L.y);return $i($i({},L),{},{x:G(k),y:U(k)})}if(v){var F=Hr(x*2,L.x),K=Hr(b/2,L.y);return $i($i({},L),{},{x:F(k),y:K(k)})}return $i($i({},L),{},{x:L.x,y:L.y})});return i.renderCurveStatically(A,r,a)}var P=Hr(0,w),O=P(k),T;if(c){var $="".concat(c).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});T=i.getStrokeDasharray(O,w,$)}else T=i.generateSimpleStrokeDasharray(w,O);return i.renderCurveStatically(l,r,a,{strokeDasharray:T})})}},{key:"renderCurve",value:function(r,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!$d(u,o))?this.renderCurveWithAnimation(r,a):this.renderCurveStatically(o,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,h=a.top,m=a.left,p=a.width,v=a.height,x=a.isAnimationActive,b=a.id;if(i||!l||!l.length)return null;var _=this.state.isAnimationFinished,j=l.length===1,w=Xt("recharts-line",c),N=u&&u.allowDataOverflow,k=d&&d.allowDataOverflow,C=N||k,A=en(b)?this.id:b,P=(r=kt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},O=P.r,T=O===void 0?3:O,$=P.strokeWidth,L=$===void 0?2:$,z=gY(o)?o:{},W=z.clipDot,B=W===void 0?!0:W,G=T*2+L;return V.createElement(jn,{className:w},N||k?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(A)},V.createElement("rect",{x:N?m:m-p/2,y:k?h:h-v/2,width:N?p:p*2,height:k?v:v*2})),!B&&V.createElement("clipPath",{id:"clipPath-dots-".concat(A)},V.createElement("rect",{x:m-G/2,y:h-G/2,width:p+G,height:v+G}))):null,!j&&this.renderCurve(C,A),this.renderErrorBar(C,A),(j||o)&&this.renderDots(C,B,A),(!x||_)&&wl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:a.curPoints}:r.points!==a.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,a){for(var i=r.length%2!==0?[].concat(Dm(r),[0]):r,o=[],l=0;l<a;++l)o=[].concat(Dm(o),Dm(i));return o}},{key:"renderDotItem",value:function(r,a){var i;if(V.isValidElement(r))i=V.cloneElement(r,a);else if(Ut(r))i=r(a);else{var o=a.key,l=WU(a,Xqe),c=Xt("recharts-line-dot",typeof r!="boolean"?r.className:"");i=V.createElement(mv,tx({key:o},l,{className:c}))}return i}}])}(g.PureComponent);ul(yv,"displayName","Line");ul(yv,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Io.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ul(yv,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,h=c.map(function(m,p){var v=Wr(m,o);return d==="horizontal"?{x:a1({axis:n,ticks:a,bandSize:l,entry:m,index:p}),y:en(v)?null:r.scale(v),value:v,payload:m}:{x:en(v)?null:n.scale(v),y:a1({axis:r,ticks:i,bandSize:l,entry:m,index:p}),value:v,payload:m}});return $i({points:h,layout:d},u)});var u7e=["layout","type","stroke","connectNulls","isRange","ref"],d7e=["key"],MJ;function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function DJ(e,t){if(e==null)return{};var n=h7e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function h7e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Jh(){return Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jh.apply(this,arguments)}function GU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GU(Object(n),!0).forEach(function(r){Yl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FJ(r.key),r)}}function m7e(e,t,n){return t&&YU(e.prototype,t),n&&YU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p7e(e,t,n){return t=T1(t),g7e(e,LJ()?Reflect.construct(t,n||[],T1(e).constructor):t.apply(e,n))}function g7e(e,t){if(t&&(kg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v7e(e)}function v7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LJ=function(){return!!e})()}function T1(e){return T1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},T1(e)}function y7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kO(e,t)}function kO(e,t){return kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},kO(e,t)}function Yl(e,t,n){return t=FJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FJ(e){var t=x7e(e,"string");return kg(t)=="symbol"?t:t+""}function x7e(e,t){if(kg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zd=function(e){function t(){var n;f7e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=p7e(this,t,[].concat(a)),Yl(n,"state",{isAnimationFinished:!0}),Yl(n,"id",Gf("recharts-area-")),Yl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ut(o)&&o()}),Yl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ut(o)&&o()}),n}return y7e(t,e),m7e(t,[{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,m=kt(this.props,!1),p=kt(u,!0),v=d.map(function(b,_){var j=Vu(Vu(Vu({key:"dot-".concat(_),r:3},m),p),{},{index:_,cx:b.x,cy:b.y,dataKey:h,value:b.value,payload:b.payload,points:d});return t.renderDotItem(u,j)}),x={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return V.createElement(jn,Jh({className:"recharts-area-dots"},x),v)}},{key:"renderHorizontalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=ud(o.map(function(m){return m.y||0}));return Qe(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(ud(i.map(function(m){return m.y||0})),h)),Qe(h)?V.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=ud(o.map(function(m){return m.x||0}));return Qe(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(ud(i.map(function(m){return m.x||0})),h)),Qe(h)?V.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,m=l.isRange;l.ref;var p=DJ(l,u7e);return V.createElement(jn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},V.createElement(df,Jh({},kt(p,!0),{points:r,connectNulls:h,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&V.createElement(df,Jh({},kt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&m&&V.createElement(df,Jh({},kt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,p=o.animationId,v=this.state,x=v.prevPoints,b=v.prevBaseLine;return V.createElement(Do,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(x){var w=x.length/l.length,N=l.map(function(P,O){var T=Math.floor(O*w);if(x[T]){var $=x[T],L=Hr($.x,P.x),z=Hr($.y,P.y);return Vu(Vu({},P),{},{x:L(j),y:z(j)})}return P}),k;if(Qe(c)&&typeof c=="number"){var C=Hr(b,c);k=C(j)}else if(en(c)||ov(c)){var A=Hr(b,0);k=A(j)}else k=c.map(function(P,O){var T=Math.floor(O*w);if(b[T]){var $=b[T],L=Hr($.x,P.x),z=Hr($.y,P.y);return Vu(Vu({},P),{},{x:L(j),y:z(j)})}return P});return i.renderAreaStatically(N,k,r,a)}return V.createElement(jn,null,V.createElement("defs",null,V.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(j))),V.createElement(jn,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,r,a)))})}},{key:"renderArea",value:function(r,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!d&&m>0||!$d(d,o)||!$d(h,l))?this.renderAreaWithAnimation(r,a):this.renderAreaStatically(o,l,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,h=a.xAxis,m=a.yAxis,p=a.width,v=a.height,x=a.isAnimationActive,b=a.id;if(i||!l||!l.length)return null;var _=this.state.isAnimationFinished,j=l.length===1,w=Xt("recharts-area",c),N=h&&h.allowDataOverflow,k=m&&m.allowDataOverflow,C=N||k,A=en(b)?this.id:b,P=(r=kt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},O=P.r,T=O===void 0?3:O,$=P.strokeWidth,L=$===void 0?2:$,z=gY(o)?o:{},W=z.clipDot,B=W===void 0?!0:W,G=T*2+L;return V.createElement(jn,{className:w},N||k?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(A)},V.createElement("rect",{x:N?d:d-p/2,y:k?u:u-v/2,width:N?p:p*2,height:k?v:v*2})),!B&&V.createElement("clipPath",{id:"clipPath-dots-".concat(A)},V.createElement("rect",{x:d-G/2,y:u-G/2,width:p+G,height:v+G}))):null,j?null:this.renderArea(C,A),(o||j)&&this.renderDots(C,B,A),(!x||_)&&wl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:r.points!==a.curPoints||r.baseLine!==a.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(g.PureComponent);MJ=Zd;Yl(Zd,"displayName","Area");Yl(Zd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Io.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Yl(Zd,"getBaseValue",function(e,t,n,r){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(Qe(l)&&typeof l=="number")return l;var c=a==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Yl(Zd,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,p=t.layout,v=u&&u.length,x=MJ.getBaseValue(t,n,r,a),b=p==="horizontal",_=!1,j=h.map(function(N,k){var C;v?C=u[d+k]:(C=Wr(N,c),Array.isArray(C)?_=!0:C=[x,C]);var A=C[1]==null||v&&Wr(N,c)==null;return b?{x:a1({axis:r,ticks:i,bandSize:l,entry:N,index:k}),y:A?null:a.scale(C[1]),value:C,payload:N}:{x:A?null:r.scale(C[1]),y:a1({axis:a,ticks:o,bandSize:l,entry:N,index:k}),value:C,payload:N}}),w;return v||_?w=j.map(function(N){var k=Array.isArray(N.value)?N.value[0]:null;return b?{x:N.x,y:k!=null&&N.y!=null?a.scale(k):null}:{x:k!=null?r.scale(k):null,y:N.y}}):w=b?a.scale(x):r.scale(x),Vu({points:j,baseLine:w,layout:p,isRange:_},m)});Yl(Zd,"renderDotItem",function(e,t){var n;if(V.isValidElement(e))n=V.cloneElement(e,t);else if(Ut(e))n=e(t);else{var r=Xt("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=DJ(t,d7e);n=V.createElement(mv,Jh({},i,{key:a,className:r}))}return n});function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function b7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w7e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VJ(r.key),r)}}function _7e(e,t,n){return t&&w7e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j7e(e,t,n){return t=P1(t),S7e(e,BJ()?Reflect.construct(t,n||[],P1(e).constructor):t.apply(e,n))}function S7e(e,t){if(t&&(Cg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N7e(e)}function N7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BJ=function(){return!!e})()}function P1(e){return P1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P1(e)}function k7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CO(e,t)}function CO(e,t){return CO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},CO(e,t)}function UJ(e,t,n){return t=VJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VJ(e){var t=C7e(e,"string");return Cg(t)=="symbol"?t:t+""}function C7e(e,t){if(Cg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AO(){return AO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AO.apply(this,arguments)}function A7e(e){var t=e.xAxisId,n=C$(),r=A$(),a=_J(t);return a==null?null:g.createElement(vv,AO({},a,{className:Xt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Hc(o,!0)}}))}var Ql=function(e){function t(){return b7e(this,t),j7e(this,t,arguments)}return k7e(t,e),_7e(t,[{key:"render",value:function(){return g.createElement(A7e,this.props)}}])}(g.Component);UJ(Ql,"displayName","XAxis");UJ(Ql,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}function E7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T7e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WJ(r.key),r)}}function P7e(e,t,n){return t&&T7e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function O7e(e,t,n){return t=O1(t),I7e(e,zJ()?Reflect.construct(t,n||[],O1(e).constructor):t.apply(e,n))}function I7e(e,t){if(t&&(Ag(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R7e(e)}function R7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zJ=function(){return!!e})()}function O1(e){return O1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O1(e)}function $7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EO(e,t)}function EO(e,t){return EO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},EO(e,t)}function HJ(e,t,n){return t=WJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WJ(e){var t=M7e(e,"string");return Ag(t)=="symbol"?t:t+""}function M7e(e,t){if(Ag(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TO(){return TO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TO.apply(this,arguments)}var D7e=function(t){var n=t.yAxisId,r=C$(),a=A$(),i=jJ(n);return i==null?null:g.createElement(vv,TO({},i,{className:Xt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return Hc(l,!0)}}))},Xl=function(e){function t(){return E7e(this,t),O7e(this,t,arguments)}return $7e(t,e),P7e(t,[{key:"render",value:function(){return g.createElement(D7e,this.props)}}])}(g.Component);HJ(Xl,"displayName","YAxis");HJ(Xl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function QU(e){return U7e(e)||B7e(e)||F7e(e)||L7e()}function L7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F7e(e,t){if(e){if(typeof e=="string")return PO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PO(e,t)}}function B7e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U7e(e){if(Array.isArray(e))return PO(e)}function PO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var OO=function(t,n,r,a,i){var o=Xi(t,T$),l=Xi(t,$N),c=[].concat(QU(o),QU(l)),u=Xi(t,DN),d="".concat(a,"Id"),h=a[0],m=n;if(c.length&&(m=c.reduce(function(x,b){if(b.props[d]===r&&nc(b.props,"extendDomain")&&Qe(b.props[h])){var _=b.props[h];return[Math.min(x[0],_),Math.max(x[1],_)]}return x},m)),u.length){var p="".concat(h,"1"),v="".concat(h,"2");m=u.reduce(function(x,b){if(b.props[d]===r&&nc(b.props,"extendDomain")&&Qe(b.props[p])&&Qe(b.props[v])){var _=b.props[p],j=b.props[v];return[Math.min(x[0],_,j),Math.max(x[1],_,j)]}return x},m)}return i&&i.length&&(m=i.reduce(function(x,b){return Qe(b)?[Math.min(x[0],b),Math.max(x[1],b)]:x},m)),m},qJ={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,h||c,m),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,v=new Array(p);m<p;m++)v[m]=h[m].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,m,p,v){var x=n?n+u:u;if(!this._events[x])return!1;var b=this._events[x],_=arguments.length,j,w;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),_){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,m),!0;case 5:return b.fn.call(b.context,d,h,m,p),!0;case 6:return b.fn.call(b.context,d,h,m,p,v),!0}for(w=1,j=new Array(_-1);w<_;w++)j[w-1]=arguments[w];b.fn.apply(b.context,j)}else{var N=b.length,k;for(w=0;w<N;w++)switch(b[w].once&&this.removeListener(u,b[w].fn,void 0,!0),_){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,d);break;case 3:b[w].fn.call(b[w].context,d,h);break;case 4:b[w].fn.call(b[w].context,d,h,m);break;default:if(!j)for(k=1,j=new Array(_-1);k<_;k++)j[k-1]=arguments[k];b[w].fn.apply(b[w].context,j)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,m){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&o(this,p);else{for(var x=0,b=[],_=v.length;x<_;x++)(v[x].fn!==d||m&&!v[x].once||h&&v[x].context!==h)&&b.push(v[x]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(qJ);var V7e=qJ.exports;const z7e=Zn(V7e);var eE=new z7e,tE="recharts.syncMouseEvents";function _0(e){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_0(e)}function H7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W7e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KJ(r.key),r)}}function q7e(e,t,n){return t&&W7e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nE(e,t,n){return t=KJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KJ(e){var t=K7e(e,"string");return _0(t)=="symbol"?t:t+""}function K7e(e,t){if(_0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var G7e=function(){function e(){H7e(this,e),nE(this,"activeIndex",0),nE(this,"coordinateList",[]),nE(this,"layout","horizontal")}return q7e(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,m=n.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=i+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])}();function Y7e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&Qe(r)&&Qe(a))return!0}return!1}function Q7e(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function GJ(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,i=e.endAngle,o=Jn(t,n,r,a),l=Jn(t,n,r,i);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function X7e(e,t,n){var r,a,i,o;if(e==="horizontal")r=t.x,i=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,m=Jn(l,c,u,h),p=Jn(l,c,d,h);r=m.x,a=m.y,i=p.x,o=p.y}else return GJ(t);return[{x:r,y:a},{x:i,y:o}]}function j0(e){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j0(e)}function XU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function a_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XU(Object(n),!0).forEach(function(r){J7e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function J7e(e,t,n){return t=Z7e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z7e(e){var t=e9e(e,"string");return j0(t)=="symbol"?t:t+""}function e9e(e,t){if(j0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(j0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t9e(e){var t,n,r=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,m=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var v,x=df;if(m==="ScatterChart")v=o,x=LVe;else if(m==="BarChart")v=Q7e(h,o,c,d),x=_$;else if(h==="radial"){var b=GJ(o),_=b.cx,j=b.cy,w=b.radius,N=b.startAngle,k=b.endAngle;v={cx:_,cy:j,startAngle:N,endAngle:k,innerRadius:w,outerRadius:w},x=DX}else v={points:X7e(h,o,c)},x=df;var C=a_(a_(a_(a_({stroke:"#ccc",pointerEvents:"none"},c),v),kt(p,!1)),{},{payload:l,payloadIndex:u,className:Xt("recharts-tooltip-cursor",p.className)});return g.isValidElement(p)?g.cloneElement(p,C):g.createElement(x,C)}var n9e=["item"],r9e=["children","className","width","height","style","compact","title","desc"];function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function up(){return up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},up.apply(this,arguments)}function JU(e,t){return i9e(e)||s9e(e,t)||QJ(e,t)||a9e()}function a9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s9e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function i9e(e){if(Array.isArray(e))return e}function ZU(e,t){if(e==null)return{};var n=o9e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function o9e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function l9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c9e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XJ(r.key),r)}}function u9e(e,t,n){return t&&c9e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d9e(e,t,n){return t=I1(t),h9e(e,YJ()?Reflect.construct(t,n||[],I1(e).constructor):t.apply(e,n))}function h9e(e,t){if(t&&(Eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f9e(e)}function f9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YJ=function(){return!!e})()}function I1(e){return I1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},I1(e)}function m9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IO(e,t)}function IO(e,t){return IO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},IO(e,t)}function Tg(e){return v9e(e)||g9e(e)||QJ(e)||p9e()}function p9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QJ(e,t){if(e){if(typeof e=="string")return RO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RO(e,t)}}function g9e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function v9e(e){if(Array.isArray(e))return RO(e)}function RO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function e6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(n),!0).forEach(function(r){Gt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gt(e,t,n){return t=XJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XJ(e){var t=y9e(e,"string");return Eg(t)=="symbol"?t:t+""}function y9e(e,t){if(Eg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x9e={xAxis:["bottom","top"],yAxis:["left","right"]},b9e={width:"100%",height:"100%"},JJ={x:0,y:0};function s_(e){return e}var w9e=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},_9e=function(t,n,r,a){var i=n.find(function(d){return d&&d.index===r});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return Pe(Pe(Pe({},a),Jn(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return Pe(Pe(Pe({},a),Jn(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return JJ},LN=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Tg(l),Tg(u)):l},[]);return o.length>0?o:t&&t.length&&Qe(a)&&Qe(i)?t.slice(a,i+1):[]};function ZJ(e){return e==="number"?[0,"auto"]:void 0}var $O=function(t,n,r,a){var i=t.graphicalItems,o=t.tooltipAxis,l=LN(n,t);return r<0||!i||!i.length||r>=l.length?null:i.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=h===void 0?l:h;m=Tj(p,o.dataKey,a)}else m=h&&h[r]||l[r];return m?[].concat(Tg(c),[EX(u,m)]):c},[])},t6=function(t,n,r,a){var i=a||{x:t.chartX,y:t.chartY},o=w9e(i,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=dBe(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,m=$O(t,n,d,h),p=_9e(r,l,d,i);return{activeTooltipIndex:d,activeLabel:h,activePayload:m,activeCoordinate:p}}return null},j9e=function(t,n){var r=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,m=t.stackOffset,p=jX(d,i);return r.reduce(function(v,x){var b,_=x.type.defaultProps!==void 0?Pe(Pe({},x.type.defaultProps),x.props):x.props,j=_.type,w=_.dataKey,N=_.allowDataOverflow,k=_.allowDuplicatedCategory,C=_.scale,A=_.ticks,P=_.includeHidden,O=_[o];if(v[O])return v;var T=LN(t.data,{graphicalItems:a.filter(function(D){var Y,ue=o in D.props?D.props[o]:(Y=D.type.defaultProps)===null||Y===void 0?void 0:Y[o];return ue===O}),dataStartIndex:c,dataEndIndex:u}),$=T.length,L,z,W;Y7e(_.domain,N,j)&&(L=KP(_.domain,null,N),p&&(j==="number"||C!=="auto")&&(W=Xy(T,w,"category")));var B=ZJ(j);if(!L||L.length===0){var G,U=(G=_.domain)!==null&&G!==void 0?G:B;if(w){if(L=Xy(T,w,j),j==="category"&&p){var F=tEe(L);k&&F?(z=L,L=x1(0,$)):k||(L=yB(U,L,x).reduce(function(D,Y){return D.indexOf(Y)>=0?D:[].concat(Tg(D),[Y])},[]))}else if(j==="category")k?L=L.filter(function(D){return D!==""&&!en(D)}):L=yB(U,L,x).reduce(function(D,Y){return D.indexOf(Y)>=0||Y===""||en(Y)?D:[].concat(Tg(D),[Y])},[]);else if(j==="number"){var K=gBe(T,a.filter(function(D){var Y,ue,xe=o in D.props?D.props[o]:(Y=D.type.defaultProps)===null||Y===void 0?void 0:Y[o],Ne="hide"in D.props?D.props.hide:(ue=D.type.defaultProps)===null||ue===void 0?void 0:ue.hide;return xe===O&&(P||!Ne)}),w,i,d);K&&(L=K)}p&&(j==="number"||C!=="auto")&&(W=Xy(T,w,"category"))}else p?L=x1(0,$):l&&l[O]&&l[O].hasStack&&j==="number"?L=m==="expand"?[0,1]:AX(l[O].stackGroups,c,u):L=_X(T,a.filter(function(D){var Y=o in D.props?D.props[o]:D.type.defaultProps[o],ue="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return Y===O&&(P||!ue)}),j,d,!0);if(j==="number")L=OO(h,L,O,i,A),U&&(L=KP(U,L,N));else if(j==="category"&&U){var X=U,se=L.every(function(D){return X.indexOf(D)>=0});se&&(L=X)}}return Pe(Pe({},v),{},Gt({},O,Pe(Pe({},_),{},{axisType:i,domain:L,categoricalDomain:W,duplicateDomain:z,originalDomain:(b=_.domain)!==null&&b!==void 0?b:B,isCategorical:p,layout:d})))},{})},S9e=function(t,n){var r=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,m=LN(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),p=m.length,v=jX(d,i),x=-1;return r.reduce(function(b,_){var j=_.type.defaultProps!==void 0?Pe(Pe({},_.type.defaultProps),_.props):_.props,w=j[o],N=ZJ("number");if(!b[w]){x++;var k;return v?k=x1(0,p):l&&l[w]&&l[w].hasStack?(k=AX(l[w].stackGroups,c,u),k=OO(h,k,w,i)):(k=KP(N,_X(m,r.filter(function(C){var A,P,O=o in C.props?C.props[o]:(A=C.type.defaultProps)===null||A===void 0?void 0:A[o],T="hide"in C.props?C.props.hide:(P=C.type.defaultProps)===null||P===void 0?void 0:P.hide;return O===w&&!T}),"number",d),a.defaultProps.allowDataOverflow),k=OO(h,k,w,i)),Pe(Pe({},b),{},Gt({},w,Pe(Pe({axisType:i},a.defaultProps),{},{hide:!0,orientation:Qi(x9e,"".concat(i,".").concat(x%2),null),domain:k,originalDomain:N,isCategorical:v,layout:d})))}return b},{})},N9e=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(a,"Id"),m=Xi(d,i),p={};return m&&m.length?p=j9e(t,{axes:m,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=S9e(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},k9e=function(t){var n=Ju(t),r=Hc(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:YR(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:s1(n,r)}},n6=function(t){var n=t.children,r=t.defaultShowTooltip,a=Bi(n,xg),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},C9e=function(t){return!t||!t.length?!1:t.some(function(n){var r=Kc(n&&n.type);return r&&r.indexOf("Bar")>=0})},r6=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},A9e=function(t,n){var r=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,m=r.margin||{},p=Bi(h,xg),v=Bi(h,Vs),x=Object.keys(c).reduce(function(k,C){var A=c[C],P=A.orientation;return!A.mirror&&!A.hide?Pe(Pe({},k),{},Gt({},P,k[P]+A.width)):k},{left:m.left||0,right:m.right||0}),b=Object.keys(o).reduce(function(k,C){var A=o[C],P=A.orientation;return!A.mirror&&!A.hide?Pe(Pe({},k),{},Gt({},P,Qi(k,"".concat(P))+A.height)):k},{top:m.top||0,bottom:m.bottom||0}),_=Pe(Pe({},b),x),j=_.bottom;p&&(_.bottom+=p.props.height||xg.defaultProps.height),v&&n&&(_=mBe(_,a,r,n));var w=u-_.left-_.right,N=d-_.top-_.bottom;return Pe(Pe({brushBottom:j},_),{},{width:Math.max(w,0),height:Math.max(N,0)})},E9e=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},vb=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,m=function(_,j){var w=j.graphicalItems,N=j.stackGroups,k=j.offset,C=j.updateId,A=j.dataStartIndex,P=j.dataEndIndex,O=_.barSize,T=_.layout,$=_.barGap,L=_.barCategoryGap,z=_.maxBarSize,W=r6(T),B=W.numericAxisName,G=W.cateAxisName,U=C9e(w),F=[];return w.forEach(function(K,X){var se=LN(_.data,{graphicalItems:[K],dataStartIndex:A,dataEndIndex:P}),D=K.type.defaultProps!==void 0?Pe(Pe({},K.type.defaultProps),K.props):K.props,Y=D.dataKey,ue=D.maxBarSize,xe=D["".concat(B,"Id")],Ne=D["".concat(G,"Id")],oe={},ee=c.reduce(function(Tt,ve){var Ce=j["".concat(ve.axisType,"Map")],ye=D["".concat(ve.axisType,"Id")];Ce&&Ce[ye]||ve.axisType==="zAxis"||Rf();var dt=Ce[ye];return Pe(Pe({},Tt),{},Gt(Gt({},ve.axisType,dt),"".concat(ve.axisType,"Ticks"),Hc(dt)))},oe),re=ee[G],Z=ee["".concat(G,"Ticks")],ce=N&&N[xe]&&N[xe].hasStack&&NBe(K,N[xe].stackGroups),ae=Kc(K.type).indexOf("Bar")>=0,Ue=s1(re,Z),Ve=[],ut=U&&hBe({barSize:O,stackGroups:N,totalSize:E9e(ee,G)});if(ae){var Rt,mt,rn=en(ue)?z:ue,yn=(Rt=(mt=s1(re,Z,!0))!==null&&mt!==void 0?mt:rn)!==null&&Rt!==void 0?Rt:0;Ve=fBe({barGap:$,barCategoryGap:L,bandSize:yn!==Ue?yn:Ue,sizeList:ut[Ne],maxBarSize:rn}),yn!==Ue&&(Ve=Ve.map(function(Tt){return Pe(Pe({},Tt),{},{position:Pe(Pe({},Tt.position),{},{offset:Tt.position.offset-yn/2})})}))}var dn=K&&K.type&&K.type.getComposedData;dn&&F.push({props:Pe(Pe({},dn(Pe(Pe({},ee),{},{displayedData:se,props:_,dataKey:Y,item:K,bandSize:Ue,barPosition:Ve,offset:k,stackedData:ce,layout:T,dataStartIndex:A,dataEndIndex:P}))),{},Gt(Gt(Gt({key:K.key||"item-".concat(X)},B,ee[B]),G,ee[G]),"animationId",C)),childIndex:fEe(K,_.children),item:K})}),F},p=function(_,j){var w=_.props,N=_.dataStartIndex,k=_.dataEndIndex,C=_.updateId;if(!h3({props:w}))return null;var A=w.children,P=w.layout,O=w.stackOffset,T=w.data,$=w.reverseStackOrder,L=r6(P),z=L.numericAxisName,W=L.cateAxisName,B=Xi(A,r),G=jBe(T,B,"".concat(z,"Id"),"".concat(W,"Id"),O,$),U=c.reduce(function(D,Y){var ue="".concat(Y.axisType,"Map");return Pe(Pe({},D),{},Gt({},ue,N9e(w,Pe(Pe({},Y),{},{graphicalItems:B,stackGroups:Y.axisType===z&&G,dataStartIndex:N,dataEndIndex:k}))))},{}),F=A9e(Pe(Pe({},U),{},{props:w,graphicalItems:B}),j==null?void 0:j.legendBBox);Object.keys(U).forEach(function(D){U[D]=d(w,U[D],F,D.replace("Map",""),n)});var K=U["".concat(W,"Map")],X=k9e(K),se=m(w,Pe(Pe({},U),{},{dataStartIndex:N,dataEndIndex:k,updateId:C,graphicalItems:B,stackGroups:G,offset:F}));return Pe(Pe({formattedGraphicalItems:se,graphicalItems:B,offset:F,stackGroups:G},X),U)},v=function(b){function _(j){var w,N,k;return l9e(this,_),k=d9e(this,_,[j]),Gt(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Gt(k,"accessibilityManager",new G7e),Gt(k,"handleLegendBBoxUpdate",function(C){if(C){var A=k.state,P=A.dataStartIndex,O=A.dataEndIndex,T=A.updateId;k.setState(Pe({legendBBox:C},p({props:k.props,dataStartIndex:P,dataEndIndex:O,updateId:T},Pe(Pe({},k.state),{},{legendBBox:C}))))}}),Gt(k,"handleReceiveSyncEvent",function(C,A,P){if(k.props.syncId===C){if(P===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(A)}}),Gt(k,"handleBrushChange",function(C){var A=C.startIndex,P=C.endIndex;if(A!==k.state.dataStartIndex||P!==k.state.dataEndIndex){var O=k.state.updateId;k.setState(function(){return Pe({dataStartIndex:A,dataEndIndex:P},p({props:k.props,dataStartIndex:A,dataEndIndex:P,updateId:O},k.state))}),k.triggerSyncEvent({dataStartIndex:A,dataEndIndex:P})}}),Gt(k,"handleMouseEnter",function(C){var A=k.getMouseInfo(C);if(A){var P=Pe(Pe({},A),{},{isTooltipActive:!0});k.setState(P),k.triggerSyncEvent(P);var O=k.props.onMouseEnter;Ut(O)&&O(P,C)}}),Gt(k,"triggeredAfterMouseMove",function(C){var A=k.getMouseInfo(C),P=A?Pe(Pe({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(P),k.triggerSyncEvent(P);var O=k.props.onMouseMove;Ut(O)&&O(P,C)}),Gt(k,"handleItemMouseEnter",function(C){k.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),Gt(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Gt(k,"handleMouseMove",function(C){C.persist(),k.throttleTriggeredAfterMouseMove(C)}),Gt(k,"handleMouseLeave",function(C){k.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};k.setState(A),k.triggerSyncEvent(A);var P=k.props.onMouseLeave;Ut(P)&&P(A,C)}),Gt(k,"handleOuterEvent",function(C){var A=hEe(C),P=Qi(k.props,"".concat(A));if(A&&Ut(P)){var O,T;/.*touch.*/i.test(A)?T=k.getMouseInfo(C.changedTouches[0]):T=k.getMouseInfo(C),P((O=T)!==null&&O!==void 0?O:{},C)}}),Gt(k,"handleClick",function(C){var A=k.getMouseInfo(C);if(A){var P=Pe(Pe({},A),{},{isTooltipActive:!0});k.setState(P),k.triggerSyncEvent(P);var O=k.props.onClick;Ut(O)&&O(P,C)}}),Gt(k,"handleMouseDown",function(C){var A=k.props.onMouseDown;if(Ut(A)){var P=k.getMouseInfo(C);A(P,C)}}),Gt(k,"handleMouseUp",function(C){var A=k.props.onMouseUp;if(Ut(A)){var P=k.getMouseInfo(C);A(P,C)}}),Gt(k,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),Gt(k,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&k.handleMouseDown(C.changedTouches[0])}),Gt(k,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&k.handleMouseUp(C.changedTouches[0])}),Gt(k,"handleDoubleClick",function(C){var A=k.props.onDoubleClick;if(Ut(A)){var P=k.getMouseInfo(C);A(P,C)}}),Gt(k,"handleContextMenu",function(C){var A=k.props.onContextMenu;if(Ut(A)){var P=k.getMouseInfo(C);A(P,C)}}),Gt(k,"triggerSyncEvent",function(C){k.props.syncId!==void 0&&eE.emit(tE,k.props.syncId,C,k.eventEmitterSymbol)}),Gt(k,"applySyncEvent",function(C){var A=k.props,P=A.layout,O=A.syncMethod,T=k.state.updateId,$=C.dataStartIndex,L=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)k.setState(Pe({dataStartIndex:$,dataEndIndex:L},p({props:k.props,dataStartIndex:$,dataEndIndex:L,updateId:T},k.state)));else if(C.activeTooltipIndex!==void 0){var z=C.chartX,W=C.chartY,B=C.activeTooltipIndex,G=k.state,U=G.offset,F=G.tooltipTicks;if(!U)return;if(typeof O=="function")B=O(F,C);else if(O==="value"){B=-1;for(var K=0;K<F.length;K++)if(F[K].value===C.activeLabel){B=K;break}}var X=Pe(Pe({},U),{},{x:U.left,y:U.top}),se=Math.min(z,X.x+X.width),D=Math.min(W,X.y+X.height),Y=F[B]&&F[B].value,ue=$O(k.state,k.props.data,B),xe=F[B]?{x:P==="horizontal"?F[B].coordinate:se,y:P==="horizontal"?D:F[B].coordinate}:JJ;k.setState(Pe(Pe({},C),{},{activeLabel:Y,activeCoordinate:xe,activePayload:ue,activeTooltipIndex:B}))}else k.setState(C)}),Gt(k,"renderCursor",function(C){var A,P=k.state,O=P.isTooltipActive,T=P.activeCoordinate,$=P.activePayload,L=P.offset,z=P.activeTooltipIndex,W=P.tooltipAxisBandSize,B=k.getTooltipEventType(),G=(A=C.props.active)!==null&&A!==void 0?A:O,U=k.props.layout,F=C.key||"_recharts-cursor";return V.createElement(t9e,{key:F,activeCoordinate:T,activePayload:$,activeTooltipIndex:z,chartName:n,element:C,isActive:G,layout:U,offset:L,tooltipAxisBandSize:W,tooltipEventType:B})}),Gt(k,"renderPolarAxis",function(C,A,P){var O=Qi(C,"type.axisType"),T=Qi(k.state,"".concat(O,"Map")),$=C.type.defaultProps,L=$!==void 0?Pe(Pe({},$),C.props):C.props,z=T&&T[L["".concat(O,"Id")]];return g.cloneElement(C,Pe(Pe({},z),{},{className:Xt(O,z.className),key:C.key||"".concat(A,"-").concat(P),ticks:Hc(z,!0)}))}),Gt(k,"renderPolarGrid",function(C){var A=C.props,P=A.radialLines,O=A.polarAngles,T=A.polarRadius,$=k.state,L=$.radiusAxisMap,z=$.angleAxisMap,W=Ju(L),B=Ju(z),G=B.cx,U=B.cy,F=B.innerRadius,K=B.outerRadius;return g.cloneElement(C,{polarAngles:Array.isArray(O)?O:Hc(B,!0).map(function(X){return X.coordinate}),polarRadius:Array.isArray(T)?T:Hc(W,!0).map(function(X){return X.coordinate}),cx:G,cy:U,innerRadius:F,outerRadius:K,key:C.key||"polar-grid",radialLines:P})}),Gt(k,"renderLegend",function(){var C=k.state.formattedGraphicalItems,A=k.props,P=A.children,O=A.width,T=A.height,$=k.props.margin||{},L=O-($.left||0)-($.right||0),z=bX({children:P,formattedGraphicalItems:C,legendWidth:L,legendContent:u});if(!z)return null;var W=z.item,B=ZU(z,n9e);return g.cloneElement(W,Pe(Pe({},B),{},{chartWidth:O,chartHeight:T,margin:$,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Gt(k,"renderTooltip",function(){var C,A=k.props,P=A.children,O=A.accessibilityLayer,T=Bi(P,wo);if(!T)return null;var $=k.state,L=$.isTooltipActive,z=$.activeCoordinate,W=$.activePayload,B=$.activeLabel,G=$.offset,U=(C=T.props.active)!==null&&C!==void 0?C:L;return g.cloneElement(T,{viewBox:Pe(Pe({},G),{},{x:G.left,y:G.top}),active:U,label:B,payload:U?W:[],coordinate:z,accessibilityLayer:O})}),Gt(k,"renderBrush",function(C){var A=k.props,P=A.margin,O=A.data,T=k.state,$=T.offset,L=T.dataStartIndex,z=T.dataEndIndex,W=T.updateId;return g.cloneElement(C,{key:C.key||"_recharts-brush",onChange:e_(k.handleBrushChange,C.props.onChange),data:O,x:Qe(C.props.x)?C.props.x:$.left,y:Qe(C.props.y)?C.props.y:$.top+$.height+$.brushBottom-(P.bottom||0),width:Qe(C.props.width)?C.props.width:$.width,startIndex:L,endIndex:z,updateId:"brush-".concat(W)})}),Gt(k,"renderReferenceElement",function(C,A,P){if(!C)return null;var O=k,T=O.clipPathId,$=k.state,L=$.xAxisMap,z=$.yAxisMap,W=$.offset,B=C.type.defaultProps||{},G=C.props,U=G.xAxisId,F=U===void 0?B.xAxisId:U,K=G.yAxisId,X=K===void 0?B.yAxisId:K;return g.cloneElement(C,{key:C.key||"".concat(A,"-").concat(P),xAxis:L[F],yAxis:z[X],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:T})}),Gt(k,"renderActivePoints",function(C){var A=C.item,P=C.activePoint,O=C.basePoint,T=C.childIndex,$=C.isRange,L=[],z=A.props.key,W=A.item.type.defaultProps!==void 0?Pe(Pe({},A.item.type.defaultProps),A.item.props):A.item.props,B=W.activeDot,G=W.dataKey,U=Pe(Pe({index:T,dataKey:G,cx:P.x,cy:P.y,r:4,fill:w$(A.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},kt(B,!1)),Pj(B));return L.push(_.renderActiveDot(B,U,"".concat(z,"-activePoint-").concat(T))),O?L.push(_.renderActiveDot(B,Pe(Pe({},U),{},{cx:O.x,cy:O.y}),"".concat(z,"-basePoint-").concat(T))):$&&L.push(null),L}),Gt(k,"renderGraphicChild",function(C,A,P){var O=k.filterFormatItem(C,A,P);if(!O)return null;var T=k.getTooltipEventType(),$=k.state,L=$.isTooltipActive,z=$.tooltipAxis,W=$.activeTooltipIndex,B=$.activeLabel,G=k.props.children,U=Bi(G,wo),F=O.props,K=F.points,X=F.isRange,se=F.baseLine,D=O.item.type.defaultProps!==void 0?Pe(Pe({},O.item.type.defaultProps),O.item.props):O.item.props,Y=D.activeDot,ue=D.hide,xe=D.activeBar,Ne=D.activeShape,oe=!!(!ue&&L&&U&&(Y||xe||Ne)),ee={};T!=="axis"&&U&&U.props.trigger==="click"?ee={onClick:e_(k.handleItemMouseEnter,C.props.onClick)}:T!=="axis"&&(ee={onMouseLeave:e_(k.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:e_(k.handleItemMouseEnter,C.props.onMouseEnter)});var re=g.cloneElement(C,Pe(Pe({},O.props),ee));function Z(ve){return typeof z.dataKey=="function"?z.dataKey(ve.payload):null}if(oe)if(W>=0){var ce,ae;if(z.dataKey&&!z.allowDuplicatedCategory){var Ue=typeof z.dataKey=="function"?Z:"payload.".concat(z.dataKey.toString());ce=Tj(K,Ue,B),ae=X&&se&&Tj(se,Ue,B)}else ce=K==null?void 0:K[W],ae=X&&se&&se[W];if(Ne||xe){var Ve=C.props.activeIndex!==void 0?C.props.activeIndex:W;return[g.cloneElement(C,Pe(Pe(Pe({},O.props),ee),{},{activeIndex:Ve})),null,null]}if(!en(ce))return[re].concat(Tg(k.renderActivePoints({item:O,activePoint:ce,basePoint:ae,childIndex:W,isRange:X})))}else{var ut,Rt=(ut=k.getItemByXY(k.state.activeCoordinate))!==null&&ut!==void 0?ut:{graphicalItem:re},mt=Rt.graphicalItem,rn=mt.item,yn=rn===void 0?C:rn,dn=mt.childIndex,Tt=Pe(Pe(Pe({},O.props),ee),{},{activeIndex:dn});return[g.cloneElement(yn,Tt),null,null]}return X?[re,null,null]:[re,null]}),Gt(k,"renderCustomized",function(C,A,P){return g.cloneElement(C,Pe(Pe({key:"recharts-customized-".concat(P)},k.props),k.state))}),Gt(k,"renderMap",{CartesianGrid:{handler:s_,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:s_},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:s_},YAxis:{handler:s_},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((w=j.id)!==null&&w!==void 0?w:Gf("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=xQ(k.triggeredAfterMouseMove,(N=j.throttleDelay)!==null&&N!==void 0?N:1e3/60),k.state={},k}return m9e(_,b),u9e(_,[{key:"componentDidMount",value:function(){var w,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,N=w.children,k=w.data,C=w.height,A=w.layout,P=Bi(N,wo);if(P){var O=P.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,$=$O(this.state,k,O,T),L=this.state.tooltipTicks[O].coordinate,z=(this.state.offset.top+C)/2,W=A==="horizontal",B=W?{x:L,y:z}:{y:L,x:z},G=this.state.formattedGraphicalItems.find(function(F){var K=F.item;return K.type.name==="Scatter"});G&&(B=Pe(Pe({},B),G.props.points[O].tooltipPosition),$=G.props.points[O].tooltipPayload);var U={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:T,activePayload:$,activeCoordinate:B};this.setState(U),this.renderCursor(P),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var k,C;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(w){oP([Bi(w.children,wo)],[Bi(this.props.children,wo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Bi(this.props.children,wo);if(w&&typeof w.props.shared=="boolean"){var N=w.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var N=this.container,k=N.getBoundingClientRect(),C=FLe(k),A={chartX:Math.round(w.pageX-C.left),chartY:Math.round(w.pageY-C.top)},P=k.width/N.offsetWidth||1,O=this.inRange(A.chartX,A.chartY,P);if(!O)return null;var T=this.state,$=T.xAxisMap,L=T.yAxisMap,z=this.getTooltipEventType(),W=t6(this.state,this.props.data,this.props.layout,O);if(z!=="axis"&&$&&L){var B=Ju($).scale,G=Ju(L).scale,U=B&&B.invert?B.invert(A.chartX):null,F=G&&G.invert?G.invert(A.chartY):null;return Pe(Pe({},A),{},{xValue:U,yValue:F},W)}return W?Pe(Pe({},A),W):null}},{key:"inRange",value:function(w,N){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,A=w/k,P=N/k;if(C==="horizontal"||C==="vertical"){var O=this.state.offset,T=A>=O.left&&A<=O.left+O.width&&P>=O.top&&P<=O.top+O.height;return T?{x:A,y:P}:null}var $=this.state,L=$.angleAxisMap,z=$.radiusAxisMap;if(L&&z){var W=Ju(L);return wB({x:A,y:P},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,N=this.getTooltipEventType(),k=Bi(w,wo),C={};k&&N==="axis"&&(k.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=Pj(this.props,this.handleOuterEvent);return Pe(Pe({},A),C)}},{key:"addListener",value:function(){eE.on(tE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eE.removeListener(tE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,N,k){for(var C=this.state.formattedGraphicalItems,A=0,P=C.length;A<P;A++){var O=C[A];if(O.item===w||O.props.key===w.key||N===Kc(O.item.type)&&k===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,N=this.state.offset,k=N.left,C=N.top,A=N.height,P=N.width;return V.createElement("defs",null,V.createElement("clipPath",{id:w},V.createElement("rect",{x:k,y:C,height:A,width:P})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(N,k){var C=JU(k,2),A=C[0],P=C[1];return Pe(Pe({},N),{},Gt({},A,P.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(N,k){var C=JU(k,2),A=C[0],P=C[1];return Pe(Pe({},N),{},Gt({},A,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[w])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(w){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[w])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(w){var N=this.state,k=N.formattedGraphicalItems,C=N.activeItem;if(k&&k.length)for(var A=0,P=k.length;A<P;A++){var O=k[A],T=O.props,$=O.item,L=$.type.defaultProps!==void 0?Pe(Pe({},$.type.defaultProps),$.props):$.props,z=Kc($.type);if(z==="Bar"){var W=(T.data||[]).find(function(F){return xVe(w,F)});if(W)return{graphicalItem:O,payload:W}}else if(z==="RadialBar"){var B=(T.data||[]).find(function(F){return wB(w,F)});if(B)return{graphicalItem:O,payload:B}}else if(PN(O,C)||ON(O,C)||v0(O,C)){var G=vze({graphicalItem:O,activeTooltipItem:C,itemData:L.data}),U=L.activeIndex===void 0?G:L.activeIndex;return{graphicalItem:Pe(Pe({},O),{},{childIndex:U}),payload:v0(O,C)?L.data[G]:O.props.data[G]}}}return null}},{key:"render",value:function(){var w=this;if(!h3(this))return null;var N=this.props,k=N.children,C=N.className,A=N.width,P=N.height,O=N.style,T=N.compact,$=N.title,L=N.desc,z=ZU(N,r9e),W=kt(z,!1);if(T)return V.createElement(OU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(cP,up({},W,{width:A,height:P,title:$,desc:L}),this.renderClipPath(),m3(k,this.renderMap)));if(this.props.accessibilityLayer){var B,G;W.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,W.role=(G=this.props.role)!==null&&G!==void 0?G:"application",W.onKeyDown=function(F){w.accessibilityManager.keyboardEvent(F)},W.onFocus=function(){w.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return V.createElement(OU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",up({className:Xt("recharts-wrapper",C),style:Pe({position:"relative",cursor:"default",width:A,height:P},O)},U,{ref:function(K){w.container=K}}),V.createElement(cP,up({},W,{width:A,height:P,title:$,desc:L,style:b9e}),this.renderClipPath(),m3(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(g.Component);Gt(v,"displayName",n),Gt(v,"defaultProps",Pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Gt(v,"getDerivedStateFromProps",function(b,_){var j=b.dataKey,w=b.data,N=b.children,k=b.width,C=b.height,A=b.layout,P=b.stackOffset,O=b.margin,T=_.dataStartIndex,$=_.dataEndIndex;if(_.updateId===void 0){var L=n6(b);return Pe(Pe(Pe({},L),{},{updateId:0},p(Pe(Pe({props:b},L),{},{updateId:0}),_)),{},{prevDataKey:j,prevData:w,prevWidth:k,prevHeight:C,prevLayout:A,prevStackOffset:P,prevMargin:O,prevChildren:N})}if(j!==_.prevDataKey||w!==_.prevData||k!==_.prevWidth||C!==_.prevHeight||A!==_.prevLayout||P!==_.prevStackOffset||!jp(O,_.prevMargin)){var z=n6(b),W={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},B=Pe(Pe({},t6(_,w,A)),{},{updateId:_.updateId+1}),G=Pe(Pe(Pe({},z),W),B);return Pe(Pe(Pe({},G),p(Pe({props:b},G),_)),{},{prevDataKey:j,prevData:w,prevWidth:k,prevHeight:C,prevLayout:A,prevStackOffset:P,prevMargin:O,prevChildren:N})}if(!oP(N,_.prevChildren)){var U,F,K,X,se=Bi(N,xg),D=se&&(U=(F=se.props)===null||F===void 0?void 0:F.startIndex)!==null&&U!==void 0?U:T,Y=se&&(K=(X=se.props)===null||X===void 0?void 0:X.endIndex)!==null&&K!==void 0?K:$,ue=D!==T||Y!==$,xe=!en(w),Ne=xe&&!ue?_.updateId:_.updateId+1;return Pe(Pe({updateId:Ne},p(Pe(Pe({props:b},_),{},{updateId:Ne,dataStartIndex:D,dataEndIndex:Y}),_)),{},{prevChildren:N,dataStartIndex:D,dataEndIndex:Y})}return null}),Gt(v,"renderActiveDot",function(b,_,j){var w;return g.isValidElement(b)?w=g.cloneElement(b,_):Ut(b)?w=b(_):w=V.createElement(mv,_),V.createElement(jn,{className:"recharts-active-dot",key:j},w)});var x=g.forwardRef(function(_,j){return V.createElement(v,up({},_,{ref:j}))});return x.displayName=v.displayName,x},eZ=vb({chartName:"LineChart",GraphicalChild:yv,axisComponents:[{axisType:"xAxis",AxisComp:Ql},{axisType:"yAxis",AxisComp:Xl}],formatAxisMap:j$}),a6=vb({chartName:"BarChart",GraphicalChild:Md,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ql},{axisType:"yAxis",AxisComp:Xl}],formatAxisMap:j$}),MO=vb({chartName:"PieChart",GraphicalChild:kl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:gv},{axisType:"radiusAxis",AxisComp:pv}],formatAxisMap:OX,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),T9e=vb({chartName:"RadarChart",GraphicalChild:gb,axisComponents:[{axisType:"angleAxis",AxisComp:gv},{axisType:"radiusAxis",AxisComp:pv}],formatAxisMap:OX,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),P9e=vb({chartName:"AreaChart",GraphicalChild:Zd,axisComponents:[{axisType:"xAxis",AxisComp:Ql},{axisType:"yAxis",AxisComp:Xl}],formatAxisMap:j$});const O9e={light:"",dark:".dark"},tZ=g.createContext(null);function nZ(){const e=g.useContext(tZ);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const zu=g.forwardRef(({id:e,className:t,children:n,config:r,...a},i)=>{const o=g.useId(),l=`chart-${e||o.replace(/:/g,"")}`;return s.jsx(tZ.Provider,{value:{config:r},children:s.jsxs("div",{"data-chart":l,ref:i,className:je("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...a,children:[s.jsx(I9e,{id:l,config:r}),s.jsx(TP,{children:n})]})})});zu.displayName="Chart";const I9e=({id:e,config:t})=>{const n=Object.entries(t).filter(([r,a])=>a.theme||a.color);return n.length?s.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(O9e).map(([r,a])=>`
${a} [data-chart=${e}] {
${n.map(([i,o])=>{var c;const l=((c=o.theme)==null?void 0:c[r])||o.color;return l?`  --color-${i}: ${l};`:null}).join(`
`)}
}
`).join(`
`)}}):null},Eh=wo,Hu=g.forwardRef(({active:e,payload:t,className:n,indicator:r="dot",hideLabel:a=!1,hideIndicator:i=!1,label:o,labelFormatter:l,labelClassName:c,formatter:u,color:d,nameKey:h,labelKey:m},p)=>{const{config:v}=nZ(),x=g.useMemo(()=>{var k;if(a||!(t!=null&&t.length))return null;const[_]=t,j=`${m||_.dataKey||_.name||"value"}`,w=DO(v,_,j),N=!m&&typeof o=="string"?((k=v[o])==null?void 0:k.label)||o:w==null?void 0:w.label;return l?s.jsx("div",{className:je("font-medium",c),children:l(N,t)}):N?s.jsx("div",{className:je("font-medium",c),children:N}):null},[o,l,t,a,c,v,m]);if(!e||!(t!=null&&t.length))return null;const b=t.length===1&&r!=="dot";return s.jsxs("div",{ref:p,className:je("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[b?null:x,s.jsx("div",{className:"grid gap-1.5",children:t.map((_,j)=>{const w=`${h||_.name||_.dataKey||"value"}`,N=DO(v,_,w),k=d||_.payload.fill||_.color;return s.jsx("div",{className:je("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:u&&(_==null?void 0:_.value)!==void 0&&_.name?u(_.value,_.name,_,j,_.payload):s.jsxs(s.Fragment,{children:[N!=null&&N.icon?s.jsx(N.icon,{}):!i&&s.jsx("div",{className:je("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":b&&r==="dashed"}),style:{"--color-bg":k,"--color-border":k}}),s.jsxs("div",{className:je("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[s.jsxs("div",{className:"grid gap-1.5",children:[b?x:null,s.jsx("span",{className:"text-muted-foreground",children:(N==null?void 0:N.label)||_.name})]}),_.value&&s.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:_.value.toLocaleString()})]})]})},_.dataKey)})})]})});Hu.displayName="ChartTooltip";const R9e=g.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:r="bottom",nameKey:a},i)=>{const{config:o}=nZ();return n!=null&&n.length?s.jsx("div",{ref:i,className:je("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",e),children:n.map(l=>{const c=`${a||l.dataKey||"value"}`,u=DO(o,l,c);return s.jsxs("div",{className:je("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[u!=null&&u.icon&&!t?s.jsx(u.icon,{}):s.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:l.color}}),u==null?void 0:u.label]},l.value)})}):null});R9e.displayName="ChartLegend";function DO(e,t,n){if(typeof t!="object"||t===null)return;const r="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let a=n;return n in t&&typeof t[n]=="string"?a=t[n]:r&&n in r&&typeof r[n]=="string"&&(a=r[n]),a in e?e[a]:e[n]}const i_=["hsl(var(--primary))","hsl(var(--secondary))","hsl(221, 83%, 53%)","hsl(142, 76%, 36%)","hsl(262, 83%, 58%)","hsl(239, 84%, 67%)","hsl(160, 84%, 39%)","hsl(43, 96%, 56%)"],$9e=({metrics:e,chartType:t,title:n})=>{const r=g.useMemo(()=>Object.entries(e).filter(([o,l])=>l.value>0).map(([o,l],c)=>({name:l.label,value:Math.round(l.value),key:o,fill:l.color||i_[c%i_.length]})),[e]),a=g.useMemo(()=>{const o={};return Object.entries(e).filter(([l,c])=>c.value>0).forEach(([l,c],u)=>{o[l]={label:c.label,color:c.color||i_[u%i_.length]}}),o},[e]);if(r.length===0)return s.jsxs(Oe,{children:[s.jsx(Fe,{className:"pb-2",children:s.jsx(Be,{className:"text-sm",children:n})}),s.jsx(Re,{children:s.jsx("div",{className:"h-[300px] w-full flex items-center justify-center text-muted-foreground text-sm",children:"Khng c d liu  hin th"})})]});const i=()=>{switch(t){case"line":return s.jsx(zu,{config:a,className:"h-[300px] w-full",children:s.jsxs(eZ,{data:r,children:[s.jsx(cp,{strokeDasharray:"3 3"}),s.jsx(Ql,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fontSize:10}}),s.jsx(Xl,{tick:{fontSize:10}}),s.jsx(Eh,{content:s.jsx(Hu,{})}),s.jsx(Vs,{wrapperStyle:{fontSize:"10px"}}),s.jsx(yv,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{r:4}})]})});case"bar":return s.jsx(zu,{config:a,className:"h-[300px] w-full",children:s.jsxs(a6,{data:r,children:[s.jsx(cp,{strokeDasharray:"3 3"}),s.jsx(Ql,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fontSize:10}}),s.jsx(Xl,{tick:{fontSize:10}}),s.jsx(Eh,{content:s.jsx(Hu,{})}),s.jsx(Vs,{wrapperStyle:{fontSize:"10px"}}),s.jsx(Md,{dataKey:"value",radius:[8,8,0,0],children:r.map((o,l)=>s.jsx(cd,{fill:o.fill},`cell-${l}`))})]})});case"area":return s.jsx(zu,{config:a,className:"h-[300px] w-full",children:s.jsxs(P9e,{data:r,children:[s.jsx(cp,{strokeDasharray:"3 3"}),s.jsx(Ql,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fontSize:10}}),s.jsx(Xl,{tick:{fontSize:10}}),s.jsx(Eh,{content:s.jsx(Hu,{})}),s.jsx(Vs,{wrapperStyle:{fontSize:"10px"}}),s.jsx(Zd,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary) / 0.2)",strokeWidth:2})]})});case"pie":return s.jsx(zu,{config:a,className:"h-[300px] w-full",children:s.jsxs(MO,{children:[s.jsx(kl,{data:r,cx:"50%",cy:"50%",labelLine:!0,label:o=>{const l=(o.value/r.reduce((c,u)=>c+u.value,0)*100).toFixed(1);return`${o.name}: ${l}%`},outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((o,l)=>s.jsx(cd,{fill:o.fill},`cell-${l}`))}),s.jsx(Eh,{content:s.jsx(Hu,{})}),s.jsx(Vs,{wrapperStyle:{fontSize:"10px"}})]})});case"donut":return s.jsx(zu,{config:a,className:"h-[300px] w-full",children:s.jsxs(MO,{children:[s.jsx(kl,{data:r,cx:"50%",cy:"50%",labelLine:!0,label:o=>{const l=(o.value/r.reduce((c,u)=>c+u.value,0)*100).toFixed(1);return`${o.name}: ${l}%`},outerRadius:80,innerRadius:50,fill:"#8884d8",dataKey:"value",children:r.map((o,l)=>s.jsx(cd,{fill:o.fill},`cell-${l}`))}),s.jsx(Eh,{content:s.jsx(Hu,{})}),s.jsx(Vs,{wrapperStyle:{fontSize:"10px"}})]})});case"stacked":return s.jsx(zu,{config:a,className:"h-[300px] w-full",children:s.jsxs(a6,{data:r,children:[s.jsx(cp,{strokeDasharray:"3 3"}),s.jsx(Ql,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fontSize:10}}),s.jsx(Xl,{tick:{fontSize:10}}),s.jsx(Eh,{content:s.jsx(Hu,{})}),s.jsx(Vs,{wrapperStyle:{fontSize:"10px"}}),s.jsx(Md,{dataKey:"value",stackId:"a",radius:[8,8,0,0],children:r.map((o,l)=>s.jsx(cd,{fill:o.fill},`cell-${l}`))})]})});case"radar":return s.jsx(zu,{config:a,className:"h-[300px] w-full",children:s.jsxs(T9e,{data:r,children:[s.jsx(YX,{}),s.jsx(gv,{dataKey:"name",tick:{fontSize:10}}),s.jsx(pv,{tick:{fontSize:10}}),s.jsx(gb,{name:"Metrics",dataKey:"value",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary) / 0.3)",fillOpacity:.6}),s.jsx(Eh,{content:s.jsx(Hu,{})}),s.jsx(Vs,{wrapperStyle:{fontSize:"10px"}})]})});default:return null}};return s.jsxs(Oe,{children:[s.jsx(Fe,{className:"pb-2",children:s.jsx(Be,{className:"text-sm",children:n})}),s.jsx(Re,{children:i()})]})};function M9e({open:e,onOpenChange:t,labels:n,selectedCampaigns:r,onAssignLabels:a}){const[i,o]=g.useState([]),[l,c]=g.useState(!1),[u,d]=g.useState(""),h=v=>{o(x=>x.includes(v)?x.filter(b=>b!==v):[...x,v])},m=async()=>{c(!0);try{if(await a(i),r.length>0){const{getLabelAssignmentsByEntities:v}=await vr(async()=>{const{getLabelAssignmentsByEntities:w}=await Promise.resolve().then(()=>BN);return{getLabelAssignmentsByEntities:w}},void 0),x=r[0],_=(await v([x.id],"campaign")).map(w=>w.label_id),j=i.filter(w=>!_.includes(w));j.length>0&&console.warn(" [AssignLabelsDialog] Labels not assigned:",j)}o([]),d(""),t(!1)}catch(v){console.error("Error assigning labels:",v)}finally{c(!1)}},p=n.filter(v=>v.label_name.toLowerCase().includes(u.toLowerCase()));return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-2xl",children:[s.jsxs(hr,{children:[s.jsxs(fr,{className:"flex items-center gap-2",children:[s.jsx(Pd,{className:"w-5 h-5"}),"Gn nhn cho chin dch"]}),s.jsxs(Ca,{children:["Chn nhn  gn vo ",r.length," chin dch  chn"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-3 bg-muted/30",children:[s.jsxs("div",{className:"text-sm font-medium mb-2",children:["Chin dch  chn (",r.length,"):"]}),s.jsx(As,{className:"max-h-[120px]",children:s.jsx("div",{className:"space-y-1",children:r.map(v=>s.jsx("div",{className:"text-xs px-2 py-1 bg-background rounded",children:v.name},v.id))})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Chn nhn:"}),n.length>0&&s.jsxs("div",{className:"relative mb-3",children:[s.jsx(L0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ke,{type:"text",placeholder:"Tm kim nhn...",value:u,onChange:v=>d(v.target.value),className:"pl-9"})]}),n.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:'Cha c nhn no. Vui lng to nhn trong phn "Quy tc t ng".'}):p.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"Khng tm thy nhn no ph hp."}):s.jsx(As,{className:"max-h-[300px]",children:s.jsx("div",{className:"space-y-2",children:p.map(v=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-muted/30 transition-colors cursor-pointer",onClick:()=>v.Id&&h(v.Id),children:[s.jsx(Xs,{checked:v.Id?i.includes(v.Id):!1,onCheckedChange:()=>v.Id&&h(v.Id)}),s.jsx(Ze,{style:{backgroundColor:v.label_color},className:"text-white",children:v.label_name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["ID: ",v.Id]})]},v.Id))})})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>{o([]),t(!1)},disabled:l,children:"Hy"}),s.jsx(J,{onClick:m,disabled:i.length===0||l,children:l?"ang gn...":`Gn ${i.length} nhn`})]})]})})}function D9e({labels:e,entityId:t,entityName:n,entityType:r,currentLabelIds:a=[],onAssignLabels:i,trigger:o}){const[l,c]=g.useState(a),[u,d]=g.useState(!1),[h,m]=g.useState(!1),[p,v]=g.useState("");g.useEffect(()=>{h&&c(a)},[h,a]);const x=w=>{c(N=>N.includes(w)?N.filter(k=>k!==w):[...N,w])},b=async()=>{d(!0);try{await i(t,r,l);const{getLabelAssignmentsByEntities:w}=await vr(async()=>{const{getLabelAssignmentsByEntities:A}=await Promise.resolve().then(()=>BN);return{getLabelAssignmentsByEntities:A}},void 0),k=(await w([t],r)).map(A=>A.label_id),C=l.filter(A=>!k.includes(A));C.length>0&&console.warn(" [QuickAssignLabels] Labels not assigned:",C),v(""),m(!1)}catch(w){console.error("Error assigning labels:",w)}finally{d(!1)}},_=r==="campaign"?"chin dch":r==="adset"?"nhm QC":"qung co",j=e.filter(w=>w.label_name.toLowerCase().includes(p.toLowerCase()));return s.jsxs(Q0,{open:h,onOpenChange:m,children:[s.jsx(X0,{asChild:!0,children:o||s.jsx(J,{variant:"outline",size:"sm",className:"h-7 w-7 p-1 border-2 border-primary/40 hover:border-primary hover:bg-primary/10 rounded-md",onClick:w=>w.stopPropagation(),title:"Gn nhn",children:s.jsx(nu,{className:"h-4 w-4 text-primary"})})}),s.jsxs(Qg,{className:"w-96 p-0",align:"start",onClick:w=>w.stopPropagation(),children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Pd,{className:"w-4 h-4 text-primary"}),s.jsx("span",{className:"font-semibold text-sm",children:"Gn nhn"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:[_,": ",s.jsx("span",{className:"font-medium",children:n})]}),e.length>0&&s.jsxs("div",{className:"relative",children:[s.jsx(L0,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-muted-foreground"}),s.jsx(Ke,{type:"text",placeholder:"Tm kim nhn...",value:p,onChange:w=>v(w.target.value),className:"h-8 pl-7 text-sm"})]})]}),s.jsx(As,{className:"max-h-[400px]",children:e.length===0?s.jsx("div",{className:"p-8 text-center text-muted-foreground text-sm",children:'Cha c nhn no. Vui lng to nhn trong "Quy tc t ng".'}):j.length===0?s.jsx("div",{className:"p-8 text-center text-muted-foreground text-sm",children:"Khng tm thy nhn no ph hp."}):s.jsx("div",{className:"p-2 space-y-1",children:j.map(w=>s.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>w.Id&&x(w.Id),children:[s.jsx(Xs,{checked:w.Id?l.includes(w.Id):!1,onCheckedChange:()=>w.Id&&x(w.Id)}),s.jsx(Ze,{style:{backgroundColor:w.label_color},className:"text-white text-xs",children:w.label_name})]},w.Id))})}),s.jsxs("div",{className:"p-3 border-t flex gap-2",children:[s.jsx(J,{variant:"outline",size:"sm",onClick:()=>m(!1),disabled:u,className:"flex-1",children:"Hy"}),s.jsx(J,{size:"sm",onClick:b,disabled:l.length===0||u,className:"flex-1",children:u?"ang gn...":`Gn ${l.length}`})]})]})]})}const LO=async e=>{try{const t=encodeURIComponent(`(user_id,eq,${e})`),n=`${ht(It.TABLES.CAMPAIGN_LABELS)}?where=${t}&sort=label_name&limit=100`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return(await r.json()).list||[]}catch(t){throw console.error("Error fetching labels by user_id:",t),t}},I$=async e=>{if(!e.user_id)throw new Error("user_id is required. User must be authenticated to create labels.");try{const t=ht(It.TABLES.CAMPAIGN_LABELS),n=lt(),r=JSON.stringify(e),a=await fetch(t,{method:"POST",headers:n,body:r});if(!a.ok){const o=await a.text();throw console.error(" [NocoDB] Error response body:",o),new Error(`NocoDB API error: ${a.status} ${a.statusText} - ${o}`)}return await a.json()}catch(t){throw t}},R1=async e=>{try{const t=ht(It.TABLES.CAMPAIGN_LABELS),n=await fetch(t,{method:"DELETE",headers:lt(),body:JSON.stringify([{Id:e}])});if(!n.ok){const r=await n.text();throw new Error(`NocoDB API error: ${n.status} ${n.statusText} - ${r}`)}}catch(t){throw console.error("Error deleting label:",t),t}},L9e=Object.freeze(Object.defineProperty({__proto__:null,createLabel:I$,deleteLabel:R1,getLabelsByUserId:LO},Symbol.toStringTag,{value:"Module"}));async function bs(e,t){if(e.length===0)return[];try{const r=`(${t==="campaign"?"campaign_id":t==="adset"?"adset_id":"ad_id"},in,${e.join(",")})`,a=`${ht(It.TABLES.CAMPAIGN_LABEL_ASSIGNMENTS)}?where=${encodeURIComponent(r)}`,i=await fetch(a,{method:"GET",headers:lt()});if(!i.ok)throw new Error(`Failed to fetch label assignments: ${i.statusText}`);return(await i.json()).list||[]}catch(n){return console.error("Error fetching label assignments:",n),[]}}async function FN(e,t,n,r){if(!r)throw new Error("userId is required for assignLabel. User must be authenticated.");const a={label_id:n,user_id:r};t==="campaign"?a.campaign_id=e:t==="adset"?a.adset_id=e:a.ad_id=e;const i=await fetch(ht(It.TABLES.CAMPAIGN_LABEL_ASSIGNMENTS),{method:"POST",headers:lt(),body:JSON.stringify(a)});if(!i.ok){const o=await i.text();let l=`Failed to assign label (${i.status})`;try{const c=JSON.parse(o);c.error==="TABLE_NOT_FOUND"?l="Bng campaign_label_assignments cha c to. Vui lng truy cp /create-label-assignments-table  to bng.":l+=`: ${c.message||o}`}catch{l+=`: ${o||i.statusText}`}throw new Error(l)}return await i.json()}async function FO(e,t,n){for(const r of e)for(const a of t)try{await FN(r.id,r.type,a,n)}catch(i){throw console.error(` Failed to assign label ${a} to ${r.type} ${r.id}:`,i),i}}async function rZ(e,t,n){const a=(await bs([e],t)).filter(l=>l.label_id===n);if(a.length===0)throw console.warn(` [removeLabel] No assignments found for ${t} ${e} with label ${n}`),new Error("Assignment not found");const i=ht(It.TABLES.CAMPAIGN_LABEL_ASSIGNMENTS);(await Promise.all(a.map(async l=>{if(!l.Id)return console.error(" [removeLabel] Assignment has no Id:",l),{success:!1,error:"Missing Id"};const c=await fetch(i,{method:"DELETE",headers:lt(),body:JSON.stringify([{Id:l.Id}])}),u=await c.text();if(!c.ok)throw console.error(` [removeLabel] Failed to delete ${l.Id}:`,{status:c.status,statusText:c.statusText,body:u}),new Error(`Failed to remove label: ${c.statusText} - ${u}`);return{success:!0,Id:l.Id}}))).filter(l=>l.success).length}async function F9e(e){try{const t=`(label_id,eq,${e})`,n=`${ht(It.TABLES.CAMPAIGN_LABEL_ASSIGNMENTS)}?where=${encodeURIComponent(t)}`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`Failed to fetch assignments: ${r.statusText}`);const i=(await r.json()).list||[];if(i.length===0)return;const o=ht(It.TABLES.CAMPAIGN_LABEL_ASSIGNMENTS),l=await fetch(o,{method:"DELETE",headers:lt(),body:JSON.stringify(i.map(c=>({Id:c.Id})))});if(!l.ok){const c=await l.text();throw new Error(`Failed to delete assignments: ${l.statusText} - ${c}`)}}catch(t){throw console.error(`Error deleting assignments for label ${e}:`,t),t}}const BN=Object.freeze(Object.defineProperty({__proto__:null,assignLabel:FN,bulkAssignLabels:FO,deleteLabelAssignmentsByLabelId:F9e,getLabelAssignmentsByEntities:bs,removeLabel:rZ},Symbol.toStringTag,{value:"Module"})),T_={spend:"Chi tiu",results:"Kt qu",cpm:"CPM",cpc:"CPC",ctr:"CTR (%)",reach:"",impressions:"Lt hin th",clicks:"Lt nhp",cost_per_result:"Chi ph/Kt qu",frequency:"Tn sut",days_since_created:"S ngy t khi to",booking_rate:"T l t lch (%)",phone_collection_rate:"T l c ST (%)",cost_per_appointment:"Chi ph/t lch",cost_per_service_revenue:"Chi ph/Doanh thu DV",marketing_revenue_ratio:"Chi ph MKT/Doanh thu (%)",marketing_service_ratio:"Chi ph MKT/Doanh thu DV (%)",marketing_daily_ratio:"Chi ph MKT/Doanh thu ngy",roi:"ROI (%)",roas:"ROAS"},rE={operator:["spend","results","cpm","cpc","ctr","reach","impressions","clicks","cost_per_result","frequency","days_since_created"],manager:["booking_rate","phone_collection_rate","cost_per_appointment","cost_per_service_revenue"],director:["marketing_revenue_ratio","marketing_service_ratio","marketing_daily_ratio","roi","roas"]},aZ={greater_than:"Ln hn",less_than:"Nh hn",equals:"Bng",greater_than_or_equal:"Ln hn hoc bng",less_than_or_equal:"Nh hn hoc bng",not_equals:"Khc"},$1={turn_off:"Tt chin dch",turn_on:"Bt chin dch",increase_budget:"Tng ngn sch",decrease_budget:"Gim ngn sch",add_label:"Gn nhn",send_notification:"Gi thng bo"},sZ={today:"Hm nay",yesterday:"Hm qua","7_days":"7 ngy qua","14_days":"14 ngy qua","30_days":"30 ngy qua",lifetime:"Trn i"},nx={campaign:"Chin dch",adset:"Nhm qung co",ad:"Qung co"};function B9e({conditions:e,onChange:t}){const n=()=>{const i={id:crypto.randomUUID(),metric:"spend",operator:"greater_than",value:0};t([...e,i])},r=(i,o,l)=>{t(e.map(c=>c.id===i?{...c,[o]:l}:c))},a=i=>{t(e.filter(o=>o.id!==i))};return s.jsxs("div",{className:"space-y-3",children:[e.map(i=>s.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg bg-muted/30",children:[s.jsxs(kn,{value:i.metric,onValueChange:o=>r(i.id,"metric",o),children:[s.jsx(wn,{className:"w-[240px]",children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsxs(gA,{children:[s.jsx(C_,{children:" Ch s Operator (Nhn vin Ads)"}),rE.operator.map(o=>s.jsx(st,{value:o,children:T_[o]},o))]}),s.jsxs(gA,{children:[s.jsx(C_,{children:" Ch s Manager (Qun l)"}),rE.manager.map(o=>s.jsx(st,{value:o,children:T_[o]},o))]}),s.jsxs(gA,{children:[s.jsx(C_,{children:" Ch s Director (Gim c)"}),rE.director.map(o=>s.jsx(st,{value:o,children:T_[o]},o))]})]})]}),s.jsxs(kn,{value:i.operator,onValueChange:o=>r(i.id,"operator",o),children:[s.jsx(wn,{className:"w-[180px]",children:s.jsx(Cn,{})}),s.jsx(_n,{children:Object.entries(aZ).map(([o,l])=>s.jsx(st,{value:o,children:l},o))})]}),s.jsx(Ke,{type:"text",value:i.value.toLocaleString("vi-VN"),onChange:o=>{const l=o.target.value.replace(/[.,]/g,""),c=parseFloat(l)||0;r(i.id,"value",c)},className:"flex-1",placeholder:"Gi tr (VD: 1,900,000)"}),s.jsx(J,{size:"icon",variant:"ghost",onClick:()=>a(i.id),children:s.jsx(Cs,{className:"w-4 h-4"})})]},i.id)),e.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:'Cha c iu kin no. Nhn "Thm iu kin"  bt u.'}),s.jsx(J,{onClick:n,variant:"outline",className:"w-full",children:"+ Thm iu kin"})]})}function U9e({actions:e,onChange:t,availableLabels:n=[]}){const r=()=>{const c={id:crypto.randomUUID(),type:"turn_off"};t([...e,c])},a=(c,u,d)=>{t(e.map(h=>h.id===c?{...h,[u]:d}:h))},i=c=>{t(e.filter(u=>u.id!==c))},o=c=>c==="increase_budget"||c==="decrease_budget",l=c=>c==="add_label";return s.jsxs("div",{className:"space-y-3",children:[e.map(c=>{var u,d;return s.jsxs("div",{className:"p-3 border rounded-lg bg-muted/30 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(kn,{value:c.type,onValueChange:h=>{const m=h,p={type:m,value:void 0};m==="increase_budget"||m==="decrease_budget"?p.valueType="percentage":p.valueType=void 0,t(e.map(v=>v.id===c.id?{...v,...p}:v))},children:[s.jsx(wn,{className:"w-[200px]",children:s.jsx(Cn,{placeholder:"Chn hnh ng",children:c.type&&$1[c.type]})}),s.jsx(_n,{children:Object.entries($1).map(([h,m])=>s.jsx(st,{value:h,children:m},h))})]}),o(c.type)&&s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsxs(kn,{value:c.valueType||"percentage",onValueChange:h=>a(c.id,"valueType",h),children:[s.jsx(wn,{className:"w-24",children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"percentage",children:"%"}),s.jsx(st,{value:"amount",children:"VN"})]})]}),s.jsx(Ke,{type:"text",value:(c.value||0).toLocaleString("vi-VN"),onChange:h=>{const m=h.target.value.replace(/[.,]/g,""),p=parseFloat(m)||0;a(c.id,"value",p)},placeholder:"Nhp gi tr",className:"w-32"}),s.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:c.valueType==="percentage"?"%":"VN"})]}),l(c.type)&&s.jsxs(kn,{value:c.value||"",onValueChange:h=>a(c.id,"value",h),children:[s.jsx(wn,{className:"flex-1",children:s.jsx(Cn,{placeholder:"Chn nhn",children:c.value&&n.find(h=>String(h.Id)===c.value)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(u=n.find(h=>String(h.Id)===c.value))==null?void 0:u.label_color}}),(d=n.find(h=>String(h.Id)===c.value))==null?void 0:d.label_name]})})}),s.jsx(_n,{children:n.map(h=>s.jsx(st,{value:String(h.Id),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.label_color}}),h.label_name]})},h.Id))})]}),s.jsx(J,{size:"icon",variant:"ghost",onClick:()=>i(c.id),children:s.jsx(Cs,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[s.jsx(Ki,{id:`schedule-${c.id}`,checked:!!c.executeAt,onCheckedChange:h=>{a(c.id,"executeAt",h?"09:00":void 0)}}),s.jsx(ge,{htmlFor:`schedule-${c.id}`,className:"text-sm cursor-pointer",children:"S dng thi gian"}),c.executeAt&&s.jsx(Ke,{type:"time",value:c.executeAt,onChange:h=>a(c.id,"executeAt",h.target.value),className:"w-32"})]}),c.type==="turn_off"&&s.jsxs("div",{className:"ml-2 mt-2 p-3 bg-muted/50 rounded-lg border border-dashed",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ki,{id:`auto-revert-${c.id}`,checked:c.autoRevert||!1,onCheckedChange:h=>{t(e.map(m=>m.id===c.id?{...m,autoRevert:h,revertAtTime:void 0,revertAction:h?"turn_on":void 0}:m))}}),s.jsx(ge,{htmlFor:`auto-revert-${c.id}`,className:"text-sm cursor-pointer font-medium",children:" T ng bt li sau khi tt"})]}),c.autoRevert&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 ml-6",children:[s.jsx(ge,{className:"text-sm text-muted-foreground",children:"Bt li vo lc:"}),s.jsx(Ke,{type:"time",value:c.revertAtTime||"",onChange:h=>{t(e.map(m=>m.id===c.id?{...m,revertAtTime:h.target.value||void 0}:m))},placeholder:"Chn gi",className:`w-32 ${c.revertAtTime?"":"border-destructive"}`}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(01:00 = 1 sng, 13:00 = 1 chiu)"})]}),!c.revertAtTime&&s.jsxs("div",{className:"ml-6 mt-2 text-xs text-destructive bg-destructive/10 p-2 rounded border border-destructive/30 flex items-center gap-2",children:[s.jsx(is,{className:"h-4 w-4"}),s.jsx("span",{children:"Bt buc phi chn gi bt li!"})]}),c.revertAtTime&&s.jsxs("div",{className:"ml-6 mt-2 text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950/50 p-2 rounded border border-blue-200 dark:border-blue-800",children:[" ",s.jsx("strong",{children:"V d:"}),(()=>{const h=new Date,[m,p]=c.revertAtTime.split(":").map(Number),v=new Date;return v.setHours(m,p,0,0),v<=h&&v.setDate(v.getDate()+1),` Tt lc ${h.getHours().toString().padStart(2,"0")}:${h.getMinutes().toString().padStart(2,"0")}  Bt li vo ${c.revertAtTime} ${v.getDate()===h.getDate()?"hm nay":"ngy mai"}`})()]})]})]})]},c.id)}),e.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:'Cha c hnh ng no. Nhn "Thm hnh ng"  bt u.'}),s.jsx(J,{onClick:r,variant:"outline",className:"w-full",children:"+ Thm hnh ng"})]})}var UN="Collapsible",[V9e,oQe]=ga(UN),[z9e,R$]=V9e(UN),iZ=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c,u]=_i({prop:r,defaultProp:a??!1,onChange:o,caller:UN});return s.jsx(z9e,{scope:n,disabled:i,contentId:Fa(),open:c,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),children:s.jsx(it.div,{"data-state":M$(c),"data-disabled":i?"":void 0,...l,ref:t})})});iZ.displayName=UN;var oZ="CollapsibleTrigger",lZ=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=R$(oZ,n);return s.jsx(it.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":M$(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:We(e.onClick,a.onOpenToggle)})});lZ.displayName=oZ;var $$="CollapsibleContent",cZ=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=R$($$,e.__scopeCollapsible);return s.jsx(Aa,{present:n||a.open,children:({present:i})=>s.jsx(H9e,{...r,ref:t,present:i})})});cZ.displayName=$$;var H9e=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=e,o=R$($$,n),[l,c]=g.useState(r),u=g.useRef(null),d=Dt(t,u),h=g.useRef(0),m=h.current,p=g.useRef(0),v=p.current,x=o.open||l,b=g.useRef(x),_=g.useRef(void 0);return g.useEffect(()=>{const j=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(j)},[]),sa(()=>{const j=u.current;if(j){_.current=_.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const w=j.getBoundingClientRect();h.current=w.height,p.current=w.width,b.current||(j.style.transitionDuration=_.current.transitionDuration,j.style.animationName=_.current.animationName),c(r)}},[o.open,r]),s.jsx(it.div,{"data-state":M$(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...i,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:x&&a})});function M$(e){return e?"open":"closed"}var W9e=iZ;const D$=W9e,L$=lZ,F$=cZ,q9e=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#14b8a6","#a855f7","#06b6d4","#22c55e","#eab308","#f43f5e","#6366f1"];function K9e({availableLabels:e,onLabelsChange:t,onDeleteClick:n,isLoading:r=!1,userId:a}){if(!a)throw console.error(" [CRITICAL] userId is missing!"),new Error("userId is required for LabelManagementSection");const[i,o]=g.useState(!1),[l,c]=g.useState(""),[u,d]=g.useState("#3b82f6"),[h,m]=g.useState(!1),p=async()=>{if(!l.trim()){ne.error("Vui lng nhp tn nhn");return}m(!0);try{const v=await I$({label_name:l.trim(),label_color:u,user_id:a});ne.success(` to nhn "${l}"`),c(""),d("#3b82f6"),await t()}catch(v){console.error(" [ERROR] Error creating label:",v),console.error(" [ERROR] Error type:",v instanceof Error?v.constructor.name:typeof v),console.error(" [ERROR] Error message:",v instanceof Error?v.message:String(v)),console.error(" [ERROR] Error stack:",v instanceof Error?v.stack:"No stack"),ne.error(`Khng th to nhn. Li: ${v instanceof Error?v.message:"Unknown error"}`)}finally{m(!1)}};return s.jsxs("div",{className:"space-y-4 relative",children:[r&&s.jsx("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center z-10 rounded-lg",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),s.jsxs("div",{className:"flex items-center justify-between relative",children:[s.jsx(ge,{className:"text-sm font-medium",children:"To nhn mi"}),s.jsx("div",{className:"relative",children:s.jsxs(D$,{open:i,onOpenChange:o,children:[s.jsx(L$,{asChild:!0,children:s.jsxs(J,{variant:"outline",size:"sm",children:[s.jsx(Pd,{className:"w-4 h-4 mr-2"}),"Qun l nhn dn",s.jsx(eu,{className:je("w-4 h-4 ml-2 transition-transform",i&&"rotate-180")})]})}),s.jsx(F$,{className:"absolute right-0 mt-2 z-50",children:s.jsxs("div",{className:"border rounded-lg p-4 bg-background shadow-lg w-[400px] max-h-[400px] overflow-y-auto",children:[e.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs(ge,{className:"text-sm font-medium mb-3 block",children:["Nhn hin c (",e.length,")"]}),s.jsx("div",{className:"space-y-2",children:e.map(v=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-muted/50 transition-colors",children:[s.jsx(Ze,{style:{backgroundColor:v.label_color},className:"text-white",children:v.label_name}),s.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>{n==null||n(v)},className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:s.jsx(ks,{className:"w-4 h-4"})})]},v.Id))})]}),e.length===0&&s.jsx("div",{className:"text-center py-4 text-sm text-muted-foreground",children:"Cha c nhn no"})]})})]})})]}),s.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-muted/20",children:[s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"label-name",className:"text-xs",children:"Tn nhn"}),s.jsx(Ke,{id:"label-name",value:l,onChange:v=>c(v.target.value),placeholder:"V d: Chin dch quan trng",className:"mt-1.5",disabled:h})]}),s.jsxs("div",{children:[s.jsx(ge,{className:"text-xs",children:"Mu sc"}),s.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[q9e.map((v,x)=>s.jsx("button",{type:"button",onClick:()=>d(v),className:je("w-8 h-8 rounded-full border-2 transition-all hover:scale-110",u===v?"border-foreground ring-2 ring-foreground ring-offset-2":"border-muted"),style:{backgroundColor:v},disabled:h,title:v},`${v}-${x}`)),s.jsx("input",{type:"color",value:u,onChange:v=>d(v.target.value),className:"w-8 h-8 rounded-full cursor-pointer border-2 border-muted",disabled:h,title:"Chn mu ty chnh"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(J,{type:"button",size:"sm",onClick:p,disabled:h||!l.trim(),className:"flex-1",children:[s.jsx(nu,{className:"w-4 h-4 mr-2"}),h?"ang to...":"To nhn"]}),l&&s.jsx(Ze,{style:{backgroundColor:u},className:"text-white",children:l})]})]})]})}var uZ="AlertDialog",[G9e,lQe]=ga(uZ,[hq]),vu=hq(),dZ=e=>{const{__scopeAlertDialog:t,...n}=e,r=vu(t);return s.jsx(AS,{...r,...n,modal:!0})};dZ.displayName=uZ;var Y9e="AlertDialogTrigger",Q9e=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=vu(n);return s.jsx(kI,{...a,...r,ref:t})});Q9e.displayName=Y9e;var X9e="AlertDialogPortal",hZ=e=>{const{__scopeAlertDialog:t,...n}=e,r=vu(t);return s.jsx(ES,{...r,...n})};hZ.displayName=X9e;var J9e="AlertDialogOverlay",fZ=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=vu(n);return s.jsx(Gg,{...a,...r,ref:t})});fZ.displayName=J9e;var kp="AlertDialogContent",[Z9e,eKe]=G9e(kp),tKe=fz("AlertDialogContent"),mZ=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=vu(n),o=g.useRef(null),l=Dt(t,o),c=g.useRef(null);return s.jsx(Ave,{contentName:kp,titleName:pZ,docsSlug:"alert-dialog",children:s.jsx(Z9e,{scope:n,cancelRef:c,children:s.jsxs(Yg,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:We(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(tKe,{children:r}),s.jsx(rKe,{contentRef:o})]})})})});mZ.displayName=kp;var pZ="AlertDialogTitle",gZ=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=vu(n);return s.jsx(K0,{...a,...r,ref:t})});gZ.displayName=pZ;var vZ="AlertDialogDescription",yZ=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=vu(n);return s.jsx(G0,{...a,...r,ref:t})});yZ.displayName=vZ;var nKe="AlertDialogAction",xZ=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=vu(n);return s.jsx(TS,{...a,...r,ref:t})});xZ.displayName=nKe;var bZ="AlertDialogCancel",wZ=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=eKe(bZ,n),i=vu(n),o=Dt(t,a);return s.jsx(TS,{...i,...r,ref:o})});wZ.displayName=bZ;var rKe=({contentRef:e})=>{const t=`\`${kp}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${kp}\` by passing a \`${vZ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${kp}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},aKe=dZ,sKe=hZ,_Z=fZ,jZ=mZ,SZ=xZ,NZ=wZ,kZ=gZ,CZ=yZ;const B$=aKe,iKe=sKe,AZ=g.forwardRef(({className:e,...t},n)=>s.jsx(_Z,{className:je("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));AZ.displayName=_Z.displayName;const VN=g.forwardRef(({className:e,...t},n)=>s.jsxs(iKe,{children:[s.jsx(AZ,{}),s.jsx(jZ,{ref:n,className:je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));VN.displayName=jZ.displayName;const zN=({className:e,...t})=>s.jsx("div",{className:je("flex flex-col space-y-2 text-center sm:text-left",e),...t});zN.displayName="AlertDialogHeader";const HN=({className:e,...t})=>s.jsx("div",{className:je("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});HN.displayName="AlertDialogFooter";const WN=g.forwardRef(({className:e,...t},n)=>s.jsx(kZ,{ref:n,className:je("text-lg font-semibold",e),...t}));WN.displayName=kZ.displayName;const qN=g.forwardRef(({className:e,...t},n)=>s.jsx(CZ,{ref:n,className:je("text-sm text-muted-foreground",e),...t}));qN.displayName=CZ.displayName;const KN=g.forwardRef(({className:e,...t},n)=>s.jsx(SZ,{ref:n,className:je(Ox(),e),...t}));KN.displayName=SZ.displayName;const GN=g.forwardRef(({className:e,...t},n)=>s.jsx(NZ,{ref:n,className:je(Ox({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));GN.displayName=NZ.displayName;const oKe=({open:e,onOpenChange:t,onSave:n,rule:r,availableLabels:a=[],onLabelsChange:i,userId:o})=>{const[l,c]=g.useState(""),[u,d]=g.useState("campaign"),[h,m]=g.useState("7_days"),[p,v]=g.useState(7),[x,b]=g.useState(!0),[_,j]=g.useState("all"),[w,N]=g.useState([]),[k,C]=g.useState([]),[A,P]=g.useState([]),[O,T]=g.useState([]),[$,L]=g.useState(!1),[z,W]=g.useState(!1),[B,G]=g.useState(null),[U,F]=g.useState(!1),[K,X]=g.useState(!1),[se,D]=g.useState(!1),[Y,ue]=g.useState(15),[xe,Ne]=g.useState(!1),[oe,ee]=g.useState(5e5),[re,Z]=g.useState(1.5),[ce,ae]=g.useState(1),[Ue,Ve]=g.useState(24);g.useEffect(()=>{if(r){c(r.rule_name),d(r.scope),m(r.time_range),b(r.time_range!=="lifetime"),j(r.condition_logic||"all"),N(r.conditions||[]);const Ce=(r.actions||[]).map(dt=>{if(dt.autoRevert&&dt.revertAfterHours&&!dt.revertAtTime){let pt="06:00";return dt.revertAfterHours>=19?pt="01:00":dt.revertAfterHours>=7&&(pt="18:00"),{...dt,revertAtTime:pt,revertAfterHours:void 0}}return dt});C(Ce),P(r.labels||[]),T(r.target_labels||[]);const ye=r.advanced_settings||{};r.time_range==="custom"&&ye.customDays&&v(ye.customDays),D(ye.enableAutoSchedule||!1),ue(ye.checkFrequency||15),Ne(ye.enableSafeGuards||!1),ee(ye.maxBudgetDailySpend||5e5),Z(ye.minRoasThreshold||1.5),ae(ye.maxExecutionsPerObject||1),Ve(ye.cooldownHours||24)}else!r&&!e&&ut()},[r,e]);const ut=()=>{c(""),d("campaign"),m("7_days"),v(7),b(!0),j("all"),N([]),C([]),P([]),T([]),L(!1),D(!1),ue(15),Ne(!1),ee(5e5),Z(1.5),W(!1)},Rt=()=>{if(w.length===0){ne.error("Vui lng thm t nht 1 iu kin");return}if(k.length===0){ne.error("Vui lng thm t nht 1 hnh ng");return}if(k.find(ye=>ye.autoRevert&&!ye.revertAtTime)){ne.error(" Vui lng chn gi bt li cho hnh ng 'T ng bt li'");return}if(a.length===0){ne.error("Vui lng to t nht 1 nhn trc khi lu quy tc");return}if(O.length===0){ne.error("Vui lng chn t nht 1 nhn  p dng quy tc");return}if(!o){ne.error("Thiu userId, vui lng ng nhp li");return}const Ce={...(r==null?void 0:r.id)&&{id:r.id},...(r==null?void 0:r.Id)&&{Id:r.Id},rule_name:l,scope:u,time_range:x?h:"lifetime",is_active:(r==null?void 0:r.is_active)??!0,conditions:w,condition_logic:_,actions:k,labels:A,target_labels:O,user_id:(r==null?void 0:r.user_id)||o,created_at:(r==null?void 0:r.created_at)||new Date().toISOString(),updated_at:new Date().toISOString(),advanced_settings:{...h==="custom"&&{customDays:p},enableAutoSchedule:se,checkFrequency:Y,enableSafeGuards:xe,maxBudgetDailySpend:oe,minRoasThreshold:re,maxExecutionsPerObject:ce,cooldownHours:Ue}};n(Ce),t(!1),ut()},mt=!!l.trim()&&w.length>0&&k.length>0&&a.length>0&&O.length>0,rn=(ve,Ce=!1)=>{const ye=Ce?T:P,dt=Ce?O:A;dt.includes(ve)?ye(dt.filter(pt=>pt!==ve)):ye([...dt,ve])},yn=async()=>{if(B){F(!0),X(!0);try{await R1(B.Id),ne.success(` xa nhn "${B.label_name}"`);const ve=String(B.Id);P(Ce=>Ce.filter(ye=>ye!==ve)),T(Ce=>Ce.filter(ye=>ye!==ve)),await(i==null?void 0:i())}catch(ve){console.error("Error deleting label:",ve),ne.error(`Li: ${ve.message}`)}finally{F(!1),X(!1),G(null)}}},dn=async()=>{X(!0);try{await(i==null?void 0:i())}finally{X(!1)}},Tt=()=>{const ve=[];return w.length>0&&ve.push(`${w.length} iu kin`),k.length>0&&ve.push(`${k.length} hnh ng`),se&&ve.push(`T ng mi ${Y}p`),xe&&ve.push(`Ngn sch ti a ${oe.toLocaleString()}, ROAS ti thiu ${re}`),ve.length>0?ve.join("  "):"Cha t tn"};return s.jsxs(s.Fragment,{children:[s.jsx(yr,{open:e&&!B,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:r?"Chnh sa quy tc t ng":"To quy tc mi"}),s.jsx(Ca,{children:"Thit lp iu kin v hnh ng  t ng ha qun l qung co"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"rule-name",children:"Tn quy tc"}),s.jsx(Ke,{id:"rule-name",value:l,onChange:ve=>c(ve.target.value),placeholder:"V d: Tt chin dch km hiu qu",className:"mt-1.5"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"scope",children:"Phm vi p dng"}),s.jsxs(kn,{value:u,onValueChange:ve=>{const Ce=ve;Ce!==u&&w.length>0&&(N([]),ne.info(` i phm vi sang "${nx[Ce]}". iu kin  c reset.`)),d(Ce)},children:[s.jsx(wn,{id:"scope",className:"mt-1.5",children:s.jsx(Cn,{})}),s.jsx(_n,{children:Object.entries(nx).map(([ve,Ce])=>s.jsx(st,{value:ve,children:Ce},ve))})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx(ge,{htmlFor:"timeRange",children:"Khung thi gian"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ki,{checked:!x,onCheckedChange:ve=>{b(!ve),ve&&m("lifetime")}}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Sut i"})]})]}),s.jsxs(kn,{value:h,onValueChange:ve=>m(ve),disabled:!x,children:[s.jsx(wn,{id:"timeRange",children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[Object.entries(sZ).map(([ve,Ce])=>s.jsx(st,{value:ve,children:Ce},ve)),s.jsx(st,{value:"custom",children:"Ty chnh"})]})]}),h==="custom"&&x&&s.jsx(Ke,{type:"number",value:p,onChange:ve=>v(parseInt(ve.target.value)||7),placeholder:"S ngy",className:"mt-2",min:"1"})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"logic",children:"iu kin (Tha mn)"}),s.jsxs(kn,{value:_,onValueChange:ve=>j(ve),children:[s.jsx(wn,{id:"logic",className:"mt-1.5",children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"all",children:"Tt c (AND)"}),s.jsx(st,{value:"any",children:"Bt k (OR)"})]})]})]})]})]}),s.jsx(qs,{}),s.jsxs("div",{children:[s.jsx(ge,{className:"text-base mb-3 block",children:"NU (iu kin)"}),s.jsx(B9e,{conditions:w,onChange:N})]}),s.jsx(qs,{}),s.jsxs("div",{children:[s.jsx(ge,{className:"text-base mb-3 block",children:"TH (Hnh ng)"}),s.jsx(U9e,{actions:k,onChange:C,availableLabels:a}),u==="campaign"&&k.some(ve=>ve.type==="increase_budget"||ve.type==="decrease_budget")&&s.jsxs(Ka,{variant:"destructive",className:"mt-4",children:[s.jsx(is,{className:"h-4 w-4"}),s.jsx(xl,{children:" Cnh bo v ngn sch Campaign"}),s.jsxs(Ga,{className:"space-y-2",children:[s.jsxs("p",{className:"font-medium",children:["Nu campaign ang dng ",s.jsx("strong",{children:"Adset Budget"})," (khng phi CBO), rule s ",s.jsx("strong",{children:"KHNG th chy"})," v bo li  trnh tng ngn sch gp nhiu ln."]}),s.jsxs("p",{className:"text-sm",children:[" ",s.jsx("strong",{children:"Khuyn ngh:"})]}),s.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["Chn scope ",s.jsx("strong",{children:'"Ad Set"'})," v gn label cho cc adset c th"]}),s.jsxs("li",{children:["Hoc chuyn campaign sang ",s.jsx("strong",{children:"Campaign Budget Optimization (CBO)"})]})]})]})]})]}),s.jsx(qs,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-sm",children:"Nhn dn (phn loi quy tc)"}),a.length===0?s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Cha c nhn no. Vui lng to nhn mi  pha di."}):s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map(ve=>{const Ce=A.includes(String(ve.Id));return s.jsxs(Ze,{variant:Ce?"default":"outline",className:je("cursor-pointer transition-all flex items-center gap-1",Ce&&"ring-2"),style:Ce?{backgroundColor:ve.label_color}:{},onClick:Ce?void 0:()=>rn(String(ve.Id),!1),children:[s.jsx("span",{className:Ce?"text-white":"",children:ve.label_name}),Ce&&s.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-white/20 p-0.5 transition-colors",onClick:ye=>{ye.stopPropagation(),rn(String(ve.Id),!1)},children:s.jsx(Cs,{className:"w-3 h-3 text-white"})})]},ve.Id)})})]}),s.jsxs("div",{children:[s.jsx(ge,{className:"text-sm",children:"Ch p dng cho i tng c nhn *"}),a.length===0?s.jsx("p",{className:"text-xs text-amber-600 font-medium mt-2 flex items-center gap-1",children:" Vui lng to t nht 1 nhn  c th p dng quy tc"}):O.length===0?s.jsx("p",{className:"text-xs text-destructive font-medium mt-1 flex items-center gap-1",children:" BT BUC: Phi chn t nht 1 nhn"}):s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Quy tc s ch p dng cho ",O.length," nhn  chn"]}),a.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map(ve=>{const Ce=O.includes(String(ve.Id));return s.jsxs(Ze,{variant:Ce?"default":"outline",className:je("cursor-pointer transition-all flex items-center gap-1",Ce&&"ring-2"),style:Ce?{backgroundColor:ve.label_color}:{},onClick:Ce?void 0:()=>rn(String(ve.Id),!0),children:[s.jsx("span",{className:Ce?"text-white":"",children:ve.label_name}),Ce&&s.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-white/20 p-0.5 transition-colors",onClick:ye=>{ye.stopPropagation(),rn(String(ve.Id),!0)},children:s.jsx(Cs,{className:"w-3 h-3 text-white"})})]},ve.Id)})})]})]}),s.jsx(qs,{}),i&&s.jsxs(s.Fragment,{children:[s.jsx(K9e,{availableLabels:a,onLabelsChange:dn,onDeleteClick:G,isLoading:K,userId:o}),s.jsx(qs,{})]}),s.jsxs(D$,{open:z,onOpenChange:W,children:[s.jsx(L$,{asChild:!0,children:s.jsxs(J,{variant:"outline",className:"w-full justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wd,{className:"w-4 h-4"}),"Ci t nng cao"]}),s.jsx(eu,{className:je("w-4 h-4 transition-transform",z&&"rotate-180")})]})}),s.jsxs(F$,{className:"space-y-4 pt-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-muted/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ge,{children:"T ng chy nh k"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Kim tra iu kin v thc thi theo lch"})]}),s.jsx(Ki,{checked:se,onCheckedChange:D})]}),se&&s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"checkFrequency",children:"Tn sut kim tra (pht)"}),s.jsx(Ke,{id:"checkFrequency",type:"number",value:Y,onChange:ve=>ue(parseInt(ve.target.value)||15),className:"mt-1.5",min:"1"})]})]}),s.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-muted/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ge,{children:"Gii hn an ton"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Ngn thay i ngn sch qu mc"})]}),s.jsx(Ki,{checked:xe,onCheckedChange:Ne})]}),xe&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"maxBudget",children:"Ngn sch ti a (VN/ngy)"}),s.jsx(Ke,{id:"maxBudget",type:"number",value:oe,onChange:ve=>ee(parseInt(ve.target.value)||5e5),className:"mt-1.5",min:"0"})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"minRoas",children:"ROAS ti thiu"}),s.jsx(Ke,{id:"minRoas",type:"number",step:"0.1",value:re,onChange:ve=>Z(parseFloat(ve.target.value)||1.5),className:"mt-1.5",min:"0"})]})]})]}),s.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-muted/20",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-sm font-medium",children:"Gii hn thc thi"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ngn rule tng/gim ngn sch lin tc trn cng 1 campaign/adset"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"maxExecutions",children:"S ln ti a"}),s.jsx("p",{className:"text-xs text-muted-foreground mb-1.5",children:"S ln rule c th thc thi trn cng 1 object (1 = ch tng 1 ln)"}),s.jsx(Ke,{id:"maxExecutions",type:"number",value:ce,onChange:ve=>ae(Math.max(1,parseInt(ve.target.value)||1)),className:"mt-1.5",min:"1"})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"cooldown",children:"Thi gian ch (gi)"}),s.jsx("p",{className:"text-xs text-muted-foreground mb-1.5",children:"S gi phi ch trc khi rule c th chy li trn cng object"}),s.jsx(Ke,{id:"cooldown",type:"number",value:Ue,onChange:ve=>Ve(Math.max(1,parseInt(ve.target.value)||24)),className:"mt-1.5",min:"1"})]})]})]})]})]}),s.jsx(qs,{}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ge,{className:"font-medium",children:"Tm tt chp nhn"}),s.jsx(Ki,{checked:$,onCheckedChange:L})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Tn:"})," ",l||"Cha t tn"]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"iu kin:"})," ",Tt()]}),k.length>0&&s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Hnh ng:"})," ",k.length," actions"]}),$&&s.jsx("p",{className:"text-amber-600 font-medium mt-2",children:" Ch  th nghim (Dry Run) - Ch ghi log, khng thc thi hnh ng"})]})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>t(!1),children:"Hy"}),s.jsx(J,{onClick:Rt,disabled:!mt,children:r?"Lu thay i":"Lu quy tc"})]})]})}),s.jsx(B$,{open:!!B,onOpenChange:ve=>!ve&&G(null),children:s.jsxs(VN,{children:[s.jsxs(zN,{children:[s.jsxs(WN,{className:"flex items-center gap-2",children:[s.jsx(ks,{className:"w-5 h-5 text-destructive"}),"Xc nhn xa nhn"]}),s.jsx(qN,{asChild:!0,children:s.jsxs("div",{children:[s.jsxs("p",{children:["Bn c chc chn mun xa nhn"," ",B&&s.jsx("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold text-white mx-1",style:{backgroundColor:B.label_color},children:B.label_name}),"? Hnh ng ny khng th hon tc."]}),s.jsx("p",{className:"mt-2 text-xs",children:"Lu : Nhn s b xa khi tt c quy tc ang s dng."})]})})]}),s.jsxs(HN,{children:[s.jsx(GN,{disabled:U,children:"Hy"}),s.jsx(KN,{onClick:yn,disabled:U,className:"bg-destructive hover:bg-destructive/90",children:U?"ang xa...":"Xa nhn"})]})]})})]})};function lKe({open:e,onOpenChange:t,labels:n,onLabelsChange:r}){const[a,i]=g.useState(null),[o,l]=g.useState(null),[c,u]=g.useState(!1),d=async()=>{u(!0);try{for(const m of n)m.Id&&await R1(m.Id);ne.success(` xa tt c ${n.length} nhn`),r()}catch(m){console.error("Error deleting all labels:",m),ne.error(`Li khi xa nhn: ${m.message}`)}finally{u(!1)}},h=async m=>{if(!m.Id){ne.error("Khng th xa nhn ny");return}i(m.Id);try{await R1(m.Id),ne.success(` xa nhn: ${m.label_name}`),r()}catch(p){console.error("Error deleting label:",p),ne.error(`Li: ${p.message}`)}finally{i(null),l(null)}};return s.jsxs(s.Fragment,{children:[s.jsx(yr,{open:e&&!o,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-2xl",children:[s.jsxs(hr,{children:[s.jsxs(fr,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Qun l nhn dn"}),n.length>0&&s.jsx(J,{variant:"destructive",size:"sm",onClick:d,disabled:c,children:c?"ang xa...":`Xa tt c (${n.length})`})]}),s.jsx(Ca,{children:"Xa cc nhn khng cn s dng. Lu : Xa nhn s khng xa cc quy tc  s dng nhn ny."})]}),s.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:n.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Cha c nhn no. To nhn mi khi to quy tc."}):s.jsx("div",{className:"space-y-2",children:n.map(m=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/30 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ze,{style:{backgroundColor:m.label_color},className:"text-white",children:m.label_name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["ID: ",m.Id]})]}),s.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>{l(m)},disabled:a===m.Id,className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:[s.jsx(ks,{className:"w-4 h-4 mr-2"}),a===m.Id?"ang xa...":"Xa"]})]},m.Id))})})]})}),s.jsx(B$,{open:!!o,onOpenChange:m=>!m&&l(null),children:s.jsxs(VN,{children:[s.jsxs(zN,{children:[s.jsxs(WN,{className:"flex items-center gap-2",children:[s.jsx(ac,{className:"w-5 h-5 text-orange-500"}),"Xc nhn xa nhn"]}),s.jsx(qN,{asChild:!0,children:s.jsxs("div",{children:[s.jsxs("p",{children:["Bn c chc chn mun xa nhn"," ",s.jsx("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold text-white mx-1",style:{backgroundColor:o==null?void 0:o.label_color},children:o==null?void 0:o.label_name}),"? Hnh ng ny khng th hon tc."]}),s.jsx("p",{className:"mt-2 text-xs",children:"Lu : Cc quy tc  s dng nhn ny s khng b xa."})]})})]}),s.jsxs(HN,{children:[s.jsx(GN,{onClick:()=>l(null),children:"Hy"}),s.jsx(KN,{onClick:()=>o&&h(o),className:"bg-destructive hover:bg-destructive/90",children:"Xa nhn"})]})]})})]})}function cKe({open:e,onOpenChange:t,rule:n,labels:r,onAssignLabels:a}){const[i,o]=g.useState([]),[l,c]=g.useState([]),[u,d]=g.useState(!1),[h,m]=g.useState(!1);g.useEffect(()=>{e&&n?p():(o([]),c([]))},[e,n]);const p=async()=>{if(n){d(!0);try{const{supabase:w}=await vr(async()=>{const{supabase:z}=await Promise.resolve().then(()=>z0);return{supabase:z}},void 0),{data:{user:N}}=await w.auth.getUser();if(!N)return;const{getActiveAdAccounts:k}=await vr(async()=>{const{getActiveAdAccounts:z}=await Promise.resolve().then(()=>ZW);return{getActiveAdAccounts:z}},void 0),A=(await k(N.id)).find(z=>z.is_active);if(!A){ne.error("Khng tm thy ti khon Facebook Ads ang hot ng");return}const{getCampaigns:P,getAdSets:O,getAds:T}=await vr(async()=>{const{getCampaigns:z,getAdSets:W,getAds:B}=await Promise.resolve().then(()=>Vm);return{getCampaigns:z,getAdSets:W,getAds:B}},void 0);let $=[];n.scope==="campaign"?$=await P(A.access_token,A.account_id):n.scope==="adset"?$=await O(A.access_token,A.account_id):$=await T(A.access_token,A.account_id);const L=$.filter(z=>{var K,X,se,D;const W=((X=(K=z.insights)==null?void 0:K.data)==null?void 0:X[0])||{},B=parseFloat(W.spend||"0"),G=parseInt(((D=(se=W.actions)==null?void 0:se.find(Y=>Y.action_type==="offsite_conversion.fb_pixel_purchase"))==null?void 0:D.value)||"0",10),U=n.conditions.map(Y=>{let ue=0;switch(Y.metric==="spend"&&(ue=B),Y.metric==="results"&&(ue=G),Y.operator){case"greater_than":return ue>Y.value;case"less_than":return ue<Y.value;case"equals":return ue===Y.value;case"greater_than_or_equal":return ue>=Y.value;case"less_than_or_equal":return ue<=Y.value;case"not_equals":return ue!==Y.value;default:return!1}});return n.condition_logic==="all"?U.every(Y=>Y):U.some(Y=>Y)}).map(z=>{var W,B,G,U,F,K,X,se;return{id:z.id,name:z.name,spend:parseFloat(((G=(B=(W=z.insights)==null?void 0:W.data)==null?void 0:B[0])==null?void 0:G.spend)||"0"),results:parseInt(((se=(X=(K=(F=(U=z.insights)==null?void 0:U.data)==null?void 0:F[0])==null?void 0:K.actions)==null?void 0:X.find(D=>D.action_type==="offsite_conversion.fb_pixel_purchase"))==null?void 0:se.value)||"0",10)}});o(L),L.length===0&&ne.info("Khng c chin dch no tha mn iu kin")}catch(w){console.error("Error loading matched entities:",w),ne.error("Li khi ti danh sch")}finally{d(!1)}}},v=w=>{c(N=>N.includes(w)?N.filter(k=>k!==w):[...N,w])},x=()=>{l.length===i.length?c([]):c(i.map(w=>w.id))},b=async()=>{if(!(!n||l.length===0)){m(!0);try{const w=n.target_labels.map(N=>parseInt(String(N),10)).filter(N=>!isNaN(N));if(w.length===0){ne.error("Quy tc cha c nhn mc tiu");return}await a(l,n.scope,w),ne.success(` gn nhn cho ${l.length} ${n.scope==="campaign"?"chin dch":n.scope==="adset"?"nhm QC":"qung co"}`),t(!1)}catch(w){console.error("Error assigning labels:",w),ne.error("Li khi gn nhn")}finally{m(!1)}}},_=()=>{if(!n||!n.target_labels)return[];const w=n.target_labels.map(N=>parseInt(String(N),10));return r.filter(N=>N.Id&&w.includes(N.Id))},j=(n==null?void 0:n.scope)==="campaign"?"chin dch":(n==null?void 0:n.scope)==="adset"?"nhm QC":"qung co";return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-2xl max-h-[80vh]",children:[s.jsxs(hr,{children:[s.jsxs(fr,{className:"flex items-center gap-2",children:[s.jsx(Pd,{className:"w-5 h-5 text-primary"}),"Gn nhn ",j]}),s.jsxs(Ca,{children:["Quy tc: ",s.jsx("span",{className:"font-semibold",children:n==null?void 0:n.rule_name})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Nhn s gn:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:_().length>0?_().map(w=>s.jsx(Ze,{style:{backgroundColor:w.label_color},className:"text-white",children:w.label_name},w.Id)):s.jsx("span",{className:"text-sm text-muted-foreground",children:"Cha c nhn mc tiu"})})]}),s.jsxs("div",{className:"border rounded-lg",children:[s.jsxs("div",{className:"p-3 border-b bg-muted/30 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xs,{checked:l.length===i.length&&i.length>0,onCheckedChange:x,disabled:u||i.length===0}),s.jsxs("span",{className:"text-sm font-medium",children:[i.length," ",j," tha mn iu kin"]})]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[" chn: ",l.length]})]}),s.jsx(As,{className:"max-h-[300px]",children:u?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(zt,{className:"w-6 h-6 animate-spin text-primary"})}):i.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground text-sm",children:["Khng c ",j," no tha mn iu kin"]}):s.jsx("div",{className:"p-2 space-y-1",children:i.map(w=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-md hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>v(w.id),children:[s.jsx(Xs,{checked:l.includes(w.id),onCheckedChange:()=>v(w.id)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:w.name}),s.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[s.jsxs("span",{children:["Chi tiu: ",w.spend.toLocaleString()," "]}),s.jsxs("span",{children:["Kt qu: ",w.results]})]})]})]},w.id))})})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[s.jsx(J,{variant:"outline",onClick:()=>t(!1),disabled:h,children:"Hy"}),s.jsx(J,{onClick:b,disabled:l.length===0||h||_().length===0,children:h?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}),"ang gn..."]}):`Gn nhn (${l.length})`})]})]})})}const jy=(e,t)=>{if(!e)return t;if(typeof e!="string"){if(Array.isArray(t)&&typeof e=="object"&&!Array.isArray(e)){if(Object.keys(e).length===0)return[];if(e.id||e.type||e.metric)return[e]}return e}try{let n=JSON.parse(e);if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(t)&&n&&typeof n=="object"&&!Array.isArray(n)){if(Object.keys(n).length===0)return[];if(n.id||n.type||n.metric)return[n]}return n||t}catch(n){return console.error("JSON parse error:",n,e),t}},EZ=e=>{const t={...e,conditions:jy(e.conditions,[]),actions:jy(e.actions,[]),advanced_settings:jy(e.advanced_settings,{}),labels:jy(e.labels,[]),target_labels:jy(e.target_labels,[]),condition_logic:e.condition_logic||"all",id:e.id||(e.Id?String(e.Id):void 0)};return Array.isArray(t.target_labels)&&(t.target_labels=t.target_labels.map(n=>{const r=typeof n=="string"?parseInt(n,10):Number(n);return isNaN(r)?n:r})),t},uKe=async e=>{try{const t=encodeURIComponent(`(user_id,eq,${e})`),n=`${ht(It.TABLES.AUTOMATED_RULES)}?where=${t}&sort=-CreatedAt&limit=100`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return((await r.json()).list||[]).map(EZ)}catch(t){throw console.error("Error fetching rules by user_id:",t),t}},TZ=async e=>{if(!e.user_id)throw new Error("user_id is required. User must be authenticated to create automation rules.");try{const t=ht(It.TABLES.AUTOMATED_RULES),n=lt(),r=await fetch(t,{method:"POST",headers:n,body:JSON.stringify(e)});if(!r.ok){const i=await r.text();throw console.error(" [NocoDB] Error response:",i),new Error(`NocoDB API error: ${r.status} ${r.statusText} - ${i}`)}const a=await r.json();if(a.enableAutoSchedule&&a.checkFrequency)try{const{supabase:i}=await vr(async()=>{const{supabase:o}=await Promise.resolve().then(()=>z0);return{supabase:o}},void 0);await i.functions.invoke("manage-rule-cron",{body:{action:"create",ruleId:a.id,userId:a.user_id,checkFrequency:a.checkFrequency}})}catch(i){console.error(" [NocoDB] Failed to create cron job:",i)}return a}catch(t){throw console.error(" [NocoDB] Error creating rule:",t),console.error(" [NocoDB] Error type:",typeof t),console.error(" [NocoDB] Error message:",t instanceof Error?t.message:String(t)),t}},U$=async(e,t)=>{try{const n=ht(It.TABLES.AUTOMATED_RULES),r=await fetch(n,{method:"PATCH",headers:lt(),body:JSON.stringify([{Id:e,...t}])});if(!r.ok){const o=await r.text();throw new Error(`NocoDB API error: ${r.status} ${r.statusText} - ${o}`)}const a=await r.json(),i=Array.isArray(a)?a[0]:a;if(t.checkFrequency!==void 0||t.enableAutoSchedule!==void 0)try{const{supabase:o}=await vr(async()=>{const{supabase:l}=await Promise.resolve().then(()=>z0);return{supabase:l}},void 0);i.enableAutoSchedule&&i.checkFrequency?await o.functions.invoke("manage-rule-cron",{body:{action:"update",ruleId:e,userId:i.user_id,checkFrequency:i.checkFrequency}}):await o.functions.invoke("manage-rule-cron",{body:{action:"delete",ruleId:e}})}catch(o){console.error(" [NocoDB] Failed to update cron job:",o)}return i}catch(n){throw console.error("Error updating rule:",n),n}},dKe=async e=>{try{try{const{supabase:u}=await vr(async()=>{const{supabase:d}=await Promise.resolve().then(()=>z0);return{supabase:d}},void 0);await u.functions.invoke("manage-rule-cron",{body:{action:"delete",ruleId:e}})}catch(u){console.warn(" [NocoDB] Failed to delete cron job:",u)}const t=encodeURIComponent(`(id,eq,${e})`),n=`${ht(It.TABLES.AUTOMATED_RULES)}?where=${t}&limit=1`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw console.error(" [NocoDB] Failed to fetch rule:",r.status,r.statusText),new Error(`Failed to fetch rule: ${r.statusText}`);const a=await r.json();if(a.list.length===0)throw console.error(" [NocoDB] Rule not found with Id:",e),new Error(`Rule not found with Id: ${e}`);const i=EZ(a.list[0]),o=[...i.labels||[],...i.target_labels||[]].map(u=>parseInt(String(u))).filter((u,d,h)=>!isNaN(u)&&h.indexOf(u)===d);if(o.length>0){const{deleteLabelAssignmentsByLabelId:u}=await vr(async()=>{const{deleteLabelAssignmentsByLabelId:h}=await Promise.resolve().then(()=>BN);return{deleteLabelAssignmentsByLabelId:h}},void 0),{deleteLabel:d}=await vr(async()=>{const{deleteLabel:h}=await Promise.resolve().then(()=>L9e);return{deleteLabel:h}},void 0);for(const h of o)try{await u(h),await d(h)}catch(m){console.warn(` Failed to delete label ${h}:`,m)}}const l=ht(It.TABLES.AUTOMATED_RULES),c=await fetch(l,{method:"DELETE",headers:lt(),body:JSON.stringify([{Id:e}])});if(!c.ok){const u=await c.text();throw new Error(`NocoDB API error: ${c.status} ${c.statusText} - ${u}`)}}catch(t){throw console.error("Error deleting rule:",t),t}},hKe=async(e,t)=>{const n=await U$(e,{is_active:t});try{const{supabase:r}=await vr(async()=>{const{supabase:a}=await Promise.resolve().then(()=>z0);return{supabase:a}},void 0);t&&n.enableAutoSchedule&&n.checkFrequency?await r.functions.invoke("manage-rule-cron",{body:{action:"create",ruleId:e,userId:n.user_id,checkFrequency:n.checkFrequency}}):t||await r.functions.invoke("manage-rule-cron",{body:{action:"delete",ruleId:e}})}catch(r){console.error(" [NocoDB] Failed to manage cron job on toggle:",r)}return n},s6=async(e,t,n)=>{try{const r={last_execution_status:t,last_run_at:new Date().toISOString()};n&&(r.last_execution_log=JSON.stringify(n)),await U$(e,r)}catch(r){throw console.error("Error updating execution status:",r),r}};function fKe({open:e,onOpenChange:t,ruleId:n,ruleName:r}){const[a,i]=g.useState([]),[o,l]=g.useState(!0);g.useEffect(()=>{e&&c()},[e,n]);const c=async()=>{l(!0);try{const p=encodeURIComponent(`(rule_id,eq,${n})`),v=await fetch(`${It.BASE_URL}/api/v2/tables/${It.TABLES.AUTOMATION_RULE_EXECUTION_LOGS}/records?where=${p}&sort=-executed_at&limit=50`,{headers:lt()});if(v.ok){const x=await v.json();i(x.list||[])}}catch(p){console.error("Error loading execution logs:",p)}finally{l(!1)}},u=p=>{switch(p){case"success":return s.jsx(Nn,{className:"w-4 h-4 text-green-500"});case"partial":return s.jsx(ac,{className:"w-4 h-4 text-orange-500"});case"failed":return s.jsx(ji,{className:"w-4 h-4 text-red-500"});case"pending":return s.jsx(zt,{className:"w-4 h-4 text-blue-500 animate-spin"});default:return null}},d=p=>{const v={success:"default",partial:"secondary",failed:"destructive",pending:"outline"},x={success:"Thnh cng",partial:"Mt phn",failed:"Tht bi",pending:"ang chy..."};return s.jsx(Ze,{variant:v[p]||"secondary",children:x[p]||p})},h=p=>({spend:"Chi tiu",results:"Kt qu",roi:"ROI",roas:"ROAS",ctr:"CTR",cpc:"CPC",cpm:"CPM",cpp:"CPP",cost_per_result:"Chi ph/Kt qu"})[p]||p,m=p=>({greater_than:">",less_than:"<",equals:"=",greater_than_or_equal:"",less_than_or_equal:""})[p]||p;return s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-4xl max-h-[85vh]",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"Lch s thc thi"}),s.jsxs(Ca,{children:["Xem cc ln thc thi quy tc: ",s.jsx("strong",{children:r})]})]}),o?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx(zt,{className:"w-12 h-12 mx-auto mb-4 animate-spin text-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"ang ti lch s..."})]}):a.length===0?s.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[s.jsx("p",{children:"Cha c lch s thc thi no"}),s.jsx("p",{className:"text-xs mt-2",children:"Quy tc s xut hin  y sau khi c chy"})]}):s.jsx(As,{className:"max-h-[60vh] pr-4",children:s.jsx("div",{className:"space-y-4",children:a.map(p=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[u(p.status),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:Bt(new Date(p.executed_at),"dd/MM/yyyy HH:mm:ss",{locale:Uh})}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.matched_objects_count," i tng khp "," ",p.executed_actions_count," hnh ng thc thi"]})]})]}),d(p.status)]}),p.details&&Array.isArray(p.details)&&p.status!=="pending"&&s.jsxs("details",{className:"cursor-pointer",open:p.matched_objects_count>0,children:[s.jsx("summary",{className:"text-sm font-medium text-muted-foreground hover:text-foreground",children:p.matched_objects_count>0?`Xem chi tit (${p.details.length} chin dch)`:"Khng c i tng no tha mn iu kin"}),p.matched_objects_count>0&&s.jsx("div",{className:"mt-2 space-y-3",children:p.details.map((v,x)=>{var b,_,j;return s.jsxs("div",{className:"text-xs p-3 bg-muted/50 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"font-semibold text-sm",children:v.campaignName||v.objectName||v.objectId}),s.jsx(Ze,{variant:v.result==="success"?"default":v.result==="skipped"?"secondary":"destructive",className:"text-xs",children:v.action})]}),v.matchedConditions&&Array.isArray(v.matchedConditions)&&s.jsxs("div",{className:"mt-2 space-y-1 p-2 bg-green-50 dark:bg-green-950/20 rounded border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"font-medium text-green-700 dark:text-green-400 mb-1",children:" t iu kin:"}),v.matchedConditions.map((w,N)=>{var k;return s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:w.met?"text-green-600":"text-red-600",children:w.met?"":""}),s.jsxs("span",{className:"font-mono",children:[h(w.metric),": ",s.jsx("strong",{children:(k=w.actualValue)==null?void 0:k.toFixed(2)})," ",m(w.operator)," ",w.threshold]})]},N)})]}),v.metrics&&s.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[v.metrics.spend!==void 0&&s.jsxs("div",{children:["Chi tiu: ",s.jsxs("strong",{children:[(b=v.metrics.spend)==null?void 0:b.toLocaleString(),""]})]}),v.metrics.results!==void 0&&s.jsxs("div",{children:["Kt qu: ",s.jsx("strong",{children:v.metrics.results})]}),v.metrics.roi!==void 0&&s.jsxs("div",{children:["ROI: ",s.jsxs("strong",{children:[(_=v.metrics.roi)==null?void 0:_.toFixed(2),"%"]})]}),v.metrics.roas!==void 0&&s.jsxs("div",{children:["ROAS: ",s.jsx("strong",{children:(j=v.metrics.roas)==null?void 0:j.toFixed(2)})]})]}),v.error&&s.jsxs("div",{className:"text-destructive mt-2 p-2 bg-destructive/10 rounded",children:[s.jsx("strong",{children:"Li:"})," ",v.error]}),v.reason&&s.jsxs("div",{className:"text-muted-foreground mt-2 p-2 bg-muted rounded",children:[s.jsx("strong",{children:"L do:"})," ",v.reason]})]},x)})})]}),p.status==="pending"&&s.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2 mt-2",children:[s.jsx(zt,{className:"w-3 h-3 animate-spin"}),"ang x l..."]})]},p.Id))})})]})})}function mKe({rule:e,labels:t,onToggleActive:n,onEdit:r,onDelete:a,onRun:i,onTest:o,onAssignLabels:l,isRunning:c=!1}){var O,T,$;const[u,d]=g.useState(!1),[h,m]=g.useState(!1),[p,v]=g.useState(!1),[x,b]=g.useState(!1),_=(O=e.actions)==null?void 0:O.some(L=>L.type==="add_label"),j=async()=>{v(!0);const L=Date.now();ne.info(` ang chy quy tc "${e.rule_name}"...`,{duration:2e3});try{await i(e.id);const z=Date.now()-L;z<500&&await new Promise(W=>setTimeout(W,500-z)),ne.success(` Quy tc "${e.rule_name}"  chy xong`,{duration:3e3})}catch(z){ne.error(` Li khi chy quy tc: ${z instanceof Error?z.message:"Unknown error"}`,{duration:5e3})}finally{v(!1)}},w=async()=>{if(!o)return;b(!0);const L=Date.now();ne.info(` ang test (Dry Run) quy tc "${e.rule_name}"...`,{duration:2e3});try{await o(e.id);const z=Date.now()-L;z<500&&await new Promise(W=>setTimeout(W,500-z)),ne.success(`  test xong quy tc "${e.rule_name}"`,{duration:3e3})}catch(z){ne.error(` Li khi test quy tc: ${z instanceof Error?z.message:"Unknown error"}`,{duration:5e3})}finally{b(!1)}},N=()=>{if(!e.last_execution_status)return null;const z={pending:{icon:zt,label:"ang chy",variant:"secondary",className:"text-blue-600 animate-spin"},success:{icon:Nn,label:"Thnh cng",variant:"default",className:"text-green-600"},partial:{icon:is,label:"Mt phn",variant:"secondary",className:"text-orange-600"},failed:{icon:ji,label:"Tht bi",variant:"destructive",className:"text-red-600"}}[e.last_execution_status];if(!z)return null;const W=z.icon;return s.jsxs(Ze,{variant:z.variant,className:"gap-1.5 text-xs",children:[s.jsx(W,{className:`w-3 h-3 ${z.className}`}),z.label]})},k=()=>{if(!e.last_execution_log)return null;try{const L=typeof e.last_execution_log=="string"?JSON.parse(e.last_execution_log):e.last_execution_log;return!L.results||L.results.length===0?null:s.jsxs(D$,{open:h,onOpenChange:m,children:[s.jsx(L$,{asChild:!0,children:s.jsxs(J,{variant:"ghost",size:"sm",className:"gap-2 text-xs",children:[s.jsx(To,{className:"w-3 h-3"}),"Xem chi tit (",L.results.length," hnh ng)"]})}),s.jsx(F$,{className:"mt-2 space-y-1",children:L.results.map((z,W)=>s.jsxs("div",{className:"text-xs p-3 rounded-lg bg-muted/50 flex items-start gap-3 border border-border/50",children:[z.result==="success"?s.jsx(Nn,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}):z.result==="skipped"?s.jsx(is,{className:"w-4 h-4 text-orange-500 flex-shrink-0 mt-0.5"}):s.jsx(ji,{className:"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium text-foreground",children:z.objectName||z.campaignName}),z.campaignId&&s.jsx(Ze,{variant:"outline",className:"text-[10px] font-mono px-1.5 py-0",children:z.campaignId}),z.level&&s.jsx(Ze,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:z.level==="campaign"?"Chin dch":z.level==="adset"?"Nhm QC":"Qung co"})]}),s.jsxs("div",{className:"text-muted-foreground text-xs",children:["Hnh ng: ",s.jsx("span",{className:"font-medium",children:$1[z.action]||z.action})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[z.result==="success"&&s.jsx(Ze,{variant:"default",className:"text-[10px] bg-green-600 hover:bg-green-700",children:" Hon thnh"}),z.result==="skipped"&&s.jsx(Ze,{variant:"secondary",className:"text-[10px] bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",children:" B qua"}),z.result==="failed"&&s.jsx(Ze,{variant:"destructive",className:"text-[10px]",children:" Li"}),z.executionCount!==void 0&&s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",z.executionCount," ln)"]})]}),z.details&&s.jsx("div",{className:"text-green-700 dark:text-green-400 text-xs mt-1 p-2 bg-green-50 dark:bg-green-900/20 rounded",children:z.details}),z.error&&s.jsxs("div",{className:"text-red-600 dark:text-red-400 text-xs mt-1 p-2 bg-red-50 dark:bg-red-900/20 rounded",children:[s.jsx("span",{className:"font-medium",children:"Li:"})," ",z.error]}),z.reason&&s.jsxs("div",{className:"text-orange-600 dark:text-orange-400 text-xs mt-1 p-2 bg-orange-50 dark:bg-orange-900/20 rounded",children:[s.jsx("span",{className:"font-medium",children:"L do:"})," ",z.reason]})]})]},W))})]})}catch(L){return console.error("Error parsing execution results:",L),null}},C=()=>{const L=(Array.isArray(e.labels)?e.labels:[]).map(z=>String(z));return t.filter(z=>L.includes(String(z.Id)))},A=()=>{if(!Array.isArray(e.conditions)||e.conditions.length===0)return s.jsx("span",{className:"text-sm text-muted-foreground",children:"Cha c iu kin"});const L=e.condition_logic==="all"?"V":"HOC";return e.conditions.map((z,W)=>s.jsxs("span",{className:"text-sm",children:[s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx("span",{className:"font-medium cursor-help border-b border-dotted border-muted-foreground/50 hover:text-primary transition-colors",children:T_[z.metric]||z.metric})}),s.jsx(mi,{children:s.jsxs("p",{className:"font-mono text-xs",children:["M h thng: ",z.metric]})})]})})," ",aZ[z.operator]," ",z.value.toLocaleString(),W<e.conditions.length-1&&s.jsxs("span",{className:"font-bold text-muted-foreground mx-1",children:[" ",L," "]})]},W))},P=()=>!Array.isArray(e.actions)||e.actions.length===0?s.jsx("span",{className:"text-sm text-muted-foreground",children:"Cha c hnh ng"}):e.actions.map(L=>s.jsxs(Ze,{variant:"secondary",className:"mr-1",children:[$1[L.type],L.value&&`: ${L.value}${L.valueType==="amount"?" VN":"%"}`,L.executeAt&&` lc ${L.executeAt}`]},L.id));return s.jsxs(Oe,{className:"p-4 hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsxs("div",{className:"flex flex-col items-center gap-1 mr-2",children:[s.jsx(Ki,{checked:!!e.is_active,onCheckedChange:()=>n(e.id,e.is_active),id:`switch-${e.id}`}),s.jsx("label",{htmlFor:`switch-${e.id}`,className:"text-[10px] font-medium text-muted-foreground cursor-pointer",children:"T ng"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-foreground mb-1",children:e.rule_name}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsx(Ze,{variant:"outline",className:"font-normal",children:nx[e.scope]}),s.jsx("span",{children:""}),s.jsx(tu,{className:"w-3 h-3"}),s.jsx("span",{children:sZ[e.time_range]}),s.jsx("span",{children:""}),s.jsx("span",{className:"flex items-center gap-1",children:e.target_labels&&e.target_labels.length>0?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pd,{className:"w-3 h-3 text-blue-600"}),e.target_labels.length<=3?s.jsx("span",{className:"text-blue-600 font-medium",children:e.target_labels.map((L,z)=>{const W=t.find(B=>String(B.Id)===String(L));return s.jsxs("span",{children:[W?W.label_name:L,z<e.target_labels.length-1&&", "]},L)})}):s.jsxs("span",{className:"text-blue-600 font-medium",title:`p dng cho cc nhn: ${e.target_labels.map(L=>{const z=t.find(W=>String(W.Id)===String(L));return z?z.label_name:L}).join(", ")}`,children:[e.target_labels.length," nhn"]})]}):e.apply_to==="specific"?s.jsxs("span",{className:"text-blue-600 font-medium",title:`IDs: ${(T=e.specific_ids)==null?void 0:T.join(", ")}`,children:[(($=e.specific_ids)==null?void 0:$.length)||0," ",nx[e.scope].toLowerCase()," c th"]}):s.jsxs("span",{children:["Tt c ",nx[e.scope].toLowerCase()," active"]})}),e.enableAutoSchedule&&e.checkFrequency&&s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsxs(Ze,{variant:"secondary",className:"gap-1 cursor-help",children:[s.jsx(tu,{className:"h-3 w-3"}),e.checkFrequency,"p"]})}),s.jsx(mi,{children:s.jsxs("p",{children:["T ng chy mi ",e.checkFrequency," pht"]})})]})})]}),e.last_execution_status&&s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[N(),e.last_run_at&&s.jsx("span",{className:"text-xs text-muted-foreground",children:Bt(new Date(e.last_run_at),"HH:mm")})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[_&&l&&s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{size:"icon",variant:"ghost",onClick:()=>l(e.id),className:"text-primary hover:text-primary hover:bg-primary/10",children:s.jsx(Pd,{className:"w-4 h-4"})})}),s.jsx(mi,{children:"Gn nhn chin dch"})]})}),s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{size:"icon",variant:"ghost",onClick:()=>d(!0),children:s.jsx(kce,{className:"w-4 h-4"})})}),s.jsx(mi,{children:"Lch s chy"})]})}),o&&s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{size:"icon",variant:"ghost",onClick:w,disabled:c||p||x,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:x?s.jsx(zt,{className:"w-4 h-4 animate-spin"}):s.jsx(Yz,{className:"w-4 h-4"})})}),s.jsxs(mi,{children:[s.jsx("p",{className:"font-semibold",children:"Test (Gi lp)"}),s.jsx("p",{className:"text-xs",children:"Kim tra iu kin, khng thc thi tht"})]})]})}),s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{size:"icon",variant:"ghost",onClick:j,disabled:c||p||x,children:c||p?s.jsx(zt,{className:"w-4 h-4 animate-spin"}):s.jsx(ap,{className:"w-4 h-4"})})}),s.jsxs(mi,{children:[s.jsx("p",{className:"font-semibold",children:"Chy ngay (Th cng)"}),s.jsx("p",{className:"text-xs",children:"Thc thi quy tc ngay lp tc"})]})]})}),s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{size:"icon",variant:"ghost",onClick:()=>r(e),children:s.jsx(X2,{className:"w-4 h-4"})})}),s.jsx(mi,{children:"Chnh sa"})]})}),s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{size:"icon",variant:"ghost",onClick:()=>a(e.id),children:s.jsx(ks,{className:"w-4 h-4"})})}),s.jsx(mi,{children:"Xa quy tc"})]})})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground font-medium",children:"iu kin: "}),s.jsx("div",{className:"inline",children:A()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground font-medium",children:"Hnh ng: "}),s.jsx("div",{className:"inline",children:P()})]})]}),C().length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:C().map(L=>s.jsx(Ze,{style:{backgroundColor:L.label_color},className:"text-white text-xs",children:L.label_name},L.Id))}),e.last_run_at&&e.execution_count&&s.jsxs("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:["Chy ln cui: ",Bt(new Date(e.last_run_at),"dd/MM/yyyy HH:mm"),"   chy ",e.execution_count," ln"]}),e.last_execution_status&&e.last_execution_status!=="pending"&&s.jsx("div",{className:"mt-3 pt-3 border-t",children:k()}),s.jsx(fKe,{open:u,onOpenChange:d,ruleId:e.id,ruleName:e.rule_name})]})}function pKe({show:e,onDismiss:t,variant:n="general"}){if(!e)return null;const a={automation:{title:" Automation Rules - Cha h tr Multi-Account",description:"Quy tc t ng hin cha phn bit ti khon qung co. Nu bn c nhiu ti khon, vui lng KHNG s dng tnh nng ny  trnh tt nhm chin dch.",severity:"destructive"},labels:{title:" Nhn dn - Shared gia cc Accounts",description:"Nhn dn c chia s gia tt c ti khon qung co ca bn. Khi chuyn account, nhn vn hin th nhng c th khng lin quan.",severity:"default"},general:{title:" Multi-Account Mode (Beta)",description:"Bn ang s dng nhiu ti khon qung co. D liu bo co  c phn tch theo account, nhng mt s tnh nng nh Automation Rules cha h tr y .",severity:"default"}}[n];return s.jsxs(Ka,{variant:a.severity,className:"mb-4",children:[s.jsx(ac,{className:"h-4 w-4"}),s.jsx(xl,{children:a.title}),s.jsxs(Ga,{className:"mt-2",children:[a.description,n==="automation"&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx("p",{className:"text-sm font-semibold",children:" Ri ro:"}),s.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1",children:[s.jsxs("li",{children:["Rules c th chy trn ",s.jsx("strong",{children:"NHM"})," ti khon"]}),s.jsxs("li",{children:["C th ",s.jsx("strong",{children:"TT NHM"})," chin dch ang chy tt"]}),s.jsxs("li",{children:["Gy ",s.jsx("strong",{children:"THIT HI TI CHNH"})]})]}),s.jsxs("p",{className:"text-sm mt-3",children:[" ",s.jsx("strong",{children:"Khuyn ngh:"})," Ch to rules khi bn c 1 ti khon duy nht hoc ch update h tr multi-account."]})]})]}),t&&s.jsx(J,{variant:"ghost",size:"sm",onClick:t,className:"mt-2",children:" hiu"})]})}const gKe=({rules:e,labels:t,isLoading:n,hasMultipleAccounts:r,showWarning:a,onDismissWarning:i,onCreateSampleRules:o,creatingSamples:l,onNavigateTestCron:c,onManageLabels:u,onCreateRule:d,onToggleActive:h,onEdit:m,onDelete:p,onRun:v,onTestRule:x,onAssignLabels:b,runningRules:_})=>s.jsxs(Oe,{className:"mt-4 border-none shadow-sm bg-gradient-to-br from-primary/5 to-primary/10",children:[s.jsx(Fe,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:s.jsx(vf,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(Be,{className:"text-xl sm:text-2xl",children:"Quy tc t ng ha"}),s.jsx(sn,{className:"mt-1",children:"T ng ha qun l chin dch qung co da trn hiu sut"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(J,{variant:"outline",onClick:o,disabled:l,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(Zr,{className:"w-4 h-4"}),l?"ang to...":"5 Quy tc mu"]}),s.jsxs(J,{variant:"outline",onClick:c,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(Yz,{className:"w-4 h-4"}),"Test Cron"]}),s.jsxs(J,{variant:"outline",onClick:u,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(Pd,{className:"w-4 h-4"}),"Qun l nhn"]}),s.jsxs(J,{onClick:d,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(nu,{className:"w-4 h-4"}),"To quy tc mi"]})]})]})}),s.jsxs(Re,{children:[r&&a&&s.jsx("div",{className:"mb-4",children:s.jsx(pKe,{variant:"automation",show:!0,onDismiss:i})}),n?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"ang ti..."}):e.length===0?s.jsx(Oe,{className:"bg-background/50",children:s.jsxs(Re,{className:"text-center py-12",children:[s.jsx(vf,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Cha c quy tc no. Bt u t ng ha bng cch to quy tc u tin!"}),s.jsxs(J,{onClick:d,variant:"outline",children:[s.jsx(nu,{className:"w-4 h-4 mr-2"}),"To quy tc u tin"]})]})}):s.jsx("div",{className:"grid gap-4",children:e.map(j=>s.jsx(mKe,{rule:j,labels:t,onToggleActive:h,onEdit:m,onDelete:p,onRun:v,onTest:x,onAssignLabels:b,isRunning:_.has(j.id)},j.id))})]})]}),vKe=async(e,t)=>{const n={success:0,failed:0,errors:[]},r=[{name:" Test 1: Tt chin dch - Chi ph cao",description:"Tt campaign khi: Spend  75k AND Cost/Result  75k AND Results  2",labelName:"Test-HighCost",labelColor:"#ef4444",campaignIds:t.slice(0,2)},{name:" Test 2: Tng budget - Hiu sut tt",description:"Tng 20% budget khi: Cost/Result < 80k AND Results  2",labelName:"Test-GoodPerf",labelColor:"#22c55e",campaignIds:t.slice(2,4)},{name:" Test 3: AND Logic - Nhiu iu kin",description:"Test AND: Spend > 50k AND CTR > 1% AND Results > 1",labelName:"Test-AND",labelColor:"#3b82f6",campaignIds:t.slice(4,6)},{name:" Test 4: OR Logic - Bt k iu kin",description:"Test OR: Spend > 100k OR Cost/Result > 100k OR Results < 1",labelName:"Test-OR",labelColor:"#f59e0b",campaignIds:t.slice(0,3)},{name:" Test 5: Time Range - Today",description:"Test time range: Today only",labelName:"Test-Today",labelColor:"#8b5cf6",campaignIds:t.slice(0,2)}];for(const a of r)try{const i={user_id:e,label_name:a.labelName,label_color:a.labelColor},o=await I$(i);for(const u of a.campaignIds)try{await FN(u,"campaign",o.Id,e)}catch(d){console.warn(`   Failed to assign label to campaign ${u}:`,d)}let l;a.name.includes("Test 1")?l={user_id:e,rule_name:a.name,scope:"campaign",time_range:"today",is_active:!0,condition_logic:"all",conditions:[{id:"1",metric:"spend",operator:"greater_than_or_equal",value:75e3},{id:"2",metric:"cost_per_result",operator:"greater_than_or_equal",value:75e3},{id:"3",metric:"results",operator:"less_than_or_equal",value:2}],actions:[{id:"1",type:"turn_off"}],target_labels:[o.Id.toString()],labels:[o.Id.toString()],advanced_settings:{maxExecutionsPerObject:1,cooldownHours:24}}:a.name.includes("Test 2")?l={user_id:e,rule_name:a.name,scope:"campaign",time_range:"today",is_active:!0,condition_logic:"all",conditions:[{id:"1",metric:"cost_per_result",operator:"less_than",value:8e4},{id:"2",metric:"results",operator:"greater_than_or_equal",value:2}],actions:[{id:"1",type:"increase_budget",value:20,valueType:"percentage"}],target_labels:[o.Id.toString()],labels:[o.Id.toString()],advanced_settings:{maxExecutionsPerObject:1,cooldownHours:24}}:a.name.includes("Test 3")?l={user_id:e,rule_name:a.name,scope:"campaign",time_range:"today",is_active:!0,condition_logic:"all",conditions:[{id:"1",metric:"spend",operator:"greater_than",value:5e4},{id:"2",metric:"ctr",operator:"greater_than",value:1},{id:"3",metric:"results",operator:"greater_than",value:1}],actions:[{id:"1",type:"send_notification"}],target_labels:[o.Id.toString()],labels:[o.Id.toString()],advanced_settings:{}}:a.name.includes("Test 4")?l={user_id:e,rule_name:a.name,scope:"campaign",time_range:"today",is_active:!0,condition_logic:"any",conditions:[{id:"1",metric:"spend",operator:"greater_than",value:1e5},{id:"2",metric:"cost_per_result",operator:"greater_than",value:1e5},{id:"3",metric:"results",operator:"less_than",value:1}],actions:[{id:"1",type:"turn_off"}],target_labels:[o.Id.toString()],labels:[o.Id.toString()],advanced_settings:{maxExecutionsPerObject:1}}:l={user_id:e,rule_name:a.name,scope:"campaign",time_range:"today",is_active:!0,condition_logic:"all",conditions:[{id:"1",metric:"spend",operator:"greater_than",value:0}],actions:[{id:"1",type:"send_notification"}],target_labels:[o.Id.toString()],labels:[o.Id.toString()],advanced_settings:{}};const c=await TZ(l);n.success++}catch(i){console.error(`   Failed to create rule: ${a.name}`,i),n.failed++,n.errors.push(`${a.name}: ${i instanceof Error?i.message:String(i)}`)}return n},yKe=async(e,t,n)=>{try{const r=new Date().toISOString().split("T")[0];let a=[`(user_id,eq,${e})`,`(date_start,eq,${r})`];const i=encodeURIComponent(a.join("~and")),o=`${ht(It.TABLES.FACEBOOK_INSIGHTS)}?where=${i}&limit=1000&sort=-synced_at`,l=await fetch(o,{headers:lt()});if(!l.ok)throw new Error(`Failed to fetch today insights: ${l.status}`);return(await l.json()).list||[]}catch(r){throw console.error("Error fetching today insights from NocoDB:",r),r}},i6=e=>{if(!e)return"ACTIVE";const t=e.toUpperCase();return["ACTIVE","PAUSED","DELETED","ARCHIVED"].includes(t)?t:t==="WITH_ISSUES"||t==="PENDING_BILLING_INFO"||t==="CAMPAIGN_PAUSED"||t==="ADSET_PAUSED"||t==="AD_PAUSED"?"PAUSED":t==="IN_PROCESS"?"ACTIVE":"PAUSED"},aE={MESSAGES:["onsite_conversion.messaging_conversation_started_7d","onsite_conversion.messaging_first_reply","onsite_conversion.total_messaging_connection"],OUTCOME_ENGAGEMENT:["onsite_conversion.total_messaging_connection","onsite_conversion.messaging_first_reply","post_engagement","page_engagement"],OUTCOME_LEADS:["lead","onsite_conversion.lead_grouped"],LEAD_GENERATION:["lead","onsite_conversion.lead_grouped"],OUTCOME_SALES:["purchase","omni_purchase"],CONVERSIONS:["purchase","omni_purchase"],VIDEO_VIEWS:["video_view","thruplay"],OUTCOME_TRAFFIC:["landing_page_view","link_click"],TRAFFIC:["landing_page_view","link_click"],OUTCOME_AWARENESS:["reach"],AWARENESS:["reach"],REACH:["reach"]},PZ=()=>{var Rl;const{user:e}=Mn(),t=cs();tR();const[n,r]=g.useState([]),[a,i]=g.useState(!1),[o,l]=g.useState(0),[c,u]=g.useState(""),[d,h]=g.useState(!1),[m,p]=g.useState(!1),[v,x]=g.useState([]),[b,_]=g.useState(!1),[j,w]=g.useState(!1),[N,k]=g.useState(null),[C,A]=g.useState([{level:"campaign",parentId:null,name:"Tt c chin dch"}]),[P,O]=g.useState(new Set);g.useState(new Set);const[T,$]=g.useState(null),[L,z]=g.useState(null),[W,B]=g.useState(null),[G,U]=g.useState(!1),[F,K]=g.useState(!1),[X,se]=g.useState(null),[D,Y]=g.useState(null),[ue,xe]=g.useState([]),[Ne,oe]=g.useState(!1),[ee,re]=g.useState(!1),[Z,ce]=g.useState(),[ae,Ue]=g.useState(!1),[Ve,ut]=g.useState(),[Rt,mt]=g.useState(!1),[rn,yn]=g.useState(!1),[dn,Tt]=g.useState(!0),[ve,Ce]=g.useState(new Set),[ye,dt]=g.useState(!1);g.useState(!1);const[pt,tn]=g.useState(!0),[xn,on]=g.useState("5"),[zn,ti]=g.useState(!1),[Rr,Ja]=g.useState(!1),[ia,ni]=g.useState(null),va=async()=>{if(e!=null&&e.id)try{const q=(await Vr(e.id)).find(Q=>Q.is_active);q&&(ni(q),tn(!!q.is_active))}catch(I){console.error("Error fetching ad account status:",I)}};g.useEffect(()=>{va()},[e==null?void 0:e.id]);const Za=async()=>{if(!(ia!=null&&ia.Id)){ne.error("Khng tm thy ti khon qung co hp l");return}ti(!0);try{const{updateAdAccount:I}=await vr(async()=>{const{updateAdAccount:q}=await Promise.resolve().then(()=>ZW);return{updateAdAccount:q}},void 0);await I(ia.Id,{is_active:pt}),ne.success("Cp nht cu hnh t ng thnh cng"),Ja(!1),va()}catch(I){console.error("Error updating account settings:",I),ne.error("Li cp nht cu hnh: "+I.message)}finally{ti(!1)}},hc=async()=>{if(!m){p(!0),u("ang gi yu cu ng b...");try{const{data:I,error:q}=await wt.functions.invoke("sync-ads-full",{body:{limit:5e3,date_preset:"today"}});if(q)throw q;ne.success(" gi yu cu ng b thnh cng",{description:` x l ${(I==null?void 0:I.processed)||0} bn ghi`}),u("ang ti li d liu..."),setTimeout(async()=>{await Ib(),p(!1)},2e3)}catch(I){console.error("Sync error:",I),ne.error("Li ng b: "+I.message),p(!1)}}},[mr,fc]=Br("ads-report-date-range",{from:Bt(ld(new Date,7),"yyyy-MM-dd"),to:Bt(new Date,"yyyy-MM-dd")}),Ye=g.useMemo(()=>{if(mr)return{from:mr.from?new Date(mr.from):void 0,to:mr.to?new Date(mr.to):void 0}},[mr==null?void 0:mr.from,mr==null?void 0:mr.to]),El=I=>{I!=null&&I.from||I!=null&&I.to?fc({from:I.from?Bt(I.from,"yyyy-MM-dd"):void 0,to:I.to?Bt(I.to,"yyyy-MM-dd"):void 0}):fc(void 0)},[ar,mc]=Br("ads-report-historical-date-range",void 0),tt=g.useMemo(()=>{if(ar)return{from:ar.from?new Date(ar.from):void 0,to:ar.to?new Date(ar.to):void 0}},[ar==null?void 0:ar.from,ar==null?void 0:ar.to]),Dn=I=>{I!=null&&I.from||I!=null&&I.to?mc({from:I.from?Bt(I.from,"yyyy-MM-dd"):void 0,to:I.to?Bt(I.to,"yyyy-MM-dd"):void 0}):mc(void 0)},[mn,es]=g.useState(["ACTIVE","PAUSED"]),[Cr,ya]=g.useState(new Set),[ts,xa]=g.useState({}),[Yr,yu]=g.useState(null),[zo,us]=g.useState([{level:"campaign",parentId:null,name:"Tt c chin dch"}]),[Hn,Es]=Br("ads-report-column-widths",{}),[ds,Jf]=g.useState(null),[Zf,eh]=g.useState(0),[em,bv]=g.useState(0),[th,nh]=Br("ads-report-historical-column-widths",{}),[xu,tm]=g.useState(null),[pc,wv]=g.useState(0),[gc,qe]=g.useState(0),St=["spend","costPerResult","budget","adsetBudget","results","impressions","clicks","phones","costPerPhone","appointments","costPerAppointment","customers","costPerCustomer","dailyMarketingCost","marketingCostPerRevenue","revenue","conversionRate"],[Pn,Lt]=Br("ads-report-summary-metric-order",St),[Wt,Wn]=Br("ads-report-summary-selected-metrics",St);g.useState(null);const Ln=["appointments","costPerAppointment","customers","costPerCustomer","revenue","marketingCostPerRevenue","conversionRate"],[hs,ro]=Br("ads-report-sale-metric-order",Ln),[fs,ao]=Br("ads-report-sale-selected-metrics",Ln);g.useState(null);const[On,ri]=g.useState(!1),[Ua,so]=Br("ads-report-summary-view","cards",I=>I==="cards"||I==="chart");Br("ads-report-summary-chart","bar",I=>["line","bar","area","pie"].includes(I));const[vc,yc]=Br("ads-report-marketing-view","cards",I=>I==="cards"||I==="chart"),[_v,JN]=Br("ads-report-marketing-chart","bar",I=>["line","bar","area","pie"].includes(I)),[jv,Sv]=Br("ads-report-sale-view","cards",I=>I==="cards"||I==="chart");Br("ads-report-sale-chart","bar",I=>["line","bar","area","pie"].includes(I));const[ms,Nv]=g.useState([]),[ps,rh]=g.useState([]),[io,Tl]=g.useState([]),[Ts,ZN]=g.useState("VND"),[xb,ek]=g.useState(!1),[kv,tk]=g.useState(null),[Cv,nk]=g.useState(new Set),ah=["spend","costPerResult","budget","adsetBudget","results","impressions","clicks","phones","costPerPhone","dailyMarketingCost"],{settings:Av,updateSettings:oo,loading:Ev}=XG(),bu=Av.marketingMetricOrder||ah,sh=Av.selectedMarketingMetrics||ah,nm=I=>oo({marketingMetricOrder:I}),[wu,rk]=Br("ads-report-marketing-layouts",[]),[ak,Tv]=g.useState(!1),[rm,bb]=g.useState(""),[pr,cr]=g.useState(""),[sk,ik]=Br("ads-report-summary-layouts",[]),[ok,Pv]=g.useState(!1),[am,wb]=g.useState("");g.useState("");const[_b,lk]=Br("ads-report-sale-layouts",[]),[Ea,ih]=g.useState(!1),[lo,Ov]=g.useState("");g.useState("");const[_u,ai]=Br("ads-report-detail-layouts",[]),[jb,oh]=g.useState(!1),[lh,Iv]=g.useState(""),[Sb,Nb]=g.useState("");Br("ads-report-saved-layouts",[]),g.useState(""),g.useState(!1);const{toast:Yt}=Lo(),kb=["effective_status","campaign_name","spend","results_messaging_replied_7d","cost_per_messaging_replied_7d","impressions","clicks","ctr","phones","cost_per_phone"],ba=Av.selectedFields||kb,[ch,uh]=g.useState(null),[Pl,dh]=g.useState(!1),sm=["spend","results","costPerResult","impressions","clicks","ctr","cpc","cpm","cpp","frequency","reach","phones","costPerPhone","appointments","costPerAppointment","customers","costPerCustomer","revenue","marketingCostPerRevenue","conversionRate"];Br("ads-report-detail-metric-order",sm),Br("ads-report-detail-selected-metrics",sm),g.useState(null),g.useState(!1);const[er,Ho]=Br("ads-report-historical-layouts",[]),[Rv,im]=g.useState(!1),[ju,Cb]=g.useState(""),[Ab,Eb]=g.useState(""),[Ol,hh]=g.useState([]),[Su,Tb]=g.useState(!1),[Pb,xc]=g.useState([]),[Ar,$v]=g.useState({hasPaymentIssue:!1}),[fh,Mv]=Br("ads-report-historical-columns",kb),[Dv,om]=g.useState(!1);g.useEffect(()=>{let I=!1;const q=ba.map(he=>he==="results"?(I=!0,"results_messaging_replied_7d"):he==="cost_per_result"?(I=!0,"cost_per_messaging_replied_7d"):he),Q=Array.from(new Set(q));Q.length!==q.length&&(I=!0),I&&oo({selectedFields:Q})},[Ev]),g.useEffect(()=>{if(Ev)return;const I={spend:"spend",results_messaging_replied_7d:"results",cost_per_messaging_replied_7d:"costPerResult",impressions:"impressions",clicks:"clicks",phones:"phones",cost_per_phone:"costPerPhone",daily_budget:"budget",budget:"budget",ctr:"ctr",cpc:"cpc",cpm:"cpm",cpp:"cpp",frequency:"frequency",reach:"reach"},q=ba.map(fe=>I[fe]).filter(Boolean),Q=new Set(sh),he=new Set(q);Q.has("dailyMarketingCost")&&he.add("dailyMarketingCost");let be=!1;if(Q.size!==he.size)be=!0;else for(const fe of he)if(!Q.has(fe)){be=!0;break}be&&oo({selectedMarketingMetrics:Array.from(he)})},[ba,Ev]),g.useEffect(()=>{e!=null&&e.id&&(Os(),Rb())},[e==null?void 0:e.id]),g.useEffect(()=>{const I=ah.filter(q=>!bu.includes(q));if(I.length>0){const q=[...bu],Q=q.indexOf("budget");I.forEach(he=>{he==="adsetBudget"&&Q!==-1?q.splice(Q+1,0,he):q.push(he)}),nm(q)}},[]);const lm=zo[zo.length-1],an=lm.level,Ps=(I,q)=>{const Q=[];if(Bt(I,"yyyy-MM-dd")===Bt(q,"yyyy-MM-dd"))return Q.push({since:Bt(I,"yyyy-MM-dd"),until:Bt(q,"yyyy-MM-dd")}),Q;let be=I;for(;be<=q;){const fe=r7([Zi(be,37),q]);if(Q.push({since:Bt(be,"yyyy-MM-dd"),until:Bt(fe,"yyyy-MM-dd")}),be=Zi(fe,1),Q.length>100){console.error("Qu nhiu t, ang dng");break}}return Q},Lv=async()=>{if(e!=null&&e.id)try{const q=(await Vr(e.id)).find(ot=>ot.is_active);if(!q)return;h(!0);const{getCampaignCatalog:Q,getAdsetCatalog:he,getAdCatalog:be}=await vr(async()=>{const{getCampaignCatalog:ot,getAdsetCatalog:we,getAdCatalog:pe}=await import("./facebookCatalogSnapshotService-DaR7VSpR.js");return{getCampaignCatalog:ot,getAdsetCatalog:we,getAdCatalog:pe}},[]),[fe,Ee,$e]=await Promise.all([Q(e.id,q.account_id),he(e.id,q.account_id),be(e.id,q.account_id)]);Nv(fe),rh(Ee),Tl($e),console.log(" Loaded structure from Backend:",{campaigns:fe.length,adsets:Ee.length,ads:$e.length})}catch(I){console.error(" Error loading structure from backend:",I)}finally{h(!1)}},mh=async()=>{p(!0),l(0),u("ang khi to...");try{const{getInsights:I,calculateResultsAndCost:q,extractMessagingRepliedMetrics:Q}=await vr(async()=>{const{getInsights:ke,calculateResultsAndCost:Vt,extractMessagingRepliedMetrics:tr}=await Promise.resolve().then(()=>Vm);return{getInsights:ke,calculateResultsAndCost:Vt,extractMessagingRepliedMetrics:tr}},void 0);if(!(e!=null&&e.id)){console.error(" Cha ng nhp!");return}const be=(await Vr(e.id)).find(ke=>ke.is_active);if(!be){p(!1);return}let fe=new Date,Ee=new Date;Ee.setDate(Ee.getDate()-7),Ye!=null&&Ye.from&&(Ye!=null&&Ye.to)&&(Ee=Ye.from,fe=Ye.to);const $e=Ps(Ee,fe),ot=$e.length;if(ot>1&&Yt({title:"ng b d liu ln",description:`Chia thnh ${ot} t do gii hn API Facebook (37 thng/t)`}),!(e!=null&&e.id)){Yt({title:"Li xc thc",description:"Bn cn ng nhp  ng b d liu lch s",variant:"destructive"});return}const we=e.id;let pe=[],le=[],_e=[];for(let ke=0;ke<$e.length;ke++){const Vt=$e[ke],tr=ke/(ot*3)*100;l(tr),u(`t ${ke+1}/${ot}: ${Vt.since}  ${Vt.until}`);try{u(`t ${ke+1}/${ot}: ang ly chin dch...`);const gr=await I({accessToken:be.access_token,adAccountId:be.account_id,level:"campaign",since:Vt.since,until:Vt.until});pe.push(...gr);const pm=gr.reduce((ca,Pa)=>{const ua=Pa.effective_status||Pa.status||"UNKNOWN";return ca[ua]=(ca[ua]||0)+1,ca},{});l(tr+1/(ot*3)*100),u(`t ${ke+1}/${ot}: ang ly nhm qung co...`);const gm=await I({accessToken:be.access_token,adAccountId:be.account_id,level:"adset",since:Vt.since,until:Vt.until});le.push(...gm),l(tr+2/(ot*3)*100),u(`t ${ke+1}/${ot}: ang ly qung co...`);const rt=await I({accessToken:be.access_token,adAccountId:be.account_id,level:"ad",since:Vt.since,until:Vt.until});_e.push(...rt),ke<$e.length-1&&await new Promise(ca=>setTimeout(ca,1e3))}catch(gr){console.error(` Li trong t ${ke+1}:`,gr),console.error(" Chi tit li y :",JSON.stringify(gr,null,2)),Yt({title:"Li ng b t "+(ke+1),description:gr.message||"Khng th ly d liu t Facebook",variant:"destructive"})}}const Ie=[...pe,...le,..._e];Ie.length===0&&(console.warn(" KHNG LY C D LIU! Nguyn nhn c th:"),console.warn("  1. Khng c qung co chy trong khong thi gian ny"),console.warn("  2. Facebook API tr v d liu trng"),console.warn("  3. Khong thi gian nm trong tng lai"),console.warn(`  Khong  chn: ${Bt(Ee,"yyyy-MM-dd")}  ${Bt(fe,"yyyy-MM-dd")}`),Yt({title:"Khng c d liu",description:`Khng c insights cho khong ${Bt(Ee,"dd/MM")} - ${Bt(fe,"dd/MM")}. Th chn khong thi gian khc.`,variant:"destructive"}));const{getCampaignCatalog:Je,getAdsetCatalog:He,getAdCatalog:nt}=await vr(async()=>{const{getCampaignCatalog:ke,getAdsetCatalog:Vt,getAdCatalog:tr}=await import("./facebookCatalogSnapshotService-DaR7VSpR.js");return{getCampaignCatalog:ke,getAdsetCatalog:Vt,getAdCatalog:tr}},[]);let ct=await Je(we,be.account_id),Ge=await He(we,be.account_id),In=await nt(we,be.account_id);if(ct.length===0&&Ge.length===0){console.log(" Backend catalog empty, fetching from Facebook API...");const{getCampaigns:ke,getAdSets:Vt,getAds:tr}=await vr(async()=>{const{getCampaigns:rt,getAdSets:ca,getAds:Pa}=await Promise.resolve().then(()=>Vm);return{getCampaigns:rt,getAdSets:ca,getAds:Pa}},void 0),[gr,pm,gm]=await Promise.all([ke(be.access_token,be.account_id),Vt(be.access_token,be.account_id),tr(be.access_token,be.account_id)]);ct=gr,Ge=pm,In=gm}const br=ct.reduce((ke,Vt)=>{const tr=Vt.effective_status||Vt.status||"UNKNOWN";return ke[tr]=(ke[tr]||0)+1,ke},{}),Ae=new Map(ct.map(ke=>[ke.id,ke.effective_status])),gt=new Map(ct.map(ke=>[ke.id,ke.status])),vt=new Map(Ge.map(ke=>[ke.id,ke.effective_status])),bt=new Map(Ge.map(ke=>[ke.id,ke.status])),Qr=new Map(In.map(ke=>[ke.id,ke.effective_status])),qn=new Map(In.map(ke=>[ke.id,ke.status])),wa=ct.filter(ke=>ke.effective_status==="WITH_ISSUES"||ke.effective_status==="PENDING_BILLING_INFO");wa.length>0&&console.warn(" Cc chin dch c vn  thanh ton:",wa.map(ke=>({id:ke.id,name:ke.name,status:ke.status,effective_status:ke.effective_status,issues_info:ke.issues_info}))),wa.length>0&&console.warn(" Cc chin dch c vn  thanh ton:",wa.map(ke=>({id:ke.id,name:ke.name,status:ke.effective_status,issues:ke.issues_info})));try{const{getAdAccountDetails:ke}=await vr(async()=>{const{getAdAccountDetails:gr}=await Promise.resolve().then(()=>Vm);return{getAdAccountDetails:gr}},void 0),Vt=await ke(be.access_token,be.account_id),tr=Vt.account_status===2||Vt.disable_reason==="PAYMENT_ISSUE"||Vt.disable_reason==="RISK_PAYMENT"||Vt.disable_reason==="GRAY_ACCOUNT_SHUT_DOWN"||Vt.funding_source_details&&!Vt.funding_source_details.id;$v({account_status:Vt.account_status,disable_reason:Vt.disable_reason,hasPaymentIssue:tr}),tr&&console.warn(" PHT HIN VN  THANH TON:",{account_status:Vt.account_status,disable_reason:Vt.disable_reason})}catch(ke){console.warn("Khng th ly thng tin ti khon qung co:",ke)}Nv(ct),rh(Ge),Tl(In);const At=Bt(Ee,"yyyy-MM-dd"),Ai=Bt(fe,"yyyy-MM-dd"),Ei=new Set(Ie.filter(ke=>ke.campaign_id&&!ke.adset_id&&!ke.ad_id).map(ke=>ke.campaign_id)),Ti=new Set(Ie.filter(ke=>ke.adset_id&&!ke.ad_id).map(ke=>ke.adset_id)),$r=new Set(Ie.filter(ke=>ke.ad_id).map(ke=>ke.ad_id)),M=ct.filter(ke=>!Ei.has(ke.id)).map(ke=>({campaign_id:ke.id,campaign_name:ke.name,adset_id:null,adset_name:null,ad_id:null,ad_name:null,date_start:At,date_stop:At,impressions:"0",clicks:"0",spend:"0",reach:"0",frequency:null,cpc:null,cpm:null,cpp:null,cost_per_unique_click:null,ctr:null,status:ke.status,effective_status:ke.effective_status,level:"campaign",objective:ke.objective||null,actions:null,cost_per_action_type:null})),Nt=Ge.filter(ke=>!Ti.has(ke.id)).map(ke=>{const Vt=ct.find(tr=>tr.id===ke.campaign_id);return{campaign_id:ke.campaign_id,campaign_name:(Vt==null?void 0:Vt.name)||null,adset_id:ke.id,adset_name:ke.name,ad_id:null,ad_name:null,date_start:At,date_stop:At,impressions:"0",clicks:"0",spend:"0",reach:"0",frequency:null,cpc:null,cpm:null,cpp:null,cost_per_unique_click:null,ctr:null,status:ke.status,effective_status:ke.is_deleted?"DELETED":ke.effective_status,is_deleted:ke.is_deleted||!1,level:"adset",objective:(Vt==null?void 0:Vt.objective)||null,actions:null,cost_per_action_type:null}}),Ta=In.filter(ke=>!$r.has(ke.id)).map(ke=>{const Vt=Ge.find(gr=>gr.id===ke.adset_id),tr=ct.find(gr=>gr.id===ke.campaign_id);return{campaign_id:ke.campaign_id,campaign_name:(tr==null?void 0:tr.name)||null,adset_id:ke.adset_id,adset_name:(Vt==null?void 0:Vt.name)||null,ad_id:ke.id,ad_name:ke.name,date_start:At,date_stop:At,impressions:"0",clicks:"0",spend:"0",reach:"0",frequency:null,cpc:null,cpm:null,cpp:null,cost_per_unique_click:null,ctr:null,status:ke.status,effective_status:ke.is_deleted?"DELETED":ke.effective_status,is_deleted:ke.is_deleted||!1,level:"ad",objective:(tr==null?void 0:tr.objective)||null,actions:null,cost_per_action_type:null}}),Bn=[...Ie,...M,...Nt,...Ta];if(Bn.length>0){u("ang ng b d liu (khng xa data c)...");const ke=rt=>{var Pa;if(rt==null||rt==="")return null;if(Array.isArray(rt)){const ua=((Pa=rt[0])==null?void 0:Pa.value)??rt[0],_a=Number(ua);return isNaN(_a)?null:_a}const ca=Number(rt);return isNaN(ca)?null:ca},Vt=rt=>{const ca=Number(rt);return isNaN(ca)?0:Math.round(ca)},tr=Bn.map(rt=>{const ca=rt.actions||rt.cost_per_action_type||Number(rt.spend)>0;let Pa={results:null,cost_per_result:null,result_label:null,action_type_used:null},ua={count:null,cost:null},_a={started_7d:null,total_messaging_connection:null,link_click:null,messaging_welcome_message_view:null,post_engagement_action:null,messaging_first_reply:null,video_view:null,page_engagement_action:null,replied_7d:null,depth_2_message:null,depth_3_message:null},ii={cost_per_started_7d:null,cost_per_total_messaging_connection:null,cost_per_link_click:null,cost_per_messaging_welcome_message_view:null,cost_per_post_engagement:null,cost_per_messaging_first_reply:null,cost_per_video_view:null,cost_per_page_engagement:null,cost_per_replied_7d:null,cost_per_depth_2_message:null,cost_per_depth_3_message:null};return ca&&(Pa=q(rt.objective||"",rt.actions,rt.cost_per_action_type,rt.spend,rt.reach),ua=Q(rt.actions,rt.cost_per_action_type,rt.spend),_a=m9(rt.actions||[]),ii=p9(rt.cost_per_action_type||[])),{user_id:we,account_id:be.account_id,account_name:be.account_name,campaign_id:rt.campaign_id||null,campaign_name:rt.campaign_name||null,adset_id:rt.adset_id||null,adset_name:rt.adset_name||null,ad_id:rt.ad_id||null,ad_name:rt.ad_name||null,date_start:rt.date_start,date_stop:rt.date_stop,impressions:Vt(rt.impressions),clicks:Vt(rt.clicks),spend:ke(rt.spend)??0,reach:Vt(rt.reach),frequency:ke(rt.frequency),cpc:ke(rt.cpc),cpm:ke(rt.cpm),cpp:ke(rt.cpp),cost_per_unique_click:ke(rt.cost_per_unique_click),ctr:ke(rt.ctr),status:i6(rt.ad_id?qn.get(rt.ad_id)||rt.status||"ACTIVE":rt.adset_id?bt.get(rt.adset_id)||rt.status||"ACTIVE":gt.get(rt.campaign_id)||rt.status||"ACTIVE"),effective_status:i6(rt.ad_id?Qr.get(rt.ad_id)||rt.effective_status||"ACTIVE":rt.adset_id?vt.get(rt.adset_id)||rt.effective_status||"ACTIVE":Ae.get(rt.campaign_id)||rt.effective_status||"ACTIVE"),level:rt.ad_id?"ad":rt.adset_id?"adset":"campaign",budget:ke(rt.budget)??0,daily_budget:ke(rt.daily_budget),lifetime_budget:ke(rt.lifetime_budget),objective:rt.objective||null,actions:rt.actions||null,quality_ranking:rt.quality_ranking||null,engagement_rate_ranking:rt.engagement_rate_ranking||null,conversion_rate_ranking:rt.conversion_rate_ranking||null,purchase_roas:rt.purchase_roas||null,action_values:rt.action_values||null,cost_per_action_type:rt.cost_per_action_type||null,video_p25_watched_actions:rt.video_p25_watched_actions||null,video_p50_watched_actions:rt.video_p50_watched_actions||null,video_p75_watched_actions:rt.video_p75_watched_actions||null,video_p100_watched_actions:rt.video_p100_watched_actions||null,video_play_actions:rt.video_play_actions||null,cost_per_thruplay:ke(rt.cost_per_thruplay),results:Pa.results,cost_per_result:Pa.cost_per_result,result_label:Pa.result_label,action_type_used:Pa.action_type_used,results_messaging_replied_7d:ua.count,cost_per_messaging_replied_7d:ua.cost,started_7d:_a.started_7d,total_messaging_connection:_a.total_messaging_connection,link_click:_a.link_click,messaging_welcome_message_view:_a.messaging_welcome_message_view,post_engagement_action:_a.post_engagement_action,messaging_first_reply:_a.messaging_first_reply,video_view:_a.video_view,page_engagement_action:_a.page_engagement_action,replied_7d:_a.replied_7d,depth_2_message:_a.depth_2_message,depth_3_message:_a.depth_3_message,cost_per_started_7d:ii.cost_per_started_7d,cost_per_total_messaging_connection:ii.cost_per_total_messaging_connection,cost_per_link_click:ii.cost_per_link_click,cost_per_messaging_welcome_message_view:ii.cost_per_messaging_welcome_message_view,cost_per_post_engagement:ii.cost_per_post_engagement,cost_per_messaging_first_reply:ii.cost_per_messaging_first_reply,cost_per_video_view:ii.cost_per_video_view,cost_per_page_engagement:ii.cost_per_page_engagement,cost_per_replied_7d:ii.cost_per_replied_7d,cost_per_depth_2_message:ii.cost_per_depth_2_message,cost_per_depth_3_message:ii.cost_per_depth_3_message,sync_date:rt.date_start}}),gr=1e3;let pm=0,gm=0;for(let rt=0;rt<tr.length;rt+=gr){const ca=tr.slice(rt,rt+gr),Pa=Math.floor(rt/gr)+1,ua=Math.ceil(tr.length/gr);u(`ang lu batch ${Pa}/${ua} (${ca.length} records)...`),l(80+Pa/ua*15);try{await OG(ca)}catch(_a){throw console.error(` Error inserting batch ${Pa}:`,_a),_a}pm+=ca.length}}u("ang ti d liu t NocoDB..."),l(95);const Ft=await KS(we,At,Ai,be.account_id);r(Ft||[]),l(100),u("Hon thnh!"),setTimeout(()=>{l(0),u("")},2e3)}catch(I){console.error("Error loading insights:",I),Yt({title:"Li ng b",description:(I==null?void 0:I.message)||"Khng th ti d liu insights",variant:"destructive"}),u("Li!")}finally{p(!1)}},cm=async()=>{if(!(!(tt!=null&&tt.from)||!(tt!=null&&tt.to))){_(!0),k(null);try{if(!(e!=null&&e.id)){console.warn(" No user logged in for historical fetch"),x([]),_(!1);return}const q=(await Vr(e.id)).find(fe=>fe.is_active);if(!q){console.warn(" No active ad account for historical fetch"),x([]),_(!1);return}const Q=Bt(tt.from,"yyyy-MM-dd"),he=Bt(tt.to,"yyyy-MM-dd"),be=await C1e(e.id,q.account_id,Q,he);x(be)}catch(I){console.error(" Error fetching historical insights:",I),k(I.message||"Khng th ti d liu lch s")}finally{_(!1)}}},Ob=async()=>{var I;if(!(tt!=null&&tt.from)||!(tt!=null&&tt.to)){Yt({title:"Li",description:"Vui lng chn khong thi gian trc khi ng b",variant:"destructive"});return}w(!0);try{if(!(e!=null&&e.id)){k("Vui lng ng nhp  tip tc");return}const Q=(await Vr(e.id)).find(Ee=>Ee.is_active);if(!Q){Yt({title:"Li",description:"Khng tm thy ti khon qung co ang hot ng",variant:"destructive"});return}const he=Bt(tt.from,"yyyy-MM-dd"),be=Bt(tt.to,"yyyy-MM-dd"),fe=await A1e({userId:e.id,accountId:Q.account_id,since:he,until:be});Yt({title:"ng b thnh cng",description:` ng b ${fe.totalSynced} insights (${fe.inserted} mi, ${fe.updated} cp nht)`}),await cm()}catch(q){console.error(" Error syncing historical insights:",q);let Q=q.message||"Khng th ng b d liu lch s",he=null;((I=q.message)!=null&&I.includes("Failed to fetch")||q.name==="TypeError")&&(Q="Khng kt ni c ti function  c th do Function cha deploy hoc gi sai project.",he={error:q.name,message:q.message,suggestion:"Vui lng kim tra: 1) Function  c deploy cha? 2) URL c ng project khng? 3) Th lm mi trang"}),he||(q.name,q.message),new Date().toISOString(),Yt({title:"Li ng b",description:Q,variant:"destructive"})}finally{w(!1)}},Ib=async()=>{i(!0);try{if(!(e!=null&&e.id)){r([]),i(!1);return}const q=(await Vr(e.id)).find(be=>be.is_active);if(!q){r([]),i(!1);return}const{getAllInsightsByUserAndDate:Q}=await vr(async()=>{const{getAllInsightsByUserAndDate:be}=await Promise.resolve().then(()=>k1e);return{getAllInsightsByUserAndDate:be}},void 0),he=await Q(e.id,"2020-01-01","2099-12-31",q.account_id);r(he)}catch(I){console.warn(" Error loading local insights (likely network or config issue):",I.message),I.message&&I.message.includes("404")&&ne.error("Khng tm thy bng d liu (404)",{description:"Vui lng kim tra cu hnh Table ID trong config.ts"}),r([])}finally{i(!1)}};g.useEffect(()=>{e!=null&&e.id&&Ib()},[e==null?void 0:e.id]),g.useEffect(()=>{e!=null&&e.id&&Lv()},[e==null?void 0:e.id]),g.useEffect(()=>{cm()},[tt==null?void 0:tt.from,tt==null?void 0:tt.to]),g.useEffect(()=>{ms.length===0&&ps.length===0&&io.length===0||xa(I=>{const q={...I};return ms.forEach(Q=>{Q.id&&I[Q.id]===void 0&&(q[Q.id]=Q.effective_status==="ACTIVE")}),ps.forEach(Q=>{Q.id&&I[Q.id]===void 0&&(q[Q.id]=Q.effective_status==="ACTIVE")}),io.forEach(Q=>{Q.id&&I[Q.id]===void 0&&(q[Q.id]=Q.effective_status==="ACTIVE")}),Object.keys(q).length-Object.keys(I).length,q})},[ms,ps,io]),g.useEffect(()=>{(async()=>{try{if(!(e!=null&&e.id))return;const q=await LO(e.id);hh(q)}catch(q){console.error("Error loading labels:",q)}})()},[]),g.useEffect(()=>{Os(),Rb()},[]);const Rb=async()=>{try{if(!(e!=null&&e.id))return;const I=await Vr(e.id);yn(I.length>1)}catch(I){console.error("Error checking accounts:",I)}},Os=async()=>{oe(!0);try{if(!(e!=null&&e.id)){oe(!1);return}const q=(await uKe(e.id)).map(he=>({id:he.id||crypto.randomUUID(),user_id:he.user_id,rule_name:he.rule_name,scope:he.scope,time_range:he.time_range,is_active:he.is_active,conditions:he.conditions||[],condition_logic:he.condition_logic||"all",actions:he.actions||[],advanced_settings:he.advanced_settings||{},labels:he.labels||[],target_labels:he.target_labels||[],created_at:he.created_at,updated_at:he.updated_at,Id:he.Id}));xe(q);const Q=await LO(e.id);hh(Q.map(he=>({Id:he.Id||0,label_name:he.label_name,label_color:he.label_color,user_id:he.user_id})))}catch(I){console.error("Error loading automation rules:",I),ne.error("Li khi ti d liu quy tc t ng")}finally{oe(!1)}},ck=async I=>{try{const q={rule_name:I.rule_name,scope:I.scope,time_range:I.time_range,condition_logic:I.condition_logic,conditions:JSON.stringify(I.conditions||[]),actions:JSON.stringify(I.actions||[]),advanced_settings:JSON.stringify(I.advanced_settings||{}),labels:JSON.stringify(I.labels||[]),target_labels:JSON.stringify(I.target_labels||[])};if(Z!=null&&Z.Id)await U$(Z.Id,{...q,updated_at:new Date().toISOString()}),ne.success(" cp nht quy tc");else{if(!(e!=null&&e.id)){ne.error("Bn cn ng nhp  to quy tc");return}await TZ({...q,user_id:e.id,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),ne.success(" to quy tc mi")}Os(),ce(void 0)}catch(q){console.error("Error saving rule:",q),ne.error("Li khi lu quy tc")}},uk=async(I,q)=>{try{const Q=ue.find(he=>he.id===I);if(!Q||!Q.Id)throw new Error("Rule not found");await hKe(Q.Id,!q),ne.success(q?" tt quy tc":" bt quy tc"),Os()}catch(Q){console.error("Error toggling rule:",Q),ne.error("Li khi thay i trng thi")}},Nu=async I=>{if(confirm("Bn c chc mun xa quy tc ny?"))try{const q=ue.find(Q=>Q.id===I);if(!q)throw new Error(`Rule not found in local state: ${I}`);if(!q.Id)throw new Error(`Rule missing Id field: ${I}`);await dKe(q.Id),ne.success(" xa quy tc"),await Os()}catch(q){console.error("Error deleting rule:",q);const Q=q instanceof Error?q.message:"Unknown error";Q.includes("Rule not found")?(ne.error("Quy tc khng tn ti hoc  b xa"),await Os()):ne.error("Li khi xa quy tc: "+Q)}},dk=async I=>{const q=ue.find(Q=>Q.id===I);if(!q||!q.Id){ne.error("Khng tm thy quy tc");return}Ce(Q=>new Set(Q).add(I)),ne.info("ang thc thi quy tc...");try{await s6(q.Id,"pending"),await Os()}catch(Q){console.error("Error setting pending status:",Q)}try{if(!(e!=null&&e.id)){ne.error("Bn cn ng nhp  chy quy tc");return}const Q=e.id,{data:he,error:be}=await wt.functions.invoke("execute-automation-rule",{body:{ruleId:q.Id,userId:Q,manualRun:!0}});if(be)throw be;const fe=he.matchedCount||0,Ee=he.executedCount||0;fe===0?ne.warning("Quy tc  chy nhng khng c i tng no tha mn iu kin."):ne.success(` chy xong!  x l ${Ee}/${fe} i tng tha mn.`),Os()}catch(Q){console.error("Error running rule:",Q),ne.error("Li khi chy quy tc");try{await s6(q.Id,"failed",{error:Q.message}),Os()}catch(he){console.error("Error updating failed status:",he)}}finally{Ce(Q=>{const he=new Set(Q);return he.delete(I),he})}},hk=async I=>{const q=ue.find(Q=>Q.id===I);if(!q||!q.Id){ne.error("Khng tm thy quy tc");return}ne.info("ang chy th nghim (Dry Run)...");try{if(!(e!=null&&e.id)){ne.error("Bn cn ng nhp  chy quy tc");return}const{data:Q,error:he}=await wt.functions.invoke("execute-automation-rule",{body:{ruleId:q.Id,userId:e.id,manualRun:!0,dryRun:!0}});if(he)throw he;console.log("Test execution result:",Q),Q.success?ne.success(` chy th nghim xong. ${Q.executedCount} hnh ng c m phng.`):ne.warning("Chy th nghim hon tt nhng c li",{description:Q.error||"Unknown error"}),Os()}catch(Q){console.error("Error testing rule:",Q),ne.error("Li khi chy th nghim")}},Fv=async()=>{if(!(e!=null&&e.id))return;dt(!0);const I=ne.loading("ang to 5 quy tc mu...");try{const q=await yKe(e.id),Q=[...new Set(q.map(be=>be.campaign_id).filter(Boolean))];if(Q.length===0){ne.error("Khng tm thy campaign no. Vui lng ng b d liu trc.",{id:I});return}const he=await vKe(e.id,Q);ne.success(`To thnh cng ${he.success}/5 quy tc mu! ${he.failed>0?`(${he.failed} li)`:""}`,{id:I}),he.errors.length>0&&console.error("Sample rule creation errors:",he.errors),await Os()}catch(q){console.error("Failed to create sample rules:",q),ne.error("Li to quy tc mu: "+(q instanceof Error?q.message:"Unknown error"),{id:I})}finally{dt(!1)}},$b=()=>{re(!1),ce(void 0)},Il=I=>{const q=ue.find(Q=>Q.id===I);q&&(ut(q),Ue(!0))},um=async(I,q,Q)=>{try{const he=I.map(Ee=>({id:Ee,type:q}));await FO(he,Q);const be=n.map(Ee=>Ee.id),fe=await bs(be,q);xc(fe),ne.success(" gn nhn thnh cng")}catch(he){throw console.error("Error in manual label assignment:",he),he}};g.useEffect(()=>{(async()=>{if(n.length===0){xc([]);return}try{const q=[...new Set(n.map($e=>$e.campaign_id).filter(Boolean))],Q=[...new Set(n.map($e=>$e.adset_id).filter(Boolean))],he=[...new Set(n.map($e=>$e.ad_id).filter(Boolean))],[be,fe,Ee]=await Promise.all([q.length>0?bs(q,"campaign"):Promise.resolve([]),Q.length>0?bs(Q,"adset"):Promise.resolve([]),he.length>0?bs(he,"ad"):Promise.resolve([])]);xc([...be,...fe,...Ee])}catch(q){console.error("Error loading label assignments:",q)}})()},[n]);const dm=(I,q,Q)=>{if(ya(new Set),I==="adset")us([{level:"campaign",parentId:null,name:"Tt c chin dch"},{level:"adset",parentId:q,name:Q}]);else if(I==="ad"){const he=n.find(be=>be.adset_id===q);us([{level:"campaign",parentId:null,name:"Tt c chin dch"},{level:"adset",parentId:(he==null?void 0:he.campaign_id)||"",name:(he==null?void 0:he.campaign_name)||""},{level:"ad",parentId:q,name:Q}])}else us([{level:"campaign",parentId:null,name:"Tt c chin dch"}])},ph=I=>an==="campaign"?I.campaign_id||null:an==="adset"?I.adset_id||null:I.ad_id||null,fk=I=>{if(I){const q=Xn.map(ph).filter(Boolean);ya(new Set(q))}else ya(new Set)},ku=(I,q)=>{if(!I)return;const Q=new Set(Cr);q?Q.add(I):Q.delete(I),ya(Q)},Ci=async I=>{try{const Q=Xn.filter(le=>{const _e=ph(le);return _e&&Cr.has(_e)}).map(le=>{let _e,Ie;return an==="campaign"||!le.adset_id&&!le.ad_id?(_e="campaign",Ie=le.campaign_id):an==="adset"||le.adset_id&&!le.ad_id?(_e="adset",Ie=le.adset_id):(_e="ad",Ie=le.ad_id),{id:Ie,type:_e}}).filter(le=>le.id);if(Q.length===0){Yt({title:"Li",description:"Khng tm thy mc  gn nhn",variant:"destructive"});return}const he=Q.length===1?Q[0].type==="campaign"?"chin dch":Q[0].type==="adset"?"nhm qung co":"qung co":"mc";Yt({title:"ang gn nhn...",description:`Gn ${I.length} nhn cho ${Q.length} ${he}`}),await FO(Q,I),Yt({title:" gn nhn",description:` gn ${I.length} nhn cho ${Q.length} ${he}`}),await new Promise(le=>setTimeout(le,200));const be=[...new Set(n.map(le=>le.campaign_id).filter(Boolean))],fe=[...new Set(n.map(le=>le.adset_id).filter(Boolean))],Ee=[...new Set(n.map(le=>le.ad_id).filter(Boolean))],[$e,ot,we]=await Promise.all([be.length>0?bs(be,"campaign"):Promise.resolve([]),fe.length>0?bs(fe,"adset"):Promise.resolve([]),Ee.length>0?bs(Ee,"ad"):Promise.resolve([])]),pe=[...$e,...ot,...we];xc(pe),ya(new Set)}catch(q){console.error("Error assigning labels:",q),Yt({title:"Li gn nhn",description:q instanceof Error?q.message:"Khng th gn nhn",variant:"destructive"})}},Mb=async(I,q,Q)=>{try{if(!(e!=null&&e.id)){Yt({title:"Li xc thc",description:"Bn cn ng nhp  gn nhn",variant:"destructive"});return}const be=(await bs([I],q)).map(He=>He.label_id),fe=Q.filter(He=>!be.includes(He)),Ee=be.filter(He=>!Q.includes(He));if(fe.length>0&&await Promise.all(fe.map(He=>FN(I,q,He,e.id))),Ee.length>0){const{removeLabel:He}=await vr(async()=>{const{removeLabel:nt}=await Promise.resolve().then(()=>BN);return{removeLabel:nt}},void 0);await Promise.all(Ee.map(nt=>He(I,q,nt)))}const $e=q==="campaign"?"chin dch":q==="adset"?"nhm QC":"qung co";Yt({title:" gn nhn",description:` gn ${Q.length} nhn cho ${$e}`}),await new Promise(He=>setTimeout(He,200));const ot=[...new Set(n.map(He=>He.campaign_id).filter(Boolean))],we=[...new Set(n.map(He=>He.adset_id).filter(Boolean))],pe=[...new Set(n.map(He=>He.ad_id).filter(Boolean))],[le,_e,Ie]=await Promise.all([ot.length>0?bs(ot,"campaign"):Promise.resolve([]),we.length>0?bs(we,"adset"):Promise.resolve([]),pe.length>0?bs(pe,"ad"):Promise.resolve([])]),Je=[...le,..._e,...Ie];xc(Je)}catch(he){console.error(" Error assigning labels:",he),Yt({title:"Li gn nhn",description:he instanceof Error?he.message:"Khng th gn nhn",variant:"destructive"})}},mk=async(I,q,Q,he)=>{if(I.stopPropagation(),!he){console.warn(" No label ID provided for removal");return}try{await rZ(q,Q,he),Yt({title:" xa nhn",description:` xa nhn khi ${Q==="campaign"?"chin dch":Q==="adset"?"nhm QC":"qung co"}`}),await new Promise(_e=>setTimeout(_e,200));const fe=[...new Set(n.map(_e=>_e.campaign_id).filter(Boolean))],Ee=[...new Set(n.map(_e=>_e.adset_id).filter(Boolean))],$e=[...new Set(n.map(_e=>_e.ad_id).filter(Boolean))],[ot,we,pe]=await Promise.all([fe.length>0?bs(fe,"campaign"):Promise.resolve([]),Ee.length>0?bs(Ee,"adset"):Promise.resolve([]),$e.length>0?bs($e,"ad"):Promise.resolve([])]),le=[...ot,...we,...pe];xc(le)}catch(be){console.error(" Error removing label:",be),Yt({title:"Li xa nhn",description:be instanceof Error?be.message:"Khng th xa nhn",variant:"destructive"})}},pk=async(I,q)=>{try{if(!(e!=null&&e.id))return null;const he=(await Vr(e.id)).find($e=>$e.is_active);if(!he)return null;const{getCampaigns:be,getAdSets:fe,getAds:Ee}=await vr(async()=>{const{getCampaigns:$e,getAdSets:ot,getAds:we}=await Promise.resolve().then(()=>Vm);return{getCampaigns:$e,getAdSets:ot,getAds:we}},void 0);if(q==="campaign"){const ot=(await be(he.access_token,he.account_id)).find(we=>we.id===I);if(ot)return Nv(we=>we.map(pe=>pe.id===I?{...pe,effective_status:ot.effective_status,status:ot.status}:pe)),ot}else if(q==="adset"){const ot=(await fe(he.access_token,he.account_id)).find(we=>we.id===I);if(ot)return rh(we=>we.map(pe=>pe.id===I?{...pe,effective_status:ot.effective_status,status:ot.status}:pe)),ot}else if(q==="ad"){const ot=(await Ee(he.access_token,he.account_id)).find(we=>we.id===I);if(ot)return Tl(we=>we.map(pe=>pe.id===I?{...pe,effective_status:ot.effective_status,status:ot.status}:pe)),ot}}catch(Q){console.error("Error refreshing catalog:",Q)}return null},gk=async(I,q)=>{try{const{updateObjectStatus:Q}=await vr(async()=>{const{updateObjectStatus:we}=await Promise.resolve().then(()=>Vm);return{updateObjectStatus:we}},void 0);if(!(e!=null&&e.id))throw new Error("Vui lng ng nhp  tip tc");const be=(await Vr(e.id)).find(we=>we.is_active);if(!be)throw new Error("Khng tm thy ti khon Facebook Ads");let fe="",Ee="",$e="campaign";if(an==="ad"&&I.ad_id?(fe=I.ad_id,Ee=I.ad_name||"Qung co",$e="ad"):an==="adset"&&I.adset_id?(fe=I.adset_id,Ee=I.adset_name||"Nhm qung co",$e="adset"):an==="campaign"&&I.campaign_id&&(fe=I.campaign_id,Ee=I.campaign_name||"Chin dch",$e="campaign"),!fe)throw new Error("Khng tm thy ID  cp nht");const ot=q?"PAUSED":"ACTIVE";await Q(be.access_token,fe,ot),xa(we=>({...we,[fe]:!q})),Yt({title:"  cp nht",description:` ${q?"tt":"bt"} ${Ee}. ang xc nhn t Facebook...`}),setTimeout(async()=>{const we=await pk(fe,$e);we&&(we.effective_status===ot?ne.success("  xc nhn t Facebook",{description:`${Ee}  ${ot==="ACTIVE"?"bt":"tt"} thnh cng`}):ot==="ACTIVE"&&we.effective_status==="ADSET_PAUSED"?ne.warning(" Chin dch  bt nhng Nhm QC ang tt",{description:"Hy bt Nhm QC  qung co chy. Chuyn sang tab Nhm QC  kim tra."}):ot==="ACTIVE"&&we.effective_status==="CAMPAIGN_PAUSED"?ne.warning(" Nhm QC  bt nhng Chin dch ang tt",{description:"Hy bt Chin dch  qung co chy. Chuyn sang tab Chin dch  kim tra."}):ot==="ACTIVE"&&we.effective_status!=="ACTIVE"&&ne.warning(` Trng thi: ${we.effective_status}`,{description:"C th do vn  thanh ton hoc ch duyt"})),xa(pe=>{const le={...pe};return delete le[fe],le})},2e3)}catch(Q){console.error("Error updating status:",Q);const he=(Q==null?void 0:Q.isPaymentError)||!1,be=Q==null?void 0:Q.code;let fe=" Li cp nht trng thi",Ee=Q instanceof Error?Q.message:"Khng th cp nht trng thi";he?(fe=" LI THANH TON",Ee=Q.message+`

 Vui lng kim tra Facebook Ads Manager  x l vn  thanh ton.`):(be===80004||be===17)&&(fe=" Vt gii hn",Ee=Q.message+`

 Vui lng i vi pht ri th li.`),Yt({title:fe,description:Ee,variant:"destructive",duration:he?1e4:5e3}),mh()}},vk=(I,q)=>{yu(q),I.dataTransfer.effectAllowed="move"},yk=I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},Cu=(I,q)=>{if(I.preventDefault(),!Yr||Yr===q){yu(null);return}const Q=[...ba],he=Q.indexOf(Yr),be=Q.indexOf(q);he!==-1&&be!==-1&&(Q.splice(he,1),Q.splice(be,0,Yr),oo({selectedFields:Q})),yu(null)},de=()=>{yu(null)},Te=(I,q)=>{B(q),I.dataTransfer.effectAllowed="move"},Se=I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},xt=(I,q)=>{if(I.preventDefault(),!W||W===q){B(null);return}const Q=[...fh],he=Q.indexOf(W),be=Q.indexOf(q);he!==-1&&be!==-1&&(Q.splice(he,1),Q.splice(be,0,W),Mv(Q),ne.success(" di chuyn ct",{description:"Th t ct  c lu t ng"})),B(null)},nn=()=>{B(null)},Fn=(I,q)=>{uh(q),I.dataTransfer.effectAllowed="move"},oa=I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},sr=(I,q)=>{if(I.preventDefault(),!ch||ch===q){uh(null);return}const Q=[...bu],he=Q.indexOf(ch),be=Q.indexOf(q);he!==-1&&be!==-1&&(Q.splice(he,1),Q.splice(be,0,ch),nm(Q)),uh(null)},Bv=()=>{uh(null)},xk=()=>{if(!am.trim()){Yt({title:"Li",description:"Vui lng nhp tn nh dng",variant:"destructive"});return}const I={name:am,metricOrder:[...Pn],selectedMetrics:[...Wt]};ik([...sk,I]),wb(""),Pv(!1),Yt({title:" lu",description:`nh dng "${am}"  c lu`})},si=()=>{if(!lo.trim()){Yt({title:"Li",description:"Vui lng nhp tn nh dng",variant:"destructive"});return}const I={name:lo,metricOrder:[...hs],selectedMetrics:[...fs]};lk([..._b,I]),Ov(""),ih(!1),Yt({title:" lu",description:`nh dng "${lo}"  c lu`})},hm=()=>{if(!rm.trim()){Yt({title:"Li",description:"Vui lng nhp tn nh dng",variant:"destructive"});return}const I={name:rm,metricOrder:[...bu],selectedMetrics:[...sh]};rk([...wu,I]),bb(""),Tv(!1),Yt({title:" lu",description:`nh dng "${rm}"  c lu`})},bk=I=>{const q=wu.find(Q=>Q.name===I);q&&(nm(q.metricOrder),oo({selectedMarketingMetrics:q.selectedMetrics}),cr(I),Yt({title:" ti",description:`nh dng "${I}"  c p dng`}))},Au=()=>{if(!lh.trim()){Yt({title:"Li",description:"Vui lng nhp tn nh dng",variant:"destructive"});return}const I={name:lh,columnOrder:[...ba],columnWidths:{...Hn}};ai([..._u,I]),Iv(""),oh(!1),Yt({title:" lu",description:`nh dng "${lh}"  c lu`})},fm=I=>{const q=_u.find(Q=>Q.name===I);q&&(oo({selectedFields:q.columnOrder}),Es(q.columnWidths),Nb(I),Yt({title:" ti",description:`nh dng "${I}"  c p dng`}))},mm=()=>{if(!ju.trim()){Yt({title:"Li",description:"Vui lng nhp tn nh dng",variant:"destructive"});return}const I={name:ju,columnOrder:[...fh],columnWidths:{...th}};Ho([...er,I]),Cb(""),im(!1),Yt({title:" lu",description:`nh dng "${ju}"  c lu`})},Qn=I=>{const q=er.find(Q=>Q.name===I);q&&(Mv(q.columnOrder),nh(q.columnWidths),Eb(I),Yt({title:" ti",description:`nh dng "${I}"  c p dng`}))},wk=I=>{Ho(er.filter(q=>q.name!==I)),Ab===I&&Eb(""),Yt({title:" xa",description:`nh dng "${I}"  c xa`})},Db=()=>{yc("cards"),so("cards"),Sv("cards"),nm(ah),oo({selectedMarketingMetrics:ah}),Lt(St),Wn(St),ro(Ln),ao(Ln),Yt({title:" t li",description:"Tt c giao din  c t li v mc nh"})};g.useEffect(()=>{vc!=="cards"&&vc!=="chart"&&(console.warn("Invalid marketingViewMode, resetting to cards"),yc("cards")),Ua!=="cards"&&Ua!=="chart"&&(console.warn("Invalid summaryViewMode, resetting to cards"),so("cards")),jv!=="cards"&&jv!=="chart"&&(console.warn("Invalid saleViewMode, resetting to cards"),Sv("cards"))},[]);const gh=(I,q)=>{I.preventDefault(),I.stopPropagation(),Jf(q),eh(I.clientX),bv(Hn[q]||140)},_k=(I,q)=>{I.preventDefault(),I.stopPropagation(),tm(q),wv(I.clientX),qe(th[q]||140)};g.useEffect(()=>{if(ds){const I=Q=>{const he=Q.clientX-Zf,be=Math.max(80,em+he);Es(fe=>({...fe,[ds]:be}))},q=()=>{Jf(null),ne.success(" thay i kch thc ct",{description:"Kch thc ct  c lu t ng"})};return document.addEventListener("mousemove",I),document.addEventListener("mouseup",q),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",q)}}},[ds,Zf,em,Es]),g.useEffect(()=>{if(xu){const I=Q=>{const he=Q.clientX-pc,be=Math.max(80,gc+he);nh(fe=>({...fe,[xu]:be}))},q=()=>{tm(null),ne.success(" thay i kch thc ct",{description:"Kch thc ct  c lu t ng"})};return document.addEventListener("mousemove",I),document.addEventListener("mouseup",q),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",q)}}},[xu,pc,gc,nh]);const ns=(I,q,Q,he)=>{var be;if(q==null){if(I==="effective_status")return"Khng r";if(I!=="labels")return"-"}if(I==="level"){const Ee={campaign:{label:"Chin dch",icon:"",className:"bg-blue-50 text-blue-700 dark:bg-blue-950 dark:text-blue-300"},adset:{label:"Nhm QC",icon:"",className:"bg-purple-50 text-purple-700 dark:bg-purple-950 dark:text-purple-300"},ad:{label:"Qung co",icon:"",className:"bg-green-50 text-green-700 dark:bg-green-950 dark:text-green-300"}}[q]||{label:q,icon:"",className:"bg-gray-50 text-gray-700"};return s.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${Ee.className}`,children:[s.jsx("span",{children:Ee.icon}),s.jsx("span",{children:Ee.label})]})}if(I==="status"){const Ee={ACTIVE:{label:"ang bt",className:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200"},PAUSED:{label:" tt",className:"bg-slate-100 text-slate-800 dark:bg-slate-900 dark:text-slate-200"}}[q]||{label:q,className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${Ee.className}`,children:Ee.label})}if(I==="effective_status"){if((he==null?void 0:he.account_status)===3)return s.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-bold bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 animate-pulse",title:"Ti khon c khon n cha thanh ton. Vui lng thanh ton  tip tc chy qung co.",children:" Ti khon n cha thanh ton"});if((he==null?void 0:he.account_status)===2)return s.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-bold bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",title:"Ti khon qung co  b v hiu ha. Vui lng kim tra Facebook Ads Manager.",children:" Ti khon b v hiu ha"});let fe=[];if(Q){if(Q.ad_id||Q.adset_id||Q.campaign_id,Q.ad_id){const le=io.find(_e=>_e.id===Q.ad_id);fe=(le==null?void 0:le.issues_info)||[]}else if(Q.adset_id){const le=ps.find(_e=>_e.id===Q.adset_id);fe=(le==null?void 0:le.issues_info)||[]}else if(Q.campaign_id){const le=ms.find(_e=>_e.id===Q.campaign_id);fe=(le==null?void 0:le.issues_info)||[]}}let Ee="",$e=!1;if(q==="WITH_ISSUES"&&fe&&fe.length>0){const le=fe[0],_e=le.error_code,Ie=le.error_summary||"",Je=le.error_message||"";$e=[1815055,2635,2634,190].includes(_e)||Ie.toLowerCase().includes("payment")||Ie.toLowerCase().includes("billing")||Je.toLowerCase().includes("payment")||Je.toLowerCase().includes("billing"),Ee=Ie||Je||`Error code: ${_e}`}const we={ACTIVE:{label:"ang chy",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:""},PAUSED:{label:"Tm dng",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",icon:""},DELETED:{label:" xa",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:""},PENDING_REVIEW:{label:"ang ch duyt",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:""},DISAPPROVED:{label:"B t chi",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:""},PREAPPROVED:{label:" duyt trc",className:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200",icon:""},PENDING_BILLING_INFO:{label:"CH THANH TON",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 font-bold animate-pulse",icon:""},CAMPAIGN_PAUSED:{label:" Chin dch tt",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 font-medium",icon:""},ARCHIVED:{label:" xa",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:""},ADSET_PAUSED:{label:" Nhm QC tt",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200 font-medium",icon:""},IN_PROCESS:{label:"ang x l",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:""},WITH_ISSUES:{label:$e?"LI THANH TON":"C vn ",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 font-bold",icon:""},ACCOUNT_DISABLED:{label:"Ti khon b v hiu",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 font-semibold",icon:""}}[q]||{label:q,className:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:void 0};let pe="";return q==="WITH_ISSUES"&&Ee?pe=` ${Ee}

 Kim tra Facebook Ads Manager  x l vn .`:q==="WITH_ISSUES"?pe="Chin dch c vn . C th do li thanh ton, token ht hn, hoc vi phm chnh sch.":q==="PENDING_BILLING_INFO"?pe=" Thiu thng tin thanh ton. Vui lng cp nht phng thc thanh ton trong Facebook Ads Manager.":q==="PENDING_REVIEW"?pe="Qung co ang c Facebook xem xt  m bo tun th chnh sch.":q==="DISAPPROVED"?pe="Qung co b t chi do vi phm chnh sch Facebook. Vui lng kim tra v chnh sa.":q==="PREAPPROVED"?pe="Qung co  c duyt trc v sn sng chy.":q==="CAMPAIGN_PAUSED"?pe=" Chin dch cha  b tm dng. Hy bt chin dch  qung co chy.":q==="ADSET_PAUSED"&&(pe=" Nhm qung co cha  b tm dng. Hy bt nhm QC  qung co chy."),s.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${we.className}`,title:pe,children:[we.icon&&s.jsx("span",{children:we.icon}),s.jsx("span",{children:we.label})]})}if(I==="labels"){let fe,Ee,$e;an==="campaign"?($e="campaign",fe=Q.campaign_id,Ee=Q.campaign_name||Q.name):an==="adset"?($e="adset",fe=Q.adset_id,Ee=Q.adset_name||Q.name):($e="ad",fe=Q.ad_id,Ee=Q.ad_name||Q.name),fe||console.warn(" No valid entity ID found for labels field:",{viewLevel:an,row:{campaign_id:Q.campaign_id,adset_id:Q.adset_id,ad_id:Q.ad_id,name:Q.name}});const we=Pb.filter(pe=>$e==="campaign"?pe.campaign_id===fe:$e==="adset"?pe.adset_id===fe:pe.ad_id===fe).map(pe=>Ol.find(le=>le.Id===pe.label_id)).filter(pe=>pe!==void 0);return s.jsxs("div",{className:"flex items-center gap-1 flex-wrap",onClick:pe=>pe.stopPropagation(),children:[s.jsx(D9e,{labels:Ol,entityId:fe||"",entityName:Ee,entityType:$e,currentLabelIds:we.map(pe=>pe.Id).filter(pe=>pe!==void 0),onAssignLabels:Mb}),we.map((pe,le)=>s.jsxs(Ze,{style:{backgroundColor:pe.label_color},className:"text-white text-xs px-2 py-0.5 pr-0 flex items-center gap-1",children:[s.jsx("span",{children:pe.label_name}),s.jsx("button",{onClick:_e=>mk(_e,fe||"",$e,pe.Id),className:"ml-0.5 hover:bg-black/20 rounded-full p-0.5 transition-colors",title:"Xa nhn",children:s.jsx(Cs,{className:"h-2.5 w-2.5"})})]},`${pe.Id}-${le}`))]})}if(I==="campaign_name"&&q)return s.jsx("span",{className:"text-blue-600 font-medium",children:q});if(I==="adset_name"&&q)return s.jsx("span",{className:"text-blue-600 font-medium",children:q});if(I==="messaging_connections"){const fe=Q==null?void 0:Q.actions;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="onsite_conversion.total_messaging_connection");if(Ee)return new Intl.NumberFormat("vi-VN").format(Number(Ee.value))}return"-"}if(I==="cost_per_link_click"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="link_click");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(I==="cost_per_post_engagement"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="post_engagement");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(I==="cost_per_video_view"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="video_view");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(I==="cost_per_post_reaction"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="post_reaction");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(I==="cost_per_page_engagement"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="page_engagement");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(I==="cost_per_messaging_welcome_message_view"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="onsite_conversion.messaging_conversation_started_7d"||$e.action_type==="onsite_conversion.messaging_welcome_message_view");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(I==="cost_per_messaging_first_reply"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="onsite_conversion.messaging_first_reply");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(I==="cost_per_messaging_user_depth_2"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="onsite_conversion.messaging_user_depth_2_message");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(I==="cost_per_post_interaction_gross"){const fe=Q==null?void 0:Q.cost_per_action_type;if(Array.isArray(fe)){const Ee=fe.find($e=>$e.action_type==="post"||$e.action_type==="post_interaction_gross");if(Ee){const $e=Math.round(Number(Ee.value));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format($e)+" "}}return"-"}if(["video_play_actions","video_p25_watched_actions","video_p50_watched_actions","video_p75_watched_actions","video_p100_watched_actions"].includes(I)){const fe=Q==null?void 0:Q[I];if(Array.isArray(fe)&&fe.length>0){const Ee=fe.reduce(($e,ot)=>$e+(Number(ot.value)||0),0);return new Intl.NumberFormat("vi-VN").format(Math.round(Ee))}return"-"}if((I==="results"||I==="cost_per_result"||I==="results_messaging_replied_7d"||I==="cost_per_messaging_replied_7d")&&Array.isArray(q)&&(q=Number(((be=q[0])==null?void 0:be.value)??0)),(I==="results"||I==="cost_per_result"||I==="results_messaging_replied_7d"||I==="cost_per_messaging_replied_7d")&&typeof q=="string"){const fe=Number(q);q=isNaN(fe)?q:fe}if(typeof q=="number"||typeof q=="string"){const fe=Number(q);if(!isFinite(fe))return"-"}if(["spend","budget","daily_budget","weekly_budget","monthly_budget","quarterly_budget","yearly_budget","cost_per_result","cost_per_thruplay","cpc","cpm","cpp","cost_per_unique_click","cost_per_phone","cost_per_messaging_replied_7d","cost_per_started_7d","cost_per_total_messaging_connection","cost_per_action_type","cost_per_inline_link_click","cost_per_inline_post_engagement","cost_per_outbound_click","cost_per_unique_outbound_click"].includes(I)){let fe=q;if(fe==null&&Q&&(fe=Q.amount_spent??Q.total_spend),fe==null)return"-";const Ee=Math.round(Number(fe));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Ee)+" "}if(["impressions","reach","clicks","results","messaging_connections","phones","results_messaging_replied_7d","unique_clicks","inline_link_clicks","unique_inline_link_clicks","outbound_clicks","unique_outbound_clicks","video_views","video_30_sec_watched_actions","post_engagements","page_engagement","post_reactions","post_shares","post_comments"].includes(I)){const fe=Math.round(Number(q));return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format(fe)}if(["ctr","frequency","unique_ctr","unique_inline_link_click_ctr"].includes(I)){const fe=Number(q);return isFinite(fe)?`${fe.toFixed(2).replace(/\.00$/,"")}%`:"0%"}if(["date_start","date_stop"].includes(I))return new Date(q).toLocaleDateString("vi-VN");if(["actions","cost_per_action_type","video_p25_watched_actions","video_p50_watched_actions","video_p75_watched_actions","video_p100_watched_actions","video_play_actions"].includes(I))return Array.isArray(q)?`${q.length} hnh ng`:"-";if(I==="purchase_roas"){if(Array.isArray(q)&&q.length>0){const fe=Number(q[0].value);return isFinite(fe)?fe.toFixed(2).replace(/\.00$/,""):"-"}return"-"}if(I==="action_values"){if(Array.isArray(q)&&q.length>0){const fe=q.reduce(($e,ot)=>$e+(Number(ot.value)||0),0),Ee=Math.round(fe);return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Ee)+" "}return"-"}if(["quality_ranking","engagement_rate_ranking","conversion_rate_ranking"].includes(I)){if(!q)return"-";const fe={ABOVE_AVERAGE:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",AVERAGE:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",BELOW_AVERAGE:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},Ee={ABOVE_AVERAGE:"Cao",AVERAGE:"Trung bnh",BELOW_AVERAGE:"Thp"},$e=fe[q]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",ot=Ee[q]||q;return s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${$e}`,children:ot})}return q},jk=I=>{X===I?D==="asc"?Y("desc"):D==="desc"&&(Y(null),se(null)):(se(I),Y("asc"))},Xn=g.useMemo(()=>{var Q;let I=n;const q=zo[zo.length-1];if(q.level==="campaign"&&!q.parentId){const be=I.filter(Ae=>(Ae.level||(Ae.level=Ae.ad_id?"ad":Ae.adset_id?"adset":"campaign"),Ae.level==="campaign")).map(Ae=>Ae.campaign_id).filter(Boolean),fe=ms.map(Ae=>Ae.id).filter(Boolean);Array.from(new Set([...fe,...be]));let Ee=I;Ye!=null&&Ye.from&&(Ye!=null&&Ye.to)&&(Ee=I.filter(Ae=>{if(!Ae.date_start)return!1;const gt=No(Ye.from),vt=Bh(Ye.to),bt=Om(Ae.date_start);return cy(bt,{start:gt,end:vt})}));let $e=Ee.filter(Ae=>Ae.level?Ae.level==="campaign":Ae.campaign_id&&!Ae.adset_id&&!Ae.ad_id);if($e.length===0){const Ae=Ee.filter(gt=>gt.level==="ad");if(Ae.length>0){const gt={},vt=["spend","impressions","clicks","reach","results","results_messaging_replied_7d","started_7d","total_messaging_connection","link_click","messaging_welcome_message_view","post_engagement_action","messaging_first_reply","video_view","page_engagement_action","replied_7d","depth_2_message","depth_3_message"];for(const bt of Ae){const Qr=`${bt.campaign_id}_${bt.date_start}`;gt[Qr]||(gt[Qr]={...bt,level:"campaign",ad_id:void 0,ad_name:void 0,adset_id:void 0,adset_name:void 0,...vt.reduce((wa,At)=>({...wa,[At]:0}),{})});const qn=gt[Qr];vt.forEach(wa=>{qn[wa]+=Number(bt[wa])||0})}$e=Object.values(gt).map(bt=>(bt.results>0?bt.cost_per_result=bt.spend/bt.results:bt.cost_per_result=0,bt.results_messaging_replied_7d>0?bt.cost_per_messaging_replied_7d=bt.spend/bt.results_messaging_replied_7d:bt.cost_per_messaging_replied_7d=0,bt))}}const ot=$e.reduce((Ae,gt)=>{var Qr;const vt=(Qr=gt.date_start)==null?void 0:Qr.split(/[T ]/)[0],bt=`${gt.campaign_id}_${vt}_${gt.level||"campaign"}`;if(!Ae[bt])Ae[bt]=gt;else{const qn=new Date(Ae[bt].CreatedAt||Ae[bt].created_at||0);new Date(gt.CreatedAt||gt.created_at||0)>qn&&(Ae[bt]=gt)}return Ae},{}),we=Object.values(ot),pe=Ee.filter(Ae=>Ae.level==="adset"),le={},_e=["spend","impressions","clicks","reach","results","results_messaging_replied_7d","started_7d","total_messaging_connection","link_click","messaging_welcome_message_view","post_engagement_action","messaging_first_reply","video_view","page_engagement_action","replied_7d","depth_2_message","depth_3_message"];for(const Ae of pe){const gt=`${Ae.campaign_id}_${(Q=Ae.date_start)==null?void 0:Q.split(/[T ]/)[0]}`;le[gt]||(le[gt]={...Ae,level:"campaign",adset_id:void 0,adset_name:void 0,..._e.reduce((bt,Qr)=>({...bt,[Qr]:0}),{})});const vt=le[gt];_e.forEach(bt=>{vt[bt]+=Number(Ae[bt])||0})}const Ie={};Object.entries(le).forEach(([Ae,gt])=>{Ie[Ae]=gt}),we.forEach(Ae=>{var vt;const gt=`${Ae.campaign_id}_${(vt=Ae.date_start)==null?void 0:vt.split(/[T ]/)[0]}`;(!Ie[gt]||Number(Ae.spend)>0)&&(Ie[gt]=Ae)});const He=Object.values(Ie).reduce((Ae,gt)=>{const vt=gt.campaign_id;if(!vt)return Ae;Ae[vt]||(Ae[vt]={...gt},Ae[vt].impressions=0,Ae[vt].clicks=0,Ae[vt].spend=0,Ae[vt].reach=0,Ae[vt].results=0,Ae[vt].results_messaging_replied_7d=0,Ae[vt].started_7d=0,Ae[vt].total_messaging_connection=0,Ae[vt].link_click=0,Ae[vt].messaging_welcome_message_view=0,Ae[vt].post_engagement_action=0,Ae[vt].messaging_first_reply=0,Ae[vt].video_view=0,Ae[vt].page_engagement_action=0,Ae[vt].replied_7d=0,Ae[vt].depth_2_message=0,Ae[vt].depth_3_message=0);const bt=Ae[vt];return bt.impressions+=Number(gt.impressions)||0,bt.clicks+=Number(gt.clicks)||0,bt.spend+=Number(gt.spend)||0,bt.reach+=Number(gt.reach)||0,bt.results+=Number(gt.results)||0,bt.results_messaging_replied_7d+=Number(gt.results_messaging_replied_7d)||0,bt.started_7d+=Number(gt.started_7d)||0,bt.total_messaging_connection+=Number(gt.total_messaging_connection)||0,bt.link_click+=Number(gt.link_click)||0,bt.messaging_welcome_message_view+=Number(gt.messaging_welcome_message_view)||0,bt.post_engagement_action+=Number(gt.post_engagement_action)||0,bt.messaging_first_reply+=Number(gt.messaging_first_reply)||0,bt.video_view+=Number(gt.video_view)||0,bt.page_engagement_action+=Number(gt.page_engagement_action)||0,bt.replied_7d+=Number(gt.replied_7d)||0,bt.depth_2_message+=Number(gt.depth_2_message)||0,bt.depth_3_message+=Number(gt.depth_3_message)||0,Ae},{}),nt=Object.values(He),ct=new Set(nt.map(Ae=>String(Ae.campaign_id))),Ge=(ms||[]).filter(Ae=>!ct.has(String(Ae.id))),In=nt.map(Ae=>{const gt=Ae.campaign_id,vt=(ms||[]).find(Ta=>Ta.id===gt),bt=(vt==null?void 0:vt.is_deleted)||(vt==null?void 0:vt.effective_status)==="DELETED"||!vt&&(Ae==null?void 0:Ae.effective_status)==="DELETED",Qr=Ae.daily_budget?Number(Ae.daily_budget):0;let qn=isNaN(Qr)?0:Qr,wa=!1;if(qn===0&&vt){const Bn=(ps||[]).filter(Ft=>Ft.campaign_id===gt&&Ft.status!=="DELETED"&&Ft.status!=="ARCHIVED").reduce((Ft,ke)=>Ft+(ke.daily_budget?Number(ke.daily_budget):0),0);Bn>0&&(qn=Bn,wa=!0)}const At=Ts==="VND"?qn:qn/100,Ai=Ae.daily_budget?Ts==="VND"?Number(Ae.daily_budget):Number(Ae.daily_budget)/100:0,Ei=Ai*7,Ti=Ai*30,$r=Ai*90,M=Ai*365,Nt={...Ae,id:Ae.id||`campaign_${Ae.campaign_id}_${Ae.date_start}`,campaign_name:(vt==null?void 0:vt.name)||Ae.campaign_name,level:"campaign",effective_status:bt?"DELETED":(vt==null?void 0:vt.effective_status)||Ae.effective_status,status:(vt==null?void 0:vt.status)||Ae.status,is_deleted:bt,budget:At||0,budget_type:wa||Ae.daily_budget?"daily":"lifetime",daily_budget:Ae.daily_budget,lifetime_budget:Ae.lifetime_budget,weekly_budget:Ei,monthly_budget:Ti,quarterly_budget:$r,yearly_budget:M,_isDeleted:bt,ctr:0,cpm:0,cpc:0,cpp:0,cost_per_result:0,cost_per_messaging_replied_7d:0,frequency:0};if(Nt.impressions>0&&(Nt.ctr=Nt.clicks/Nt.impressions*100,Nt.cpm=Nt.spend/Nt.impressions*1e3),Nt.clicks>0&&(Nt.cpc=Nt.spend/Nt.clicks),Nt.results===void 0||Nt.results===null||Nt.results===0){const Ta=Nt.objective||"MESSAGES",Bn=aE[Ta]||[];let Ft=0;if(["REACH","OUTCOME_AWARENESS","AWARENESS"].includes(Ta))Ft=Number(Nt.reach)||0;else for(const ke of Bn){let Vt=0;if(ke==="onsite_conversion.messaging_conversation_started_7d"?Vt=Number(Nt.started_7d)||Number(Nt["onsite_conversion.messaging_conversation_started_7d"]):ke==="onsite_conversion.messaging_first_reply"?Vt=Number(Nt.messaging_first_reply)||Number(Nt["onsite_conversion.messaging_first_reply"]):ke==="onsite_conversion.total_messaging_connection"?Vt=Number(Nt.total_messaging_connection)||Number(Nt["onsite_conversion.total_messaging_connection"]):Vt=Number(Nt[ke]),!isNaN(Vt)&&Vt>0){Ft=Vt;break}}Ft>0?Nt.results=Ft:(Nt.results===void 0||Nt.results===null)&&(Nt.results=0)}return Nt.results>0?Nt.cost_per_result=Nt.spend>0?Nt.spend/Nt.results:0:Nt.cost_per_result=0,Nt.results_messaging_replied_7d>0&&(Nt.cost_per_messaging_replied_7d=Nt.spend/Nt.results_messaging_replied_7d),Nt.reach>0&&(Nt.frequency=Nt.impressions/Nt.reach,Nt.cpp=Nt.spend/Nt.reach),Nt}),br=Ge.map(Ae=>{const gt=Ae.daily_budget?Number(Ae.daily_budget):0;let vt=isNaN(gt)?0:gt,bt=!1;if(vt===0){const $r=(ps||[]).filter(M=>M.campaign_id===Ae.id&&M.status!=="DELETED"&&M.status!=="ARCHIVED").reduce((M,Nt)=>M+(Nt.daily_budget?Number(Nt.daily_budget):0),0);$r>0&&(vt=$r,bt=!0)}const Qr=Ts==="VND"?vt:vt/100,qn=Ae.daily_budget?Ts==="VND"?Number(Ae.daily_budget):Number(Ae.daily_budget)/100:0,wa=qn*7,At=qn*30,Ai=qn*90,Ei=qn*365;return{id:`pseudo_campaign_${Ae.id}`,campaign_id:Ae.id,campaign_name:Ae.name,effective_status:Ae.effective_status,status:Ae.status,level:"campaign",budget:Qr,budget_type:bt||Ae.daily_budget?"daily":"lifetime",daily_budget:Ae.daily_budget,lifetime_budget:Ae.lifetime_budget,weekly_budget:wa,monthly_budget:At,quarterly_budget:Ai,yearly_budget:Ei,impressions:0,clicks:0,spend:0,reach:0,results:0,results_messaging_replied_7d:0,ctr:0,cpm:0,cpc:0,cpp:0,cost_per_result:0,cost_per_messaging_replied_7d:0,frequency:0,date_start:Ye!=null&&Ye.from?Bt(Ye.from,"yyyy-MM-dd"):Bt(new Date,"yyyy-MM-dd"),date_stop:Ye!=null&&Ye.to?Bt(Ye.to,"yyyy-MM-dd"):Bt(new Date,"yyyy-MM-dd"),_isPseudo:!0}});I=[...In,...br],I.sort((Ae,gt)=>{const vt=qn=>qn==="DELETED"?4:qn==="PAUSED"||qn==="CAMPAIGN_PAUSED"||qn==="ADSET_PAUSED"?2:qn==="ARCHIVED"||qn==="IN_PROCESS"||qn==="WITH_ISSUES"||qn!=null&&qn.startsWith("PENDING_")||qn==="DISAPPROVED"?3:1,bt=vt(Ae.effective_status||"ACTIVE"),Qr=vt(gt.effective_status||"ACTIVE");return bt-Qr})}else if(q.level==="adset"&&q.parentId)if(q.parentId==="EMPTY")I=[];else{const he=ps.filter(pe=>pe.campaign_id===q.parentId);let be=n;Ye!=null&&Ye.from&&(Ye!=null&&Ye.to)&&(be=n.filter(pe=>{var He;if(!pe.date_start)return!1;const le=No(Ye.from),_e=Bh(Ye.to),Ie=(He=pe.date_start)==null?void 0:He.split(/[T ]/)[0];if(!Ie)return!1;const Je=Om(Ie);return cy(Je,{start:le,end:_e})}));let fe=be.filter(pe=>(pe.level||(pe.level=pe.ad_id?"ad":pe.adset_id?"adset":"campaign"),pe.level==="adset"&&pe.campaign_id===q.parentId));if(fe.length===0){const pe=be.filter(le=>le.level==="ad"&&le.campaign_id===q.parentId);if(pe.length>0){const le={},_e=["spend","impressions","clicks","reach","results","results_messaging_replied_7d","started_7d","total_messaging_connection","link_click","messaging_welcome_message_view","post_engagement_action","messaging_first_reply","video_view","page_engagement_action","replied_7d","depth_2_message","depth_3_message"];for(const Ie of pe){const Je=`${Ie.adset_id}_${Ie.date_start}`;le[Je]||(le[Je]={...Ie,level:"adset",ad_id:void 0,ad_name:void 0,..._e.reduce((nt,ct)=>({...nt,[ct]:0}),{})});const He=le[Je];_e.forEach(nt=>{He[nt]+=Number(Ie[nt])||0})}fe=Object.values(le).map(Ie=>(Ie.results>0?Ie.cost_per_result=Ie.spend/Ie.results:Ie.cost_per_result=0,Ie.results_messaging_replied_7d>0?Ie.cost_per_messaging_replied_7d=Ie.spend/Ie.results_messaging_replied_7d:Ie.cost_per_messaging_replied_7d=0,Ie))}}const Ee=fe.reduce((pe,le)=>{var Je;const _e=(Je=le.date_start)==null?void 0:Je.split(/[T ]/)[0],Ie=`${le.adset_id}_${_e}`;if(!pe[Ie])pe[Ie]=le;else{const He=new Date(pe[Ie].CreatedAt||pe[Ie].created_at||0);new Date(le.CreatedAt||le.created_at||0)>He&&(pe[Ie]=le)}return pe},{}),$e=Object.values(Ee),ot=ms.find(pe=>pe.id===q.parentId),we=new Set;he.forEach(pe=>we.add(pe.id)),$e.forEach(pe=>we.add(pe.adset_id)),I=Array.from(we).map(pe=>{var Ai,Ei,Ti;const le=he.find($r=>$r.id===pe),_e=$e.filter($r=>$r.adset_id===pe);if(!le&&_e.length>0){const $r=_e[0],M={...$r,level:"adset",adset_name:$r.adset_name||pe,campaign_name:$r.campaign_name||q.name,effective_status:$r.effective_status,status:$r.status,budget:0,weekly_budget:0,monthly_budget:0,quarterly_budget:0,yearly_budget:0,ctr:0,cpm:0,cpc:0,cpp:0,cost_per_result:0,cost_per_messaging_replied_7d:0,frequency:0};if(M.impressions>0&&(M.ctr=M.clicks/M.impressions*100,M.cpm=M.spend/M.impressions*1e3),M.clicks>0&&(M.cpc=M.spend/M.clicks),M.results===void 0||M.results===null||M.results===0){const Nt=M.objective||"MESSAGES",Ta=aE[Nt]||[];let Bn=0;if(["REACH","OUTCOME_AWARENESS","AWARENESS"].includes(Nt))Bn=Number(M.reach)||0;else for(const Ft of Ta){let ke=0;if(Ft==="onsite_conversion.messaging_conversation_started_7d"?ke=Number(M.started_7d)||Number(M["onsite_conversion.messaging_conversation_started_7d"]):Ft==="onsite_conversion.messaging_first_reply"?ke=Number(M.messaging_first_reply)||Number(M["onsite_conversion.messaging_first_reply"]):Ft==="onsite_conversion.total_messaging_connection"?ke=Number(M.total_messaging_connection)||Number(M["onsite_conversion.total_messaging_connection"]):ke=Number(M[Ft]),!isNaN(ke)&&ke>0){Bn=ke;break}}Bn>0?M.results=Bn:(M.results===void 0||M.results===null)&&(M.results=0)}return M.results>0?M.cost_per_result=M.spend>0?M.spend/M.results:0:M.cost_per_result=0,M.results_messaging_replied_7d>0&&(M.cost_per_messaging_replied_7d=M.spend/M.results_messaging_replied_7d),M.reach>0&&(M.frequency=M.impressions/M.reach,M.cpp=M.spend/M.reach),M}if(!le)return null;const Ie=le.campaign_id||q.parentId,Je=ms.find($r=>$r.id===Ie)||ot;let He=!1;!(le.daily_budget||le.lifetime_budget)&&Je&&(He=!0);const ct=_e[0]||{};let Ge=ct.daily_budget?Number(ct.daily_budget):0,In=ct.lifetime_budget?Number(ct.lifetime_budget):0;Ge===0&&In===0&&(le.daily_budget&&(Ge=Number(le.daily_budget)),le.lifetime_budget&&(In=Number(le.lifetime_budget)));let br=0,Ae="daily";Ge>0?(br=Ge,Ae="daily"):In>0&&(br=In,Ae="lifetime");const gt=Ts==="VND"?br:br/100,vt=isNaN(Ge)?0:Ge,bt=vt*7,Qr=vt*30,qn=vt*90,wa=vt*365;if(_e.length===0)return{id:`pseudo_adset_${le.id}`,user_id:((Ai=n[0])==null?void 0:Ai.user_id)||(e==null?void 0:e.id),account_id:(Ei=n[0])==null?void 0:Ei.account_id,account_name:(Ti=n[0])==null?void 0:Ti.account_name,campaign_id:Ie,campaign_name:q.name,adset_id:le.id,adset_name:le.name,status:le.status,effective_status:le.effective_status,level:"adset",budget:gt,budget_type:Ae,daily_budget:0,lifetime_budget:0,weekly_budget:bt,monthly_budget:Qr,quarterly_budget:qn,yearly_budget:wa,date_start:Ye!=null&&Ye.from?Bt(Ye.from,"yyyy-MM-dd"):Bt(new Date,"yyyy-MM-dd"),date_stop:Ye!=null&&Ye.to?Bt(Ye.to,"yyyy-MM-dd"):Bt(new Date,"yyyy-MM-dd"),impressions:0,clicks:0,spend:0,reach:0,results:0,results_messaging_replied_7d:0,frequency:0,cpc:0,cpm:0,cpp:0,cost_per_unique_click:0,ctr:0,cost_per_result:0,cost_per_messaging_replied_7d:0,cost_per_thruplay:0,_isPseudo:!0,is_budget_inherited:He};const At={...ct,level:"adset",adset_name:le.name,campaign_id:Ie,campaign_name:q.name,effective_status:le.effective_status,status:le.status,budget:gt,budget_type:Ae,daily_budget:ct.daily_budget,lifetime_budget:ct.lifetime_budget,weekly_budget:bt,monthly_budget:Qr,quarterly_budget:qn,yearly_budget:wa,ctr:0,cpm:0,cpc:0,cpp:0,cost_per_result:0,cost_per_messaging_replied_7d:0,frequency:0,is_budget_inherited:He};if(At.impressions>0&&(At.ctr=At.clicks/At.impressions*100,At.cpm=At.spend/At.impressions*1e3),At.clicks>0&&(At.cpc=At.spend/At.clicks),At.results===void 0||At.results===null||At.results===0){const $r=At.objective||"MESSAGES",M=aE[$r]||[];let Nt=0;if(["REACH","OUTCOME_AWARENESS","AWARENESS"].includes($r))Nt=Number(At.reach)||0;else for(const Ta of M){let Bn=0;if(Ta==="onsite_conversion.messaging_conversation_started_7d"?Bn=Number(At.started_7d)||Number(At["onsite_conversion.messaging_conversation_started_7d"]):Ta==="onsite_conversion.messaging_first_reply"?Bn=Number(At.messaging_first_reply)||Number(At["onsite_conversion.messaging_first_reply"]):Ta==="onsite_conversion.total_messaging_connection"?Bn=Number(At.total_messaging_connection)||Number(At["onsite_conversion.total_messaging_connection"]):Bn=Number(At[Ta]),!isNaN(Bn)&&Bn>0){Nt=Bn;break}}Nt>0?At.results=Nt:(At.results===void 0||At.results===null)&&(At.results=0)}return At.results>0?At.cost_per_result=At.spend>0?At.spend/At.results:0:At.cost_per_result=0,At.results_messaging_replied_7d>0&&(At.cost_per_messaging_replied_7d=At.spend/At.results_messaging_replied_7d),At.reach>0&&(At.frequency=At.impressions/At.reach,At.cpp=At.spend/At.reach),At}).filter(Boolean)}else if(q.level==="ad"&&q.parentId)if(q.parentId==="EMPTY")I=[];else{const he=io.filter(we=>we.adset_id===q.parentId);let be=n;Ye!=null&&Ye.from&&(Ye!=null&&Ye.to)&&(be=n.filter(we=>{var Je;if(!we.date_start)return!1;const pe=No(Ye.from),le=Bh(Ye.to),_e=(Je=we.date_start)==null?void 0:Je.split(/[T ]/)[0];if(!_e)return!1;const Ie=Om(_e);return cy(Ie,{start:pe,end:le})}));const Ee=be.filter(we=>(we.level||(we.level=we.ad_id?"ad":we.adset_id?"adset":"campaign"),we.level==="ad"&&we.adset_id===q.parentId)).reduce((we,pe)=>{var Ie;const le=(Ie=pe.date_start)==null?void 0:Ie.split("T")[0],_e=`${pe.ad_id}_${le}`;if(!we[_e])we[_e]=pe;else{const Je=new Date(we[_e].CreatedAt||we[_e].created_at||0);new Date(pe.CreatedAt||pe.created_at||0)>Je&&(we[_e]=pe)}return we},{}),$e=Object.values(Ee),ot=new Set;he.forEach(we=>ot.add(we.id)),$e.forEach(we=>ot.add(we.ad_id)),I=Array.from(ot).map(we=>{var Je,He,nt;const pe=he.find(ct=>ct.id===we),le=$e.filter(ct=>ct.ad_id===we);if(!pe&&le.length>0){const ct=le[0],Ge={...ct,level:"ad",ad_name:ct.ad_name||we,adset_name:ct.adset_name||q.name,effective_status:ct.effective_status,status:ct.status,ctr:0,cpm:0,cpc:0,cpp:0,cost_per_result:0,cost_per_messaging_replied_7d:0,frequency:0};if(Ge.impressions>0&&(Ge.ctr=Ge.clicks/Ge.impressions*100,Ge.cpm=Ge.spend/Ge.impressions*1e3),Ge.clicks>0&&(Ge.cpc=Ge.spend/Ge.clicks),(Ge.results===void 0||Ge.results===null)&&Ge.started_7d!==void 0&&(Ge.results=Number(Ge.started_7d)||0),Ge.results>0){const In=Ge.cost_per_started_7d;Ge.cost_per_result=In!=null&&!isNaN(Number(In))?Number(In):Ge.spend>0?Ge.spend/Ge.results:0}else Ge.cost_per_result=0;return Ge.results_messaging_replied_7d>0&&(Ge.cost_per_messaging_replied_7d=Ge.spend/Ge.results_messaging_replied_7d),Ge.reach>0&&(Ge.frequency=Ge.impressions/Ge.reach,Ge.cpp=Ge.spend/Ge.reach),Ge}if(!pe)return null;if(le.length===0)return{id:`pseudo_${pe.id}`,user_id:((Je=n[0])==null?void 0:Je.user_id)||(e==null?void 0:e.id),account_id:(He=n[0])==null?void 0:He.account_id,account_name:(nt=n[0])==null?void 0:nt.account_name,adset_id:q.parentId,adset_name:q.name,ad_id:pe.id,ad_name:pe.name,status:pe.status,effective_status:pe.effective_status,level:"ad",date_start:Ye!=null&&Ye.from?Bt(Ye.from,"yyyy-MM-dd"):Bt(new Date,"yyyy-MM-dd"),date_stop:Ye!=null&&Ye.to?Bt(Ye.to,"yyyy-MM-dd"):Bt(new Date,"yyyy-MM-dd"),impressions:0,clicks:0,spend:0,reach:0,results:0,results_messaging_replied_7d:0,frequency:0,cpc:0,cpm:0,cpp:0,cost_per_unique_click:0,ctr:0,cost_per_result:0,cost_per_messaging_replied_7d:0,cost_per_thruplay:0,_isPseudo:!0};const Ie={...le[0],level:"ad",ad_name:pe.name,adset_name:q.name,effective_status:pe.effective_status,status:pe.status,ctr:0,cpm:0,cpc:0,cpp:0,cost_per_result:0,cost_per_messaging_replied_7d:0,frequency:0};if(Ie.impressions>0&&(Ie.ctr=Ie.clicks/Ie.impressions*100,Ie.cpm=Ie.spend/Ie.impressions*1e3),Ie.clicks>0&&(Ie.cpc=Ie.spend/Ie.clicks),(Ie.results===void 0||Ie.results===null)&&Ie.started_7d!==void 0&&(Ie.results=Number(Ie.started_7d)||0),Ie.results>0){const ct=Ie.cost_per_started_7d;Ie.cost_per_result=ct!=null&&!isNaN(Number(ct))?Number(ct):Ie.spend>0?Ie.spend/Ie.results:0}else Ie.cost_per_result=0;return Ie.results_messaging_replied_7d>0&&(Ie.cost_per_messaging_replied_7d=Ie.spend/Ie.results_messaging_replied_7d),Ie.reach>0&&(Ie.frequency=Ie.impressions/Ie.reach,Ie.cpp=Ie.spend/Ie.reach),Ie}).filter(Boolean)}else if(an==="ad-daily"){const he=lm.parentId;!he||he==="EMPTY"?I=[]:(I=n.filter(be=>{if(!be.level||be.level!=="ad"||be.ad_id!==he)return!1;if(Ye!=null&&Ye.from&&(Ye!=null&&Ye.to)&&be.date_start){const fe=Om(be.date_start);return cy(fe,{start:No(Ye.from),end:Bh(Ye.to)})}return!0}),I.sort((be,fe)=>{const Ee=be.date_start?new Date(be.date_start):new Date(0);return(fe.date_start?new Date(fe.date_start):new Date(0)).getTime()-Ee.getTime()}))}return I.reduce((he,be)=>{const fe=be.is_deleted?"DELETED":be.effective_status||be.status||"NO_STATUS";return he[fe]=(he[fe]||0)+1,he},{}),mn.length>0&&(I=I.filter(he=>{const be=he.is_deleted?"DELETED":he.effective_status||he.status;return Number(he.spend)>0||Number(he.impressions)>0||!be?!0:mn.includes(be)})),!X||!D?I:[...I].sort((he,be)=>{const fe=le=>le==="DELETED"?3:le==="PAUSED"?2:1,Ee=fe(he.effective_status||"ACTIVE"),$e=fe(be.effective_status||"ACTIVE");if(Ee!==$e)return Ee-$e;const ot=he[X],we=be[X];if(ot==null)return 1;if(we==null)return-1;let pe=0;return typeof ot=="number"&&typeof we=="number"?pe=ot-we:pe=String(ot).localeCompare(String(we)),D==="asc"?pe:-pe})},[n,Ye,mn,X,D,an,lm,ms,ps,io,Ts]),Wo=ba.map(I=>Oy.find(q=>q.field===I)).filter(I=>!!I),Eu=fh.map(I=>Oy.find(q=>q.field===I)).filter(I=>!!I);let la=Wo.filter(I=>an==="campaign"?I.field!=="adset_name"&&I.field!=="ad_name":an==="adset"?I.field!=="campaign_name"&&I.field!=="ad_name":an==="ad"?I.field!=="campaign_name":!0);const Vv={campaign:"campaign_name",adset:"adset_name",ad:"ad_name"}[an];if(!la.some(I=>I.field===Vv)){const I=Oy.find(q=>q.field===Vv);I&&(la=[la[0],la[1],I,...la.slice(2)].filter(Boolean))}if(la.some(I=>I.field==="effective_status")){const I=la.findIndex(q=>q.field==="effective_status");I>0&&(la=[la[I],...la.slice(0,I),...la.slice(I+1)])}else{const I=Oy.find(q=>q.field==="effective_status");I&&(la=[I,...la])}const Lr=g.useMemo(()=>{const I=Xn.reduce((He,nt)=>He+(Number(nt.spend)||0),0),q=Xn.reduce((He,nt)=>He+(Number(nt.results_messaging_replied_7d)||0),0);let Q=1;Ye!=null&&Ye.from&&(Ye!=null&&Ye.to)&&(Q=_ye(Ye.to,Ye.from)+1),Q=Math.max(1,Q);const he=Xn.reduce((He,nt)=>nt.effective_status==="ACTIVE"?He+(Number(nt.budget)||0):He,0),be=Xn.reduce((He,nt)=>He+(Number(nt.impressions)||0),0),fe=Xn.reduce((He,nt)=>He+(Number(nt.clicks)||0),0),Ee=Xn.reduce((He,nt)=>{if(Array.isArray(nt.actions)){const ct=nt.actions.find(Ge=>Ge.action_type==="onsite_conversion.total_messaging_connection");return He+(Number(ct==null?void 0:ct.value)||0)}return He},0),$e=0,ot=0,we=0,pe=q>0?I/q:0,le=Ee>0?I/Ee:0,_e=Q>0?I/Q:0,Ie=we>0?I/we:0,Je=(()=>{const He=ct=>{if(!ct)return 0;const Ge=Number(ct);return isNaN(Ge)?0:Ts==="VND"?Ge:Ge/100};let nt=new Set;if(an==="campaign"){const ct=new Set(Xn.map(Ge=>Ge.campaign_id));ps.forEach(Ge=>{ct.has(Ge.campaign_id)&&nt.add(Ge.id)})}else an==="adset"?Xn.forEach(ct=>nt.add(ct.adset_id||ct.id)):an==="ad"&&Xn.forEach(ct=>nt.add(ct.adset_id));return ps.filter(ct=>nt.has(ct.id)&&ct.effective_status==="ACTIVE").reduce((ct,Ge)=>ct+He(Ge.daily_budget),0)})();return{spend:I,results:q,costPerResult:pe,budget:he,adsetBudget:Je,impressions:be,clicks:fe,phones:Ee,costPerPhone:le,dailyMarketingCost:_e,appointments:$e,customers:ot,revenue:we,costPerAppointment:$e>0?I/$e:0,costPerCustomer:ot>0?I/ot:0,marketingCostPerRevenue:Ie,conversionRate:Ee>0?ot/Ee*100:0}},[Xn,Ye,Ts,ps,an]),vh=an==="campaign"?Xn.length:0;return new Set(n.filter(I=>I.level?I.level==="adset":I.adset_id&&!I.ad_id).map(I=>I.adset_id)).size,new Set(n.filter(I=>I.level?I.level==="ad":I.ad_id).map(I=>I.ad_id)).size,n.length>0&&(n[0].account_id,n[0].account_name),g.useEffect(()=>{if(!(e!=null&&e.id))return;const I=wt.channel("table-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"FacebookInsights_Auto"},q=>{const Q=q.new;!Q||!Q.user_id||Q.user_id!==e.id||r(he=>{const be=he.findIndex(fe=>fe.insight_key===Q.insight_key);if(be>=0){const fe=[...he];return fe[be]={...fe[be],...Q},fe}else return[...he,Q]})}).subscribe();return()=>{wt.removeChannel(I)}},[e==null?void 0:e.id]),s.jsxs("div",{className:"p-4 sm:p-6 md:p-8 space-y-4 md:space-y-6",children:[s.jsx(gKe,{rules:ue,labels:Ol,isLoading:Ne,hasMultipleAccounts:rn,showWarning:dn,onDismissWarning:()=>Tt(!1),onCreateSampleRules:Fv,creatingSamples:ye,onNavigateTestCron:()=>t("/test-cron"),onManageLabels:()=>mt(!0),onCreateRule:()=>{ce(void 0),re(!0)},onToggleActive:uk,onEdit:I=>{ce(I),re(!0)},onDelete:Nu,onRun:dk,onTestRule:hk,onAssignLabels:Il,runningRules:ve}),s.jsxs(Oe,{children:[s.jsx(Fe,{className:"p-1 sm:p-2 pb-0.5",children:Ar.hasPaymentIssue&&s.jsx("div",{className:"mt-4 p-4 bg-destructive/10 border-2 border-destructive rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 text-destructive",children:s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-destructive mb-1",children:" Ti khon qung co c vn  thanh ton"}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[Ar.disable_reason==="PAYMENT_ISSUE"&&"Cn cp nht phng thc thanh ton  tip tc chy qung co.",Ar.disable_reason==="RISK_PAYMENT"&&"Ti khon b hn ch do ri ro thanh ton.",Ar.disable_reason==="GRAY_ACCOUNT_SHUT_DOWN"&&"Ti khon  b v hiu ha.",Ar.account_status===2&&!Ar.disable_reason&&"Ti khon ang b v hiu ha.",!Ar.disable_reason&&Ar.account_status!==2&&"Khng tm thy phng thc thanh ton hp l."]}),s.jsx(J,{variant:"destructive",size:"sm",onClick:()=>window.open("https://business.facebook.com/settings/payment-methods","_blank"),className:"h-8",children:"M ci t thanh ton Facebook"})]})]})})}),s.jsxs(Re,{className:"p-4 sm:p-5 md:p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"text-base font-semibold",children:"Bo co tng quan"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{variant:"outline",size:"sm",onClick:Db,className:"h-8 px-3 text-xs",children:s.jsx(Kz,{className:"w-3 h-3"})})}),s.jsx(mi,{children:s.jsx("p",{children:"t li v mc nh"})})]})}),s.jsxs("div",{className:"flex gap-1 border rounded-md",children:[s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{variant:vc==="cards"?"default":"ghost",size:"sm",onClick:()=>yc("cards"),className:"h-8 px-3 rounded-none rounded-l-md",children:s.jsx(Nce,{className:"w-4 h-4"})})}),s.jsx(mi,{children:s.jsx("p",{children:"Hin th dng th"})})]})}),s.jsx(fi,{children:s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:s.jsx(J,{variant:vc==="chart"?"default":"ghost",size:"sm",onClick:()=>yc("chart"),className:"h-8 px-3 rounded-none rounded-r-md",children:s.jsx(Bg,{className:"w-4 h-4"})})}),s.jsx(mi,{children:s.jsx("p",{children:"Hin th dng biu "})})]})})]}),vc==="chart"&&s.jsxs(kn,{value:_v,onValueChange:I=>JN(I),children:[s.jsx(wn,{className:"w-[120px] h-8 text-xs",children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"bar",className:"text-xs",children:"Ct"}),s.jsx(st,{value:"line",className:"text-xs",children:"ng"}),s.jsx(st,{value:"area",className:"text-xs",children:"Vng"}),s.jsx(st,{value:"pie",className:"text-xs",children:"Trn"}),s.jsx(st,{value:"donut",className:"text-xs",children:"Vng trn"}),s.jsx(st,{value:"stacked",className:"text-xs",children:"Ct chng"}),s.jsx(st,{value:"radar",className:"text-xs",children:"Radar"})]})]}),s.jsxs(J,{variant:"outline",size:"sm",onClick:()=>dh(!0),className:"h-8 px-3 text-xs",children:[s.jsx(wd,{className:"w-3.5 h-3.5 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Ty chnh ct"})]}),wu.length>0&&s.jsxs(kn,{value:pr,onValueChange:bk,children:[s.jsx(wn,{className:"w-[160px] h-8 text-xs",children:s.jsx(Cn,{placeholder:"Chn nh dng..."})}),s.jsx(_n,{children:wu.map(I=>s.jsx(st,{value:I.name,className:"text-xs",children:I.name},I.name))})]})]})]}),vc==="cards"?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:bu.filter(I=>sh.includes(I)).map(I=>{const q=an==="adset"?"NGN SCH NHM QC":"NGN SCH HNG NGY",he={spend:{label:"CHI PH",value:Lr.spend,color:"text-red-600"},costPerResult:{label:"CHI PH TRN KT QU",value:Lr.costPerResult},budget:{label:q,value:Lr.budget},adsetBudget:{label:"NGN SCH NHM QC",value:Lr.adsetBudget},results:{label:"KT QU (MESS 7D)",value:Lr.results,color:"text-blue-600"},impressions:{label:"HIN TH",value:Lr.impressions},clicks:{label:"NHP CHUT",value:Lr.clicks},phones:{label:"SDT",value:Lr.phones,color:"text-green-600"},costPerPhone:{label:"CHI PH TRN SDT",value:Lr.costPerPhone},dailyMarketingCost:{label:"CHI PH MKT TRN NGY",value:Lr.dailyMarketingCost}}[I];return he?s.jsxs(Oe,{className:`p-3 cursor-move ${ch===I?"opacity-50":""}`,draggable:!0,onDragStart:be=>Fn(be,I),onDragOver:oa,onDrop:be=>sr(be,I),onDragEnd:Bv,children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:he.label}),s.jsx("div",{className:`text-base font-bold ${he.color||""}`,children:`${new Intl.NumberFormat("vi-VN").format(Math.round(he.value))} ${I.includes("cost")||I.includes("Cost")||I==="spend"||I==="budget"||I==="adsetBudget"?"":""}`})]},I):null})}):s.jsx($9e,{metrics:Object.fromEntries(bu.filter(I=>sh.includes(I)).map(I=>{const q=an==="adset"?"NGN SCH NHM QC":"NGN SCH HNG NGY",Q={spend:{label:"CHI PH",value:Lr.spend},costPerResult:{label:"CHI PH/KQ",value:Lr.costPerResult},budget:{label:q,value:Lr.budget},adsetBudget:{label:"NGN SCH NHM QC",value:Lr.adsetBudget},results:{label:"KT QU (MESS 7D)",value:Lr.results},impressions:{label:"HIN TH",value:Lr.impressions},clicks:{label:"NHP CHUT",value:Lr.clicks},phones:{label:"SDT",value:Lr.phones},costPerPhone:{label:"CHI PH/SDT",value:Lr.costPerPhone},dailyMarketingCost:{label:"CHI PH MKT/NGY",value:Lr.dailyMarketingCost}};return[I,Q[I]]})),chartType:_v,title:"Bo co tng quan"})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-base font-semibold",children:"Cp chi tit qung co"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",Wo.length," ct)"]})]}),s.jsxs("div",{className:"flex gap-2",children:[_u.length>0&&s.jsxs(kn,{value:Sb,onValueChange:fm,children:[s.jsx(wn,{className:"w-[200px] h-8 text-xs",children:s.jsx(Cn,{placeholder:"Chn nh dng..."})}),s.jsx(_n,{children:_u.map(I=>s.jsx(st,{value:I.name,className:"text-xs",children:I.name},I.name))})]}),s.jsx(J,{variant:"outline",size:"sm",onClick:()=>oh(!0),className:"h-8 px-3 text-xs",children:"Lu nh dng"})]})]})}),an!=="campaign"&&lm.parentId==="EMPTY"&&s.jsxs(Ka,{className:"mb-4 bg-yellow-50 border-yellow-200 dark:bg-yellow-950 dark:border-yellow-800",children:[s.jsx(id,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),s.jsx(xl,{className:"text-yellow-800 dark:text-yellow-300",children:"Vui lng chn chin dch"}),s.jsxs(Ga,{className:"text-yellow-700 dark:text-yellow-400",children:["Quay v tab ",s.jsx("strong",{children:"Chin dch"}),", sau  nhp vo tn chin dch  xem ",an==="adset"?"nhm qung co":"qung co"," ca n."]})]}),n.length===0&&(ms.length>0||ps.length>0||io.length>0)&&s.jsxs(Ka,{className:"mb-4 bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800",children:[s.jsx(id,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),s.jsx(xl,{className:"text-blue-800 dark:text-blue-300",children:"ang hin th cu trc chin dch"}),s.jsxs(Ga,{className:"text-blue-700 dark:text-blue-400",children:["Cha c d liu ch s trong khong thi gian ny. Bm ",s.jsx("strong",{children:'"ng b tt c"'}),"  ti ch s hiu sut t Facebook."]})]}),s.jsxs("div",{className:"mb-1 flex flex-col lg:flex-row gap-1 items-start lg:items-center justify-between",children:[s.jsx(ng,{value:an,onValueChange:I=>{ya(new Set),us(I==="campaign"?[{level:"campaign",parentId:null,name:"Tt c chin dch"}]:[{level:I,parentId:"EMPTY",name:I==="adset"?"Chn chin dch  xem nhm QC":"Chn chin dch  xem qung co"}]);const q=n;r([]),setTimeout(()=>{r(q)},0)},children:s.jsxs(rg,{className:"grid w-full max-w-md grid-cols-3 h-9",children:[s.jsxs(gi,{value:"campaign",className:"text-xs py-1",children:["Chin dch (",vh,")"]}),s.jsx(gi,{value:"adset",className:"text-xs py-1",children:"Nhm qung co"}),s.jsx(gi,{value:"ad",className:"text-xs py-1",children:"Qung co"})]})}),s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[Cr.size>0&&s.jsxs(J,{variant:"default",size:"sm",onClick:()=>Tb(!0),className:"h-8 px-3 text-xs",children:[s.jsx(Pd,{className:"w-3.5 h-3.5 mr-1"}),"Gn nhn (",Cr.size,")"]}),s.jsx(aP,{value:Ye,onChange:El}),s.jsx(mNe,{selectedStatuses:mn,onChange:es}),s.jsxs(Q0,{open:Rr,onOpenChange:Ja,children:[s.jsx(X0,{asChild:!0,children:s.jsxs(J,{variant:"outline",size:"sm",className:"h-8 px-3 text-xs border-blue-200 text-blue-700 hover:bg-blue-50",children:[s.jsx(vf,{className:"w-3.5 h-3.5 mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Ci t t ng"})]})}),s.jsx(Qg,{className:"w-80",children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium leading-none",children:"Cu hnh t ng"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Thit lp lch ng b d liu t ng."})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ge,{htmlFor:"cron-active",children:"T ng ng b"}),s.jsx(Ki,{id:"cron-active",checked:pt,onCheckedChange:tn})]}),s.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[s.jsx(ge,{htmlFor:"cron-interval",children:"Tn sut"}),s.jsxs(kn,{value:xn,onValueChange:on,disabled:!pt,children:[s.jsx(wn,{className:"col-span-2 h-8",children:s.jsx(Cn,{placeholder:"Chn tn sut"})}),s.jsxs(_n,{children:[s.jsx(st,{value:"5",children:"Mi 5 pht"}),s.jsx(st,{value:"10",children:"Mi 10 pht"}),s.jsx(st,{value:"15",children:"Mi 15 pht"}),s.jsx(st,{value:"30",children:"Mi 30 pht"}),s.jsx(st,{value:"60",children:"Mi 60 pht"})]})]})]}),s.jsxs(J,{size:"sm",onClick:Za,disabled:zn,className:"mt-2",children:[zn&&s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Lu cu hnh"]})]})]})})]}),s.jsxs(J,{variant:"outline",size:"sm",onClick:()=>U(!0),className:"h-8 px-3 text-xs",children:[s.jsx(wd,{className:"w-3.5 h-3.5 mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Ct"})]}),s.jsxs(J,{variant:"default",size:"sm",onClick:hc,disabled:m,className:"h-8 px-3 text-xs",children:[s.jsx(Hs,{className:`w-3.5 h-3.5 mr-1 ${m?"animate-spin":""}`}),s.jsx("span",{className:"hidden sm:inline",children:m?"ang ng b...":"ng b ngay"})]}),xb&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Hs,{className:"w-3 h-3 animate-spin"}),s.jsx("span",{className:"hidden md:inline",children:"ang cp nht..."})]}),kv&&!xb&&s.jsxs("span",{className:"text-xs text-muted-foreground hidden lg:inline",children:["Cp nht: ",Bt(kv,"HH:mm:ss")]}),s.jsxs(J,{variant:"outline",size:"sm",className:"h-8 px-3 text-xs hidden md:flex",children:[s.jsx(dT,{className:"w-3.5 h-3.5 mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Excel"})]})]})]}),a?s.jsx("div",{className:"flex items-center justify-center py-8 sm:py-12",children:s.jsx(Hs,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-muted-foreground"})}):n.length===0?s.jsx("div",{className:"text-center py-8 sm:py-12 text-xs sm:text-sm text-muted-foreground px-4",children:"Cha c d liu insights. Vui lng ng b d liu t Facebook."}):Xn.length===0?s.jsxs("div",{className:"text-center py-8 sm:py-12 px-4",children:[s.jsxs("div",{className:"text-sm text-muted-foreground mb-4",children:["Khng c d liu ",an==="campaign"?"chin dch":an==="adset"?"nhm qung co":"qung co"," ph hp vi b lc hin ti."]}),an!=="campaign"&&s.jsxs("div",{className:"text-xs text-muted-foreground mb-4",children:[" Lu : Nu bn mi ng b d liu gn y, hy n ",s.jsx("strong",{className:"text-primary",children:"ng b"})," li  ti y  d liu  tt c cc cp ."]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Hy th:",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"iu chnh khong thi gian"}),s.jsx("li",{children:"Thay i b lc trng thi"}),zo.length>1&&s.jsx("li",{children:"Quay li cp trc"}),s.jsx("li",{children:'n nt "ng b"  ti d liu mi'})]})]})]}):s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(As,{className:"h-[600px]",children:[s.jsxs("table",{className:"min-w-[1000px] md:min-w-[1200px] table-fixed w-full caption-bottom text-sm",children:[s.jsx(Af,{className:"sticky top-0 z-20 shadow-sm bg-gray-200 dark:bg-gray-800",children:s.jsxs(Ma,{className:"bg-gray-200 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-800",children:[s.jsxs(Rn,{className:"sticky top-0 left-0 z-30 px-2 sm:px-4 text-xs sm:text-sm border-r bg-gray-200 dark:bg-gray-800 font-bold text-foreground",style:{width:Hn.labels||200,minWidth:"150px"},children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{children:"Nhn dn"})}),s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-primary z-10",style:{backgroundColor:ds==="labels"?"hsl(var(--primary))":"transparent"},onMouseDown:I=>gh(I,"labels"),onClick:I=>I.stopPropagation()})]}),s.jsx(Rn,{className:"sticky top-0 z-30 w-12 px-2 sm:px-4 border-r bg-gray-200 dark:bg-gray-800",style:{left:`${Hn.labels||200}px`},children:s.jsx(Xs,{checked:Cr.size===Xn.length&&Xn.length>0,onCheckedChange:fk})}),s.jsx(Rn,{className:"sticky top-0 z-30 w-24 px-2 sm:px-4 text-xs sm:text-sm border-r bg-gray-200 dark:bg-gray-800 font-bold text-foreground",style:{left:`${(Hn.labels||200)+48}px`},children:"Trng thi"}),la.filter(I=>I.field!=="labels").map(I=>{const q=I.field==="effective_status"||I.field==="labels"?120:150,Q=I.field==="effective_status";return s.jsxs(Rn,{className:`sticky top-0 whitespace-nowrap hover:bg-black/5 transition-colors text-xs sm:text-sm px-2 sm:px-4 py-2 sm:py-3 select-none border-r font-bold text-foreground ${Yr===I.field?"opacity-50":""} ${Q?"z-30 bg-gray-200 dark:bg-gray-800":"z-20 bg-gray-200 dark:bg-gray-800"}`,style:Q?{width:Hn[I.field]||q,minWidth:"80px",userSelect:"none",left:`${(Hn.labels||200)+144}px`}:{width:Hn[I.field]||q,minWidth:"80px",userSelect:"none"},children:[s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 cursor-move",draggable:!0,onDragStart:he=>vk(he,I.field),onDragOver:yk,onDrop:he=>Cu(he,I.field),onDragEnd:de,onClick:()=>jk(I.field),children:[s.jsx("span",{className:"text-xs sm:text-sm",children:I.label}),X===I.field?D==="asc"?s.jsx(uT,{className:"w-3 h-3 sm:w-4 sm:h-4"}):s.jsx(o4,{className:"w-3 h-3 sm:w-4 sm:h-4"}):s.jsx(l4,{className:"w-3 h-3 sm:w-4 sm:h-4 opacity-30"})]}),s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-primary z-10",style:{backgroundColor:ds===I.field?"hsl(var(--primary))":"transparent"},onMouseDown:he=>gh(he,I.field),onClick:he=>he.stopPropagation()})]},I.field)})]})}),s.jsxs(Ef,{children:[Xn.map((I,q)=>{const Q=ph(I)||`fallback-${q}`,he=Q?Cr.has(Q):!1,be=I.effective_status,fe=an==="ad"?I.ad_id:an==="adset"?I.adset_id:I.campaign_id,Ee=fe&&ts[fe]!==void 0?ts[fe]:be==="ACTIVE",$e=be==="DELETED",ot=Ar.account_status===2||Ar.account_status===3,pe=ot||["DELETED","ARCHIVED","WITH_ISSUES","IN_PROCESS","PENDING_BILLING_INFO","PENDING_REVIEW","DISAPPROVED"].includes(be),le=()=>Ar.account_status===3?" Ti khon n cha thanh ton. Vui lng thanh ton  tip tc s dng.":Ar.account_status===2?" Ti khon b v hiu ha. Vui lng kim tra Facebook Ads Manager.":be==="WITH_ISSUES"?" Chin dch c vn  (c th do li thanh ton). Vui lng kim tra Facebook Ads Manager.":be==="PENDING_BILLING_INFO"?" Thiu thng tin thanh ton. Vui lng cp nht phng thc thanh ton trong Facebook Ads Manager.":be==="PENDING_REVIEW"?" Qung co ang ch duyt. Khng th bt/tt trong lc ny.":be==="DISAPPROVED"?" Qung co b t chi. Vui lng chnh sa v gi li  duyt.":be==="DELETED"?" Chin dch  b xa":be==="ARCHIVED"?" Chin dch  c lu tr":be==="IN_PROCESS"?" Chin dch ang c x l":"",_e=nt=>n.filter(ct=>ct.ad_id===nt&&ct.level==="ad"&&(Ye!=null&&Ye.from&&(Ye!=null&&Ye.to)?cy(Om(ct.date_start),{start:No(Ye.from),end:Bh(Ye.to)}):!0)).sort((ct,Ge)=>new Date(Ge.date_start).getTime()-new Date(ct.date_start).getTime()),Ie=nt=>{nk(ct=>{const Ge=new Set(ct);return Ge.has(nt)?Ge.delete(nt):Ge.add(nt),Ge})},Je=an==="ad"&&I.ad_id&&Cv.has(I.ad_id),He=Je?_e(I.ad_id):[];return s.jsxs(s.Fragment,{children:[s.jsxs(Ma,{className:`border-b ${$e?"bg-muted/30":""}`,children:[s.jsx(Qt,{className:"sticky left-0 z-10 bg-background px-2 sm:px-4 border-r",style:{width:Hn.labels||200,maxWidth:Hn.labels||200,minWidth:"150px"},children:s.jsxs("div",{className:"flex items-center gap-2",children:[an==="ad"&&I.ad_id&&s.jsx("button",{onClick:nt=>{nt.stopPropagation(),Ie(I.ad_id)},className:"text-muted-foreground hover:text-foreground transition-colors",children:Cv.has(I.ad_id)?s.jsx(eu,{className:"w-4 h-4"}):s.jsx(Y2,{className:"w-4 h-4"})}),ns("labels",I.labels,I,Ar)]})}),s.jsx(Qt,{className:"sticky z-10 bg-background px-2 sm:px-4 border-r",style:{left:`${Hn.labels||200}px`},children:s.jsx(Xs,{checked:he,onCheckedChange:nt=>ku(Q,nt),disabled:$e})}),s.jsx(Qt,{className:"sticky z-10 bg-background px-2 sm:px-4 border-r",style:{left:`${(Hn.labels||200)+48}px`},title:pe?le():"",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ki,{checked:Ee,onCheckedChange:()=>{gk(I,Ee)},disabled:pe,className:ot?"opacity-40":""}),s.jsx("span",{className:`text-xs font-medium ${Ee?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:Ee?" Bt":" Tt"})]})}),la.filter(nt=>nt.field!=="labels").map((nt,ct)=>{const Ge=ns(nt.field,I[nt.field],I,Ar),In=nt.field==="effective_status"||nt.field==="labels"?120:140,br=Hn[nt.field]||In,Ae=!$e&&(an==="campaign"&&nt.field==="campaign_name"&&I.campaign_id||an==="adset"&&nt.field==="adset_name"&&I.adset_id||an==="ad"&&nt.field==="adset_name"&&I.adset_id),gt=nt.field==="effective_status";return s.jsx(Qt,{className:`whitespace-nowrap overflow-hidden text-ellipsis text-xs sm:text-sm px-2 sm:px-4 py-2 sm:py-3 border-r ${gt?"sticky z-10 bg-background":""}`,style:gt?{width:br,maxWidth:br,minWidth:"80px",left:`${(Hn.labels||200)+144}px`}:{width:br,maxWidth:br,minWidth:"80px"},children:Ae?s.jsx("button",{onClick:()=>{an==="campaign"&&I.campaign_id?dm("adset",I.campaign_id,I.campaign_name):an==="adset"&&I.adset_id?dm("ad",I.adset_id,I.adset_name):an==="ad"&&nt.field==="adset_name"&&I.adset_id&&(dm("adset",I.campaign_id,I.campaign_name),setTimeout(()=>{dm("ad",I.adset_id,I.adset_name)},100))},className:"text-blue-600 hover:text-blue-800 hover:underline font-medium text-left",children:Ge}):$e&&(nt.field==="campaign_name"||nt.field==="adset_name"||nt.field==="ad_name")?s.jsx("span",{className:"text-muted-foreground",children:Ge}):Ge},nt.field)})]},Q),Je&&He.length>0&&He.map((nt,ct)=>s.jsxs(Ma,{className:"bg-muted/20",children:[s.jsx(Qt,{className:"sticky left-0 z-10 bg-muted/20 px-2 sm:px-4 border-r pl-8",style:{width:Hn.labels||200,maxWidth:Hn.labels||200,minWidth:"150px"},children:s.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",Bt(Om(nt.date_start),"dd/MM/yyyy")]})}),s.jsx(Qt,{className:"sticky z-10 bg-muted/20 px-2 sm:px-4 border-r",style:{left:`${Hn.labels||200}px`}}),s.jsx(Qt,{className:"sticky z-10 bg-muted/20 px-2 sm:px-4 border-r",style:{left:`${(Hn.labels||200)+48}px`}}),la.filter(Ge=>Ge.field!=="labels").map(Ge=>{const In=ns(Ge.field,nt[Ge.field],nt,Ar),br=Ge.field==="effective_status"||Ge.field==="labels"?120:140,Ae=Hn[Ge.field]||br,gt=Ge.field==="effective_status";return s.jsx(Qt,{className:`whitespace-nowrap overflow-hidden text-ellipsis text-xs px-2 sm:px-4 py-2 border-r ${gt?"sticky z-10 bg-muted/20":""}`,style:gt?{width:Ae,maxWidth:Ae,minWidth:"80px",left:`${(Hn.labels||200)+48+48}px`}:{width:Ae,maxWidth:Ae,minWidth:"80px"},children:In},Ge.field)})]},`daily-${I.ad_id}-${nt.date_start}-${ct}`)),Je&&He.length===0&&s.jsx(Ma,{className:"bg-muted/20",children:s.jsx(Qt,{colSpan:la.length+2,className:"text-center text-xs text-muted-foreground py-4 pl-8",children:"Cha c d liu theo ngy"})})]})}),Xn.length>0&&s.jsxs(Ma,{className:"bg-muted/50 font-semibold border-t-2",children:[s.jsx(Qt,{className:"sticky left-0 z-10 bg-muted/50 px-2 sm:px-4 border-r",style:{width:Hn.labels||200,minWidth:"150px"}}),s.jsx(Qt,{className:"sticky z-10 bg-muted/50 px-2 sm:px-4 border-r",style:{left:`${Hn.labels||200}px`}}),s.jsx(Qt,{className:"sticky z-10 bg-muted/50 px-2 sm:px-4 border-r",style:{left:`${(Hn.labels||200)+48}px`}}),la.filter(I=>I.field!=="labels").map((I,q)=>{const Q=I.field==="effective_status"||I.field==="labels"?120:140,he=Hn[I.field]||Q,be=I.field==="effective_status";let fe="";const $e={campaign:"campaign_name",adset:"adset_name",ad:"ad_name"}[an];if(I.field===$e){const ot=an==="campaign"?"chin dch":an==="adset"?"nhm qung co":"qung co";fe=`Kt qu t ${Xn.length} ${ot}`}else if(["impressions","clicks","spend","reach","results","results_messaging_replied_7d","budget","weekly_budget","monthly_budget","quarterly_budget","yearly_budget","phones"].includes(I.field)){const we=Xn.reduce((pe,le)=>pe+(Number(le[I.field])||0),0);fe=ns(I.field,we,{})}else if(["cpc","cpm","ctr","cost_per_result","frequency"].includes(I.field)){const we=Xn.reduce((Je,He)=>Je+(Number(He.spend)||0),0),pe=Xn.reduce((Je,He)=>Je+(Number(He.impressions)||0),0),le=Xn.reduce((Je,He)=>Je+(Number(He.clicks)||0),0),_e=Xn.reduce((Je,He)=>Je+(Number(He.results)||0),0),Ie=Xn.reduce((Je,He)=>Je+(Number(He.reach)||0),0);I.field==="cpc"&&le>0?fe=ns("cpc",we/le,{}):I.field==="cpm"&&pe>0?fe=ns("cpm",we/pe*1e3,{}):I.field==="ctr"&&pe>0?fe=ns("ctr",le/pe*100,{}):I.field==="cost_per_result"&&_e>0?fe=ns("cost_per_result",we/_e,{}):I.field==="frequency"&&Ie>0?fe=ns("frequency",pe/Ie,{}):fe=""}else fe="";return s.jsx(Qt,{className:`whitespace-nowrap overflow-hidden text-ellipsis text-xs sm:text-sm px-2 sm:px-4 py-2 sm:py-3 border-r ${be?"sticky z-10 bg-muted/50":""}`,style:be?{width:he,maxWidth:he,minWidth:"80px",left:`${(Hn.labels||200)+128}px`}:{width:he,maxWidth:he,minWidth:"80px"},children:fe},`${I.field}-${q}`)})]})]})]}),s.jsx(wj,{orientation:"horizontal"})]})})]})]}),s.jsxs(Oe,{className:"mt-4",children:[s.jsx(Fe,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs(Be,{className:"text-base sm:text-lg flex items-center gap-2",children:[" Lch s qung co",b&&s.jsx(Hs,{className:"w-4 h-4 animate-spin"})]}),s.jsxs(sn,{className:"text-xs sm:text-sm mt-1",children:["D liu t hm qua tr v qu kh (ch xem - ",v.length," insights)"]})]}),C.length>0&&s.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:C.map((I,q)=>s.jsxs("div",{className:"flex items-center gap-2",children:[q>0&&s.jsx("span",{children:"/"}),s.jsx("button",{onClick:()=>{A(C.slice(0,q+1)),O(new Set)},className:"hover:text-foreground hover:underline",children:I.name})]},q))}),s.jsx(ng,{value:((Rl=C[C.length-1])==null?void 0:Rl.level)||"campaign",onValueChange:I=>{O(new Set),A(I==="campaign"?[{level:"campaign",parentId:null,name:"Tt c chin dch"}]:[{level:I,parentId:"EMPTY",name:I==="adset"?"Chn chin dch  xem nhm QC":"Chn chin dch  xem qung co"}])},children:s.jsxs(rg,{className:"grid w-full max-w-md grid-cols-3 h-9",children:[s.jsx(gi,{value:"campaign",className:"text-xs py-1",children:"Chin dch"}),s.jsx(gi,{value:"adset",className:"text-xs py-1",children:"Nhm qung co"}),s.jsx(gi,{value:"ad",className:"text-xs py-1",children:"Qung co"})]})}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(aP,{value:tt,onChange:Dn}),s.jsxs("div",{className:"flex gap-2",children:[er.length>0&&s.jsxs(kn,{value:Ab,onValueChange:Qn,children:[s.jsx(wn,{className:"w-[200px] h-8 text-xs",children:s.jsx(Cn,{placeholder:"Chn nh dng..."})}),s.jsx(_n,{children:er.map(I=>s.jsx(st,{value:I.name,className:"text-xs",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("span",{children:I.name}),s.jsx(J,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-destructive hover:text-destructive-foreground ml-2",onClick:q=>{q.stopPropagation(),wk(I.name)},children:s.jsx(Cs,{className:"h-3 w-3"})})]})},I.name))})]}),s.jsx(J,{variant:"outline",size:"sm",onClick:()=>im(!0),className:"h-8 px-3 text-xs",children:"Lu nh dng"})]}),s.jsxs(J,{variant:"outline",size:"sm",onClick:()=>om(!0),className:"h-8 px-3 text-xs",children:[s.jsx(wd,{className:"w-3.5 h-3.5 mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Ct"})]}),s.jsxs(J,{variant:"outline",size:"sm",onClick:Ob,disabled:j||!(tt!=null&&tt.from)||!(tt!=null&&tt.to),className:"h-8 px-3 text-xs",children:[s.jsx(Hs,{className:`w-3.5 h-3.5 mr-1 ${j?"animate-spin":""}`}),s.jsx("span",{className:"hidden sm:inline",children:"ng b"})]}),s.jsxs(J,{variant:"outline",size:"sm",onClick:cm,disabled:b,className:"h-8 px-3 text-xs",children:[s.jsx(Hs,{className:`w-3.5 h-3.5 mr-1 ${b?"animate-spin":""}`}),s.jsx("span",{className:"hidden sm:inline",children:"Lm mi"})]})]})]})}),s.jsx(Re,{children:N?s.jsxs(Ka,{variant:"destructive",children:[s.jsx(xl,{children:"Li"}),s.jsx(Ga,{children:N})]}):v.length===0?s.jsx("div",{className:"text-center py-8 sm:py-12 text-xs sm:text-sm text-muted-foreground px-4",children:"Cha c d liu lch s trong khong thi gian ny"}):(()=>{const I=C[C.length-1],q=I.level;let Q=[...v];if(Q.reduce((we,pe)=>(we[pe.level||"unknown"]=(we[pe.level||"unknown"]||0)+1,we),{}),q==="campaign"){const we=Q.filter(_e=>_e.level==="campaign"),pe=new Map,le=new Set;we.forEach(_e=>{if(!_e.campaign_id)return;const Ie=`${_e.campaign_id}-${_e.date}`;if(le.has(Ie))return;le.add(Ie);const Je=_e.campaign_id;pe.has(Je)||pe.set(Je,{..._e,level:"campaign",impressions:0,clicks:0,spend:0,reach:0,results:0,results_messaging_replied_7d:0});const He=pe.get(Je);He.impressions+=_e.impressions||0,He.clicks+=_e.clicks||0,He.spend+=_e.spend||0,He.reach=Math.max(He.reach,_e.reach||0),He.results+=_e.results||0,He.results_messaging_replied_7d+=_e.results_messaging_replied_7d||0}),Q=Array.from(pe.values())}else if(q==="adset")if(I.parentId==="EMPTY")Q=[];else if(I.parentId){const we=Q.filter(_e=>_e.level==="adset"&&_e.campaign_id===I.parentId&&_e.adset_id),pe=new Map,le=new Set;we.forEach(_e=>{const Ie=`${_e.adset_id}-${_e.date}`;if(le.has(Ie))return;le.add(Ie);const Je=_e.adset_id;pe.has(Je)||pe.set(Je,{..._e,level:"adset",impressions:0,clicks:0,spend:0,reach:0,results:0,results_messaging_replied_7d:0});const He=pe.get(Je);He.impressions+=_e.impressions||0,He.clicks+=_e.clicks||0,He.spend+=_e.spend||0,He.reach=Math.max(He.reach,_e.reach||0),He.results+=_e.results||0,He.results_messaging_replied_7d+=_e.results_messaging_replied_7d||0}),Q=Array.from(pe.values())}else Q=[];else if(q==="ad")if(I.parentId==="EMPTY")Q=[];else if(I.parentId){const we=Q.filter(_e=>_e.level==="ad"&&_e.adset_id===I.parentId&&_e.ad_id),pe=new Map,le=new Set;we.forEach(_e=>{const Ie=`${_e.ad_id}-${_e.date}`;if(le.has(Ie))return;le.add(Ie);const Je=_e.ad_id;pe.has(Je)||pe.set(Je,{..._e,level:"ad",impressions:0,clicks:0,spend:0,reach:0,results:0,results_messaging_replied_7d:0});const He=pe.get(Je);He.impressions+=_e.impressions||0,He.clicks+=_e.clicks||0,He.spend+=_e.spend||0,He.reach=Math.max(He.reach,_e.reach||0),He.results+=_e.results||0,He.results_messaging_replied_7d+=_e.results_messaging_replied_7d||0}),Q=Array.from(pe.values())}else Q=[];let he=Q;mn.length>0&&(he=he.filter(we=>{const pe=q==="campaign"?ms.find(_e=>_e.id===we.campaign_id):q==="adset"?ps.find(_e=>_e.id===we.adset_id):q==="ad"?io.find(_e=>_e.id===we.ad_id):null;let le=(pe==null?void 0:pe.effective_status)||(pe==null?void 0:pe.status)||we.effective_status||"UNKNOWN";return pe!=null&&pe.is_deleted&&(le="DELETED"),mn.includes(le)})),T&&L&&he.sort((we,pe)=>{const le=we[T],_e=pe[T],Ie=parseFloat(le),Je=parseFloat(_e);if(!isNaN(Ie)&&!isNaN(Je))return L==="asc"?Ie-Je:Je-Ie;const He=String(le||""),nt=String(_e||"");return L==="asc"?He.localeCompare(nt):nt.localeCompare(He)});const be=he.reduce((we,pe)=>(we.spend+=parseFloat(pe.spend||0),we.results+=parseFloat(pe.results||0),we.results_messaging_replied_7d+=parseFloat(pe.results_messaging_replied_7d||0),we.impressions+=parseFloat(pe.impressions||0),we.clicks+=parseFloat(pe.clicks||0),we.reach=Math.max(we.reach,parseFloat(pe.reach||0)),we),{spend:0,results:0,results_messaging_replied_7d:0,impressions:0,clicks:0,reach:0}),fe=be.results>0?be.spend/be.results:0,Ee=be.impressions>0?be.spend/be.impressions*1e3:0,$e=be.impressions>0?be.clicks/be.impressions*100:0,ot=be.clicks>0?be.spend/be.clicks:0;return he.length===0?s.jsx("div",{className:"text-center py-8 sm:py-12 text-xs sm:text-sm text-muted-foreground px-4",children:I.parentId==="EMPTY"?I.name:"Khng c d liu ph hp vi b lc"}):s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(As,{className:"h-[600px]",children:[s.jsxs("table",{className:"min-w-[1000px] md:min-w-[1200px] table-fixed w-full caption-bottom text-sm",children:[s.jsx(Af,{className:"sticky top-0 z-20 shadow-sm bg-gray-200 dark:bg-gray-800",children:s.jsx(Ma,{className:"bg-gray-200 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-800",children:(()=>{const we=C[C.length-1].level;return Eu.filter(le=>we==="campaign"?le.field!=="adset_name"&&le.field!=="ad_name":we==="adset"?le.field!=="campaign_name"&&le.field!=="ad_name":we==="ad"?le.field!=="campaign_name":!0).filter(le=>le.field!=="labels").map(le=>{const _e=le.field==="effective_status"?120:150,Ie=le.field==="effective_status";return s.jsxs(Rn,{className:`sticky top-0 whitespace-nowrap hover:bg-black/5 transition-colors text-xs sm:text-sm px-2 sm:px-4 py-2 sm:py-3 select-none border-r font-bold text-foreground ${W===le.field?"opacity-50":""} ${Ie?"left-0 z-30 bg-gray-200 dark:bg-gray-800":"z-20 bg-gray-200 dark:bg-gray-800"}`,style:{width:th[le.field]||_e,minWidth:"80px",userSelect:"none"},children:[s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 cursor-move",draggable:!0,onDragStart:Je=>Te(Je,le.field),onDragOver:Se,onDrop:Je=>xt(Je,le.field),onDragEnd:nn,onClick:()=>{T===le.field?(z(L==="asc"?"desc":L==="desc"?null:"asc"),L==="desc"&&$(null)):($(le.field),z("asc"))},children:[s.jsx("span",{className:"text-xs sm:text-sm",children:le.label}),T===le.field?L==="asc"?s.jsx(uT,{className:"w-3 h-3 sm:w-4 sm:h-4"}):s.jsx(o4,{className:"w-3 h-3 sm:w-4 sm:h-4"}):s.jsx(l4,{className:"w-3 h-3 sm:w-4 sm:h-4 opacity-30"})]}),s.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-2 cursor-col-resize hover:bg-primary z-10",style:{backgroundColor:xu===le.field?"hsl(var(--primary))":"transparent"},onMouseDown:Je=>_k(Je,le.field),onClick:Je=>Je.stopPropagation()})]},le.field)})})()})}),s.jsxs(Ef,{children:[he.map((we,pe)=>{const le=ph(we);return s.jsx(Ma,{children:(()=>{const _e=C[C.length-1].level;return Eu.filter(Je=>_e==="campaign"?Je.field!=="adset_name"&&Je.field!=="ad_name":_e==="adset"?Je.field!=="campaign_name"&&Je.field!=="ad_name":_e==="ad"?Je.field!=="campaign_name":!0).filter(Je=>Je.field!=="labels").map((Je,He)=>{const nt=Je.field==="effective_status"?120:150,ct=Hn[Je.field]||nt,Ge=Je.field==="effective_status";let In=we[Je.field];const br={campaign:"campaign_name",adset:"adset_name",ad:"ad_name"},Ae=br[_e];return Je.field===Ae?_e==="campaign"?In=s.jsx("button",{className:"text-primary hover:underline text-left",onClick:()=>{A([...C,{level:"adset",parentId:we.campaign_id,name:we.campaign_name}])},children:we.campaign_name}):_e==="adset"?In=s.jsx("button",{className:"text-primary hover:underline text-left",onClick:()=>{A([...C,{level:"ad",parentId:we.adset_id,name:we.adset_name}])},children:we.adset_name}):In=ns(Je.field,In,we,Ar):In=ns(Je.field,In,we,Ar),Je.field===br[_e]&&_e!=="ad-daily"?s.jsx(Qt,{className:`whitespace-nowrap overflow-hidden text-ellipsis text-xs px-2 sm:px-4 py-2 border-r ${Ge?"sticky left-0 z-10 bg-background":""}`,style:{width:ct,maxWidth:ct,minWidth:"80px"},children:s.jsx("button",{onClick:()=>{_e==="campaign"?A([...C,{level:"adset",parentId:we.campaign_id,name:we.campaign_name||"Unknown Campaign"}]):_e==="adset"?A([...C,{level:"ad",parentId:we.adset_id,name:we.adset_name||"Unknown Adset"}]):_e==="ad"&&A([...C,{level:"ad-daily",parentId:we.ad_id,name:we.ad_name||"Unknown Ad"}])},className:"text-left text-primary hover:underline truncate w-full",children:In||"N/A"})},`${Je.field}-${He}`):s.jsx(Qt,{className:`whitespace-nowrap overflow-hidden text-ellipsis text-xs px-2 sm:px-4 py-2 border-r ${Ge?"sticky left-0 z-10 bg-background":""}`,style:{width:ct,maxWidth:ct,minWidth:"80px"},children:In},`${Je.field}-${He}`)})})()},le||pe)}),s.jsx(Ma,{className:"bg-muted font-semibold border-t-2 border-primary",children:(()=>{const we=C[C.length-1].level;return Eu.filter(le=>we==="campaign"?le.field!=="adset_name"&&le.field!=="ad_name":we==="adset"?le.field!=="campaign_name"&&le.field!=="ad_name":we==="ad"?le.field!=="campaign_name":!0).filter(le=>le.field!=="labels").map((le,_e)=>{const Ie=le.field==="effective_status"?120:150,Je=Hn[le.field]||Ie,He=le.field==="effective_status";let nt="-";const Ge={campaign:"campaign_name",adset:"adset_name",ad:"ad_name","ad-daily":"ad_name"}[we];if(le.field===Ge)nt=`Tng cng (${he.length} ${we==="campaign"?"chin dch":we==="adset"?"nhm qung co":"qung co"})`;else if(le.field==="spend")nt=ns("spend",be.spend,{currency:Ts},Ar);else if(le.field==="results")nt=Math.round(be.results).toLocaleString("vi-VN");else if(le.field==="results_messaging_replied_7d")nt=Math.round(be.results_messaging_replied_7d).toLocaleString("vi-VN");else if(le.field==="impressions")nt=Math.round(be.impressions).toLocaleString("vi-VN");else if(le.field==="clicks")nt=Math.round(be.clicks).toLocaleString("vi-VN");else if(le.field==="cost_per_result")nt=ns("cost_per_result",fe,{currency:Ts},Ar);else if(le.field==="cpm")nt=ns("cpm",Ee,{currency:Ts},Ar);else if(le.field==="ctr")nt=$e.toFixed(2)+"%";else if(le.field==="cpc")nt=ns("cpc",ot,{currency:Ts},Ar);else if(le.field==="effective_status"){const In=he.filter(Ae=>Ae.effective_status==="ACTIVE").length,br=he.filter(Ae=>Ae.effective_status==="PAUSED").length;nt=`${In} active, ${br} paused`}return s.jsx(Qt,{className:`whitespace-nowrap overflow-hidden text-ellipsis text-xs px-2 sm:px-4 py-2 border-r ${He?"sticky left-0 z-10 bg-muted":""}`,style:{width:Je,maxWidth:Je,minWidth:"80px"},children:nt},`summary-${le.field}-${_e}`)})})()})]})]}),s.jsx(wj,{orientation:"horizontal"})]})})})()})]}),s.jsx(SA,{open:F,onOpenChange:K,selectedMetrics:Wt,onMetricsChange:Wn}),s.jsx(SA,{open:On,onOpenChange:ri,selectedMetrics:fs,onMetricsChange:ao}),s.jsx(SA,{open:Pl,onOpenChange:dh,selectedMetrics:sh,onMetricsChange:I=>oo({selectedMarketingMetrics:I})}),s.jsx(KF,{open:G,onOpenChange:U,selectedFields:ba,onFieldsChange:I=>oo({selectedFields:I})}),s.jsx(KF,{open:Dv,onOpenChange:om,selectedFields:fh,onFieldsChange:Mv}),s.jsx(yr,{open:ok,onOpenChange:Pv,children:s.jsxs(dr,{children:[s.jsx(hr,{children:s.jsx(fr,{children:"Lu nh dng Cp Tng thng tin"})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"summary-layout-name",children:"Tn nh dng"}),s.jsx(Ke,{id:"summary-layout-name",value:am,onChange:I=>wb(I.target.value),placeholder:"Nhp tn nh dng..."})]})}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>Pv(!1),children:"Hy"}),s.jsx(J,{onClick:xk,children:"Lu"})]})]})}),s.jsx(yr,{open:Ea,onOpenChange:ih,children:s.jsxs(dr,{children:[s.jsx(hr,{children:s.jsx(fr,{children:"Lu nh dng Cp Sale"})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"sale-layout-name",children:"Tn nh dng"}),s.jsx(Ke,{id:"sale-layout-name",value:lo,onChange:I=>Ov(I.target.value),placeholder:"Nhp tn nh dng..."})]})}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>ih(!1),children:"Hy"}),s.jsx(J,{onClick:si,children:"Lu"})]})]})}),s.jsx(yr,{open:ak,onOpenChange:Tv,children:s.jsxs(dr,{children:[s.jsx(hr,{children:s.jsx(fr,{children:"Lu nh dng Bo co tng quan"})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"marketing-layout-name",children:"Tn nh dng"}),s.jsx(Ke,{id:"marketing-layout-name",value:rm,onChange:I=>bb(I.target.value),placeholder:"Nhp tn nh dng..."})]})}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>Tv(!1),children:"Hy"}),s.jsx(J,{onClick:hm,children:"Lu"})]})]})}),s.jsx(yr,{open:jb,onOpenChange:oh,children:s.jsxs(dr,{children:[s.jsx(hr,{children:s.jsx(fr,{children:"Lu nh dng Cp chi tit qung co"})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"detail-layout-name",children:"Tn nh dng"}),s.jsx(Ke,{id:"detail-layout-name",value:lh,onChange:I=>Iv(I.target.value),placeholder:"Nhp tn nh dng..."})]})}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>oh(!1),children:"Hy"}),s.jsx(J,{onClick:Au,children:"Lu"})]})]})}),s.jsx(yr,{open:Rv,onOpenChange:im,children:s.jsxs(dr,{children:[s.jsx(hr,{children:s.jsx(fr,{children:"Lu nh dng Lch s qung co"})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"historical-layout-name",children:"Tn nh dng"}),s.jsx(Ke,{id:"historical-layout-name",value:ju,onChange:I=>Cb(I.target.value),placeholder:"Nhp tn nh dng..."})]})}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>im(!1),children:"Hy"}),s.jsx(J,{onClick:mm,children:"Lu"})]})]})}),s.jsx(M9e,{open:Su,onOpenChange:Tb,labels:Ol,selectedCampaigns:Array.from(Cr).map(I=>{const q=Xn.find(Q=>ph(Q)===I);return{id:I,name:(q==null?void 0:q.campaign_name)||(q==null?void 0:q.adset_name)||(q==null?void 0:q.ad_name)||I,labels:(q==null?void 0:q.labels)||[]}}),onAssignLabels:Ci}),s.jsx(oKe,{open:ee,onOpenChange:$b,onSave:ck,rule:Z,availableLabels:Ol.map(I=>({Id:I.Id||0,label_name:I.label_name,label_color:I.label_color})),onLabelsChange:Os,userId:e==null?void 0:e.id}),s.jsx(cKe,{open:ae,onOpenChange:Ue,rule:Ve,labels:Ol.map(I=>({Id:I.Id||0,label_name:I.label_name,label_color:I.label_color})),onAssignLabels:um}),s.jsx(lKe,{open:Rt,onOpenChange:mt,labels:Ol.map(I=>({Id:I.Id||0,label_name:I.label_name,label_color:I.label_color,user_id:I.user_id})),onLabelsChange:Os})]})},OZ=async e=>{try{const t=encodeURIComponent(`(user_id,eq,${e})`),n=`${ht(It.TABLES.SALES_REPORTS)}?where=${t}&limit=1000&sort=-CreatedAt`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return(await r.json()).list||[]}catch(t){throw console.error("Error fetching sales reports from NocoDB:",t),t}},xKe=async e=>{try{const t=ht(It.TABLES.SALES_REPORTS),n=await fetch(t,{method:"POST",headers:lt(),body:JSON.stringify(e)});if(!n.ok){const r=await n.text();throw console.error(` NocoDB Error (${n.status}):`,r),console.error("Payload sent:",JSON.stringify(e,null,2)),new Error(`NocoDB API error: ${n.status} ${n.statusText} - ${r}`)}return await n.json()}catch(t){throw console.error("Error creating sales report:",t),t}},bKe=async(e,t)=>{try{const n=ht(It.TABLES.SALES_REPORTS,String(e)),r=await fetch(n,{method:"PATCH",headers:lt(),body:JSON.stringify(t)});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return await r.json()}catch(n){throw console.error("Error updating sales report:",n),n}},wKe=async e=>{try{const t=ht(It.TABLES.SALES_REPORTS,String(e)),n=await fetch(t,{method:"DELETE",headers:lt()});if(!n.ok)throw new Error(`NocoDB API error: ${n.status} ${n.statusText}`)}catch(t){throw console.error("Error deleting sales report:",t),t}},_Ke=()=>{const{user:e}=Mn(),[t,n]=g.useState([]),[r,a]=g.useState([]),[i,o]=g.useState(""),[l,c]=g.useState(!1),[u,d]=g.useState(null),[h,m]=g.useState([]),[p,v]=g.useState(null),[x,b]=g.useState(!1),[_,j]=g.useState({phone_number:"",appointment_status:"scheduled",appointment_time:"",call_answered:!1,call_missed:!1,appointment_cancelled:!1,service_name:"",service_revenue:0,total_revenue:0,notes:"",campaign_name:"",campaign_results:0}),w=r.length,N=new Set(r.map(B=>B.phone_number)).size,k=r.reduce((B,G)=>B+G.total_revenue,0),C=r.filter(B=>B.call_answered).length,A=w>0?(C/w*100).toFixed(2):"0.00";g.useEffect(()=>{e!=null&&e.id&&(P(),O())},[e==null?void 0:e.id]),g.useEffect(()=>{i.trim()?a(t.filter(B=>B.phone_number.includes(i))):a(t)},[i,t]);const P=async()=>{try{if(!(e!=null&&e.id)){ne.error("Vui lng ng nhp");return}const B=await OZ(e.id);n(B||[])}catch(B){console.error("Error fetching sales data:",B),ne.error("Khng th ti d liu bo co sale")}},O=async()=>{try{if(!(e!=null&&e.id)){ne.error("Vui lng ng nhp");return}const G=(await Vr(e.id)).find(D=>D.is_active===1||D.is_active===!0);if(!G){console.warn("SalesReport: No active ad account found for user:",e.id);return}console.log("SalesReport: Using account:",G.account_id,G.account_name);const U=new Date().toISOString().split("T")[0],F=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0];console.log("SalesReport: Fetching insights...",{userId:e.id,accountId:G.account_id,startDate:F,endDate:U});const K=await KS(e.id,F,U,G.account_id);console.log("SalesReport: Raw insights fetched:",K==null?void 0:K.length);const X=new Map;K==null||K.forEach(D=>{if(D.campaign_id&&D.campaign_name){const Y=X.get(D.campaign_id),ue=D.effective_status||D.configured_status||D.status||"UNKNOWN";Y?(Y.results+=D.results||0,ue!=="UNKNOWN"&&(Y.status=ue)):X.set(D.campaign_id,{campaign_id:D.campaign_id,campaign_name:D.campaign_name,results:D.results||0,status:ue})}});const se=Array.from(X.values());console.log("SalesReport: Final campaigns list:",se),m(se)}catch(B){console.error("Error fetching campaigns:",B),ne.error("Khng th ti danh sch chin dch")}},T=async()=>{try{if(!(e!=null&&e.id)){ne.error("Vui lng ng nhp");return}const B={..._,campaign_id:x?p==null?void 0:p.campaign_id:null,campaign_name:x?_.campaign_name:null,campaign_results:x?_.campaign_results:0,appointment_time:_.appointment_time?new Date(_.appointment_time).toISOString():null,report_date:_.appointment_time?_.appointment_time.split("T")[0]:null,user_id:e.id};u?(await bKe(u.Id,B),ne.success("Cp nht bo co thnh cng")):(await xKe(B),ne.success("Thm bo co mi thnh cng")),c(!1),z(),P()}catch(B){console.error("Error saving sales record:",B),ne.error("Khng th lu bo co")}},$=async B=>{if(confirm("Bn c chc mun xa bo co ny?"))try{await wKe(B),ne.success("Xa bo co thnh cng"),P()}catch(G){console.error("Error deleting record:",G),ne.error("Khng th xa bo co")}},L=B=>{if(d(B),j({phone_number:B.phone_number,appointment_status:B.appointment_status||"scheduled",appointment_time:B.appointment_time||"",call_answered:B.call_answered,call_missed:B.call_missed,appointment_cancelled:B.appointment_cancelled,service_name:B.service_name||"",service_revenue:B.service_revenue,total_revenue:B.total_revenue,notes:B.notes||"",campaign_name:B.campaign_name||"",campaign_results:B.campaign_results||0}),B.campaign_name){const G=h.find(U=>U.campaign_name===B.campaign_name);v(G||null),b(!0)}else b(!1);c(!0)},z=()=>{d(null),v(null),b(!1),j({phone_number:"",appointment_status:"scheduled",appointment_time:"",call_answered:!1,call_missed:!1,appointment_cancelled:!1,service_name:"",service_revenue:0,total_revenue:0,notes:"",campaign_name:"",campaign_results:0})},W=B=>{const G=h.find(U=>U.campaign_id===B);G&&(v(G),j({..._,campaign_name:G.campaign_name,campaign_results:G.results}))};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Bo co Sale"}),s.jsxs(yr,{open:l,onOpenChange:B=>{c(B),B||z()},children:[s.jsx(UI,{asChild:!0,children:s.jsxs(J,{children:[s.jsx(nu,{className:"w-4 h-4 mr-2"}),"Thm bo co mi"]})}),s.jsxs(dr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(hr,{children:s.jsx(fr,{children:u?"Chnh sa bo co":"Thm bo co mi"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"link_campaign",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary",checked:x,onChange:B=>{b(B.target.checked),B.target.checked||(v(null),j(G=>({...G,campaign_name:"",campaign_results:0})))}}),s.jsx(ge,{htmlFor:"link_campaign",children:"Lin kt vi chin dch qung co"})]}),x&&s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"campaign",children:"Chin dch qung co"}),s.jsxs(kn,{value:(p==null?void 0:p.campaign_id)||"",onValueChange:W,children:[s.jsx(wn,{children:s.jsx(Cn,{placeholder:"Chn chin dch..."})}),s.jsx(_n,{children:h.filter(B=>["ACTIVE","PAUSED"].includes(B.status)).map(B=>s.jsxs(st,{value:B.campaign_id,children:[B.campaign_name," (",B.status==="ACTIVE"?"ang chy":"Tm dng",") - ",B.results," kt qu"]},B.campaign_id))})]}),p&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Kt qu: ",p.results]})]})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"phone_number",children:"S in thoi *"}),s.jsx(Ke,{id:"phone_number",value:_.phone_number,onChange:B=>j({..._,phone_number:B.target.value}),placeholder:"0912345678"})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"appointment_status",children:"Trng thi lch hn"}),s.jsxs(kn,{value:_.appointment_status,onValueChange:B=>j({..._,appointment_status:B}),children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"scheduled",children:" t lch"}),s.jsx(st,{value:"completed",children:"Hon thnh"}),s.jsx(st,{value:"cancelled",children:" hy"})]})]})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"appointment_time",children:"Thi gian hn"}),s.jsx(Ke,{id:"appointment_time",type:"datetime-local",value:_.appointment_time,onChange:B=>j({..._,appointment_time:B.target.value})})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:_.call_answered,onChange:B=>j({..._,call_answered:B.target.checked})})," tr li"]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:_.call_missed,onChange:B=>j({..._,call_missed:B.target.checked})}),"Khng tr li"]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:_.appointment_cancelled,onChange:B=>j({..._,appointment_cancelled:B.target.checked})}),"Hy lch"]})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"service_name",children:"Dch v"}),s.jsx(Ke,{id:"service_name",value:_.service_name,onChange:B=>j({..._,service_name:B.target.value}),placeholder:"Tn dch v"})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"service_revenue",children:"Doanh thu dch v (VND)"}),s.jsx(Ke,{id:"service_revenue",type:"number",value:_.service_revenue,onChange:B=>j({..._,service_revenue:Number(B.target.value)})})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"total_revenue",children:"Doanh thu tng (VND)"}),s.jsx(Ke,{id:"total_revenue",type:"number",value:_.total_revenue,onChange:B=>j({..._,total_revenue:Number(B.target.value)})})]}),s.jsxs("div",{children:[s.jsx(ge,{htmlFor:"notes",children:"Ghi ch"}),s.jsx(Oo,{id:"notes",value:_.notes,onChange:B=>j({..._,notes:B.target.value}),placeholder:"Ghi ch thm...",rows:3})]}),s.jsx(J,{onClick:T,className:"w-full",children:u?"Cp nht":"Thm mi"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"S T LCH"}),s.jsx(Ed,{className:"h-4 w-4 text-primary"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-primary",children:w})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"S KHCH HNG"}),s.jsx(Q2,{className:"h-4 w-4 text-primary"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-primary",children:N})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"DOANH THU"}),s.jsx(hl,{className:"h-4 w-4 text-primary"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-primary",children:na(k,"VND")})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"T L CHUYN I"}),s.jsx(To,{className:"h-4 w-4 text-primary"})]}),s.jsx(Re,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[A,"%"]})})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(Ke,{placeholder:"Tm kim theo s in thoi...",value:i,onChange:B=>o(B.target.value),className:"max-w-sm"})}),s.jsx(Oe,{children:s.jsx(Re,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(sb,{children:[s.jsx(Af,{children:s.jsxs(Ma,{children:[s.jsx(Rn,{children:"Chin dch"}),s.jsx(Rn,{children:"Kt qu"}),s.jsx(Rn,{children:"S in thoi"}),s.jsx(Rn,{children:"Lch hn"}),s.jsx(Rn,{children:"Thi gian hn"}),s.jsx(Rn,{children:"Tr li"}),s.jsx(Rn,{children:"Khng tr li"}),s.jsx(Rn,{children:"Hy lch"}),s.jsx(Rn,{children:"Dch v"}),s.jsx(Rn,{children:"Doanh thu DV"}),s.jsx(Rn,{children:"Doanh thu tng"}),s.jsx(Rn,{className:"text-right",children:"Thao tc"})]})}),s.jsx(Ef,{children:r.length===0?s.jsx(Ma,{children:s.jsx(Qt,{colSpan:12,className:"text-center text-muted-foreground",children:"Cha c d liu bo co sale"})}):r.map(B=>s.jsxs(Ma,{children:[s.jsx(Qt,{className:"font-medium",children:B.campaign_name||"-"}),s.jsx(Qt,{className:"text-primary font-semibold",children:B.campaign_results||0}),s.jsx(Qt,{className:"font-medium",children:B.phone_number}),s.jsx(Qt,{children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${B.appointment_status==="completed"?"bg-green-100 text-green-800":B.appointment_status==="cancelled"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:B.appointment_status==="completed"?"Hon thnh":B.appointment_status==="cancelled"?" hy":" t"})}),s.jsx(Qt,{children:B.appointment_time?new Date(B.appointment_time).toLocaleString("vi-VN"):"-"}),s.jsx(Qt,{children:B.call_answered?"":"-"}),s.jsx(Qt,{children:B.call_missed?"":"-"}),s.jsx(Qt,{children:B.appointment_cancelled?"":"-"}),s.jsx(Qt,{children:B.service_name||"-"}),s.jsx(Qt,{children:na(B.service_revenue,"VND")}),s.jsx(Qt,{className:"font-semibold",children:na(B.total_revenue,"VND")}),s.jsx(Qt,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>L(B),children:s.jsx(Mce,{className:"w-4 h-4"})}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>$(B.Id),children:s.jsx(ks,{className:"w-4 h-4 text-destructive"})})]})})]},B.id))})]})})})})]})},jKe=()=>{const{user:e}=Mn(),[t,n]=g.useState([]),[r,a]=g.useState([]),[i,o]=g.useState(null),[l,c]=g.useState({from:Qa(new Date),to:_f(new Date)});g.useEffect(()=>{u()},[l]);const u=async()=>{console.log("SummaryReport: fetchData started");try{if(!(e!=null&&e.id)){console.log("SummaryReport: No user ID"),ne.error("Vui lng ng nhp");return}console.log("SummaryReport: Fetching ad accounts...");const U=await Vr(e.id);console.log("SummaryReport: Ad accounts fetched:",U);const F=U.find(X=>X.is_active);if(!F){console.log("SummaryReport: No active ad account found"),ne.error("Khng tm thy ti khon qung co ang hot ng");return}console.log("SummaryReport: Active account:",F),o(F.account_id),console.log("SummaryReport: Fetching sales reports...");const K=await OZ(e.id);if(console.log("SummaryReport: Sales reports fetched:",K==null?void 0:K.length),n(K||[]),l!=null&&l.from&&(l!=null&&l.to)){const X=Bt(l.from,"yyyy-MM-dd"),se=Bt(l.to,"yyyy-MM-dd");console.log("SummaryReport: Fetching insights...",{startDate:X,endDate:se,accountId:F.account_id});const D=await KS(e.id,X,se,F.account_id);console.log("SummaryReport: Insights fetched:",D==null?void 0:D.length),a(D||[])}}catch(U){console.error("Error fetching data:",U),ne.error("Khng th ti d liu bo co: "+(U instanceof Error?U.message:String(U)))}},d=r.reduce((U,F)=>{var se;const K=(se=F.date_start)==null?void 0:se.split("T")[0],X=`${F.campaign_id}_${K}_${F.level||"campaign"}`;if(!U[X])U[X]=F;else{const D=new Date(U[X].created_at||0);new Date(F.created_at||0)>D&&(U[X]=F)}return U},{}),m=Object.values(d).filter(U=>(U.level||(U.ad_id?"ad":U.adset_id?"adset":"campaign"))==="campaign"),p=m.reduce((U,F)=>U+Number(F.spend||0),0),v=m.reduce((U,F)=>U+Number(F.impressions||0),0),x=m.reduce((U,F)=>U+Number(F.reach||0),0),b=m.reduce((U,F)=>U+Number(F.clicks||0),0),_=m.reduce((U,F)=>{const K=Number(F.results_messaging_replied_7d||0);return U+K},0),j=v>0?(b/v*100).toFixed(2):"0.00",w=b>0?(p/b).toFixed(2):"0.00",N=v>0?(p/v*1e3).toFixed(2):"0.00",k=x>0?(p/x*1e3).toFixed(2):"0.00",C=_>0?(p/_).toFixed(2):"0.00",A=m.reduce((U,F)=>U+Number(F.daily_budget||F.budget||0),0),P=m.reduce((U,F)=>U+Number(F.phones||0),0),O=P>0?(p/P).toFixed(2):"0.00",T=p,$=t.length,L=new Set(t.map(U=>U.phone_number)).size,z=t.reduce((U,F)=>U+Number(F.total_revenue||0),0),W=t.filter(U=>U.call_answered).length,B=$>0?(W/$*100).toFixed(2):"0.00",G=p>0?(z/p).toFixed(2):"0.00";return s.jsxs("div",{className:"p-6 space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Bo co Tng"}),s.jsx(aP,{value:l,onChange:c})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"1. Tng quan ton h thng"}),s.jsx(SKe,{totalSpend:p,totalImpressions:v,totalResults:_,avgCostPerResult:Number(C),totalClicks:b,avgCTR:Number(j),avgCPC:Number(w),avgCPM:Number(N),avgCPP:Number(k),totalReach:x,totalBudget:A,totalPhones:P,avgCostPerPhone:Number(O),dailyMarketingCost:T}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"Bn hng"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"S T LCH"}),s.jsx(Ed,{className:"h-4 w-4 text-accent"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-accent",children:$.toLocaleString()})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"S KHCH HNG"}),s.jsx(yl,{className:"h-4 w-4 text-accent"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-accent",children:L.toLocaleString()})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"DOANH THU"}),s.jsx(hl,{className:"h-4 w-4 text-accent"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-accent",children:na(z,"VND")})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"ROAS"}),s.jsx(To,{className:"h-4 w-4 text-accent"})]}),s.jsx(Re,{children:s.jsxs("div",{className:"text-2xl font-bold text-accent",children:[G,"x"]})})]})]})]})]}),s.jsx(qs,{className:"my-8"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"2. Bo co Marketing"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"TIP CN"}),s.jsx(yl,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:x.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["CPP: ",na(Number(k),"VND")]})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"LT NHP"}),s.jsx(hT,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:b.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["CPC: ",na(Number(w),"VND")," | CTR: ",j,"%"]})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"LT HIN TH"}),s.jsx(Sx,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:v.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["CPM: ",na(Number(N),"VND")]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"TNG CHI PH"}),s.jsx(hl,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold",children:na(p,"VND")})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"TNG KT QU"}),s.jsx(To,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:_.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Chi ph/Kt qu: ",na(Number(C),"VND")]})]})]})]})]}),s.jsx(qs,{className:"my-8"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"3. Bo co Bn hng"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"S T LCH"}),s.jsx(Ed,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold",children:$.toLocaleString()})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"S KHCH HNG"}),s.jsx(yl,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold",children:L.toLocaleString()})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"DOANH THU"}),s.jsx(hl,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold",children:na(z,"VND")})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"T L CHUYN I"}),s.jsx(To,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[B,"%"]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[W,"/",$," cuc gi c tr li"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"HIU QU CHUYN I"}),s.jsx(Q2,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:W.toLocaleString()}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Cuc gi c tr li / ",$," t lch"]})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"HIU QU U T (ROAS)"}),s.jsx(Bg,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[G,"x"]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Doanh thu: ",na(z,"VND")," / Chi ph: ",na(p,"VND")]})]})]})]})]})]})},SKe=({totalSpend:e,totalImpressions:t,totalResults:n,avgCostPerResult:r,totalClicks:a,avgCTR:i,avgCPC:o,avgCPM:l,avgCPP:c,totalReach:u,totalBudget:d,totalPhones:h,avgCostPerPhone:m,dailyMarketingCost:p})=>{const{settings:v,loading:x}=XG(),b=v.selectedMarketingMetrics||["spend","impressions","results","costPerResult"],_=j=>{switch(j){case"spend":return{label:"CHI PH",icon:hl,value:na(e,"VND")};case"impressions":return{label:"LT HIN TH",icon:Sx,value:t.toLocaleString()};case"results":return{label:"KT QU",icon:To,value:n.toLocaleString()};case"costPerResult":return{label:"CHI PH/KT QU",icon:Bg,value:na(r,"VND")};case"clicks":return{label:"LT NHP",icon:hT,value:a.toLocaleString()};case"ctr":return{label:"CTR",icon:hT,value:`${i}%`};case"cpc":return{label:"CPC",icon:hl,value:na(o,"VND")};case"cpm":return{label:"CPM",icon:Sx,value:na(l,"VND")};case"cpp":return{label:"CPP",icon:yl,value:na(c,"VND")};case"reach":return{label:"TIP CN",icon:yl,value:u.toLocaleString()};case"budget":case"adsetBudget":return{label:"NGN SCH HNG NGY",icon:hl,value:na(d,"VND")};case"phones":return{label:"S IN THOI",icon:Q2,value:h.toLocaleString()};case"costPerPhone":return{label:"CHI PH/ST",icon:hl,value:na(m,"VND")};case"dailyMarketingCost":return{label:"CHI PH MKT/NGY",icon:hl,value:na(p,"VND")};default:return null}};return x?s.jsx("div",{children:"ang ti ci t..."}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"Marketing"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:b.map(j=>{const w=_(j);if(!w)return null;const N=w.icon;return s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:w.label}),s.jsx(N,{className:"h-4 w-4 text-primary"})]}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-primary",children:w.value})})]},j)})})]})},o6=[{id:"spend",label:"Chi tiu"},{id:"results",label:"Kt qu"},{id:"mess_7d",label:"Tin nhn (7 ngy)"},{id:"cost_per_result",label:"Chi ph/Kt qu"},{id:"revenue",label:"Doanh thu"},{id:"roas",label:"ROAS"},{id:"impressions",label:"Lt hin th"},{id:"clicks",label:"Lt nhp"},{id:"cpc",label:"CPC"},{id:"ctr",label:"CTR"},{id:"reach",label:"Lt tip cn"},{id:"cpm",label:"CPM"},{id:"cpp",label:"CPP"},{id:"total_appointments",label:"S t lch"},{id:"total_customers",label:"S khch hng"},{id:"answered_calls",label:"Nghe my"},{id:"conversion_rate",label:"T l cht"}],NKe=[{value:"*/2 * * * *",label:"Mi 2 pht (Test)"},{value:"*/5 * * * *",label:"Mi 5 pht"},{value:"*/10 * * * *",label:"Mi 10 pht"},{value:"*/30 * * * *",label:"Mi 30 pht"},{value:"0 * * * *",label:"Mi 1 gi"}],IZ=()=>{const{user:e}=Mn(),{isSuperAdmin:t}=_I(),[n,r]=g.useState([]),[a,i]=g.useState(!0),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,h]=g.useState("*/2 * * * *"),[m,p]=g.useState(!1),[v,x]=g.useState({name:"",schedule_type:"interval",schedule_value:"60",selected_metrics:["spend","results","mess_7d","cost_per_result"]}),b=async()=>{if(e!=null&&e.id){i(!0);try{console.log(" Loading notification configs for user:",e.id);const O=await uye(e.id);console.log(" Loaded configs:",O),r(O)}catch(O){console.error(" Error loading configs:",O),ne.error("Khng th ti cu hnh thng bo")}finally{i(!1)}}};g.useEffect(()=>{b()},[e==null?void 0:e.id,t]);const _=async()=>{try{p(!0);const{data:{session:O}}=await wt.auth.getSession(),T=O==null?void 0:O.access_token,$=await fetch("https://jtaekxrkubhwtqgodvtx.supabase.co/functions/v1/setup-cron-rpc",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({schedule:d})});if(!$.ok){const z=await $.text();throw new Error(`HTTP error! status: ${$.status}, body: ${z}`)}const L=await $.json();if(!L.success)throw new Error(L.error||"Unknown error");ne.success(" cp nht lch chy h thng!")}catch(O){console.error("Cron update error:",O),ne.error("Li cp nht lch chy: "+O.message)}finally{p(!1)}},j=async()=>{if(e!=null&&e.id){if(!v.name){ne.error("Vui lng nhp tn bo co");return}u(!0);try{console.log(" Creating notification config:",v);const O=await dye({user_id:e.id,name:v.name,schedule_type:v.schedule_type,schedule_value:v.schedule_value,selected_metrics:v.selected_metrics,is_active:!0});console.log(" Created config result:",O),ne.success(" to bo co nh k"),l(!1),await b(),x({name:"",schedule_type:"interval",schedule_value:"60",selected_metrics:["spend","results","mess_7d","cost_per_result"]})}catch(O){console.error(" Error creating config:",O),ne.error("Li khi to bo co")}finally{u(!1)}}},w=async O=>{if(confirm("Bn c chc mun xa bo co ny?"))try{await fye(O),ne.success(" xa bo co"),b()}catch(T){console.error(T),ne.error("Li khi xa bo co")}},N=async O=>{if(O.id)try{await hye(O.id,{is_active:!O.is_active}),r(n.map(T=>T.id===O.id?{...T,is_active:!T.is_active}:T)),ne.success(` ${O.is_active?"tt":"bt"} bo co`)}catch(T){console.error(T),ne.error("Li cp nht trng thi"),b()}},k=O=>{x(T=>T.selected_metrics.includes(O)?{...T,selected_metrics:T.selected_metrics.filter($=>$!==O)}:{...T,selected_metrics:[...T.selected_metrics,O]})},[C,A]=g.useState(null),P=async O=>{var T;A(O);try{ne.info("ang chy bo co...");const{data:$,error:L}=await wt.functions.invoke("process-scheduled-reports",{body:{config_id:O,user_id:e==null?void 0:e.id,force:!0}});if(L)throw L;const z=(T=$.results)==null?void 0:T[0];(z==null?void 0:z.status)==="success"||ne.error("Li chy bo co: "+((z==null?void 0:z.error)||"Unknown error"))}catch($){console.error($),ne.error("Li: "+$.message)}finally{A(null)}};return s.jsxs("div",{className:"container mx-auto p-6 max-w-5xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(_x,{className:"w-6 h-6 text-primary"}),"Ci t thng bo"]}),s.jsx("p",{className:"text-muted-foreground",children:"Qun l cc bo co t ng gi v h thng"})]}),s.jsxs(yr,{open:o,onOpenChange:l,children:[s.jsx(UI,{asChild:!0,children:s.jsxs(J,{className:"gap-2",children:[s.jsx(nu,{className:"w-4 h-4"}),"Thm cu hnh"]})}),s.jsxs(dr,{className:"max-w-lg",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"To bo co nh k mi"}),s.jsx(Ca,{children:"Thit lp lch trnh v cc ch s bn mun theo di."})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ge,{htmlFor:"name",children:"Tn bo co"}),s.jsx(Ke,{id:"name",placeholder:"V d: Bo co nhanh 1h",value:v.name,onChange:O=>x({...v,name:O.target.value})})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ge,{children:"Tn sut gi"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"type-interval",className:"accent-primary",checked:v.schedule_type==="interval",onChange:()=>x({...v,schedule_type:"interval",schedule_value:"60"})}),s.jsx(ge,{htmlFor:"type-interval",className:"cursor-pointer",children:"Lp li (Gi)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"type-daily",className:"accent-primary",checked:v.schedule_type==="daily",onChange:()=>x({...v,schedule_type:"daily",schedule_value:"07:00"})}),s.jsx(ge,{htmlFor:"type-daily",className:"cursor-pointer",children:"Hng ngy (Gi)"})]})]}),v.schedule_type==="interval"?s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tu,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs(kn,{value:v.schedule_value,onValueChange:O=>x({...v,schedule_value:O}),children:[s.jsx(wn,{className:"w-[180px]",children:s.jsx(Cn,{placeholder:"Chn khong thi gian"})}),s.jsxs(_n,{children:[s.jsx(st,{value:"1",children:"Mi 1 pht (Test)"}),s.jsx(st,{value:"60",children:"Mi 1 gi"}),s.jsx(st,{value:"120",children:"Mi 2 gi"}),s.jsx(st,{value:"240",children:"Mi 4 gi"}),s.jsx(st,{value:"360",children:"Mi 6 gi"})]})]})]}),s.jsxs("p",{className:"text-[11px] text-muted-foreground mt-1.5 ml-6",children:[v.schedule_value==="1"&&"Gi bo co mi pht (Ch dng  test)",v.schedule_value==="60"&&"Gi bo co 1 ting/ln (VD: 8h, 9h, 10h...)",v.schedule_value==="120"&&"Gi bo co 2 ting/ln (VD: 8h, 10h, 12h...)",v.schedule_value==="240"&&"Gi bo co 4 ting/ln (VD: 8h, 12h, 16h...)",v.schedule_value==="360"&&"Gi bo co 6 ting/ln (VD: 6h, 12h, 18h...)"]})]}):s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(Ed,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs(kn,{value:v.schedule_value,onValueChange:O=>x({...v,schedule_value:O}),children:[s.jsx(wn,{className:"w-[180px]",children:s.jsx(Cn,{placeholder:"Chn gi"})}),s.jsx(_n,{className:"max-h-[200px]",children:Array.from({length:24}).map((O,T)=>{const L=`${T.toString().padStart(2,"0")}:00`;return s.jsx(st,{value:L,children:L},L)})})]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(ge,{children:"Ch s bo co"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 border rounded-lg p-3 max-h-[200px] overflow-y-auto",children:o6.map(O=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xs,{id:`metric-${O.id}`,checked:v.selected_metrics.includes(O.id),onCheckedChange:()=>k(O.id)}),s.jsx(ge,{htmlFor:`metric-${O.id}`,className:"text-sm font-normal cursor-pointer",children:O.label})]},O.id))})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>l(!1),children:"Hy"}),s.jsxs(J,{onClick:j,disabled:c,children:[c&&s.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}),"Lu bo co"]})]})]})]})]}),t&&s.jsxs(Oe,{className:"mb-8 border-destructive/50 bg-destructive/5",children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"text-destructive flex items-center gap-2",children:[s.jsx(wd,{className:"h-5 w-5"}),"Cu hnh h thng (Super Admin)"]}),s.jsx(sn,{children:"Ci t tn sut chy qut d liu cho ton b h thng."})]}),s.jsx(Re,{className:"flex items-center gap-4",children:s.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[s.jsx(ge,{htmlFor:"cron-schedule",children:"Tn sut chy (Cron Job)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(kn,{value:d,onValueChange:h,children:[s.jsx(wn,{id:"cron-schedule",children:s.jsx(Cn,{placeholder:"Chn tn sut"})}),s.jsx(_n,{children:NKe.map(O=>s.jsx(st,{value:O.value,children:O.label},O.value))})]}),s.jsx(J,{variant:"destructive",onClick:_,disabled:m,children:m?s.jsx(zt,{className:"h-4 w-4 animate-spin"}):"Cp nht"})]})]})})]}),a?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(zt,{className:"w-8 h-8 mx-auto mb-2 animate-spin"}),"ang ti cu hnh..."]}):n.length===0?s.jsx(Oe,{className:"bg-muted/50 border-dashed",children:s.jsxs(Re,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(_x,{className:"w-12 h-12 text-muted-foreground/50 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Cha c bo co no"}),s.jsx("p",{className:"text-muted-foreground mb-4 max-w-sm",children:"To bo co u tin  nhn thng bo v hiu sut qung co v doanh thu."}),s.jsxs(J,{onClick:()=>l(!0),children:[s.jsx(nu,{className:"w-4 h-4 mr-2"}),"To bo co ngay"]})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(O=>s.jsxs(Oe,{className:"relative overflow-hidden transition-all hover:shadow-md",children:[s.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${O.is_active?"bg-green-500":"bg-gray-300"}`}),s.jsxs(Fe,{className:"pb-2",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx(Be,{className:"text-lg truncate pr-8",children:O.name}),s.jsx(Ki,{checked:O.is_active,onCheckedChange:()=>N(O)})]}),s.jsx(sn,{className:"flex items-center gap-1",children:O.schedule_type==="interval"?s.jsxs(s.Fragment,{children:[s.jsx(tu,{className:"w-3 h-3"}),"Mi ",parseInt(O.schedule_value)/60<1?`${O.schedule_value} pht`:`${parseInt(O.schedule_value)/60} gi`]}):s.jsxs(s.Fragment,{children:[s.jsx(Ed,{className:"w-3 h-3"}),"Hng ngy lc ",O.schedule_value]})})]}),s.jsx(Re,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1 uppercase tracking-wider",children:"Ch s theo di"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[O.selected_metrics.slice(0,4).map(T=>{var $;return s.jsx("span",{className:"px-2 py-0.5 bg-secondary rounded text-xs font-medium",children:(($=o6.find(L=>L.id===T))==null?void 0:$.label.split("(")[0].trim())||T},T)}),O.selected_metrics.length>4&&s.jsxs("span",{className:"px-2 py-0.5 bg-secondary rounded text-xs text-muted-foreground",children:["+",O.selected_metrics.length-4]})]})]}),s.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[s.jsxs(J,{variant:"outline",size:"sm",className:"h-8 px-2",disabled:C===O.id,onClick:()=>O.id&&P(O.id),children:[C===O.id?s.jsx(zt,{className:"w-4 h-4 mr-1 animate-spin"}):s.jsx(ap,{className:"w-4 h-4 mr-1"}),"Chy th"]}),s.jsxs(J,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10 h-8 px-2",onClick:()=>O.id&&w(O.id),children:[s.jsx(ks,{className:"w-4 h-4 mr-1"}),"Xa"]})]})]})})]},O.id))})]})},sE=768;function RZ(){const[e,t]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${sE-1}px)`),r=()=>{t(window.innerWidth<sE)};return n.addEventListener("change",r),t(window.innerWidth<sE),()=>n.removeEventListener("change",r)},[]),!!e}const kKe=()=>{const{user:e}=Mn(),t=cs(),[n,r]=g.useState("ai-chat"),[a,i]=g.useState(!1),o=RZ(),[l,c]=g.useState("Ti khon qung co"),[u,d]=g.useState("");g.useEffect(()=>{const m=async()=>{if(!(e!=null&&e.id))return;const v=await Vr(e.id);v&&v.length>0&&(c(v[0].account_name||"Ti khon qung co"),d(v[0].account_id))};m();const p=()=>{m()};return window.addEventListener("settings-updated",p),()=>{window.removeEventListener("settings-updated",p)}},[e==null?void 0:e.id]);const h=()=>{switch(n){case"ai-chat":return s.jsx(ije,{fullWidth:!0});case"create-ads":return s.jsx(Uje,{});case"create-message":return s.jsx(Xje,{});case"audience":return s.jsx(x1e,{});case"advanced-ads":return s.jsx(_1e,{});case"ads-report":return s.jsx(PZ,{});case"sales-report":return s.jsx(_Ke,{});case"summary-report":return s.jsx(jKe,{});case"create-quick-ad":return t("/create-quick-ad"),null;case"notification-settings":return s.jsx(IZ,{});default:return null}};return s.jsxs("div",{className:"h-screen bg-background flex flex-col overflow-hidden",children:[s.jsx(S0e,{}),s.jsxs("div",{className:"flex flex-row flex-1 overflow-hidden relative",children:[o&&s.jsxs(Aq,{open:a,onOpenChange:i,children:[s.jsx(Ove,{asChild:!0,children:s.jsx(J,{variant:"ghost",size:"icon",className:"fixed top-2 right-2 z-50 bg-background border shadow-sm",children:s.jsx(Ice,{className:"h-5 w-5"})})}),s.jsx(CI,{side:"right",className:"p-0 w-64 flex flex-col h-full",children:s.jsx(OF,{activeTab:n,onTabChange:m=>{r(m),i(!1)}})})]}),s.jsx("div",{className:"hidden md:block",children:s.jsx(OF,{activeTab:n,onTabChange:r})}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:h()})]})]})},CKe=()=>{const e=zd();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})};function l6({className:e,...t}){return s.jsx("div",{className:je("animate-pulse rounded-md bg-muted",e),...t})}const AKe="sidebar:state",EKe=60*60*24*7,TKe="16rem",PKe="18rem",OKe="3rem",IKe="b",$Z=g.createContext(null);function xv(){const e=g.useContext($Z);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const V$=g.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:a,children:i,...o},l)=>{const c=RZ(),[u,d]=g.useState(!1),[h,m]=g.useState(e),p=t??h,v=g.useCallback(j=>{const w=typeof j=="function"?j(p):j;n?n(w):m(w),document.cookie=`${AKe}=${w}; path=/; max-age=${EKe}`},[n,p]),x=g.useCallback(()=>c?d(j=>!j):v(j=>!j),[c,v,d]);g.useEffect(()=>{const j=w=>{w.key===IKe&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),x())};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[x]);const b=p?"expanded":"collapsed",_=g.useMemo(()=>({state:b,open:p,setOpen:v,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:x}),[b,p,v,c,u,d,x]);return s.jsx($Z.Provider,{value:_,children:s.jsx(fi,{delayDuration:0,children:s.jsx("div",{style:{"--sidebar-width":TKe,"--sidebar-width-icon":OKe,...a},className:je("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:i})})})});V$.displayName="SidebarProvider";const z$=g.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:a,...i},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=xv();return n==="none"?s.jsx("div",{className:je("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...i,children:a}):l?s.jsx(Aq,{open:u,onOpenChange:d,...i,children:s.jsx(CI,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":PKe},side:e,children:s.jsx("div",{className:"flex h-full w-full flex-col",children:a})})}):s.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[s.jsx("div",{className:je("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),s.jsx("div",{className:je("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:s.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});z$.displayName="Sidebar";const H$=g.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:a}=xv();return s.jsxs(J,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:je("h-7 w-7",e),onClick:i=>{t==null||t(i),a()},...n,children:[s.jsx(Rce,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});H$.displayName="SidebarTrigger";const RKe=g.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=xv();return s.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:je("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});RKe.displayName="SidebarRail";const $Ke=g.forwardRef(({className:e,...t},n)=>s.jsx("main",{ref:n,className:je("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));$Ke.displayName="SidebarInset";const MKe=g.forwardRef(({className:e,...t},n)=>s.jsx(Ke,{ref:n,"data-sidebar":"input",className:je("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));MKe.displayName="SidebarInput";const DKe=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"header",className:je("flex flex-col gap-2 p-2",e),...t}));DKe.displayName="SidebarHeader";const LKe=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"footer",className:je("flex flex-col gap-2 p-2",e),...t}));LKe.displayName="SidebarFooter";const FKe=g.forwardRef(({className:e,...t},n)=>s.jsx(qs,{ref:n,"data-sidebar":"separator",className:je("mx-2 w-auto bg-sidebar-border",e),...t}));FKe.displayName="SidebarSeparator";const W$=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"content",className:je("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));W$.displayName="SidebarContent";const q$=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"group",className:je("relative flex w-full min-w-0 flex-col p-2",e),...t}));q$.displayName="SidebarGroup";const K$=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const a=t?Lg:"div";return s.jsx(a,{ref:r,"data-sidebar":"group-label",className:je("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});K$.displayName="SidebarGroupLabel";const BKe=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const a=t?Lg:"button";return s.jsx(a,{ref:r,"data-sidebar":"group-action",className:je("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});BKe.displayName="SidebarGroupAction";const G$=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"group-content",className:je("w-full text-sm",e),...t}));G$.displayName="SidebarGroupContent";const Y$=g.forwardRef(({className:e,...t},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu",className:je("flex w-full min-w-0 flex-col gap-1",e),...t}));Y$.displayName="SidebarMenu";const Q$=g.forwardRef(({className:e,...t},n)=>s.jsx("li",{ref:n,"data-sidebar":"menu-item",className:je("group/menu-item relative",e),...t}));Q$.displayName="SidebarMenuItem";const UKe=Uf("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),X$=g.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:a,className:i,...o},l)=>{const c=e?Lg:"button",{isMobile:u,state:d}=xv(),h=s.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:je(UKe({variant:n,size:r}),i),...o});return a?(typeof a=="string"&&(a={children:a}),s.jsxs(Li,{children:[s.jsx(Fi,{asChild:!0,children:h}),s.jsx(mi,{side:"right",align:"center",hidden:d!=="collapsed"||u,...a})]})):h});X$.displayName="SidebarMenuButton";const VKe=g.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},a)=>{const i=t?Lg:"button";return s.jsx(i,{ref:a,"data-sidebar":"menu-action",className:je("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});VKe.displayName="SidebarMenuAction";const zKe=g.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:je("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));zKe.displayName="SidebarMenuBadge";const HKe=g.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const a=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return s.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:je("flex h-8 items-center gap-2 rounded-md px-2",e),...n,children:[t&&s.jsx(l6,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),s.jsx(l6,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});HKe.displayName="SidebarMenuSkeleton";const WKe=g.forwardRef(({className:e,...t},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:je("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));WKe.displayName="SidebarMenuSub";const qKe=g.forwardRef(({...e},t)=>s.jsx("li",{ref:t,...e}));qKe.displayName="SidebarMenuSubItem";const KKe=g.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...a},i)=>{const o=e?Lg:"a";return s.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:je("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...a})});KKe.displayName="SidebarMenuSubButton";const o_=({title:e,value:t,description:n,icon:r,trend:a})=>s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:e}),s.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t}),n&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n}),a&&s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsxs("span",{className:`text-xs font-medium ${a.isPositive?"text-green-600":"text-red-600"}`,children:[a.isPositive?"+":"",a.value,"%"]}),s.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"vs last month"})]})]})]}),Pc={healthy:{icon:oS,color:"text-green-600",bgColor:"bg-green-100",label:"Tt"},warning:{icon:is,color:"text-yellow-600",bgColor:"bg-yellow-100",label:"Cnh bo"},critical:{icon:ji,color:"text-red-600",bgColor:"bg-red-100",label:"Nghim trng"}},GKe=({services:e})=>{const t=e.some(r=>r.status==="critical")?"critical":e.some(r=>r.status==="warning")?"warning":"healthy",n=Pc[t].icon;return s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(n,{className:`h-5 w-5 ${Pc[t].color}`}),"Tnh trng h thng",s.jsx(Ze,{variant:"outline",className:`ml-auto ${Pc[t].bgColor} ${Pc[t].color}`,children:Pc[t].label})]})}),s.jsx(Re,{children:s.jsx("div",{className:"space-y-3",children:e.map(r=>{const a=Pc[r.status].icon;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(a,{className:`h-4 w-4 ${Pc[r.status].color}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:r.name}),r.uptime&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Hot ng: ",r.uptime]})]})]}),s.jsx(Ze,{variant:"outline",className:Pc[r.status].bgColor,children:Pc[r.status].label})]},r.name)})})})]})},YKe=async()=>{try{const{data:e,error:t}=await wt.functions.invoke("get-system-stats");if(t)throw console.error(" Error getting system stats:",t),t;return e.stats}catch(e){throw console.error(" Error in getSystemStats:",e),e}};function QKe(){const[e,t]=g.useState(null),[n,r]=g.useState(!0);g.useEffect(()=>{(async()=>{try{r(!0);const l=await YKe();t(l)}catch(l){console.error("Error fetching stats:",l),ne.error("Failed to fetch dashboard statistics")}finally{r(!1)}})()},[]);const a=[{name:"Database",status:"healthy",uptime:"99.9%"},{name:"Authentication",status:"healthy",uptime:"99.8%"},{name:"Edge Functions",status:"healthy",uptime:"99.7%"},{name:"Storage",status:"healthy",uptime:"99.9%"}],i=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))"];return n?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Bng iu khin"}),s.jsx("p",{className:"text-muted-foreground",children:"Tng quan h thng v cc ch s chnh"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsx(o_,{title:"Tng ngi dng",value:(e==null?void 0:e.users.total)||0,description:"Ngi dng  ng k trong h thng",icon:yl}),s.jsx(o_,{title:"Tng vai tr",value:(e==null?void 0:e.roles.total)||0,description:"Phn quyn trn ton h thng",icon:fT}),s.jsx(o_,{title:"Thi gian hot ng",value:"99.9%",description:"30 ngy qua",icon:vp}),s.jsx(o_,{title:"Trng thi c s d liu",value:"Hot ng tt",description:"Tt c bng ang hot ng",icon:jx})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(To,{className:"h-5 w-5"}),"Tng trng ngi dng (30 ngy qua)"]}),s.jsx(sn,{children:"S lng ngi dng mi ng k theo thi gian"})]}),s.jsx(Re,{children:e&&e.users.growth.length>0?s.jsx(TP,{width:"100%",height:300,children:s.jsxs(eZ,{data:e.users.growth,children:[s.jsx(cp,{strokeDasharray:"3 3"}),s.jsx(Ql,{dataKey:"date",tickFormatter:o=>{const l=new Date(o);return`${l.getMonth()+1}/${l.getDate()}`}}),s.jsx(Xl,{}),s.jsx(wo,{labelFormatter:o=>new Date(o).toLocaleDateString()}),s.jsx(Vs,{}),s.jsx(yv,{type:"monotone",dataKey:"count",stroke:"hsl(var(--primary))",name:"Ngi dng mi"})]})}):s.jsx("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Khng c d liu tng trng"})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(fT,{className:"h-5 w-5"}),"Phn b vai tr"]}),s.jsx(sn,{children:"Phn loi vai tr ngi dng trong h thng"})]}),s.jsx(Re,{children:e&&e.roles.byType.length>0?s.jsx(TP,{width:"100%",height:300,children:s.jsxs(MO,{children:[s.jsx(kl,{data:e.roles.byType,cx:"50%",cy:"50%",labelLine:!1,label:({role:o,count:l})=>`${o}: ${l}`,outerRadius:100,fill:"#8884d8",dataKey:"count",children:e.roles.byType.map((o,l)=>s.jsx(cd,{fill:i[l%i.length]},`cell-${l}`))}),s.jsx(wo,{}),s.jsx(Vs,{})]})}):s.jsx("div",{className:"flex items-center justify-center h-[300px] text-muted-foreground",children:"Khng c d liu vai tr"})})]})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.jsx(GKe,{services:a})})]})}const c6={super_admin:{label:"Qun tr vin cao cp",icon:Gz,variant:"destructive"},admin:{label:"Qun tr vin",icon:Bce,variant:"default"},user:{label:"Ngi dng",icon:Uce,variant:"secondary"}},XKe=({users:e,onAssignRole:t,onRemoveRole:n,onDeleteUser:r})=>{const a=i=>new Date(i).toLocaleDateString("vi-VN",{year:"numeric",month:"short",day:"numeric"});return s.jsx("div",{className:"rounded-md border",children:s.jsxs(sb,{children:[s.jsx(Af,{children:s.jsxs(Ma,{children:[s.jsx(Rn,{children:"Email"}),s.jsx(Rn,{children:"H tn"}),s.jsx(Rn,{children:"Vai tr"}),s.jsx(Rn,{children:"Ngy to"}),s.jsx(Rn,{className:"text-right",children:"Thao tc"})]})}),s.jsx(Ef,{children:e.length===0?s.jsx(Ma,{children:s.jsx(Qt,{colSpan:5,className:"text-center text-muted-foreground",children:"Khng tm thy ngi dng"})}):e.map(i=>s.jsxs(Ma,{children:[s.jsx(Qt,{className:"font-medium",children:i.email}),s.jsx(Qt,{children:i.full_name||"-"}),s.jsx(Qt,{children:s.jsx("div",{className:"flex gap-1 flex-wrap",children:i.roles.length===0?s.jsx(Ze,{variant:"outline",children:"Cha c vai tr"}):i.roles.map(o=>{const l=c6[o],c=l.icon;return s.jsxs(Ze,{variant:l.variant,children:[s.jsx(c,{className:"h-3 w-3 mr-1"}),l.label]},o)})})}),s.jsx(Qt,{children:a(i.created_at)}),s.jsx(Qt,{className:"text-right",children:s.jsxs(pK,{children:[s.jsx(gK,{asChild:!0,children:s.jsxs(J,{variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:"Open menu"}),s.jsx(xce,{className:"h-4 w-4"})]})}),s.jsxs(JI,{align:"end",children:[s.jsx(ZI,{children:"Thao tc"}),s.jsx(lf,{onClick:()=>t(i.id),children:"Gn vai tr"}),s.jsx(Fx,{}),i.roles.map(o=>s.jsxs(lf,{onClick:()=>n(i.id,o),className:"text-destructive",children:["Xa ",c6[o].label]},o)),s.jsx(Fx,{}),s.jsx(lf,{onClick:()=>r(i.id),className:"text-destructive",children:"Xa ngi dng"})]})]})})]},i.id))})]})})},JKe=({onSuccess:e})=>{const[t,n]=g.useState(!1),[r,a]=g.useState(""),[i,o]=g.useState("user"),[l,c]=g.useState(!1),u=async()=>{if(!r){ne.error("Vui lng nhp ID ngi dng");return}try{c(!0),await Age(r,i),ne.success(` gn vai tr ${i} thnh cng`),n(!1),a(""),o("user"),e==null||e()}catch(d){console.error("Error assigning role:",d),ne.error(d.message||"Khng th gn vai tr")}finally{c(!1)}};return s.jsxs(s.Fragment,{children:[s.jsxs(J,{onClick:()=>n(!0),variant:"outline",children:[s.jsx(Lce,{className:"h-4 w-4 mr-2"}),"Gn vai tr"]}),s.jsx(yr,{open:t,onOpenChange:n,children:s.jsxs(dr,{children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"Gn vai tr cho ngi dng"}),s.jsx(Ca,{children:"Gn vai tr cho ngi dng bng cch nhp ID ngi dng"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"userId",children:"ID ngi dng"}),s.jsx(Ke,{id:"userId",placeholder:"Nhp UUID ngi dng",value:r,onChange:d=>a(d.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"role",children:"Vai tr"}),s.jsxs(kn,{value:i,onValueChange:d=>o(d),children:[s.jsx(wn,{children:s.jsx(Cn,{placeholder:"Chn vai tr"})}),s.jsxs(_n,{children:[s.jsx(st,{value:"user",children:"Ngi dng"}),s.jsx(st,{value:"admin",children:"Qun tr vin"}),s.jsx(st,{value:"super_admin",children:"Qun tr vin cao cp"})]})]})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>n(!1),disabled:l,children:"Hy"}),s.jsx(J,{onClick:u,disabled:l,children:l?"ang gn...":"Gn vai tr"})]})]})})]})},ZKe=async()=>{try{const{data:e,error:t}=await wt.functions.invoke("get-all-users");if(t)throw console.error(" Error getting all users:",t),t;return e.users||[]}catch(e){throw console.error(" Error in getAllUsers:",e),e}},eGe=async(e,t)=>{try{const{data:n,error:r}=await wt.functions.invoke("update-user-role",{body:{userId:e,action:"assign",role:t}});if(r)throw console.error(" Error assigning role:",r),r}catch(n){throw console.error(" Error in assignRoleToUser:",n),n}},tGe=async(e,t)=>{try{const{data:n,error:r}=await wt.functions.invoke("update-user-role",{body:{userId:e,action:"remove",role:t}});if(r)throw console.error(" Error removing role:",r),r}catch(n){throw console.error(" Error in removeRoleFromUser:",n),n}},nGe=async e=>{try{const{data:t,error:n}=await wt.functions.invoke("delete-user",{body:{userId:e}});if(n)throw console.error(" Error deleting user:",n),n}catch(t){throw console.error(" Error in deleteUser:",t),t}};function rGe(){const[e,t]=g.useState([]),[n,r]=g.useState([]),[a,i]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(!1),[d,h]=g.useState(null),[m,p]=g.useState("user"),v=async()=>{try{i(!0);const w=await ZKe();t(w),r(w)}catch(w){console.error("Error fetching users:",w),ne.error("Khng th ti danh sch ngi dng")}finally{i(!1)}};g.useEffect(()=>{v()},[]),g.useEffect(()=>{if(o){const w=e.filter(N=>{var k;return N.email.toLowerCase().includes(o.toLowerCase())||((k=N.full_name)==null?void 0:k.toLowerCase().includes(o.toLowerCase()))});r(w)}else r(e)},[o,e]);const x=w=>{h(w),u(!0)},b=async()=>{var w;if(d)try{await eGe(d,m),ne.success(` gn vai tr ${m} thnh cng`),u(!1),h(null),v()}catch(N){console.error("Error assigning role:",N),(w=N.message)!=null&&w.includes("already has this role")?ne.error("Ngi dng  c vai tr ny"):ne.error("Khng th gn vai tr")}},_=async(w,N)=>{try{await tGe(w,N),ne.success(` xa vai tr ${N} thnh cng`),v()}catch(k){console.error("Error removing role:",k),ne.error("Khng th xa vai tr")}},j=async w=>{var k,C;if(window.confirm("Bn c chc chn mun xa ngi dng ny? Hnh ng ny khng th hon tc v s xa tt c d liu lin quan."))try{await nGe(w),ne.success(" xa ngi dng thnh cng"),v()}catch(A){console.error("Error deleting user:",A),(k=A.message)!=null&&k.includes("last super admin")?ne.error("Khng th xa qun tr vin cao cp cui cng"):(C=A.message)!=null&&C.includes("your own account")?ne.error("Khng th xa ti khon ca chnh bn"):ne.error("Khng th xa ngi dng")}};return a?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Qun l ngi dng"}),s.jsx("p",{className:"text-muted-foreground",children:"Qun l ngi dng v phn quyn"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(L0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ke,{placeholder:"Tm kim theo email hoc tn...",value:o,onChange:w=>l(w.target.value),className:"pl-10"})]}),s.jsx(JKe,{onSuccess:v}),s.jsxs(J,{onClick:v,variant:"outline",children:[s.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Lm mi"]})]}),s.jsx(XKe,{users:n,onAssignRole:x,onRemoveRole:_,onDeleteUser:j}),s.jsx(yr,{open:c,onOpenChange:u,children:s.jsxs(dr,{children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"Phn quyn"}),s.jsx(Ca,{children:"Chn vai tr  gn cho ngi dng ny"})]}),s.jsx("div",{className:"py-4",children:s.jsxs(kn,{value:m,onValueChange:w=>p(w),children:[s.jsx(wn,{children:s.jsx(Cn,{placeholder:"Chn vai tr"})}),s.jsxs(_n,{children:[s.jsx(st,{value:"user",children:"Ngi dng"}),s.jsx(st,{value:"admin",children:"Qun tr vin"}),s.jsx(st,{value:"super_admin",children:"Qun tr vin cao cp"})]})]})}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>u(!1),children:"Hy"}),s.jsx(J,{onClick:b,children:"Gn"})]})]})})]})}const aGe=e=>e.startsWith("ai_")?"ai":e.startsWith("manual_")?"manual":e.startsWith("report_")?"report":e.startsWith("system_")?"system":"general",S0=It.TABLES.FEATURE_FLAGS,Cp=It.TABLES.ROLE_FEATURE_FLAGS,Ap=It.TABLES.USER_FEATURE_OVERRIDES,yb=async()=>{const e=ht(S0),t=await fetch(e,{method:"GET",headers:lt()});if(!t.ok)throw new Error(`NocoDB API error: ${t.status} ${t.statusText}`);return(await t.json()).list||[]},sGe=async e=>{var i;const t=encodeURIComponent(`(key,eq,${e})`),n=`${ht(S0)}?where=${t}`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return((i=(await r.json()).list)==null?void 0:i[0])||null},BO=async e=>{const t=await sGe(e.key);if(t&&t.Id){const n=ht(S0),r={Id:t.Id,key:e.key,name:e.name,description:e.description,enabled:e.enabled,category:e.category},a=await fetch(n,{method:"PATCH",headers:lt(),body:JSON.stringify(r)});if(!a.ok){const o=await a.text();throw console.error(" Update error:",a.status,o),new Error(`NocoDB API error: ${a.status} ${a.statusText}`)}return await a.json()}else{const n=ht(S0),r=await fetch(n,{method:"POST",headers:lt(),body:JSON.stringify(e)});if(!r.ok){const i=await r.text();throw console.error(" Create error:",r.status,i),new Error(`NocoDB API error: ${r.status} ${r.statusText}`)}return await r.json()}},J$=async e=>{const t=ht(S0),n=await fetch(t,{method:"DELETE",headers:lt(),body:JSON.stringify([{Id:e}])});if(!n.ok){const r=await n.text();throw console.error(" DELETE failed:",r),new Error(`NocoDB API error: ${n.status} - ${r}`)}},iGe=async()=>{const e=ht(Cp),t=await fetch(e,{method:"GET",headers:lt()});if(!t.ok)throw new Error(`NocoDB API error: ${t.status} ${t.statusText}`);return(await t.json()).list||[]},UO=async(e,t)=>{var n;try{const r=encodeURIComponent(`(feature_key,eq,${e})`),a=`${ht(Cp)}?where=${r}`,i=await fetch(a,{method:"GET",headers:lt()});if(!i.ok)throw new Error(`NocoDB API error: ${i.status}`);const l=(n=(await i.json()).list)==null?void 0:n[0];if(l){const c=ht(Cp),u=await fetch(c,{method:"PATCH",headers:lt(),body:JSON.stringify({Id:l.id,User:t.User??l.User,admin:t.admin??l.admin,Superadmin:t.Superadmin??l.Superadmin})});if(!u.ok)throw new Error(`Failed to update: ${u.status}`);return await u.json()}else{const c=ht(Cp),u=await fetch(c,{method:"POST",headers:lt(),body:JSON.stringify({feature_key:e,User:t.User??!1,admin:t.admin??!0,Superadmin:t.Superadmin??!0})});if(!u.ok)throw new Error(`Failed to create: ${u.status}`);return await u.json()}}catch(r){throw console.error(` Failed to update role feature flag for ${e}:`,r),r}},oGe=async(e,t,n)=>{const r={};return e==="user"?r.User=n:e==="admin"?r.admin=n:e==="super_admin"&&(r.Superadmin=n),UO(t,r)},Z$=async e=>{const t=encodeURIComponent(`(feature_key,eq,${e})`),n=`${ht(Cp)}?where=${t}`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);const i=(await r.json()).list||[];for(const o of i)if(o.id){const l=ht(Cp);await fetch(l,{method:"DELETE",headers:lt(),body:JSON.stringify([{id:o.id}])})}},iE=async e=>{const t=encodeURIComponent(`(user_id,eq,${e})`),n=`${ht(Ap)}?where=${t}`,r=await fetch(n,{method:"GET",headers:lt()});if(!r.ok)throw new Error(`NocoDB API error: ${r.status} ${r.statusText}`);return(await r.json()).list||[]},lGe=async(e,t,n,r)=>{var u;const a=encodeURIComponent(`(user_id,eq,${e})~and(feature_key,eq,${t})`),i=`${ht(Ap)}?where=${a}`,o=await fetch(i,{method:"GET",headers:lt()});if(!o.ok)throw new Error(`NocoDB API error: ${o.status} ${o.statusText}`);const c=(u=(await o.json()).list)==null?void 0:u[0];if(c&&c.Id){const d=ht(Ap,c.Id.toString()),h=await fetch(d,{method:"PATCH",headers:lt(),body:JSON.stringify({enabled:n})});if(!h.ok)throw new Error(`NocoDB API error: ${h.status} ${h.statusText}`);return await h.json()}else{const d=ht(Ap),h=await fetch(d,{method:"POST",headers:lt(),body:JSON.stringify({user_id:e,feature_key:t,enabled:n,created_by:r})});if(!h.ok)throw new Error(`NocoDB API error: ${h.status} ${h.statusText}`);return await h.json()}},cGe=async(e,t)=>{var l;const n=encodeURIComponent(`(user_id,eq,${e})~and(feature_key,eq,${t})`),r=`${ht(Ap)}?where=${n}`,a=await fetch(r,{method:"GET",headers:lt()});if(!a.ok)throw new Error(`NocoDB API error: ${a.status} ${a.statusText}`);const o=(l=(await a.json()).list)==null?void 0:l[0];o&&o.id&&await fetch(ht(Ap,o.id.toString()),{method:"DELETE",headers:lt()})};function uGe(){var X,se;const[e,t]=g.useState([]),[n,r]=g.useState([]),[a,i]=g.useState(!0),[o,l]=g.useState(!1),[c,u]=g.useState("all"),[d,h]=g.useState(""),[m,p]=g.useState([]),[v,x]=g.useState(!1),[b,_]=g.useState({}),[j,w]=g.useState({open:!1,feature:null}),[N,k]=g.useState(!1),C=async()=>{try{i(!0);const Y=[...await yb()].sort((oe,ee)=>{const re=oe.Id||0;return(ee.Id||0)-re}),xe=Array.from(new Map(Y.map(oe=>[oe.key,oe])).values()).map(oe=>({...oe,category:oe.category||aGe(oe.key)})),Ne=await iGe();t(xe),r(Ne)}catch(D){console.error(" Error loading features:",D),ne.error("Li khi ti d liu")}finally{i(!1)}};g.useEffect(()=>{C()},[]),g.useEffect(()=>{(async()=>{if(!d||d.length<36){p([]);return}try{x(!0);const Y=await iE(d);p(Y)}catch(Y){console.error(" Error loading user overrides:",Y),ne.error("Li khi ti overrides cho user"),p([])}finally{x(!1)}})()},[d]);const A=(D,Y)=>{_(ue=>({...ue,[D]:{...ue[D],enabled:!!Y}}))},P=(D,Y,ue)=>{_(xe=>{var ee;const Ne=((ee=xe[D])==null?void 0:ee.roles)||O(D),oe=ue?[...Ne.filter(re=>re!==Y),Y]:Ne.filter(re=>re!==Y);return{...xe,[D]:{...xe[D],roles:oe}}})},O=D=>{const Y=n.find(xe=>xe.feature_key===D);if(!Y)return[];const ue=[];return Y.User&&ue.push("user"),Y.admin&&ue.push("admin"),Y.Superadmin&&ue.push("super_admin"),ue},T=(D,Y)=>{var ue;return((ue=b[D])==null?void 0:ue.roles)!==void 0?b[D].roles.includes(Y):O(D).includes(Y)},$=Object.keys(b).length>0,L=c==="all"?e:e.filter(D=>D.category===c),z=D=>{const Y={ai:{label:" AI",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/30"},manual:{label:" Th cng",className:"bg-gray-100 text-gray-800 dark:bg-gray-900/30"},report:{label:" Bo co",className:"bg-green-100 text-green-800 dark:bg-green-900/30"},system:{label:" H thng",className:"bg-purple-100 text-purple-800 dark:bg-purple-900/30"},general:{label:" Chung",className:"bg-slate-100 text-slate-800 dark:bg-slate-900/30"}};return Y[D]||Y.general},W=async()=>{try{l(!0),await Promise.all(Object.entries(b).map(async([D,Y])=>{const ue=e.find(xe=>xe.key===D);ue&&(Y.enabled!==void 0&&await BO({key:D,name:ue.name,description:ue.description,enabled:Y.enabled,category:ue.category}),Y.roles!==void 0&&await UO(D,{User:Y.roles.includes("user"),admin:Y.roles.includes("admin"),Superadmin:Y.roles.includes("super_admin")}))})),await C(),_({}),ne.success("  cp nht cu hnh thnh cng")}catch(D){console.error(" Error saving features:",D),ne.error("Li khi lu cu hnh")}finally{l(!1)}},B=()=>{_({}),ne.info(" hy thay i")},G=async D=>{try{l(!0),await Z$(D.key),D.Id&&await J$(D.Id),ne.success(`  xa feature: ${D.name}`),w({open:!1,feature:null}),await C()}catch(Y){console.error(" Error deleting feature:",Y),Y instanceof Error?ne.error(`Li khi xa feature: ${Y.message}`):ne.error("Li khng xc nh khi xa feature")}finally{l(!1)}},U=async(D,Y)=>{if(!d){ne.error("Vui lng nhp User ID");return}try{l(!0),await lGe(d,D,Y),ne.success(`  ${Y?"bt":"tt"} ${D} cho user`);const ue=await iE(d);p(ue)}catch(ue){console.error(" Error setting user override:",ue),ne.error("Li khi cp nht override")}finally{l(!1)}},F=async D=>{if(d)try{l(!0),await cGe(d,D),ne.success(`  xa override ${D}`);const Y=await iE(d);p(Y)}catch(Y){console.error(" Error deleting user override:",Y),ne.error("Li khi xa override")}finally{l(!1)}},K=async()=>{const D=[{key:"report_ads",name:" Bo co ADS",description:"Xem bo co hiu sut qung co chi tit",category:"report"},{key:"report_sale",name:" Bo co Sale",description:"Xem bo co doanh s v chuyn i",category:"report"},{key:"report_summary",name:" Bo co Tng",description:"Xem tng quan ton b hiu sut",category:"report"}];try{k(!0);for(const Y of D)await BO({key:Y.key,name:Y.name,description:Y.description,enabled:!0,category:Y.category}),await UO(Y.key,{User:!0,admin:!0,Superadmin:!0});ne.success("  thm 3 report features thnh cng!"),await C()}catch(Y){console.error(" Error seeding features:",Y),ne.error("Li khi thm features")}finally{k(!1)}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(zt,{className:"h-8 w-8 animate-spin"})}):s.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[s.jsxs(Oe,{className:"mb-6",children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:" Gn tnh nng cho User c th"}),s.jsx(sn,{children:"Override role assignment - cho php/chn user c th s dng feature (u tin cao nht)"})]}),s.jsx(Re,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{placeholder:"Nhp User ID (UUID) - v d: 936acca5-d200-4f43-bfff-d9cf5cea4109",value:d,onChange:D=>h(D.target.value),className:"flex-1"}),s.jsx(J,{variant:"outline",onClick:()=>h(""),disabled:!d,children:"Xa"})]}),d&&d.length>=36&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ge,{className:"text-sm font-medium",children:["Overrides cho user ny:",s.jsx(Ze,{variant:"outline",className:"ml-2",children:m.length})]}),v&&s.jsx(zt,{className:"h-4 w-4 animate-spin"})]}),m.length>0?s.jsx("div",{className:"grid gap-2",children:m.map(D=>{const Y=e.find(ue=>ue.key===D.feature_key);return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/50",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:(Y==null?void 0:Y.name)||D.feature_key}),s.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:D.feature_key})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{variant:D.enabled?"default":"destructive",children:D.enabled?" Enabled":" Disabled"}),s.jsx(J,{variant:"ghost",size:"sm",onClick:()=>F(D.feature_key),disabled:o,children:s.jsx(ks,{className:"h-4 w-4"})})]})]},D.feature_key)})}):s.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border rounded-lg",children:"Cha c override no cho user ny"}),s.jsxs("div",{className:"border-t pt-3 mt-3",children:[s.jsx(ge,{className:"text-sm font-medium mb-2 block",children:"Thm Override:"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:e.map(D=>{const Y=m.some(ue=>ue.feature_key===D.key);return s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(J,{variant:Y?"secondary":"outline",size:"sm",className:"flex-1 justify-start text-xs",onClick:()=>U(D.key,!0),disabled:o,children:[" ",D.name]}),s.jsx(J,{variant:Y?"secondary":"outline",size:"sm",onClick:()=>U(D.key,!1),disabled:o,children:""})]},D.key)})})]})]})]})})]}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Qun l Tnh nng"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Bt/tt tnh nng cho ton h thng hoc theo vai tr"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:"outline",onClick:K,disabled:N||o,children:N?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"ang thm..."]}):s.jsxs(s.Fragment,{children:[s.jsx(nu,{className:"mr-2 h-4 w-4"}),"Thm Reports"]})}),s.jsxs(J,{variant:"outline",onClick:C,disabled:o,children:[s.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Lm mi"]}),$&&s.jsxs(s.Fragment,{children:[s.jsx(J,{variant:"outline",onClick:B,disabled:o,children:"Hy thay i"}),s.jsx(J,{onClick:W,disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"ang lu..."]}):s.jsxs(s.Fragment,{children:[s.jsx(cS,{className:"mr-2 h-4 w-4"}),"Lu thay i"]})})]})]})]}),s.jsxs("div",{className:"mb-6 flex gap-2 flex-wrap",children:[s.jsxs(J,{variant:c==="all"?"default":"outline",size:"sm",onClick:()=>u("all"),children:["Tt c (",e.length,")"]}),s.jsxs(J,{variant:c==="ai"?"default":"outline",size:"sm",onClick:()=>u("ai"),children:[" AI (",e.filter(D=>D.category==="ai").length,")"]}),s.jsxs(J,{variant:c==="manual"?"default":"outline",size:"sm",onClick:()=>u("manual"),children:[" Th cng (",e.filter(D=>D.category==="manual").length,")"]}),s.jsxs(J,{variant:c==="report"?"default":"outline",size:"sm",onClick:()=>u("report"),children:[" Bo co (",e.filter(D=>D.category==="report").length,")"]}),s.jsxs(J,{variant:c==="system"?"default":"outline",size:"sm",onClick:()=>u("system"),children:[" H thng (",e.filter(D=>D.category==="system").length,")"]})]}),s.jsx("div",{className:"grid gap-4",children:L.map(D=>{var ee,re;const Y=!!D.enabled,ue=((ee=b[D.key])==null?void 0:ee.enabled)!==void 0?!!((re=b[D.key])!=null&&re.enabled):Y,xe=b[D.key]!==void 0,Ne=D.category||"general",oe=z(Ne);return s.jsx(Oe,{className:xe?"border-primary":"",children:s.jsx(Fe,{className:"pb-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs(Be,{className:"flex items-center gap-2 flex-wrap",children:[D.name,xe&&s.jsx(Ze,{variant:"secondary",children:" sa"}),s.jsx(Ze,{className:oe.className,children:oe.label})]}),s.jsx(sn,{className:"mt-1",children:D.description||"Khng c m t"}),s.jsx("div",{className:"mt-2",children:s.jsx(Ze,{variant:"outline",className:"font-mono text-xs",children:D.key})})]}),s.jsxs("div",{className:"flex flex-col items-end gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ge,{htmlFor:`global-${D.key}`,children:"Bt ton cc"}),s.jsx(Ki,{id:`global-${D.key}`,checked:ue,onCheckedChange:Z=>A(D.key,Z)})]}),s.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>w({open:!0,feature:D}),title:"Xa feature",children:s.jsx(ks,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsx(ge,{className:"text-sm font-medium",children:"Quyn truy cp:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xs,{id:`${D.key}-user`,checked:T(D.key,"user"),onCheckedChange:Z=>P(D.key,"user",Z)}),s.jsx(ge,{htmlFor:`${D.key}-user`,className:"text-sm cursor-pointer whitespace-nowrap",children:" User"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xs,{id:`${D.key}-admin`,checked:T(D.key,"admin"),onCheckedChange:Z=>P(D.key,"admin",Z)}),s.jsx(ge,{htmlFor:`${D.key}-admin`,className:"text-sm cursor-pointer whitespace-nowrap",children:" Admin"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xs,{id:`${D.key}-super_admin`,checked:T(D.key,"super_admin"),onCheckedChange:Z=>P(D.key,"super_admin",Z)}),s.jsx(ge,{htmlFor:`${D.key}-super_admin`,className:"text-sm cursor-pointer whitespace-nowrap",children:" Super Admin"})]})]})]})]})]})})},D.key)})}),s.jsx(B$,{open:j.open,onOpenChange:D=>w({open:D,feature:null}),children:s.jsxs(VN,{children:[s.jsxs(zN,{children:[s.jsx(WN,{children:"Xc nhn xa feature"}),s.jsxs(qN,{children:["Bn c chc mun xa feature ",s.jsx("strong",{children:(X=j.feature)==null?void 0:X.name}),"?",s.jsx("br",{}),s.jsx("br",{}),s.jsx(Ze,{variant:"outline",className:"font-mono",children:(se=j.feature)==null?void 0:se.key}),s.jsx("br",{}),s.jsx("br",{})," Hnh ng ny s xa:",s.jsxs("ul",{className:"list-disc list-inside mt-2",children:[s.jsx("li",{children:"Feature flag chnh"}),s.jsx("li",{children:"Tt c role assignments"})]})]})]}),s.jsxs(HN,{children:[s.jsx(GN,{children:"Hy"}),s.jsx(KN,{onClick:()=>j.feature&&G(j.feature),className:"bg-destructive hover:bg-destructive/90",children:"Xa vnh vin"})]})]})})]})}function dGe(){const e=cs(),{features:t,loading:n}=J0(),[r,a]=g.useState("overview"),i=Object.values(Mt).map(c=>t[c]).filter(Boolean),o=i.filter(c=>c==null?void 0:c.enabled).length,l=i.length;return n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"ang ti..."})]})}):s.jsxs("div",{className:"container mx-auto p-6 max-w-6xl space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Qun l Tnh nng AI"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Theo di cc tnh nng AI Assistant v thng k s dng"})]}),s.jsxs(J,{onClick:()=>e("/super-admin/features"),className:"gap-2",children:[s.jsx(wd,{className:"h-4 w-4"}),"Cu hnh Feature Flags"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Tnh nng AI"}),s.jsx(vf,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[o,"/",l]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"ang hot ng"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Ngi dng"}),s.jsx(yl,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"-"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"S dng AI hm nay"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Tng requests"}),s.jsx(vp,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"-"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Trong 24h qua"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Tng trng"}),s.jsx(To,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"-"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"So vi tun trc"})]})]})]}),s.jsxs("div",{className:"flex gap-2 border-b",children:[s.jsx(J,{variant:r==="overview"?"default":"ghost",onClick:()=>a("overview"),children:"Tng quan"}),s.jsx(J,{variant:r==="usage"?"default":"ghost",onClick:()=>a("usage"),children:"Thng k s dng"}),s.jsx(J,{variant:r==="limits"?"default":"ghost",onClick:()=>a("limits"),children:"Gii hn"})]}),r==="overview"&&s.jsxs("div",{className:"grid gap-4",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Danh sch tnh nng AI"}),s.jsx(sn,{children:"Qun l cc tnh nng AI c sn trong h thng"})]}),s.jsx(Re,{className:"space-y-4",children:Object.entries(fl).map(([c,u])=>{const d=t[c],h=(d==null?void 0:d.enabled)??!1;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-medium",children:u}),s.jsx(Ze,{variant:h?"default":"secondary",children:h?"Bt":"Tt"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(d==null?void 0:d.description)||"Khng c m t"}),d&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Ngun: ",d.source==="global"?"Ton cc":d.source==="role"?"Theo vai tr":"Override"]})]}),s.jsx(J,{variant:"outline",size:"sm",onClick:()=>e("/super-admin/features"),children:"Qun l"})]},c)})})]}),s.jsxs(Oe,{className:"border-blue-200 bg-blue-50/50 dark:bg-blue-950/20 dark:border-blue-800",children:[s.jsx(Fe,{children:s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(vp,{className:"h-5 w-5 text-blue-600"}),"Thng tin quan trng"]})}),s.jsxs(Re,{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[" Trang ny dng  ",s.jsx("strong",{children:"XEM"})," trng thi v thng k cc tnh nng AI"]}),s.jsxs("p",{children:["  ",s.jsx("strong",{children:"BT/TT"}),' tnh nng, nhn nt "Cu hnh Feature Flags"  trn hoc nt "Qun l" bn cnh mi tnh nng']}),s.jsx("p",{children:" Mi vai tr (super_admin, admin, user) c th c quyn truy cp khc nhau"}),s.jsx("p",{children:" Thng k s dng chi tit s c cp nht trong cc phin bn ti"})]})]})]}),r==="usage"&&s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Thng k s dng"}),s.jsx(sn,{children:"Theo di vic s dng cc tnh nng AI"})]}),s.jsx(Re,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(vp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Chc nng thng k s c trin khai trong phin bn tip theo"}),s.jsx("p",{className:"text-sm mt-2",children:"S bao gm: Biu  s dng, Top users, Thi gian nh im"})]})})]}),r==="limits"&&s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Gii hn s dng"}),s.jsx(sn,{children:"Cu hnh gii hn s dng theo vai tr"})]}),s.jsx(Re,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(yl,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Chc nng gii hn s c trin khai trong phin bn tip theo"}),s.jsx("p",{className:"text-sm mt-2",children:"S cho php: t gii hn hng ngy, Theo vai tr, Rate limiting"})]})})]})]})}const ln={CREATE_ADS:"manual_create_ads",CREATE_MESSAGE:"manual_create_message",AUDIENCE:"manual_audience",ADVANCED_ADS:"manual_advanced_ads",QUICK_AD:"manual_quick_ad"},ql={[ln.CREATE_ADS]:" To qung co th cng",[ln.CREATE_MESSAGE]:" To QC tin nhn",[ln.AUDIENCE]:" To i tng",[ln.ADVANCED_ADS]:" ADS nng cao",[ln.QUICK_AD]:" Bi vit sn nhanh"},hGe=()=>{const{features:e,hasFeature:t,loading:n,error:r}=J0(),a=i=>{const o=t(i);return{enabled:o,canUse:o}};return{canUseCreateAds:t(ln.CREATE_ADS),canUseCreateMessage:t(ln.CREATE_MESSAGE),canUseAudience:t(ln.AUDIENCE),canUseAdvancedAds:t(ln.ADVANCED_ADS),canUseQuickAd:t(ln.QUICK_AD),getToolStatus:a,enabledTools:Object.values(ln).filter(i=>t(i)),features:e,loading:n,error:r}},YN=()=>[...Object.values(Mt),...Object.values(ln)],eM=async()=>{const e=await yb(),t=new Set(YN());return e.filter(n=>!t.has(n.key))},MZ=async()=>{const e=await yb(),t=new Set(YN());return e.filter(n=>t.has(n.key))},DZ=async()=>{const e=await yb(),t=new Set(e.map(r=>r.key));return YN().filter(r=>!t.has(r))},fGe=async()=>{const e=await eM();let t=0;const n=[];for(const r of e)try{await Z$(r.key),r.Id&&(await J$(r.Id),t++)}catch(a){const i=a instanceof Error?a.message:"Unknown error";console.error(` Failed to delete feature ${r.key}:`,i),n.push(`${r.key}: ${i}`)}if(n.length>0)throw new Error(`Deleted ${t}, failed ${n.length}: ${n.join("; ")}`);return t},mGe=async(e,t)=>{try{await Z$(t),await J$(e)}catch(n){const r=n instanceof Error?n.message:"Unknown error";throw console.error(` Failed to delete feature ${t}:`,r),new Error(`Khng th xa feature ${t}: ${r}`)}},pGe=async()=>{const e=await yb(),t=await eM(),n=await MZ(),r=await DZ();return{total:e.length,valid:n.length,orphaned:t.length,missing:r.length,expectedTotal:YN().length}},gGe=[{key:Mt.QUICK_POST,name:fl[Mt.QUICK_POST],description:"To qung co nhanh t bi vit Facebook/Instagram",category:dy[Mt.QUICK_POST],enabled:!0},{key:Mt.CREATIVE_CAMPAIGN,name:fl[Mt.CREATIVE_CAMPAIGN],description:"To chin dch qung co t hnh nh/video",category:dy[Mt.CREATIVE_CAMPAIGN],enabled:!0},{key:Mt.AUDIENCE_CREATOR,name:fl[Mt.AUDIENCE_CREATOR],description:"To i tng mc tiu bng AI",category:dy[Mt.AUDIENCE_CREATOR],enabled:!0},{key:Mt.CLONE_TOOL,name:fl[Mt.CLONE_TOOL],description:"Nhn bn campaign/adset/ad vi AI",category:dy[Mt.CLONE_TOOL],enabled:!0},{key:Mt.REPORT_ANALYSIS,name:fl[Mt.REPORT_ANALYSIS],description:"Phn tch v t vn bo co qung co",category:dy[Mt.REPORT_ANALYSIS],enabled:!0},{key:ln.CREATE_ADS,name:ql[ln.CREATE_ADS],description:"To qung co th cng vi form y ",category:"manual",enabled:!0},{key:ln.CREATE_MESSAGE,name:ql[ln.CREATE_MESSAGE],description:"To qung co tin nhn (Lead Ads)",category:"manual",enabled:!0},{key:ln.AUDIENCE,name:ql[ln.AUDIENCE],description:"To i tng mc tiu th cng",category:"manual",enabled:!0},{key:ln.ADVANCED_ADS,name:ql[ln.ADVANCED_ADS],description:"Cng c ADS nng cao (clone, bulk edit)",category:"manual",enabled:!0},{key:ln.QUICK_AD,name:ql[ln.QUICK_AD],description:"To qung co nhanh t bi vit c sn",category:"manual",enabled:!0}],vGe={super_admin:[Mt.QUICK_POST,Mt.CREATIVE_CAMPAIGN,Mt.AUDIENCE_CREATOR,Mt.CLONE_TOOL,Mt.REPORT_ANALYSIS,ln.CREATE_ADS,ln.CREATE_MESSAGE,ln.AUDIENCE,ln.ADVANCED_ADS,ln.QUICK_AD],admin:[Mt.QUICK_POST,Mt.CREATIVE_CAMPAIGN,Mt.AUDIENCE_CREATOR,Mt.CLONE_TOOL,Mt.REPORT_ANALYSIS,ln.CREATE_ADS,ln.CREATE_MESSAGE,ln.AUDIENCE,ln.ADVANCED_ADS,ln.QUICK_AD],user:[Mt.QUICK_POST,Mt.CREATIVE_CAMPAIGN,Mt.REPORT_ANALYSIS,ln.CREATE_ADS,ln.QUICK_AD]},LZ=async(e={})=>{const t=[];for(const n of gGe)try{const r=await BO(n);t.push(r)}catch(r){console.error(` Failed to seed feature ${n.key}:`,r)}return t},yGe=async()=>{let e=0;for(const[t,n]of Object.entries(vGe))for(const r of n)try{await oGe(t,r,!0),e++}catch(a){console.error(` Failed to set ${t} permission for ${r}:`,a)}return e},xGe=async(e={})=>{const t=await LZ(e),n=await yGe();return{features:t,rolePermissions:n}},bGe=()=>{const[e,t]=g.useState(!0),[n,r]=g.useState(null),[a,i]=g.useState([]),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,h]=g.useState({total:0,valid:0,orphaned:0,missing:0,expectedTotal:0}),m=async()=>{t(!0);try{const[j,w,N,k]=await Promise.all([pGe(),eM(),MZ(),DZ()]);h(j),i(w),l(N),u(k)}catch(j){console.error(" Failed to load features:",j),ne.error("Khng th ti danh sch features")}finally{t(!1)}};g.useEffect(()=>{m()},[]);const p=async j=>{if(!(!j.Id||!window.confirm(`Bn c chc mun xa feature "${j.name}" (${j.key})?

iu ny cng s xa tt c role permissions lin quan.`))){r(j.key);try{await mGe(j.Id,j.key),ne.success(` xa feature: ${j.name}`),m()}catch(N){console.error(" Failed to delete feature:",N);const k=N instanceof Error?N.message:"Unknown error";ne.error(`Khng th xa feature: ${k}`)}finally{r(null)}}},v=async()=>{if(window.confirm(`Bn c chc mun xa TT C ${d.orphaned} features tha?

iu ny khng th hon tc!`)){t(!0);try{const w=await fGe();ne.success(` xa ${w} features tha`),m()}catch(w){console.error(" Failed to cleanup features:",w),ne.error("Khng th xa features")}finally{t(!1)}}},x=async()=>{if(window.confirm(`Bn c mun thm ${d.missing} features cn thiu vo h thng?`)){t(!0);try{await LZ({overwrite:!1}),ne.success(" thm features cn thiu"),m()}catch(w){console.error(" Failed to seed features:",w),ne.error("Khng th thm features")}finally{t(!1)}}},b=async()=>{if(window.confirm(`Bn c mun seed TT C features chun v role permissions?

iu ny s thm features cn thiu v cu hnh quyn mc nh.`)){t(!0);try{const w=await xGe({overwrite:!1});ne.success(` seed ${w.features.length} features v ${w.rolePermissions} role permissions`),m()}catch(w){console.error(" Failed to seed all:",w),ne.error("Khng th seed features")}finally{t(!1)}}},_=j=>{switch(j){case"ai":return s.jsx(Ze,{variant:"default",className:"bg-purple-500",children:"AI"});case"manual":return s.jsx(Ze,{variant:"secondary",children:"Th cng"});case"reporting":return s.jsx(Ze,{variant:"outline",children:"Bo co"});default:return s.jsx(Ze,{variant:"outline",children:"Khc"})}};return e&&d.total===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Hs,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Dn dp Features"}),s.jsx("p",{className:"text-muted-foreground",children:"Qun l v dn dp cc features tha trong h thng"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[s.jsxs(Oe,{children:[s.jsx(Fe,{className:"pb-3",children:s.jsx(Be,{className:"text-sm font-medium",children:"Tng s"})}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold",children:d.total})})]}),s.jsxs(Oe,{children:[s.jsx(Fe,{className:"pb-3",children:s.jsx(Be,{className:"text-sm font-medium text-green-600",children:"Hp l"})}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.valid})})]}),s.jsxs(Oe,{children:[s.jsx(Fe,{className:"pb-3",children:s.jsx(Be,{className:"text-sm font-medium text-red-600",children:"Tha"})}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.orphaned})})]}),s.jsxs(Oe,{children:[s.jsx(Fe,{className:"pb-3",children:s.jsx(Be,{className:"text-sm font-medium text-orange-600",children:"Thiu"})}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:d.missing})})]}),s.jsxs(Oe,{children:[s.jsx(Fe,{className:"pb-3",children:s.jsx(Be,{className:"text-sm font-medium",children:"Mong i"})}),s.jsx(Re,{children:s.jsx("div",{className:"text-2xl font-bold",children:d.expectedTotal})})]})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsxs(J,{onClick:m,disabled:e,variant:"outline",children:[s.jsx(Hs,{className:`h-4 w-4 mr-2 ${e?"animate-spin":""}`}),"Lm mi"]}),d.missing>0&&s.jsxs(J,{onClick:x,disabled:e,variant:"default",children:[s.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Thm ",d.missing," features thiu"]}),d.orphaned>0&&s.jsxs(J,{onClick:v,disabled:e,variant:"destructive",children:[s.jsx(ks,{className:"h-4 w-4 mr-2"}),"Xa ",d.orphaned," features tha"]}),s.jsxs(J,{onClick:b,disabled:e,variant:"secondary",children:[s.jsx(Nx,{className:"h-4 w-4 mr-2"}),"Seed tt c (Features + Roles)"]})]}),c.length>0&&s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(ac,{className:"h-5 w-5 text-orange-500"}),"Features cn thiu (",c.length,")"]}),s.jsx(sn,{children:"Cc features c nh ngha trong code nhng cha c trong database"})]}),s.jsx(Re,{children:s.jsx("div",{className:"space-y-2",children:c.map(j=>s.jsx(Ka,{variant:"default",className:"bg-orange-50 dark:bg-orange-950/20",children:s.jsx(Ga,{children:s.jsx("code",{className:"text-sm font-mono",children:j})})},j))})})]}),a.length>0&&s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(ji,{className:"h-5 w-5 text-red-500"}),"Features tha cn xa (",a.length,")"]}),s.jsx(sn,{children:"Cc features tn ti trong database nhng khng c s dng trong code"})]}),s.jsx(Re,{children:s.jsx("div",{className:"space-y-2",children:a.map(j=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-red-50 dark:bg-red-950/20",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:j.name}),_(j.category)]}),s.jsx("code",{className:"text-sm text-muted-foreground",children:j.key})]}),s.jsx(J,{size:"sm",variant:"destructive",onClick:()=>p(j),disabled:e||n!==null,children:n===j.key?s.jsx(Hs,{className:"h-4 w-4 animate-spin"}):s.jsx(ks,{className:"h-4 w-4"})})]},j.key))})})]}),s.jsx(qs,{}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(Nn,{className:"h-5 w-5 text-green-500"}),"Features hp l (",o.length,")"]}),s.jsx(sn,{children:"Cc features ang c s dng trong h thng"})]}),s.jsx(Re,{children:s.jsx("div",{className:"space-y-2",children:o.map(j=>s.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:j.name}),_(j.category),j.enabled&&s.jsx(Ze,{variant:"outline",className:"text-green-600",children:"ang bt"})]}),s.jsx("code",{className:"text-sm text-muted-foreground",children:j.key}),j.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j.description})]})},j.key))})})]})]})},wGe=async(e,t)=>{try{const{data:n,error:r}=await wt.functions.invoke("bulk-cleanup-data",{body:{daysOld:e,tableName:t}});if(r)throw console.error(" Error cleaning up data:",r),r;return n}catch(n){throw console.error(" Error in cleanupOldData:",n),n}},u6=async e=>{try{const{data:t,error:n}=await wt.functions.invoke("export-user-data",{body:{userId:e}});if(n)throw console.error(" Error exporting user data:",n),n;return t.data}catch(t){throw console.error(" Error in exportUserData:",t),t}},_Ge=async()=>{try{const{data:e,error:t}=await wt.functions.invoke("get-orphaned-records");if(t)throw console.error(" Error getting orphaned records:",t),t;return e.details}catch(e){throw console.error(" Error in getOrphanedRecords:",e),e}},d6=(e,t)=>{const n=JSON.stringify(e,null,2),r=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)};function jGe(){const{user:e}=Mn(),[t,n]=g.useState(0),[r,a]=g.useState(!1),[i,o]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState("90"),[h,m]=g.useState("user_roles"),[p,v]=g.useState("");g.useEffect(()=>{x()},[]);const x=async()=>{try{const w=await _Ge(),N=Object.values(w).reduce((k,C)=>k+C,0);n(N)}catch(w){console.error("Error fetching orphaned records:",w)}},b=async()=>{if(!u||parseInt(u)<1){ne.error("Please enter a valid number of days");return}if(window.confirm(`Are you sure you want to delete all ${h} records older than ${u} days? This action cannot be undone.`))try{a(!0);const N=await wGe(parseInt(u),h);ne.success(N.message),o(!1),x()}catch(N){console.error("Error cleaning up data:",N),ne.error(N.message||"Failed to cleanup data")}finally{a(!1)}},_=async()=>{if(!p){ne.error("Please enter a user ID");return}try{a(!0);const w=await u6(p),N=`user_data_${p}_${new Date().toISOString().split("T")[0]}.json`;d6(w,N),ne.success("User data exported successfully"),c(!1),v("")}catch(w){console.error("Error exporting user data:",w),ne.error(w.message||"Failed to export user data")}finally{a(!1)}},j=async()=>{if(e)try{a(!0);const w=await u6(e.id),N=`my_data_${new Date().toISOString().split("T")[0]}.json`;d6(w,N),ne.success("Your data has been exported")}catch(w){console.error("Error exporting data:",w),ne.error(w.message||"Failed to export your data")}finally{a(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Qun l d liu"}),s.jsx("p",{className:"text-muted-foreground",children:"Qun l d liu h thng, dn dp v xut d liu"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(ks,{className:"h-5 w-5"}),"Dn dp d liu"]}),s.jsx(sn,{children:"Xa cc bn ghi c khi c s d liu"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs(J,{onClick:()=>o(!0),className:"w-full",disabled:r,children:[s.jsx(ks,{className:"h-4 w-4 mr-2"}),"Dn dp d liu c"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cu hnh v xa d liu c hn mt ngy c th"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(dT,{className:"h-5 w-5"}),"Xut d liu ngi dng"]}),s.jsx(sn,{children:"Xut d liu ngi dng  tun th GDPR"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs(J,{onClick:()=>c(!0),variant:"outline",className:"w-full",disabled:r,children:[s.jsx(wce,{className:"h-4 w-4 mr-2"}),"Xut ngi dng c th"]}),s.jsxs(J,{onClick:j,variant:"outline",className:"w-full",disabled:r,children:[s.jsx(dT,{className:"h-4 w-4 mr-2"}),"Xut d liu ca ti"]})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(ac,{className:"h-5 w-5"}),"Bn ghi m ci"]}),s.jsx(sn,{children:"Cc bn ghi thiu tham chiu"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-destructive",children:t}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Bn ghi tm thy"})]}),s.jsxs(J,{onClick:x,variant:"outline",className:"w-full",disabled:r,children:[s.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Lm mi"]})]})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(jx,{className:"h-5 w-5"}),"Thng k c s d liu"]}),s.jsx(sn,{children:"Tng quan v cc bng v s lng bn ghi"})]}),s.jsx(Re,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Bng h s"}),s.jsx(Ze,{variant:"outline",children:"Hot ng"})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Bng vai tr ngi dng"}),s.jsx(Ze,{variant:"outline",children:"Hot ng"})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Bn ghi m ci"}),s.jsx(Ze,{variant:t>0?"destructive":"outline",children:t})]})]})})]}),s.jsx(yr,{open:i,onOpenChange:o,children:s.jsxs(dr,{children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"Dn dp d liu c"}),s.jsx(Ca,{children:"Xa cc bn ghi c hn s ngy c ch nh"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"table",children:"Bng"}),s.jsxs(kn,{value:h,onValueChange:m,children:[s.jsx(wn,{children:s.jsx(Cn,{})}),s.jsxs(_n,{children:[s.jsx(st,{value:"user_roles",children:"Vai tr ngi dng"}),s.jsx(st,{value:"profiles",children:"H s"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"days",children:"S ngy c"}),s.jsx(Ke,{id:"days",type:"number",placeholder:"90",value:u,onChange:w=>d(w.target.value),min:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Cc bn ghi c hn s ngy ny s b xa"})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>o(!1),disabled:r,children:"Hy"}),s.jsx(J,{onClick:b,disabled:r,children:r?"ang dn dp...":"Dn dp"})]})]})}),s.jsx(yr,{open:l,onOpenChange:c,children:s.jsxs(dr,{children:[s.jsxs(hr,{children:[s.jsx(fr,{children:"Xut d liu ngi dng"}),s.jsx(Ca,{children:"Xut tt c d liu cho mt ngi dng c th (tun th GDPR)"})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"userId",children:"ID ngi dng"}),s.jsx(Ke,{id:"userId",placeholder:"Nhp UUID ngi dng",value:p,onChange:w=>v(w.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"D liu s c xut di dng file JSON"})]})}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>c(!1),disabled:r,children:"Hy"}),s.jsx(J,{onClick:_,disabled:r,children:r?"ang xut...":"Xut"})]})]})})]})}function SGe(){const[e,t]=g.useState([]),[n,r]=g.useState(!0),[a,i]=g.useState(""),[o,l]=g.useState("all");g.useEffect(()=>{c()},[]);const c=async()=>{try{r(!0),t(u())}catch(v){console.error("Error fetching logs:",v),t(u())}finally{r(!1)}},u=()=>{const v=Date.now();return[{id:"1",timestamp:v-3e5,event_message:" User role assigned successfully",metadata:{level:"info",status:200,execution_time_ms:245}},{id:"2",timestamp:v-6e5,event_message:" System stats retrieved",metadata:{level:"info",status:200,execution_time_ms:189}},{id:"3",timestamp:v-9e5,event_message:" Slow query detected in get-all-users",metadata:{level:"warning",status:200,execution_time_ms:2450}},{id:"4",timestamp:v-12e5,event_message:" Authentication failed",metadata:{level:"error",status:401,execution_time_ms:50}},{id:"5",timestamp:v-15e5,event_message:" User deleted successfully",metadata:{level:"info",status:200,execution_time_ms:567}}]},d=e.filter(v=>{var _;const x=v.event_message.toLowerCase().includes(a.toLowerCase()),b=o==="all"||(((_=v.metadata)==null?void 0:_.level)||"info")===o;return x&&b}),h=v=>{switch(v){case"info":return s.jsx(Ze,{variant:"outline",children:"Thng tin"});case"warning":return s.jsx(Ze,{className:"bg-yellow-100 text-yellow-800",children:"Cnh bo"});case"error":return s.jsx(Ze,{variant:"destructive",children:"Li"});default:return s.jsx(Ze,{variant:"outline",children:"Thng tin"})}},m=v=>new Date(v).toLocaleString("vi-VN"),p=v=>v?v<1e3?`${v}ms`:`${(v/1e3).toFixed(2)}s`:"-";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Gim st h thng"}),s.jsx("p",{className:"text-muted-foreground",children:"Gim st nht k h thng v hiu sut edge function"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Tng yu cu"}),s.jsx(vp,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Nht k gn y"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"T l thnh cng"}),s.jsx(oS,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:["...",s.jsx("p",{className:"text-xs text-muted-foreground",children:"Phn hi khng c li"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Li"}),s.jsx(is,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.filter(v=>{var x;return((x=v.metadata)==null?void 0:x.level)==="error"}).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Phn hi li"})]})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Nht k Edge Function"}),s.jsx(sn,{children:"Cc s kin v thc thi edge function gn y"}),s.jsxs("div",{className:"flex gap-4 mt-4",children:[s.jsx(Ke,{placeholder:"Tm kim nht k...",value:a,onChange:v=>i(v.target.value),className:"max-w-sm"}),s.jsxs(kn,{value:o,onValueChange:l,children:[s.jsx(wn,{className:"w-[180px]",children:s.jsx(Cn,{placeholder:"Lc theo cp "})}),s.jsxs(_n,{children:[s.jsx(st,{value:"all",children:"Tt c cp "}),s.jsx(st,{value:"info",children:"Thng tin"}),s.jsx(st,{value:"warning",children:"Cnh bo"}),s.jsx(st,{value:"error",children:"Li"})]})]}),s.jsxs(J,{onClick:c,variant:"outline",children:[s.jsx(tu,{className:"h-4 w-4 mr-2"}),"Lm mi"]})]})]}),s.jsx(Re,{children:n?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):d.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Khng tm thy nht k ph hp vi tiu ch"}):s.jsx("div",{className:"space-y-4",children:d.map(v=>{var x,b,_;return s.jsx("div",{className:"flex items-start justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h((x=v.metadata)==null?void 0:x.level),((b=v.metadata)==null?void 0:b.status)&&s.jsxs(Ze,{variant:"outline",children:["Trng thi: ",v.metadata.status]}),((_=v.metadata)==null?void 0:_.execution_time_ms)&&s.jsxs(Ze,{variant:"outline",className:"gap-1",children:[s.jsx(tu,{className:"h-3 w-3"}),p(v.metadata.execution_time_ms)]})]}),s.jsx("p",{className:"text-sm font-mono",children:v.event_message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:m(v.timestamp)})]})},v.id)})})})]})]})}const P_=It.TABLES.PAYMENT_SETTINGS,NGe=async()=>{try{const e=await fetch(`${ht(P_)}?sort=setting_key`,{method:"GET",headers:lt()});if(!e.ok)throw new Error(`HTTP ${e.status}: ${await e.text()}`);return(await e.json()).list||[]}catch(e){return console.error(" getPaymentSettings error:",e),[]}},kGe=async(e,t,n)=>{var r;try{const o=(r=(await(await fetch(`${ht(P_)}?where=(setting_key,eq,${e})&limit=1`,{method:"GET",headers:lt()})).json()).list)==null?void 0:r[0];o?await fetch(ht(P_,String(o.Id)),{method:"PATCH",headers:lt(),body:JSON.stringify({setting_value:t,description:n,updated_at:new Date().toISOString()})}):await fetch(ht(P_),{method:"POST",headers:lt(),body:JSON.stringify({setting_key:e,setting_value:t,description:n})})}catch(a){throw console.error(" updatePaymentSetting error:",a),a}};function CGe(){const[e,t]=g.useState(!0),[n,r]=g.useState(!1),[a,i]=g.useState({web2m_api_token:"",bank_code:"VCB",bank_account_number:"",bank_account_name:"",bank_password:"",payment_description_template:"THANHTOAN {code}"});g.useEffect(()=>{o()},[]);const o=async()=>{try{t(!0);const u=await NGe(),d={};u.forEach(h=>{d[h.setting_key]=h.setting_value}),i(h=>({...h,...d}))}catch(u){console.error("Error fetching settings:",u),ne.error("Khng th ti ci t")}finally{t(!1)}},l=async()=>{try{r(!0);const u=Object.entries(a).filter(([d,h])=>h);await Promise.all(u.map(([d,h])=>kGe(d,h))),ne.success(" lu ci t thnh cng")}catch(u){console.error("Error saving settings:",u),ne.error("Khng th lu ci t")}finally{r(!1)}},c=(u,d)=>{i(h=>({...h,[u]:d}))};return e?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Ci t thanh ton"}),s.jsx("p",{className:"text-muted-foreground",children:"Cu hnh API Web2M v thng tin ngn hng"})]}),s.jsxs("div",{className:"grid gap-6",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(Hz,{className:"h-5 w-5"}),"Cu hnh API Web2M"]}),s.jsx(sn,{children:"Token API t api.web2m.com  kim tra giao dch t ng"})]}),s.jsx(Re,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"web2m_api_token",children:"API Token Web2M"}),s.jsx(Ke,{id:"web2m_api_token",type:"password",placeholder:"Nhp token t api.web2m.com",value:a.web2m_api_token,onChange:u=>c("web2m_api_token",u.target.value)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ly token ti"," ",s.jsx("a",{href:"https://api.web2m.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"api.web2m.com"})]})]})})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(Bz,{className:"h-5 w-5"}),"Thng tin ngn hng nhn tin"]}),s.jsx(sn,{children:"Cu hnh ti khon ngn hng  nhn thanh ton"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"bank_code",children:"M ngn hng"}),s.jsx(Ke,{id:"bank_code",placeholder:"VCB, ACB, MB...",value:a.bank_code,onChange:u=>c("bank_code",u.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"bank_account_number",children:"S ti khon"}),s.jsx(Ke,{id:"bank_account_number",placeholder:"0123456789",value:a.bank_account_number,onChange:u=>c("bank_account_number",u.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"bank_account_name",children:"Tn ch ti khon"}),s.jsx(Ke,{id:"bank_account_name",placeholder:"NGUYEN VAN A",value:a.bank_account_name,onChange:u=>c("bank_account_name",u.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"bank_password",children:"Mt khu ngn hng (cho API Web2M)"}),s.jsx(Ke,{id:"bank_password",type:"password",placeholder:"Mt khu ti khon ngn hng",value:a.bank_password,onChange:u=>c("bank_password",u.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"API Web2M cn mt khu  kim tra lch s giao dch"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"payment_description_template",children:"Mu ni dung chuyn khon"}),s.jsx(Oo,{id:"payment_description_template",placeholder:"THANHTOAN {code}",value:a.payment_description_template,onChange:u=>c("payment_description_template",u.target.value),rows:3}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["S dng ","{code}",' cho m giao dch. VD: "THANHTOAN ',"{code}",'"  "THANHTOAN ABC123"']})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(J,{onClick:l,disabled:n,children:[s.jsx(cS,{className:"h-4 w-4 mr-2"}),n?"ang lu...":"Lu ci t"]})})]})}const QN=It.TABLES.PAYMENT_PACKAGES,tM=async(e=!1)=>{try{let t=ht(QN);const n=new URLSearchParams;e||n.append("where","(is_active,eq,true)");const r=n.toString();r&&(t+=`?${r}`);const a=await fetch(t,{method:"GET",headers:lt()});if(!a.ok)throw new Error(`HTTP ${a.status}: ${await a.text()}`);return((await a.json()).list||[]).map(l=>{let c=[];if(Array.isArray(l.features))c=l.features;else if(typeof l.features=="string"){const u=l.features.trim();try{const d=JSON.parse(u);c=Array.isArray(d)?d:[]}catch{if(console.warn(` Failed to parse features for package ${l.Id}:`,u),u.startsWith("{")&&u.endsWith("}"))try{const h=u.slice(1,-1),m=Array.from(h.matchAll(/"([^"\\]+)"/g)).map(v=>v[1]);c=(m.length>0?m:h.split(",").map(v=>v.trim().replace(/^"|"$/g,""))).filter(Boolean)}catch(h){console.error(" Postgres-style parsing failed:",h),c=[]}else if(u.includes("['")||u.includes("']"))try{const h=u.replace(/'/g,'"'),m=JSON.parse(h);c=Array.isArray(m)?m:[]}catch(h){console.error(" Still failed after single-quote fix:",h),c=[]}else!u.includes("[")&&!u.includes("{")&&u.includes(",")?c=u.split(",").map(h=>h.trim().replace(/^"|"$/g,"")):c=[]}}return c=Array.from(new Set(c.filter(Boolean))),{...l,id:l.id||(l.Id?String(l.Id):void 0),features:c}})}catch(t){return console.error(" getPaymentPackages error:",t),[]}},AGe=async e=>{try{const t=await fetch(ht(QN),{method:"POST",headers:lt(),body:JSON.stringify({...e,currency:e.currency||"VND",features:JSON.stringify(e.features||[]),is_active:e.is_active??!0})});if(!t.ok)throw new Error(`HTTP ${t.status}: ${await t.text()}`);const n=await t.json();return{...n,id:n.id||(n.Id?String(n.Id):void 0),features:typeof n.features=="string"?JSON.parse(n.features):Array.isArray(n.features)?n.features:[]}}catch(t){throw console.error(" createPaymentPackage error:",t),t}},EGe=async(e,t)=>{try{const n=`${It.BASE_URL}/api/v2/tables/${QN}/records`,r={...t,Id:parseInt(e)};t.features!==void 0&&(r.features=JSON.stringify(t.features));const a=await fetch(n,{method:"PATCH",headers:lt(),body:JSON.stringify(r)});if(!a.ok){const o=await a.text();throw console.error(" Update failed:",o),new Error(`HTTP ${a.status}: ${o}`)}const i=await a.json();return{...i,id:i.id||(i.Id?String(i.Id):void 0),features:typeof i.features=="string"?JSON.parse(i.features):Array.isArray(i.features)?i.features:[]}}catch(n){throw console.error(" updatePaymentPackage error:",n),n}},TGe=async e=>{try{const t=`${It.BASE_URL}/api/v2/tables/${QN}/records`,n=await fetch(t,{method:"DELETE",headers:lt(),body:JSON.stringify([{Id:parseInt(e)}])});if(!n.ok){const r=await n.text();throw console.error(" Delete failed:",r),new Error(`HTTP ${n.status}: ${r}`)}}catch(t){throw console.error(" deletePaymentPackage error:",t),t}},VO=[{id:"ads_management",name:"Qun l qung co Facebook"},{id:"campaign_creation",name:"To chin dch qung co"},{id:"ai_chat",name:"Tr l AI chat"},{id:"ai_audience",name:"AI to audience targeting"},{id:"ai_creative",name:"AI to creative qung co"},{id:"quick_campaign",name:"To campaign nhanh t post"},{id:"automated_rules",name:"Quy tc t ng ha"},{id:"labels_management",name:"Qun l nhn campaign"},{id:"report_ads",name:"Bo co ADS"},{id:"report_sale",name:"Bo co Sale"},{id:"report_summary",name:"Bo co Tng hp"},{id:"multi_account",name:"Qun l nhiu ti khon qung co"},{id:"clone_campaigns",name:"Sao chp campaigns nng cao"},{id:"custom_metrics",name:"Ty chnh metrics hin th"},{id:"export_data",name:"Xut d liu Excel/CSV"}],h6=VO.reduce((e,t)=>(e[t.id]=t.name,e),{});function PGe(){const[e,t]=g.useState([]),[n,r]=g.useState(!0),[a,i]=g.useState(!1),[o,l]=g.useState(null),[c,u]=g.useState({name:"",description:"",price:"",duration_days:"30",features:[],is_active:!0});g.useEffect(()=>{d()},[]);const d=async()=>{try{r(!0);const b=await tM(!0);t(b)}catch(b){console.error("Error fetching packages:",b),ne.error("Khng th ti danh sch gi")}finally{r(!1)}},h=b=>{b?(l(b),u({name:b.name,description:b.description||"",price:b.price.toString(),duration_days:b.duration_days.toString(),features:Array.isArray(b.features)?b.features:[],is_active:b.is_active})):(l(null),u({name:"",description:"",price:"",duration_days:"30",features:[],is_active:!0})),i(!0)},m=b=>{u(_=>({..._,features:_.features.includes(b)?_.features.filter(j=>j!==b):[..._.features,b]}))},p=async()=>{try{if(!c.name.trim()){ne.error("Vui lng nhp tn gi");return}const b=parseFloat(c.price);if(!c.price||isNaN(b)||b<=0){ne.error("Vui lng nhp gi hp l (ln hn 0)");return}const _=parseInt(c.duration_days);if(!c.duration_days||isNaN(_)||_<=0){ne.error("Vui lng nhp thi hn hp l (ln hn 0)");return}const j={name:c.name.trim(),description:c.description.trim(),price:b,duration_days:_,features:c.features,is_active:c.is_active};o?(await EGe(o.id,j),ne.success(" cp nht gi thnh cng")):(await AGe(j),ne.success(" to gi mi thnh cng")),i(!1),d()}catch(b){console.error("Error saving package:",b),ne.error("Khng th lu gi")}},v=async b=>{if(confirm("Bn c chc chn mun xa gi ny?"))try{await TGe(b),ne.success(" xa gi thnh cng"),d()}catch(_){console.error("Error deleting package:",_),ne.error("Khng th xa gi")}},x=b=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(b);return n?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Qun l gi thanh ton"}),s.jsx("p",{className:"text-muted-foreground",children:"To v qun l cc gi dch v"})]}),s.jsxs(J,{onClick:()=>h(),children:[s.jsx(nu,{className:"h-4 w-4 mr-2"}),"To gi mi"]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.map(b=>s.jsxs(Oe,{className:b.is_active?"":"opacity-60",children:[s.jsxs(Fe,{children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nx,{className:"h-5 w-5"}),s.jsx(Be,{children:b.name})]}),s.jsx(Ze,{variant:b.is_active?"default":"secondary",children:b.is_active?"Hot ng":"Tm dng"})]}),s.jsx(sn,{children:b.description})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hl,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"text-2xl font-bold",children:x(b.price)}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",b.duration_days," ngy"]})]}),Array.isArray(b.features)&&b.features.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"Tnh nng:"}),s.jsx("ul",{className:"text-sm space-y-1",children:b.features.map((_,j)=>{const w=VO.find(N=>N.id===_);return w?s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-primary",children:""}),w.name]},j):null})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>h(b),children:[s.jsx(X2,{className:"h-4 w-4 mr-1"}),"Sa"]}),s.jsx(J,{variant:"outline",size:"sm",onClick:()=>v(b.id),children:s.jsx(ks,{className:"h-4 w-4"})})]})]})]},b.id)),e.length===0&&s.jsx(Oe,{className:"col-span-full",children:s.jsxs(Re,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(Nx,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Cha c gi no. To gi u tin  bt u!"})]})})]}),s.jsx(yr,{open:a,onOpenChange:i,children:s.jsxs(dr,{className:"max-w-2xl",children:[s.jsxs(hr,{children:[s.jsx(fr,{children:o?"Chnh sa gi":"To gi mi"}),s.jsx(Ca,{children:"in thng tin gi dch v bn di"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"name",children:"Tn gi *"}),s.jsx(Ke,{id:"name",value:c.name,onChange:b=>u({...c,name:b.target.value}),placeholder:"VD: Gi c bn"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"price",children:"Gi (VN) *"}),s.jsx(Ke,{id:"price",type:"number",value:c.price,onChange:b=>u({...c,price:b.target.value}),placeholder:"100000"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"description",children:"M t"}),s.jsx(Oo,{id:"description",value:c.description,onChange:b=>u({...c,description:b.target.value}),placeholder:"M t ngn v gi",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"duration_days",children:"Thi hn (ngy)"}),s.jsx(Ke,{id:"duration_days",type:"number",value:c.duration_days,onChange:b=>u({...c,duration_days:b.target.value}),placeholder:"30"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ge,{children:"Chc nng c s dng"}),s.jsx(As,{className:"h-[300px] rounded-md border p-4",children:s.jsx("div",{className:"space-y-3",children:VO.map(b=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xs,{id:b.id,checked:c.features.includes(b.id),onCheckedChange:()=>m(b.id)}),s.jsx(ge,{htmlFor:b.id,className:"text-sm font-normal cursor-pointer",children:b.name})]},b.id))})}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[" chn ",c.features.length," chc nng"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ki,{id:"is_active",checked:c.is_active,onCheckedChange:b=>u({...c,is_active:b})}),s.jsx(ge,{htmlFor:"is_active",children:"Kch hot gi ny"})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>i(!1),children:"Hy"}),s.jsx(J,{onClick:p,children:o?"Cp nht":"To gi"})]})]})})]})}const OGe=({open:e,onOpenChange:t,transaction:n,onVerified:r})=>{const{user:a}=Mn(),[i,o]=g.useState(""),[l,c]=g.useState(!1),u=async()=>{if(!(!n||!a))try{c(!0);const{data:d,error:h}=await wt.functions.invoke("verify-payment",{body:{transactionId:n.id,userId:n.user_id,adminId:a.id,notes:i}});if(h)throw h;ne.success(" Payment verified successfully!"),r(),t(!1),o("")}catch(d){console.error("Error verifying payment:",d),ne.error(d instanceof Error?d.message:"Failed to verify payment")}finally{c(!1)}};return n?s.jsx(yr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"sm:max-w-[500px]",children:[s.jsxs(hr,{children:[s.jsxs(fr,{className:"flex items-center gap-2",children:[s.jsx(Nn,{className:"h-5 w-5 text-primary"}),"Verify Payment"]}),s.jsx(Ca,{children:"Verify this payment transaction and activate user subscription"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Transaction Details"}),s.jsxs("div",{className:"rounded-lg border p-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Transaction ID:"}),s.jsxs(Ze,{variant:"outline",className:"font-mono",children:[n.id.slice(0,8),"..."]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Package:"}),s.jsx(Ze,{children:n.package_id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),s.jsxs("span",{className:"font-semibold",children:[n.amount.toLocaleString("vi-VN")," VN"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Payment Method:"}),s.jsx("span",{children:n.payment_method})]}),n.transaction_code&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Transaction Code:"}),s.jsx(Ze,{variant:"secondary",className:"font-mono",children:n.transaction_code})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),s.jsx(Ze,{variant:n.status==="pending"?"secondary":"default",children:n.status})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"notes",children:"Verification Notes (Optional)"}),s.jsx(Oo,{id:"notes",placeholder:"Add any notes about this verification...",value:i,onChange:d=>o(d.target.value),rows:3})]}),s.jsxs("div",{className:"rounded-lg bg-muted p-3 text-sm",children:[s.jsx("p",{className:"font-medium mb-1",children:" Action Required:"}),s.jsx("p",{className:"text-muted-foreground",children:"By verifying this payment, you will:"}),s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-muted-foreground",children:[s.jsx("li",{children:"Mark the transaction as completed"}),s.jsx("li",{children:"Activate or extend the user's subscription"}),s.jsx("li",{children:"Grant access to package features"})]})]})]}),s.jsxs(qa,{children:[s.jsx(J,{variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),s.jsx(J,{onClick:u,disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Verify & Activate"]})})]})]})}):null};function IGe(){const[e,t]=g.useState([]),[n,r]=g.useState(!0),[a,i]=g.useState(null),[o,l]=g.useState(!1),c=async()=>{try{r(!0);const{data:m,error:p}=await wt.from("payment_transactions").select("*").order("created_at",{ascending:!1});if(p)throw p;t(m||[])}catch(m){console.error(" Error loading transactions:",m),ne.error("Failed to load transactions")}finally{r(!1)}};g.useEffect(()=>{c()},[]);const u=m=>{i(m),l(!0)},d=m=>{switch(m){case"completed":return s.jsx(Nn,{className:"h-4 w-4 text-green-600"});case"pending":return s.jsx(tu,{className:"h-4 w-4 text-yellow-600"});case"failed":return s.jsx(ji,{className:"h-4 w-4 text-red-600"});default:return null}},h=m=>{switch(m){case"completed":return s.jsx(Ze,{variant:"default",children:"Completed"});case"pending":return s.jsx(Ze,{variant:"secondary",children:"Pending"});case"failed":return s.jsx(Ze,{variant:"destructive",children:"Failed"});default:return s.jsx(Ze,{variant:"outline",children:m})}};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(zt,{className:"h-8 w-8 animate-spin"})}):s.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Payment Transactions"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Verify payments and manage user subscriptions"})]}),s.jsxs(J,{onClick:c,variant:"outline",children:[s.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Refresh"]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"All Transactions"}),s.jsxs(sn,{children:[e.length," total transactions","  ",e.filter(m=>m.status==="pending").length," pending verification"]})]}),s.jsx(Re,{children:e.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No transactions found"}):s.jsxs(sb,{children:[s.jsx(Af,{children:s.jsxs(Ma,{children:[s.jsx(Rn,{children:"Date"}),s.jsx(Rn,{children:"User ID"}),s.jsx(Rn,{children:"Package"}),s.jsx(Rn,{children:"Amount"}),s.jsx(Rn,{children:"Payment Method"}),s.jsx(Rn,{children:"Status"}),s.jsx(Rn,{children:"Actions"})]})}),s.jsx(Ef,{children:e.map(m=>s.jsxs(Ma,{children:[s.jsx(Qt,{children:Bt(new Date(m.created_at),"dd/MM/yyyy HH:mm")}),s.jsx(Qt,{children:s.jsxs(Ze,{variant:"outline",className:"font-mono text-xs",children:[m.user_id.slice(0,8),"..."]})}),s.jsx(Qt,{children:s.jsx(Ze,{children:m.package_id})}),s.jsxs(Qt,{className:"font-semibold",children:[m.amount.toLocaleString("vi-VN")," VN"]}),s.jsx(Qt,{children:m.payment_method}),s.jsx(Qt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[d(m.status),h(m.status)]})}),s.jsx(Qt,{children:m.status==="pending"&&s.jsxs(J,{size:"sm",onClick:()=>u(m),children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Verify"]})})]},m.id))})]})})]}),s.jsx(OGe,{open:o,onOpenChange:l,transaction:a,onVerified:c})]})}const RGe=[{title:"Bng iu khin",value:"dashboard",icon:Tce},{title:"Qun l ngi dng",value:"users",icon:yl},{title:"Qun l tnh nng",value:"features",icon:Ece},{title:"Tnh nng AI",value:"ai-features",icon:Zr},{title:"Dn dp tnh nng",value:"cleanup",icon:ks},{title:"Qun l d liu",value:"data",icon:jx},{title:"Gim st h thng",value:"monitoring",icon:vp},{title:"Ci t thanh ton",value:"payment-settings",icon:lS},{title:"Qun l gi",value:"payment-packages",icon:Nx},{title:"Thanh ton & Subscriptions",value:"subscriptions",icon:sj}];function $Ge({activeTab:e,onTabChange:t}){const{state:n}=xv(),{signOut:r}=Mn(),a=n==="collapsed";return s.jsx(z$,{className:a?"w-14":"w-60",collapsible:"icon",children:s.jsxs(W$,{children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fT,{className:"h-6 w-6 text-primary"}),!a&&s.jsx("span",{className:"font-bold text-lg",children:"Qun tr vin"})]})}),s.jsxs(q$,{children:[s.jsx(K$,{children:"iu hng"}),s.jsx(G$,{children:s.jsx(Y$,{children:RGe.map(i=>s.jsx(Q$,{children:s.jsxs(X$,{onClick:()=>t(i.value),className:e===i.value?"bg-primary/10 text-primary font-medium":"hover:bg-muted/50",children:[s.jsx(i.icon,{className:"h-4 w-4"}),!a&&s.jsx("span",{children:i.title})]})},i.title))})})]}),s.jsx("div",{className:"mt-auto p-4 border-t",children:s.jsxs(J,{variant:"ghost",className:"w-full justify-start",onClick:r,children:[s.jsx(Wz,{className:"h-4 w-4"}),!a&&s.jsx("span",{className:"ml-2",children:"ng xut"})]})})]})})}function MGe(){const[e,t]=g.useState("dashboard");return s.jsx(V$,{children:s.jsx(ng,{value:e,onValueChange:t,className:"w-full",children:s.jsxs("div",{className:"min-h-screen flex w-full",children:[s.jsx($Ge,{activeTab:e,onTabChange:t}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("header",{className:"h-14 border-b flex items-center px-4 bg-background",children:[s.jsx(H$,{}),s.jsx("div",{className:"ml-4",children:s.jsx("h1",{className:"text-xl font-semibold",children:"Bng iu khin Qun tr vin"})})]}),s.jsxs("main",{className:"flex-1 p-6 overflow-auto",children:[s.jsx(di,{value:"dashboard",className:"mt-0",children:s.jsx(QKe,{})}),s.jsx(di,{value:"users",className:"mt-0",children:s.jsx(rGe,{})}),s.jsx(di,{value:"features",className:"mt-0",children:s.jsx(uGe,{})}),s.jsx(di,{value:"ai-features",className:"mt-0",children:s.jsx(dGe,{})}),s.jsx(di,{value:"cleanup",className:"mt-0",children:s.jsx(bGe,{})}),s.jsx(di,{value:"data",className:"mt-0",children:s.jsx(jGe,{})}),s.jsx(di,{value:"monitoring",className:"mt-0",children:s.jsx(SGe,{})}),s.jsx(di,{value:"payment-settings",className:"mt-0",children:s.jsx(CGe,{})}),s.jsx(di,{value:"payment-packages",className:"mt-0",children:s.jsx(PGe,{})}),s.jsx(di,{value:"subscriptions",className:"mt-0",children:s.jsx(IGe,{})})]})]})]})})})}const DGe=[{title:"Gi ca ti",url:"/dashboard/subscription",icon:lS},{title:"Gi dch v",url:"/dashboard/packages",icon:Nx},{title:"Lch s thanh ton",url:"/dashboard/billing",icon:sj},{title:"Thng k s dng",url:"/dashboard/usage",icon:Bg}];function LGe(){const{state:e}=xv(),t=cs(),n=e==="collapsed",r=({isActive:a})=>a?"bg-primary/10 text-primary font-medium":"hover:bg-muted/50";return s.jsx(z$,{className:n?"w-16":"w-64",collapsible:"icon",children:s.jsxs(W$,{children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lS,{className:"h-6 w-6 text-primary"}),!n&&s.jsx("span",{className:"font-bold text-lg",children:"Dashboard"})]})}),s.jsxs(q$,{children:[s.jsx(K$,{children:"Menu"}),s.jsx(G$,{children:s.jsx(Y$,{children:DGe.map(a=>s.jsx(Q$,{children:s.jsx(X$,{asChild:!0,children:s.jsxs(zfe,{to:a.url,end:!0,className:r,title:a.title,children:[s.jsx(a.icon,{className:"h-4 w-4"}),!n&&s.jsx("span",{children:a.title})]})})},a.title))})})]}),s.jsx("div",{className:"mt-auto p-4 border-t",children:s.jsxs(J,{variant:"ghost",className:"w-full justify-start",onClick:()=>t("/"),children:[s.jsx(Cce,{className:"h-4 w-4"}),!n&&s.jsx("span",{className:"ml-2",children:"Back to Home"})]})})]})})}function FGe(){return s.jsx(V$,{defaultOpen:!0,children:s.jsxs("div",{className:"min-h-screen flex w-full",children:[s.jsx(LGe,{}),s.jsxs("div",{className:"flex-1 flex flex-col w-full",children:[s.jsxs("header",{className:"h-14 border-b flex items-center px-4 bg-background sticky top-0 z-40",children:[s.jsx(H$,{}),s.jsx("div",{className:"ml-4",children:s.jsx("h1",{className:"text-xl font-semibold",children:"User Dashboard"})})]}),s.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-6",children:s.jsx(Efe,{})})]})]})})}const FZ=It.TABLES.USER_SUBSCRIPTIONS,BGe=async e=>{var t;try{const n=await fetch(`${ht(FZ)}?where=(user_id,eq,${e})~and(status,eq,active)&limit=1&sort=-created_at`,{method:"GET",headers:lt()});if(!n.ok)throw new Error(`HTTP ${n.status}: ${await n.text()}`);return((t=(await n.json()).list)==null?void 0:t[0])||null}catch(n){throw console.error(" getActiveSubscription error:",n),n}},UGe=async e=>{try{const t=await fetch(`${ht(FZ)}?where=(user_id,eq,${e})&sort=-created_at`,{method:"GET",headers:lt()});if(!t.ok)throw new Error(`HTTP ${t.status}: ${await t.text()}`);return(await t.json()).list||[]}catch(t){throw console.error(" getUserSubscriptions error:",t),t}},BZ=()=>{const{user:e}=Mn(),[t,n]=g.useState(null),[r,a]=g.useState(!0),[i,o]=g.useState(null);g.useEffect(()=>{(async()=>{if(!e){n(null),a(!1);return}try{a(!0),o(null);const m=await BGe(e.id);if(m){const p=new Date,v=new Date(m.end_date),x={id:String(m.Id||""),user_id:m.user_id,package_id:m.package_id,status:v<p?"expired":m.status,start_date:m.start_date,end_date:m.end_date,auto_renew:m.auto_renew,created_at:m.created_at,updated_at:m.updated_at};v<p,n(x)}else{const v=(await UGe(e.id)).find(x=>x.status==="trial");if(v){const x=new Date,b=new Date(v.end_date),_={id:String(v.Id||""),user_id:v.user_id,package_id:v.package_id,status:b<x?"expired":v.status,start_date:v.start_date,end_date:v.end_date,auto_renew:v.auto_renew,created_at:v.created_at,updated_at:v.updated_at};b<x,n(_)}else n(null)}}catch(m){console.error(" Error fetching subscription:",m),o("Failed to fetch subscription"),n(null)}finally{a(!1)}})()},[e]);const l=()=>{if(!t)return!1;const h=new Date,m=new Date(t.end_date);return(t.status==="active"||t.status==="trial")&&m>h},c=()=>(t==null?void 0:t.status)==="trial"&&l(),u=()=>{if(!t)return 0;const h=new Date,p=new Date(t.end_date).getTime()-h.getTime(),v=Math.ceil(p/(1e3*60*60*24));return Math.max(0,v)},d=()=>{const h=u();return h>0&&h<=7};return{subscription:t,loading:r,error:i,hasActiveSubscription:l(),isTrial:c(),daysRemaining:u(),isExpiringSoon:d()}},UZ=()=>{const{subscription:e,hasActiveSubscription:t}=BZ(),[n,r]=g.useState(null),[a,i]=g.useState({campaigns:0,adAccounts:0,aiCreditsUsed:0,ads:0}),[o,l]=g.useState(!0);g.useEffect(()=>{(async()=>{if(!e){r(null),l(!1);return}try{const v=c(e.package_id);r(v)}catch(v){console.error("Error loading features:",v)}finally{l(!1)}})()},[e]);const c=p=>p==="trial"?{max_campaigns:10,max_ad_accounts:1,ai_credits:50,advanced_features:!1,max_ads:50,automation_rules:!1}:p.toLowerCase().includes("basic")?{max_campaigns:20,max_ad_accounts:2,ai_credits:100,advanced_features:!1,max_ads:100,automation_rules:!1}:p.toLowerCase().includes("pro")||p.toLowerCase().includes("premium")?{max_campaigns:50,max_ad_accounts:5,ai_credits:200,advanced_features:!0,max_ads:200,automation_rules:!0}:{max_campaigns:-1,max_ad_accounts:-1,ai_credits:-1,advanced_features:!0,max_ads:-1,automation_rules:!0,priority_support:!0},u=p=>{if(!t||!n)return!1;const v=n[p];return typeof v=="boolean"?v:!0},d=(p,v)=>{if(!t||!n)return!0;const b=v??(a[p==="aiCredits"?"aiCreditsUsed":p]||0);let _;switch(p){case"campaigns":_=n.max_campaigns??0;break;case"adAccounts":_=n.max_ad_accounts??0;break;case"ads":_=n.max_ads??0;break;case"aiCredits":_=n.ai_credits??0;break;default:return!1}return _===-1?!1:b>=_},h=p=>{if(!n)return 0;const v=a[p];let x;switch(p){case"campaigns":x=n.max_campaigns??0;break;case"adAccounts":x=n.max_ad_accounts??0;break;case"ads":x=n.max_ads??0;break;case"aiCreditsUsed":x=n.ai_credits??0;break;default:return 0}return x===-1?0:x===0?100:Math.min(v/x*100,100)};return{features:n,usage:a,loading:o,canAccessFeature:u,hasReachedLimit:d,getUsagePercentage:h,isApproachingLimit:p=>h(p)>=80}};function f6(){const e=cs(),{subscription:t,loading:n,hasActiveSubscription:r}=BZ(),{features:a,getUsagePercentage:i,isApproachingLimit:o}=UZ(),[l,c]=g.useState([]),[u,d]=g.useState(!0),[h,m]=g.useState("monthly"),[p,v]=g.useState(!1),[x,b]=g.useState({});g.useEffect(()=>{_()},[]);const _=async()=>{try{d(!0);const[C,A]=await Promise.all([tM(!1),JK(30)]);c(C),b(A)}catch(C){console.error("Error loading data:",C),ne.error("Khng th ti d liu")}finally{d(!1)}},j=()=>[{label:"Campaigns",count:x.campaign_created||0,limit:(a==null?void 0:a.max_campaigns)||0,percentage:i("campaigns"),approaching:o("campaigns")},{label:"Ad Accounts",count:x.ad_account_connected||0,limit:(a==null?void 0:a.max_ad_accounts)||0,percentage:i("adAccounts"),approaching:o("adAccounts")},{label:"AI Credits",count:(x.ai_chat_message||0)+(x.ai_campaign_generated||0)+(x.ai_creative_generated||0),limit:(a==null?void 0:a.ai_credits)||0,percentage:i("aiCreditsUsed"),approaching:o("aiCreditsUsed")}];if(u||n)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(zt,{className:"h-8 w-8 animate-spin text-primary"})});const w=l.filter(C=>{const A=C.duration_days===30;return h==="monthly"?A:!A}),N=Array.from(new Set(l.flatMap(C=>Array.isArray(C.features)?C.features:[]))),k=j();return s.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-8",children:[r&&t&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Gi hin ti ca bn"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Theo di s dng v gii hn gi"})]}),s.jsx(Ze,{className:"text-lg px-4 py-2",variant:t.status==="active"?"default":"secondary",children:t.status==="trial"?"Dng th":t.status==="active"?"ang hot ng":"Ht hn"})]})}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Tn gi"}),s.jsx(Zr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.package_id}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Gi ng k ca bn"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Ngy ht hn"}),s.jsx(Ed,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.end_date?new Date(t.end_date).toLocaleDateString("vi-VN"):"N/A"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Thi gian cn li"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Tng hnh ng"}),s.jsx(To,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Object.values(x).reduce((C,A)=>C+A,0)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"30 ngy gn y"})]})]})]}),s.jsx("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:k.map(C=>s.jsxs(Oe,{className:"border-2",children:[s.jsxs(Fe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Be,{className:"text-xl",children:C.label}),C.approaching?s.jsxs(Ze,{variant:"destructive",className:"text-sm",children:[s.jsx(ac,{className:"h-3 w-3 mr-1"}),"Sp t gii hn"]}):s.jsxs(Ze,{variant:"outline",className:"text-sm",children:[s.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Bnh thng"]})]}),s.jsx(sn,{className:"text-base",children:"S dng trong 30 ngy gn y"})]}),s.jsxs(Re,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-4xl font-bold",children:C.count}),s.jsx("p",{className:"text-base text-muted-foreground mt-1",children:C.limit===-1?"Khng gii hn":`ca ${C.limit}`})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-3xl font-semibold",children:C.limit===-1?"":`${Math.round(C.percentage)}%`}),s.jsx("p",{className:"text-sm text-muted-foreground",children:" dng"})]})]}),C.limit!==-1&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(HS,{value:C.percentage,className:"h-8 rounded-lg"}),s.jsxs("p",{className:"text-lg text-muted-foreground font-semibold",children:[C.limit-C.count," cn li"]})]})]})]},C.label))}),s.jsx("div",{className:"flex justify-center pt-4",children:s.jsx(J,{size:"lg",onClick:()=>e("/dashboard/packages"),children:"Nng cp gi"})}),s.jsx("div",{className:"border-t pt-8"})]}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Cc gi ph hp vi quy m ca bn"}),s.jsx("p",{className:"text-muted-foreground text-lg",children:"Chn gi ph hp vi nhu cu s dng ca bn"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(ng,{value:h,onValueChange:C=>m(C),className:"w-auto",children:s.jsxs(rg,{className:"grid w-full grid-cols-2",children:[s.jsx(gi,{value:"monthly",children:"Thanh ton hng thng"}),s.jsxs(gi,{value:"yearly",children:["Thanh ton hng nm"," ",s.jsx("span",{className:"ml-1 text-xs text-primary",children:"(tit kim n 22%)"})]})]})})}),s.jsx("div",{className:"flex justify-center pt-4",children:s.jsxs(yr,{open:p,onOpenChange:v,children:[s.jsx(UI,{asChild:!0,children:s.jsx(J,{variant:"outline",size:"lg",children:"Xem bng so snh y  "})}),s.jsxs(dr,{className:"max-w-[98vw] w-full max-h-[90vh] p-0",children:[s.jsx(hr,{className:"px-6 pt-6 pb-4 border-b sticky top-0 bg-background z-10",children:s.jsx(fr,{className:"text-2xl",children:"So snh chi tit cc gi"})}),s.jsx(As,{className:"h-[calc(90vh-100px)]",children:s.jsx("div",{className:"px-6 pb-6",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[200%] border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-background z-10",children:s.jsxs("tr",{className:"border-b-2",children:[s.jsx("th",{className:"text-left p-5 font-semibold min-w-[250px] bg-background",children:"Tnh nng"}),w.map(C=>s.jsx("th",{className:"text-center p-5 font-semibold min-w-[220px] bg-background",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-lg",children:C.name}),s.jsxs("div",{className:"text-sm font-normal text-muted-foreground",children:[C.price.toLocaleString(),"/",C.duration_days===30?"thng":"nm"]})]})},C.id))]})}),s.jsx("tbody",{children:N.map((C,A)=>s.jsxs("tr",{className:"border-b hover:bg-muted/50 transition-colors",children:[s.jsx("td",{className:"p-4 font-medium",children:C}),w.map(P=>{const O=Array.isArray(P.features)?P.features:[];return s.jsx("td",{className:"text-center p-4",children:O.includes(C)?s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Td,{className:"h-4 w-4 text-primary"})})}):s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-6 h-6 rounded-full bg-muted flex items-center justify-center",children:s.jsx(Cs,{className:"h-4 w-4 text-muted-foreground"})})})},P.id)})]},A))})]})})})})]})]})})]})}function VGe(){const e=cs(),[t,n]=g.useState([]),[r,a]=g.useState(!0),[i,o]=g.useState("monthly"),[l,c]=g.useState(!1);g.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const v=await tM(!1);n(v)}catch(v){console.error("Error loading packages:",v),ne.error("Khng th ti danh sch gi")}finally{a(!1)}},d=(v,x)=>x==="yearly"?Math.round(v*12*.78):v,h=v=>{const x=v*12,b=Math.round(v*12*.78);return x-b},m=v=>{const x=d(v.price,i);e(`/dashboard/payment?package=${v.id}&period=${i}&price=${x}`)};if(r)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(zt,{className:"h-8 w-8 animate-spin"})});const p=Array.from(new Set(t.flatMap(v=>Array.isArray(v.features)?v.features:[])));return s.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Chn gi ph hp vi bn"}),s.jsx(ng,{value:i,onValueChange:v=>o(v),className:"inline-flex",children:s.jsxs(rg,{children:[s.jsx(gi,{value:"monthly",children:"Thanh ton hng thng"}),s.jsxs(gi,{value:"yearly",children:["Thanh ton hng nm",s.jsx("span",{className:"ml-2 text-xs text-primary",children:"(tit kim n 22%)"})]})]})})]}),t.length===0?s.jsx(Oe,{children:s.jsx(Re,{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"Cha c gi no kh dng"})})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-8",children:t.map((v,x)=>s.jsxs(Oe,{className:je("relative overflow-hidden transition-shadow hover:shadow-lg",x===1&&"border-primary shadow-md"),children:[x===1&&s.jsx("div",{className:"absolute top-4 right-4 bg-primary text-primary-foreground text-xs font-semibold px-3 py-1 rounded-full",children:"Ph bin nht"}),s.jsxs(Fe,{className:"text-center pb-8",children:[s.jsx(Be,{className:"text-2xl mb-2",children:v.name}),v.description&&s.jsx(sn,{className:"text-sm",children:v.description}),s.jsxs("div",{className:"mt-6",children:[i==="yearly"&&s.jsxs("div",{className:"text-sm text-muted-foreground line-through mb-1",children:[(v.price*12).toLocaleString("vi-VN")," ",v.currency,"/nm"]}),s.jsx("span",{className:"text-4xl font-bold",children:d(v.price,i).toLocaleString("vi-VN")}),s.jsx("span",{className:"text-muted-foreground ml-2",children:v.currency}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["/",i==="monthly"?"thng":"nm"]}),i==="yearly"&&s.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2",children:[" Tit kim ",h(v.price).toLocaleString("vi-VN")," ",v.currency]})]}),v.duration_days&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Thi hn: ",v.duration_days," ngy"]})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs(J,{className:"w-full",variant:x===1?"default":"outline",size:"lg",onClick:()=>m(v),children:[s.jsx(yce,{className:"mr-2 h-4 w-4"}),"Bt u ngay"]}),s.jsxs("div",{className:"space-y-3 pt-4",children:[s.jsx("p",{className:"font-semibold text-sm",children:"Tnh nng ni bt:"}),v.features&&v.features.length>0?s.jsx("ul",{className:"space-y-2",children:v.features.slice(0,5).map((b,_)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[s.jsx(Td,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),s.jsx("span",{children:h6[b]??b})]},_))}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"Khng c tnh nng c lit k"}),v.features&&v.features.length>5&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",v.features.length-5," tnh nng khc"]})]})]})]},v.id))}),s.jsx("div",{className:"text-center",children:s.jsx(J,{variant:"outline",onClick:()=>c(!0),className:"gap-2",children:"Xem so snh y "})}),s.jsx(yr,{open:l,onOpenChange:c,children:s.jsxs(dr,{className:"max-w-6xl max-h-[90vh]",children:[s.jsx(hr,{children:s.jsx(fr,{className:"text-2xl text-center",children:"So snh chi tit cc gi"})}),s.jsx(As,{className:"h-[70vh] pr-4",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{className:"sticky top-0 bg-background z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-4 border-b font-semibold",children:"Tnh nng"}),t.map(v=>s.jsxs("th",{className:"p-4 border-b text-center",children:[s.jsx("div",{className:"font-bold text-lg",children:v.name}),s.jsxs("div",{className:"text-2xl font-bold mt-2",children:[d(v.price,i).toLocaleString("vi-VN")," ",v.currency,s.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/",i==="monthly"?"thng":"nm"]})]}),i==="yearly"&&s.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Tit kim ",h(v.price).toLocaleString("vi-VN")," ",v.currency]}),s.jsx(J,{size:"sm",className:"mt-3",onClick:()=>{m(v),c(!1)},children:"Chn gi"})]},v.id))]})}),s.jsxs("tbody",{children:[p.length>0?p.map((v,x)=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4 text-sm",children:h6[v]??v}),t.map(b=>{const j=(Array.isArray(b.features)?b.features:[]).includes(v);return s.jsx("td",{className:"p-4 text-center",children:j?s.jsx(Td,{className:"h-5 w-5 text-primary mx-auto"}):s.jsx(Cs,{className:"h-5 w-5 text-muted-foreground mx-auto"})},b.id)})]},x)):s.jsx("tr",{children:s.jsx("td",{colSpan:t.length+1,className:"p-8 text-center text-muted-foreground",children:"Khng c thng tin chi tit v tnh nng"})}),s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-4 font-semibold",children:"Thi hn s dng"}),t.map(v=>s.jsxs("td",{className:"p-4 text-center text-sm",children:[v.duration_days," ngy"]},v.id))]})]})]})})})]})})]})]})}function zGe(){const e=cs(),{user:t}=Mn(),[n]=qfe(),r=n.get("package"),[a,i]=g.useState(null),[o,l]=g.useState(null),[c,u]=g.useState(!0),[d,h]=g.useState(!1),[m,p]=g.useState(""),[v,x]=g.useState("");g.useEffect(()=>{b()},[r]),g.useEffect(()=>{if(t&&r){const w=`TXN-${Date.now()}-${t.id.slice(0,8)}`;p(w)}},[t,r]);const b=async()=>{if(!r){ne.error("No package selected"),e("/dashboard/packages");return}try{u(!0);const{data:w,error:N}=await wt.from("payment_packages").select("*").eq("id",r).single();if(N)throw N;i(w);const{data:k,error:C}=await wt.from("payment_settings").select("*").limit(1).maybeSingle();if(C)throw C;l(k)}catch(w){console.error("Error loading data:",w),ne.error("Failed to load payment information")}finally{u(!1)}},_=w=>{navigator.clipboard.writeText(w),ne.success("Copied to clipboard!")},j=async()=>{if(!(!t||!a))try{h(!0);const{error:w}=await wt.from("payment_transactions").insert({user_id:t.id,package_id:a.id,amount:a.price,currency:a.currency,status:"pending",payment_method:"bank_transfer",transaction_code:m,notes:v});if(w)throw w;ne.success("Payment submitted! Waiting for admin verification."),e("/dashboard/billing")}catch(w){console.error("Error submitting payment:",w),ne.error("Failed to submit payment")}finally{h(!1)}};return c?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(zt,{className:"h-8 w-8 animate-spin"})}):a?s.jsxs("div",{className:"container mx-auto p-6 max-w-4xl space-y-6",children:[s.jsxs(J,{variant:"ghost",onClick:()=>e("/dashboard/packages"),children:[s.jsx(Fz,{className:"mr-2 h-4 w-4"}),"Back to Plans"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Complete Payment"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Follow the instructions below to complete your purchase"})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Order Summary"}),s.jsx(sn,{children:"Review your selected package"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-lg",children:a.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.duration_days," days subscription"]})]}),s.jsx(Ze,{children:"Selected"})]}),s.jsxs("div",{className:"border-t pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subtotal:"}),s.jsxs("span",{children:[a.price.toLocaleString("vi-VN")," ",a.currency]})]}),s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:[a.price.toLocaleString("vi-VN")," ",a.currency]})]})]}),s.jsxs(Ka,{children:[s.jsx(id,{className:"h-4 w-4"}),s.jsx(Ga,{className:"text-sm",children:"Your subscription will be activated within 24 hours after payment verification."})]})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(Bz,{className:"h-5 w-5"}),"Bank Transfer"]}),s.jsx(sn,{children:"Transfer to the bank account below"})]}),s.jsx(Re,{className:"space-y-4",children:o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Bank Name"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{value:o.bank_name||"Not configured",readOnly:!0}),s.jsx(J,{size:"icon",variant:"outline",onClick:()=>_(o.bank_name),children:s.jsx(Dh,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Account Number"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{value:o.bank_account_number||"Not configured",readOnly:!0,className:"font-mono"}),s.jsx(J,{size:"icon",variant:"outline",onClick:()=>_(o.bank_account_number),children:s.jsx(Dh,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Account Holder"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{value:o.bank_account_name||"Not configured",readOnly:!0}),s.jsx(J,{size:"icon",variant:"outline",onClick:()=>_(o.bank_account_name),children:s.jsx(Dh,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Amount"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{value:`${a.price.toLocaleString("vi-VN")} ${a.currency}`,readOnly:!0,className:"font-bold"}),s.jsx(J,{size:"icon",variant:"outline",onClick:()=>_(a.price.toString()),children:s.jsx(Dh,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{children:"Transfer Content (Required)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{value:m,readOnly:!0,className:"font-mono text-sm"}),s.jsx(J,{size:"icon",variant:"outline",onClick:()=>_(m),children:s.jsx(Dh,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:" Please include this code in your transfer message"})]})]}):s.jsx(Ka,{variant:"destructive",children:s.jsx(Ga,{children:"Payment settings not configured. Please contact support."})})})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Confirm Payment"}),s.jsx(sn,{children:"After completing the bank transfer, click the button below to notify us"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"notes",children:"Additional Notes (Optional)"}),s.jsx(Oo,{id:"notes",placeholder:"Add any additional information about your payment...",value:v,onChange:w=>x(w.target.value),rows:3})]}),s.jsxs(Ka,{children:[s.jsx(Nn,{className:"h-4 w-4"}),s.jsx(xl,{children:"What happens next?"}),s.jsx(Ga,{children:s.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1 text-sm",children:[s.jsx("li",{children:"Complete your bank transfer using the details above"}),s.jsx("li",{children:'Click "Confirm Payment" button below'}),s.jsx("li",{children:"Our admin will verify your payment within 24 hours"}),s.jsx("li",{children:"Your subscription will be activated automatically"})]})})]}),s.jsx(J,{onClick:j,disabled:d||!o,className:"w-full",size:"lg",children:d?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Confirm Payment"]})})]})]})]}):s.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:s.jsxs(Ka,{variant:"destructive",children:[s.jsx(xl,{children:"Package Not Found"}),s.jsx(Ga,{children:"The selected package could not be loaded."})]})})}function HGe(){const e=cs(),{user:t}=Mn(),[n,r]=g.useState([]),[a,i]=g.useState(!0);g.useEffect(()=>{t&&o()},[t]);const o=async()=>{if(t)try{i(!0);const{data:u,error:d}=await wt.from("payment_transactions").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(d)throw d;r(u||[])}catch(u){console.error(" Error loading transactions:",u),ne.error("Failed to load billing history")}finally{i(!1)}},l=u=>{switch(u){case"completed":return s.jsx(Nn,{className:"h-4 w-4 text-green-600"});case"pending":return s.jsx(tu,{className:"h-4 w-4 text-yellow-600"});case"failed":return s.jsx(ji,{className:"h-4 w-4 text-red-600"});default:return null}},c=u=>{switch(u){case"completed":return s.jsx(Ze,{variant:"default",children:"Completed"});case"pending":return s.jsx(Ze,{variant:"secondary",children:"Pending"});case"failed":return s.jsx(Ze,{variant:"destructive",children:"Failed"});default:return s.jsx(Ze,{variant:"outline",children:u})}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(zt,{className:"h-8 w-8 animate-spin"})}):s.jsxs("div",{className:"container mx-auto p-6 max-w-7xl space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Billing History"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"View all your payment transactions and invoices"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(J,{variant:"outline",onClick:o,children:[s.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Refresh"]}),s.jsx(J,{onClick:()=>e("/dashboard/packages"),children:"Make Payment"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(sj,{className:"h-5 w-5"}),"All Transactions"]}),s.jsxs(sn,{children:[n.length," total transactions"]})]}),s.jsx(Re,{children:n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(sj,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"No transactions yet"}),s.jsx(J,{onClick:()=>e("/dashboard/packages"),children:"Browse Plans"})]}):s.jsxs(sb,{children:[s.jsx(Af,{children:s.jsxs(Ma,{children:[s.jsx(Rn,{children:"Date"}),s.jsx(Rn,{children:"Package"}),s.jsx(Rn,{children:"Amount"}),s.jsx(Rn,{children:"Payment Method"}),s.jsx(Rn,{children:"Transaction Code"}),s.jsx(Rn,{children:"Status"})]})}),s.jsx(Ef,{children:n.map(u=>s.jsxs(Ma,{children:[s.jsx(Qt,{children:Bt(new Date(u.created_at),"dd/MM/yyyy HH:mm")}),s.jsx(Qt,{children:s.jsx(Ze,{variant:"outline",children:u.package_id})}),s.jsxs(Qt,{className:"font-semibold",children:[u.amount.toLocaleString("vi-VN")," ",u.currency]}),s.jsx(Qt,{className:"capitalize",children:u.payment_method.replace("_"," ")}),s.jsx(Qt,{children:u.transaction_code?s.jsx(Ze,{variant:"secondary",className:"font-mono text-xs",children:u.transaction_code}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsx(Qt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[l(u.status),c(u.status)]})})]},u.id))})]})})]})]})}function WGe(){const e=cs(),{features:t,getUsagePercentage:n,isApproachingLimit:r}=UZ(),[a,i]=g.useState({}),[o,l]=g.useState(!0),[c,u]=g.useState(30);g.useEffect(()=>{d()},[c]);const d=async()=>{try{l(!0);const x=await JK(c);i(x)}catch(x){console.error("Error loading usage:",x)}finally{l(!1)}},h=()=>[{label:"Campaigns",count:a.campaign_created||0,limit:(t==null?void 0:t.max_campaigns)||0,percentage:n("campaigns"),approaching:r("campaigns")},{label:"Ad Accounts",count:a.ad_account_connected||0,limit:(t==null?void 0:t.max_ad_accounts)||0,percentage:n("adAccounts"),approaching:r("adAccounts")},{label:"AI Credits",count:(a.ai_chat_message||0)+(a.ai_campaign_generated||0)+(a.ai_creative_generated||0),limit:(t==null?void 0:t.ai_credits)||0,percentage:n("aiCreditsUsed"),approaching:r("aiCreditsUsed")}],m=()=>Object.values(a).reduce((x,b)=>x+b,0);if(o)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(zt,{className:"h-8 w-8 animate-spin"})});const p=h(),v=p.some(x=>x.approaching);return s.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Usage Analytics"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Monitor your usage against plan limits"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{variant:c===7?"default":"outline",onClick:()=>u(7),children:"Last 7 days"}),s.jsx(J,{variant:c===30?"default":"outline",onClick:()=>u(30),children:"Last 30 days"})]})]}),v&&s.jsxs(Ka,{variant:"default",children:[s.jsx(ac,{className:"h-4 w-4"}),s.jsx(xl,{children:"Approaching Limit"}),s.jsxs(Ga,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"You're approaching the limit for some features. Consider upgrading your plan."}),s.jsx(J,{onClick:()=>e("/dashboard/packages"),size:"sm",children:"Upgrade Plan"})]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Total Actions"}),s.jsx(Bg,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:m()}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last ",c," days"]})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"AI Requests"}),s.jsx(To,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:(a.ai_chat_message||0)+(a.ai_campaign_generated||0)+(a.ai_creative_generated||0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"AI credits used"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Be,{className:"text-sm font-medium",children:"Period"}),s.jsx(Ed,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:c}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Days tracked"})]})]})]}),s.jsx("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:p.map(x=>s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Be,{children:x.label}),x.approaching?s.jsxs(Ze,{variant:"destructive",children:[s.jsx(ac,{className:"h-3 w-3 mr-1"}),"Approaching Limit"]}):s.jsxs(Ze,{variant:"outline",children:[s.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Healthy"]})]}),s.jsxs(sn,{children:["Your usage for the last ",c," days"]})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold",children:x.count}),s.jsx("p",{className:"text-sm text-muted-foreground",children:x.limit===-1?"Unlimited":`of ${x.limit}`})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-semibold",children:x.limit===-1?"":`${Math.round(x.percentage)}%`}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Used"})]})]}),x.limit!==-1&&s.jsxs("div",{className:"space-y-3",children:[s.jsx(HS,{value:x.percentage,className:"h-3"}),s.jsxs("p",{className:"text-sm text-muted-foreground font-medium",children:[x.limit-x.count," remaining"]})]})]})]},x.label))}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Activity Breakdown"}),s.jsx(sn,{children:"Detailed breakdown of your actions"})]}),s.jsx(Re,{children:s.jsxs("div",{className:"space-y-3",children:[Object.entries(a).map(([x,b])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm capitalize",children:x.replace(/_/g," ")}),s.jsx(Ze,{variant:"secondary",children:b})]},x)),Object.keys(a).length===0&&s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No activity recorded yet"})]})})]})]})}function qGe(){const[e,t]=g.useState(""),[n,r]=g.useState(!1),[a,i]=g.useState(null),{toast:o}=Lo(),l=cs(),c=async()=>{var d,h;if(!e.trim()){o({title:"Li",description:"Vui lng nhp URL Facebook",variant:"destructive"});return}r(!0),i(null);try{const{data:m}=await wt.functions.invoke("fetch-pages"),p=(h=(d=m==null?void 0:m.pages)==null?void 0:d[0])==null?void 0:h.access_token,{data:v,error:x}=await wt.functions.invoke("validate-facebook-post",{body:{postUrl:e,pageToken:p}});if(x)throw x;i(v),v.success?o({title:"Thnh cng!",description:" ly c Facebook ID"}):o({title:"Khng thnh cng",description:v.error||"Khng th ly ID t link ny",variant:"destructive"})}catch(m){console.error("Test error:",m),o({title:"Li",description:m.message||"Khng th kim tra link",variant:"destructive"}),i({success:!1,error:m.message})}finally{r(!1)}},u=d=>{navigator.clipboard.writeText(d),o({title:" sao chp",description:"ID  c sao chp vo clipboard"})};return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"container max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(J,{variant:"ghost",size:"icon",onClick:()=>l("/"),children:s.jsx(Fz,{className:"h-5 w-5"})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-3xl font-bold",children:" Test Facebook ID Extractor"}),s.jsx("p",{className:"text-muted-foreground",children:"Kim tra v trch xut ID t cc loi link Facebook"})]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Nhp URL Facebook"}),s.jsx(sn,{children:"H tr: Groups, Personal Profiles, Posts, Videos, Pages"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{placeholder:"https://www.facebook.com/...",value:e,onChange:d=>t(d.target.value),onKeyPress:d=>d.key==="Enter"&&c()}),s.jsx(J,{onClick:c,disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"ang kim tra"]}):"Ly ID"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"V d cc loi link:"}),s.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[s.jsx("button",{onClick:()=>t("https://www.facebook.com/nqtam6666/"),className:"text-left text-primary hover:underline",children:" Personal Profile: facebook.com/username/"}),s.jsx("button",{onClick:()=>t("https://www.facebook.com/groups/123456789/"),className:"text-left text-primary hover:underline",children:" Group: facebook.com/groups/GROUP_ID/"}),s.jsx("button",{onClick:()=>t("https://www.facebook.com/username/posts/123456789"),className:"text-left text-primary hover:underline",children:" Post: facebook.com/username/posts/POST_ID"}),s.jsx("button",{onClick:()=>t("https://www.facebook.com/username/videos/123456789"),className:"text-left text-primary hover:underline",children:" Video: facebook.com/username/videos/VIDEO_ID"})]})]})]})]}),a&&s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsx(Be,{className:"flex items-center gap-2",children:a.success?s.jsxs(s.Fragment,{children:[s.jsx(Nn,{className:"h-5 w-5 text-green-600"}),"Kt qu"]}):s.jsxs(s.Fragment,{children:[s.jsx(is,{className:"h-5 w-5 text-destructive"}),"Li"]})})}),s.jsx(Re,{className:"space-y-4",children:a.success&&a.data?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Facebook ID"}),s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-primary/5 rounded-lg border",children:[s.jsx("code",{className:"flex-1 text-lg font-mono font-semibold",children:a.data.id}),s.jsx(J,{size:"sm",variant:"ghost",onClick:()=>u(a.data.id),children:s.jsx(Dh,{className:"h-4 w-4"})})]})]}),a.data.name&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Tn"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:a.data.name})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Ze,{variant:a.is_public?"default":"secondary",children:a.is_public?" Public":" Private"}),a.is_die&&s.jsx(Ze,{variant:"destructive",children:" Ti khon khng cn hot ng"}),a.time&&s.jsxs(Ze,{variant:"outline",children:[" ",a.time]})]}),s.jsxs(J,{variant:"outline",className:"w-full",onClick:()=>window.open(e,"_blank"),children:[s.jsx(Vz,{className:"mr-2 h-4 w-4"}),"M link gc"]})]}):s.jsxs("div",{className:"p-4 bg-destructive/10 rounded-lg text-destructive",children:[s.jsx("p",{className:"font-medium",children:"Khng th ly ID"}),a.error&&s.jsx("p",{className:"text-sm mt-1",children:a.error})]})})]}),s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsx(Be,{className:"text-lg",children:" V API"})}),s.jsxs(Re,{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"API:"})," nqtam.id.vn"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Tnh nng:"})," Trch xut ID t URL Facebook (Groups, Profiles, Posts, Videos, Pages)"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phng thc:"})," Regex parsing + Anonymous checking"]}),s.jsxs("p",{className:"text-xs",children:["Lin h: ",s.jsx("a",{href:"https://t.me/nqtam_26",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Telegram"})]})]})]})]})})}const Vi={ADS_REPORT:"report_ads",SALE_REPORT:"report_sale",SUMMARY_REPORT:"report_summary"},oE={[Vi.ADS_REPORT]:" Bo co ADS",[Vi.SALE_REPORT]:" Bo co Sale",[Vi.SUMMARY_REPORT]:" Bo co Tng"},KGe=()=>{const{features:e,hasFeature:t,loading:n,error:r}=J0(),a=i=>{const o=t(i);return{enabled:o,canUse:o}};return{canUseAdsReport:t(Vi.ADS_REPORT),canUseSaleReport:t(Vi.SALE_REPORT),canUseSummaryReport:t(Vi.SUMMARY_REPORT),getFeatureStatus:a,enabledFeatures:Object.values(Vi).filter(i=>t(i)),features:e,loading:n,error:r}};function GGe(){const e=hGe(),t=VK(),n=KGe(),r=(a,i,o,l)=>{const c={manual:"bg-gray-100 text-gray-800 dark:bg-gray-900/30",ai:"bg-blue-100 text-blue-800 dark:bg-blue-900/30",report:"bg-green-100 text-green-800 dark:bg-green-900/30"};return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[o?s.jsx(Nn,{className:"h-5 w-5 text-green-500"}):s.jsx(ji,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:i}),s.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:a})]})]}),s.jsx(Ze,{className:c[l],children:o?"Enabled":"Disabled"})]},a)};return s.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Feature Connection Test"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Kim tra kt ni gia Frontend hooks v Backend feature flags"})]}),s.jsxs("div",{className:"grid gap-6",children:[s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:" Manual Tools (5 features)"}),s.jsxs(sn,{children:["Enabled: ",e.enabledTools.length,"/5"]})]}),s.jsxs(Re,{className:"space-y-3",children:[r(ln.CREATE_ADS,ql[ln.CREATE_ADS],e.canUseCreateAds,"manual"),r(ln.CREATE_MESSAGE,ql[ln.CREATE_MESSAGE],e.canUseCreateMessage,"manual"),r(ln.AUDIENCE,ql[ln.AUDIENCE],e.canUseAudience,"manual"),r(ln.ADVANCED_ADS,ql[ln.ADVANCED_ADS],e.canUseAdvancedAds,"manual"),r(ln.QUICK_AD,ql[ln.QUICK_AD],e.canUseQuickAd,"manual")]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:" AI Features (5 features)"}),s.jsxs(sn,{children:["Enabled: ",t.enabledFeatures.length,"/5"]})]}),s.jsxs(Re,{className:"space-y-3",children:[r(Mt.QUICK_POST,fl[Mt.QUICK_POST],t.canUseQuickPost,"ai"),r(Mt.CREATIVE_CAMPAIGN,fl[Mt.CREATIVE_CAMPAIGN],t.canUseCreativeCampaign,"ai"),r(Mt.AUDIENCE_CREATOR,fl[Mt.AUDIENCE_CREATOR],t.canUseAudienceCreator,"ai"),r(Mt.CLONE_TOOL,fl[Mt.CLONE_TOOL],t.canUseCloneTool,"ai"),r(Mt.REPORT_ANALYSIS,fl[Mt.REPORT_ANALYSIS],t.canUseReportAnalysis,"ai")]})]}),s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:" Report Features (3 features)"}),s.jsxs(sn,{children:["Enabled: ",n.enabledFeatures.length,"/3"]})]}),s.jsxs(Re,{className:"space-y-3",children:[r(Vi.ADS_REPORT,oE[Vi.ADS_REPORT],n.canUseAdsReport,"report"),r(Vi.SALE_REPORT,oE[Vi.SALE_REPORT],n.canUseSaleReport,"report"),r(Vi.SUMMARY_REPORT,oE[Vi.SUMMARY_REPORT],n.canUseSummaryReport,"report")]})]}),s.jsxs(Oe,{className:"border-2 border-primary",children:[s.jsx(Fe,{children:s.jsx(Be,{children:" Tng kt"})}),s.jsxs(Re,{children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-600",children:e.enabledTools.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Manual Tools"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:t.enabledFeatures.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"AI Features"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:n.enabledFeatures.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Reports"})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t text-center",children:[s.jsxs("div",{className:"text-4xl font-bold",children:[e.enabledTools.length+t.enabledFeatures.length+n.enabledFeatures.length,"/13"]}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Features Enabled"})]})]})]})]})]})}const N0=({children:e,title:t,subtitle:n})=>s.jsxs("div",{className:"min-h-screen grid grid-cols-1 md:grid-cols-[40%_60%]",children:[s.jsx("div",{className:"relative hidden md:flex items-center justify-center p-12 gradient-primary",children:s.jsxs("div",{className:"max-w-md text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-primary-foreground mb-4",children:"Facebook Ads Manager"}),s.jsx("p",{className:"text-lg text-primary-foreground/90",children:"Qun l v ti u ha chin dch qung co Facebook mt cch thng minh vi AI"})]})}),s.jsx("div",{className:"flex items-center justify-center p-8 bg-background",children:s.jsxs("div",{className:"w-full max-w-md space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(xf,{to:"/",className:"inline-block mb-8",children:s.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Facebook Ads Manager"})}),s.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:t}),n&&s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:n})]}),s.jsx("div",{className:"mt-8",children:e})]})})]});var Gn;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Gn||(Gn={}));var m6;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(m6||(m6={}));const Ct=Gn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gu=e=>{switch(typeof e){case"undefined":return Ct.undefined;case"string":return Ct.string;case"number":return Number.isNaN(e)?Ct.nan:Ct.number;case"boolean":return Ct.boolean;case"function":return Ct.function;case"bigint":return Ct.bigint;case"symbol":return Ct.symbol;case"object":return Array.isArray(e)?Ct.array:e===null?Ct.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ct.promise:typeof Map<"u"&&e instanceof Map?Ct.map:typeof Set<"u"&&e instanceof Set?Ct.set:typeof Date<"u"&&e instanceof Date?Ct.date:Ct.object;default:return Ct.unknown}},at=Gn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class cu extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),r}static assert(t){if(!(t instanceof cu))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Gn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];n[i]=n[i]||[],n[i].push(t(a))}else r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}cu.create=e=>new cu(e);const zO=(e,t)=>{let n;switch(e.code){case at.invalid_type:e.received===Ct.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case at.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Gn.jsonStringifyReplacer)}`;break;case at.unrecognized_keys:n=`Unrecognized key(s) in object: ${Gn.joinValues(e.keys,", ")}`;break;case at.invalid_union:n="Invalid input";break;case at.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Gn.joinValues(e.options)}`;break;case at.invalid_enum_value:n=`Invalid enum value. Expected ${Gn.joinValues(e.options)}, received '${e.received}'`;break;case at.invalid_arguments:n="Invalid function arguments";break;case at.invalid_return_type:n="Invalid function return type";break;case at.invalid_date:n="Invalid date";break;case at.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Gn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case at.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case at.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case at.custom:n="Invalid input";break;case at.invalid_intersection_types:n="Intersection results could not be merged";break;case at.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case at.not_finite:n="Number must be finite";break;default:n=t.defaultError,Gn.assertNever(e)}return{message:n}};let YGe=zO;function QGe(){return YGe}const XGe=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function yt(e,t){const n=QGe(),r=XGe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zO?void 0:zO].filter(a=>!!a)});e.common.issues.push(r)}class eo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return cn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return eo.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return cn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const cn=Object.freeze({status:"aborted"}),Ry=e=>({status:"dirty",value:e}),Vo=e=>({status:"valid",value:e}),p6=e=>e.status==="aborted",g6=e=>e.status==="dirty",Pg=e=>e.status==="valid",M1=e=>typeof Promise<"u"&&e instanceof Promise;var Ot;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ot||(Ot={}));class Dd{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const v6=(e,t)=>{if(Pg(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new cu(e.common.issues);return this._error=n,this._error}}};function An(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:a}}class Vn{get description(){return this._def.description}_getType(t){return Gu(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Gu(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new eo,ctx:{common:t.parent.common,data:t.data,parsedType:Gu(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(M1(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gu(t)},a=this._parseSync({data:t,path:r.path,parent:r});return v6(r,a)}"~validate"(t){var r,a;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gu(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:n});return Pg(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(a=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(i=>Pg(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gu(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(M1(a)?a:Promise.resolve(a));return v6(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:at.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Ig({schema:this,typeName:un.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Nd.create(this,this._def)}nullable(){return Rg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rc.create(this)}promise(){return B1.create(this,this._def)}or(t){return L1.create([this,t],this._def)}and(t){return F1.create(this,t,this._def)}transform(t){return new Ig({...An(this._def),schema:this,typeName:un.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new WO({...An(this._def),innerType:this,defaultValue:n,typeName:un.ZodDefault})}brand(){return new bYe({typeName:un.ZodBranded,type:this,...An(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new qO({...An(this._def),innerType:this,catchValue:n,typeName:un.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return nM.create(this,t)}readonly(){return KO.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const JGe=/^c[^\s-]{8,}$/i,ZGe=/^[0-9a-z]+$/,eYe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tYe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nYe=/^[a-z0-9_-]{21}$/i,rYe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,aYe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,sYe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iYe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let lE;const oYe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lYe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cYe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uYe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dYe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,hYe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,VZ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fYe=new RegExp(`^${VZ}$`);function zZ(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function mYe(e){return new RegExp(`^${zZ(e)}$`)}function pYe(e){let t=`${VZ}T${zZ(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function gYe(e,t){return!!((t==="v4"||!t)&&oYe.test(e)||(t==="v6"||!t)&&cYe.test(e))}function vYe(e,t){if(!rYe.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function yYe(e,t){return!!((t==="v4"||!t)&&lYe.test(e)||(t==="v6"||!t)&&uYe.test(e))}class hd extends Vn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ct.string){const i=this._getOrReturnCtx(t);return yt(i,{code:at.invalid_type,expected:Ct.string,received:i.parsedType}),cn}const r=new eo;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),yt(a,{code:at.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),yt(a,{code:at.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?yt(a,{code:at.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&yt(a,{code:at.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")sYe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"email",code:at.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")lE||(lE=new RegExp(iYe,"u")),lE.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"emoji",code:at.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")tYe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"uuid",code:at.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")nYe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"nanoid",code:at.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")JGe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"cuid",code:at.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")ZGe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"cuid2",code:at.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")eYe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"ulid",code:at.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),yt(a,{validation:"url",code:at.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"regex",code:at.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),yt(a,{code:at.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),yt(a,{code:at.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),yt(a,{code:at.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?pYe(i).test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{code:at.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?fYe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{code:at.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?mYe(i).test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{code:at.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?aYe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"duration",code:at.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?gYe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"ip",code:at.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?vYe(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"jwt",code:at.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?yYe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"cidr",code:at.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?dYe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"base64",code:at.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?hYe.test(t.data)||(a=this._getOrReturnCtx(t,a),yt(a,{validation:"base64url",code:at.invalid_string,message:i.message}),r.dirty()):Gn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:at.invalid_string,...Ot.errToObj(r)})}_addCheck(t){return new hd({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ot.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ot.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ot.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ot.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ot.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ot.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ot.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ot.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ot.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ot.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ot.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ot.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ot.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Ot.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ot.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ot.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Ot.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Ot.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Ot.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Ot.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Ot.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Ot.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Ot.errToObj(n)})}nonempty(t){return this.min(1,Ot.errToObj(t))}trim(){return new hd({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new hd({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new hd({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}hd.create=e=>new hd({checks:[],typeName:un.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...An(e)});function xYe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class k0 extends Vn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ct.number){const i=this._getOrReturnCtx(t);return yt(i,{code:at.invalid_type,expected:Ct.number,received:i.parsedType}),cn}let r;const a=new eo;for(const i of this._def.checks)i.kind==="int"?Gn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),yt(r,{code:at.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),yt(r,{code:at.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),yt(r,{code:at.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?xYe(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),yt(r,{code:at.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),yt(r,{code:at.not_finite,message:i.message}),a.dirty()):Gn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Ot.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Ot.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Ot.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Ot.toString(n))}setLimit(t,n,r,a){return new k0({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Ot.toString(a)}]})}_addCheck(t){return new k0({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ot.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ot.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Ot.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Ot.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ot.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ot.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Gn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}k0.create=e=>new k0({checks:[],typeName:un.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...An(e)});class C0 extends Vn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ct.bigint)return this._getInvalidInput(t);let r;const a=new eo;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),yt(r,{code:at.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),yt(r,{code:at.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),yt(r,{code:at.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Gn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return yt(n,{code:at.invalid_type,expected:Ct.bigint,received:n.parsedType}),cn}gte(t,n){return this.setLimit("min",t,!0,Ot.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Ot.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Ot.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Ot.toString(n))}setLimit(t,n,r,a){return new C0({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Ot.toString(a)}]})}_addCheck(t){return new C0({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ot.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Ot.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}C0.create=e=>new C0({checks:[],typeName:un.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...An(e)});class y6 extends Vn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ct.boolean){const r=this._getOrReturnCtx(t);return yt(r,{code:at.invalid_type,expected:Ct.boolean,received:r.parsedType}),cn}return Vo(t.data)}}y6.create=e=>new y6({typeName:un.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...An(e)});class D1 extends Vn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ct.date){const i=this._getOrReturnCtx(t);return yt(i,{code:at.invalid_type,expected:Ct.date,received:i.parsedType}),cn}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return yt(i,{code:at.invalid_date}),cn}const r=new eo;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),yt(a,{code:at.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),yt(a,{code:at.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Gn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new D1({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Ot.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Ot.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}D1.create=e=>new D1({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:un.ZodDate,...An(e)});class x6 extends Vn{_parse(t){if(this._getType(t)!==Ct.symbol){const r=this._getOrReturnCtx(t);return yt(r,{code:at.invalid_type,expected:Ct.symbol,received:r.parsedType}),cn}return Vo(t.data)}}x6.create=e=>new x6({typeName:un.ZodSymbol,...An(e)});class b6 extends Vn{_parse(t){if(this._getType(t)!==Ct.undefined){const r=this._getOrReturnCtx(t);return yt(r,{code:at.invalid_type,expected:Ct.undefined,received:r.parsedType}),cn}return Vo(t.data)}}b6.create=e=>new b6({typeName:un.ZodUndefined,...An(e)});class w6 extends Vn{_parse(t){if(this._getType(t)!==Ct.null){const r=this._getOrReturnCtx(t);return yt(r,{code:at.invalid_type,expected:Ct.null,received:r.parsedType}),cn}return Vo(t.data)}}w6.create=e=>new w6({typeName:un.ZodNull,...An(e)});class _6 extends Vn{constructor(){super(...arguments),this._any=!0}_parse(t){return Vo(t.data)}}_6.create=e=>new _6({typeName:un.ZodAny,...An(e)});class j6 extends Vn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Vo(t.data)}}j6.create=e=>new j6({typeName:un.ZodUnknown,...An(e)});class Ld extends Vn{_parse(t){const n=this._getOrReturnCtx(t);return yt(n,{code:at.invalid_type,expected:Ct.never,received:n.parsedType}),cn}}Ld.create=e=>new Ld({typeName:un.ZodNever,...An(e)});class S6 extends Vn{_parse(t){if(this._getType(t)!==Ct.undefined){const r=this._getOrReturnCtx(t);return yt(r,{code:at.invalid_type,expected:Ct.void,received:r.parsedType}),cn}return Vo(t.data)}}S6.create=e=>new S6({typeName:un.ZodVoid,...An(e)});class rc extends Vn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Ct.array)return yt(n,{code:at.invalid_type,expected:Ct.array,received:n.parsedType}),cn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,l=n.data.length<a.exactLength.value;(o||l)&&(yt(n,{code:o?at.too_big:at.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(yt(n,{code:at.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(yt(n,{code:at.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>a.type._parseAsync(new Dd(n,o,n.path,l)))).then(o=>eo.mergeArray(r,o));const i=[...n.data].map((o,l)=>a.type._parseSync(new Dd(n,o,n.path,l)));return eo.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new rc({...this._def,minLength:{value:t,message:Ot.toString(n)}})}max(t,n){return new rc({...this._def,maxLength:{value:t,message:Ot.toString(n)}})}length(t,n){return new rc({...this._def,exactLength:{value:t,message:Ot.toString(n)}})}nonempty(t){return this.min(1,t)}}rc.create=(e,t)=>new rc({type:e,minLength:null,maxLength:null,exactLength:null,typeName:un.ZodArray,...An(t)});function Wm(e){if(e instanceof ea){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Nd.create(Wm(r))}return new ea({...e._def,shape:()=>t})}else return e instanceof rc?new rc({...e._def,type:Wm(e.element)}):e instanceof Nd?Nd.create(Wm(e.unwrap())):e instanceof Rg?Rg.create(Wm(e.unwrap())):e instanceof Mf?Mf.create(e.items.map(t=>Wm(t))):e}class ea extends Vn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Gn.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==Ct.object){const u=this._getOrReturnCtx(t);return yt(u,{code:at.invalid_type,expected:Ct.object,received:u.parsedType}),cn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ld&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Dd(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Ld){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&(yt(a,{code:at.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Dd(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>eo.mergeObjectSync(r,u)):eo.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return Ot.errToObj,new ea({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Ot.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new ea({...this._def,unknownKeys:"strip"})}passthrough(){return new ea({...this._def,unknownKeys:"passthrough"})}extend(t){return new ea({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ea({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:un.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new ea({...this._def,catchall:t})}pick(t){const n={};for(const r of Gn.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ea({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Gn.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new ea({...this._def,shape:()=>n})}deepPartial(){return Wm(this)}partial(t){const n={};for(const r of Gn.objectKeys(this.shape)){const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}return new ea({...this._def,shape:()=>n})}required(t){const n={};for(const r of Gn.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Nd;)i=i._def.innerType;n[r]=i}return new ea({...this._def,shape:()=>n})}keyof(){return HZ(Gn.objectKeys(this.shape))}}ea.create=(e,t)=>new ea({shape:()=>e,unknownKeys:"strip",catchall:Ld.create(),typeName:un.ZodObject,...An(t)});ea.strictCreate=(e,t)=>new ea({shape:()=>e,unknownKeys:"strict",catchall:Ld.create(),typeName:un.ZodObject,...An(t)});ea.lazycreate=(e,t)=>new ea({shape:e,unknownKeys:"strip",catchall:Ld.create(),typeName:un.ZodObject,...An(t)});class L1 extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new cu(l.ctx.common.issues));return yt(n,{code:at.invalid_union,unionErrors:o}),cn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new cu(c));return yt(n,{code:at.invalid_union,unionErrors:l}),cn}}get options(){return this._def.options}}L1.create=(e,t)=>new L1({options:e,typeName:un.ZodUnion,...An(t)});function HO(e,t){const n=Gu(e),r=Gu(t);if(e===t)return{valid:!0,data:e};if(n===Ct.object&&r===Ct.object){const a=Gn.objectKeys(t),i=Gn.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=HO(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===Ct.array&&r===Ct.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=HO(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return n===Ct.date&&r===Ct.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class F1 extends Vn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(p6(i)||p6(o))return cn;const l=HO(i.value,o.value);return l.valid?((g6(i)||g6(o))&&n.dirty(),{status:n.value,value:l.data}):(yt(r,{code:at.invalid_intersection_types}),cn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}F1.create=(e,t,n)=>new F1({left:e,right:t,typeName:un.ZodIntersection,...An(n)});class Mf extends Vn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ct.array)return yt(r,{code:at.invalid_type,expected:Ct.array,received:r.parsedType}),cn;if(r.data.length<this._def.items.length)return yt(r,{code:at.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cn;!this._def.rest&&r.data.length>this._def.items.length&&(yt(r,{code:at.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Dd(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>eo.mergeArray(n,o)):eo.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Mf({...this._def,rest:t})}}Mf.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Mf({items:e,typeName:un.ZodTuple,rest:null,...An(t)})};class N6 extends Vn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ct.map)return yt(r,{code:at.invalid_type,expected:Ct.map,received:r.parsedType}),cn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:a._parse(new Dd(r,l,r.path,[u,"key"])),value:i._parse(new Dd(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return cn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return cn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}N6.create=(e,t,n)=>new N6({valueType:t,keyType:e,typeName:un.ZodMap,...An(n)});class A0 extends Vn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ct.set)return yt(r,{code:at.invalid_type,expected:Ct.set,received:r.parsedType}),cn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(yt(r,{code:at.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(yt(r,{code:at.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return cn;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>i._parse(new Dd(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,n){return new A0({...this._def,minSize:{value:t,message:Ot.toString(n)}})}max(t,n){return new A0({...this._def,maxSize:{value:t,message:Ot.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}A0.create=(e,t)=>new A0({valueType:e,minSize:null,maxSize:null,typeName:un.ZodSet,...An(t)});class k6 extends Vn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}k6.create=(e,t)=>new k6({getter:e,typeName:un.ZodLazy,...An(t)});class C6 extends Vn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return yt(n,{received:n.data,code:at.invalid_literal,expected:this._def.value}),cn}return{status:"valid",value:t.data}}get value(){return this._def.value}}C6.create=(e,t)=>new C6({value:e,typeName:un.ZodLiteral,...An(t)});function HZ(e,t){return new Og({values:e,typeName:un.ZodEnum,...An(t)})}class Og extends Vn{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return yt(n,{expected:Gn.joinValues(r),received:n.parsedType,code:at.invalid_type}),cn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return yt(n,{received:n.data,code:at.invalid_enum_value,options:r}),cn}return Vo(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Og.create(t,{...this._def,...n})}exclude(t,n=this._def){return Og.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Og.create=HZ;class A6 extends Vn{_parse(t){const n=Gn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Ct.string&&r.parsedType!==Ct.number){const a=Gn.objectValues(n);return yt(r,{expected:Gn.joinValues(a),received:r.parsedType,code:at.invalid_type}),cn}if(this._cache||(this._cache=new Set(Gn.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Gn.objectValues(n);return yt(r,{received:r.data,code:at.invalid_enum_value,options:a}),cn}return Vo(t.data)}get enum(){return this._def.values}}A6.create=(e,t)=>new A6({values:e,typeName:un.ZodNativeEnum,...An(t)});class B1 extends Vn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Ct.promise&&n.common.async===!1)return yt(n,{code:at.invalid_type,expected:Ct.promise,received:n.parsedType}),cn;const r=n.parsedType===Ct.promise?n.data:Promise.resolve(n.data);return Vo(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}B1.create=(e,t)=>new B1({type:e,typeName:un.ZodPromise,...An(t)});class Ig extends Vn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===un.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{yt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return cn;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?cn:c.status==="dirty"||n.value==="dirty"?Ry(c.value):c});{if(n.value==="aborted")return cn;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?cn:l.status==="dirty"||n.value==="dirty"?Ry(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?cn:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?cn:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Pg(o))return cn;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Pg(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:n.value,value:l})):cn);Gn.assertNever(a)}}Ig.create=(e,t,n)=>new Ig({schema:e,typeName:un.ZodEffects,effect:t,...An(n)});Ig.createWithPreprocess=(e,t,n)=>new Ig({schema:t,effect:{type:"preprocess",transform:e},typeName:un.ZodEffects,...An(n)});class Nd extends Vn{_parse(t){return this._getType(t)===Ct.undefined?Vo(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Nd.create=(e,t)=>new Nd({innerType:e,typeName:un.ZodOptional,...An(t)});class Rg extends Vn{_parse(t){return this._getType(t)===Ct.null?Vo(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Rg.create=(e,t)=>new Rg({innerType:e,typeName:un.ZodNullable,...An(t)});class WO extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Ct.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}WO.create=(e,t)=>new WO({innerType:e,typeName:un.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...An(t)});class qO extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return M1(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new cu(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new cu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}qO.create=(e,t)=>new qO({innerType:e,typeName:un.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...An(t)});class E6 extends Vn{_parse(t){if(this._getType(t)!==Ct.nan){const r=this._getOrReturnCtx(t);return yt(r,{code:at.invalid_type,expected:Ct.nan,received:r.parsedType}),cn}return{status:"valid",value:t.data}}}E6.create=e=>new E6({typeName:un.ZodNaN,...An(e)});class bYe extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class nM extends Vn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?cn:i.status==="dirty"?(n.dirty(),Ry(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?cn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new nM({in:t,out:n,typeName:un.ZodPipeline})}}class KO extends Vn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Pg(a)&&(a.value=Object.freeze(a.value)),a);return M1(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}KO.create=(e,t)=>new KO({innerType:e,typeName:un.ZodReadonly,...An(t)});ea.lazycreate;var un;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(un||(un={}));const Wc=hd.create;Ld.create;rc.create;const XN=ea.create;ea.strictCreate;L1.create;F1.create;Mf.create;Og.create;B1.create;Nd.create;Rg.create;const wYe=XN({email:Wc().email({message:"Email khng hp l"}),password:Wc().min(6,{message:"Mt khu phi c t nht 6 k t"})});function _Ye(){const[e,t]=g.useState(""),[n,r]=g.useState(""),[a,i]=g.useState({}),[o,l]=g.useState(!1),[c,u]=g.useState({message:""}),{signIn:d,user:h}=Mn(),m=cs();g.useEffect(()=>{h&&m("/",{replace:!0})},[h,m]);const p=async v=>{v.preventDefault(),i({}),u({message:""});const x=wYe.safeParse({email:e,password:n});if(!x.success){const _={};x.error.errors.forEach(j=>{j.path[0]&&(_[j.path[0]]=j.message)}),i(_);return}l(!0);const{error:b}=await d(e,n);b&&(b.code==="email_not_confirmed"?u({message:"Email cha c xc nhn. Vui lng kim tra hp th v th mc spam.",code:"email_not_confirmed"}):b.code==="invalid_credentials"&&u({message:"Email hoc mt khu khng ng.",code:"invalid_credentials"})),l(!1)};return s.jsx(N0,{title:"ng nhp",subtitle:"Cho mng tr li! Vui lng ng nhp  tip tc.",children:s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"email",children:"Email"}),s.jsx(Ke,{id:"email",type:"email",placeholder:"your@email.com",value:e,onChange:v=>t(v.target.value),required:!0}),a.email&&s.jsx("p",{className:"text-sm text-destructive",children:a.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"password",children:"Mt khu"}),s.jsx(Ke,{id:"password",type:"password",placeholder:"",value:n,onChange:v=>r(v.target.value),required:!0}),a.password&&s.jsx("p",{className:"text-sm text-destructive",children:a.password})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(xf,{to:"/auth/forgot-password",className:"text-sm text-primary hover:underline",children:"Qun mt khu?"})}),s.jsx(J,{type:"submit",className:"w-full",disabled:o,children:o?"ang ng nhp...":"ng nhp"}),c.message&&c.code==="email_not_confirmed"&&s.jsxs("div",{className:"p-3 text-sm bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:[s.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:" Email cha c xc nhn"}),s.jsx("p",{className:"mt-1 text-yellow-700 dark:text-yellow-300",children:"Vui lng kim tra hp th (v th mc spam)  tm email xc nhn."})]}),c.message&&c.code==="invalid_credentials"&&s.jsx("div",{className:"p-3 text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded-md",children:c.message}),s.jsxs("div",{className:"text-center text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Cha c ti khon? "}),s.jsx(xf,{to:"/auth/signup",className:"text-primary hover:underline",children:"ng k ngay"})]})]})})}const jYe=XN({fullName:Wc().min(2,{message:"Tn phi c t nht 2 k t"}),email:Wc().email({message:"Email khng hp l"}),password:Wc().min(6,{message:"Mt khu phi c t nht 6 k t"}),confirmPassword:Wc()}).refine(e=>e.password===e.confirmPassword,{message:"Mt khu xc nhn khng khp",path:["confirmPassword"]});function SYe(){const[e,t]=g.useState(""),[n,r]=g.useState(""),[a,i]=g.useState(""),[o,l]=g.useState(""),[c,u]=g.useState({}),[d,h]=g.useState(!1),{signUp:m,user:p}=Mn(),v=cs();g.useEffect(()=>{p&&v("/",{replace:!0})},[p,v]);const x=async b=>{b.preventDefault(),u({});const _=jYe.safeParse({fullName:e,email:n,password:a,confirmPassword:o});if(!_.success){const w={};_.error.errors.forEach(N=>{N.path[0]&&(w[N.path[0]]=N.message)}),u(w);return}h(!0);const{error:j}=await m(n,a,e);j&&u({general:j.message}),h(!1)};return s.jsx(N0,{title:"ng k",subtitle:"To ti khon mi  bt u qun l chin dch qung co.",children:s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[c.general&&s.jsx("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/20",children:s.jsx("p",{className:"text-sm text-destructive font-medium",children:c.general})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"fullName",children:"H v tn"}),s.jsx(Ke,{id:"fullName",type:"text",placeholder:"Nguyn Vn A",value:e,onChange:b=>t(b.target.value),required:!0}),c.fullName&&s.jsx("p",{className:"text-sm text-destructive",children:c.fullName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"email",children:"Email"}),s.jsx(Ke,{id:"email",type:"email",placeholder:"your@email.com",value:n,onChange:b=>r(b.target.value),required:!0}),c.email&&s.jsx("p",{className:"text-sm text-destructive",children:c.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"password",children:"Mt khu"}),s.jsx(Ke,{id:"password",type:"password",placeholder:"",value:a,onChange:b=>i(b.target.value),required:!0}),c.password&&s.jsx("p",{className:"text-sm text-destructive",children:c.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"confirmPassword",children:"Xc nhn mt khu"}),s.jsx(Ke,{id:"confirmPassword",type:"password",placeholder:"",value:o,onChange:b=>l(b.target.value),required:!0}),c.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:c.confirmPassword})]}),s.jsx(J,{type:"submit",className:"w-full",disabled:d,children:d?"ang ng k...":"ng k"}),s.jsxs("div",{className:"text-center text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:" c ti khon? "}),s.jsx(xf,{to:"/auth/login",className:"text-primary hover:underline",children:"ng nhp"})]})]})})}const NYe=XN({email:Wc().email({message:"Email khng hp l"})});function kYe(){const[e,t]=g.useState(""),[n,r]=g.useState({}),[a,i]=g.useState(!1),[o,l]=g.useState(!1),{resetPassword:c}=Mn(),u=async d=>{d.preventDefault(),r({});const h=NYe.safeParse({email:e});if(!h.success){const p={};h.error.errors.forEach(v=>{v.path[0]&&(p[v.path[0]]=v.message)}),r(p);return}i(!0);const{error:m}=await c(e);i(!1),m||l(!0)};return o?s.jsx(N0,{title:"Kim tra email ca bn",subtitle:"Chng ti  gi lin kt t li mt khu n email ca bn.",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vui lng kim tra hp th n (v c th rc)  tm email t chng ti."})}),s.jsx("div",{className:"text-center",children:s.jsx(xf,{to:"/auth/login",children:s.jsx(J,{variant:"outline",className:"w-full",children:"Quay li ng nhp"})})})]})}):s.jsx(N0,{title:"Qun mt khu?",subtitle:"Nhp email ca bn  nhn lin kt t li mt khu.",children:s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"email",children:"Email"}),s.jsx(Ke,{id:"email",type:"email",placeholder:"your@email.com",value:e,onChange:d=>t(d.target.value),required:!0}),n.email&&s.jsx("p",{className:"text-sm text-destructive",children:n.email})]}),s.jsx(J,{type:"submit",className:"w-full",disabled:a,children:a?"ang gi...":"Gi lin kt t li"}),s.jsx("div",{className:"text-center text-sm",children:s.jsx(xf,{to:"/auth/login",className:"text-primary hover:underline",children:" Quay li ng nhp"})})]})})}const CYe=XN({password:Wc().min(6,{message:"Mt khu phi c t nht 6 k t"}),confirmPassword:Wc()}).refine(e=>e.password===e.confirmPassword,{message:"Mt khu xc nhn khng khp",path:["confirmPassword"]});function AYe(){const[e,t]=g.useState(""),[n,r]=g.useState(""),[a,i]=g.useState({}),[o,l]=g.useState(!1),{updatePassword:c}=Mn(),u=async d=>{d.preventDefault(),i({});const h=CYe.safeParse({password:e,confirmPassword:n});if(!h.success){const m={};h.error.errors.forEach(p=>{p.path[0]&&(m[p.path[0]]=p.message)}),i(m);return}l(!0),await c(e),l(!1)};return s.jsx(N0,{title:"t li mt khu",subtitle:"Nhp mt khu mi ca bn.",children:s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"password",children:"Mt khu mi"}),s.jsx(Ke,{id:"password",type:"password",placeholder:"",value:e,onChange:d=>t(d.target.value),required:!0}),a.password&&s.jsx("p",{className:"text-sm text-destructive",children:a.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ge,{htmlFor:"confirmPassword",children:"Xc nhn mt khu mi"}),s.jsx(Ke,{id:"confirmPassword",type:"password",placeholder:"",value:n,onChange:d=>r(d.target.value),required:!0}),a.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:a.confirmPassword})]}),s.jsx(J,{type:"submit",className:"w-full",disabled:o,children:o?"ang cp nht...":"Cp nht mt khu"})]})})}function EYe(){const[e,t]=g.useState(""),[n,r]=g.useState(""),[a,i]=g.useState(!1),o=async()=>{if(!e){ne.error("Vui lng nhp email");return}i(!0);try{const{data:c,error:u}=await wt.functions.invoke("manual-activate-user",{body:{email:e}});if(u)throw u;ne.success("Kch hot ti khon thnh cng!"),c.user_id&&r(c.user_id)}catch(c){console.error("Error activating user:",c),ne.error("Li khi kch hot ti khon: "+c.message)}finally{i(!1)}},l=async()=>{if(!n){ne.error("Vui lng kch hot ti khon trc");return}i(!0);try{const{data:c,error:u}=await wt.functions.invoke("assign-super-admin",{body:{userId:n}});if(u)throw u;ne.success("Gn quyn Super Admin thnh cng!")}catch(c){console.error("Error assigning super admin:",c),ne.error("Li khi gn quyn: "+c.message)}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:s.jsxs(Oe,{className:"w-full max-w-md",children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Kch hot ti khon Admin"}),s.jsx(sn,{children:"Nhp email  kch hot v gn quyn qun tr vin"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ke,{type:"email",placeholder:"Email",value:e,onChange:c=>t(c.target.value),disabled:a}),s.jsx(J,{onClick:o,disabled:a||!e,className:"w-full",children:a?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"ang x l..."]}):"Kch hot ti khon"})]}),n&&s.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["User ID: ",n]}),s.jsx(J,{onClick:l,disabled:a,variant:"secondary",className:"w-full",children:a?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"ang gn quyn..."]}):"Gn quyn Super Admin"})]}),s.jsxs("div",{className:"pt-4 text-sm text-muted-foreground",children:[s.jsxs("p",{children:["Email: ",e||"mospamini@gmail.com"]}),s.jsx("p",{className:"mt-2",children:"Sau khi kch hot, bn c th ng nhp bng ti khon ny."})]})]})]})})}const TYe=({icon:e,title:t,description:n})=>s.jsx(Oe,{className:"mb-6 border-primary/20 bg-gradient-to-br from-primary/5 to-primary/10",children:s.jsx(Re,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:s.jsx(e,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold mb-1",children:t}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})]})})});function PYe(){Mn();const{settings:e,loading:t}=tR(),{toast:n}=Lo(),[r,a]=g.useState(""),[i,o]=g.useState([]),{stage:l,data:c,lastMessage:u,isLoading:d,start:h,confirmAndCreate:m,reset:p,updateData:v}=CK(),x=async()=>{if(!r.trim()){n({title:" Li",description:"Vui lng nhp m t chin dch hoc link bi vit",variant:"destructive"});return}if(!(e!=null&&e.adsToken)||!(e!=null&&e.pageToken)||!(e!=null&&e.adAccountId)||!(e!=null&&e.pageId)){n({title:" Cha cu hnh token Facebook",description:"Vui lng m Settings  Facebook  kt ni ti khon",variant:"destructive"});return}const w={adsToken:e.adsToken,pageToken:e.pageToken,adAccountId:e.adAccountId,pageId:e.pageId};await h(r,w)},b=async()=>{if(!(e!=null&&e.adsToken)||!(e!=null&&e.pageToken)||!(e!=null&&e.adAccountId)||!(e!=null&&e.pageId)){n({title:" Cha cu hnh token Facebook",description:"Vui lng m Settings  Facebook  kt ni ti khon",variant:"destructive"});return}const w={adsToken:e.adsToken,pageToken:e.pageToken,adAccountId:e.adAccountId,pageId:e.pageId},N=await m(w);N&&(n({title:" Hon thnh!",description:`Campaign: ${N.campaignId}
AdSet: ${N.adSetId}
Ad: ${N.adId}`}),a(""))},_=()=>{p(),a(""),o([])},j=w=>{o(w),v(N=>({...N,location:w.map(k=>({name:k.name,type:k.type,key:k.key,radius:k.radius,distance_unit:"kilometer"}))}))};return t?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsx(zt,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"h-full overflow-y-auto",children:[s.jsx(TYe,{title:"Qung co bi vit sn",description:"To chin dch qung co t bi vit Facebook c sn",icon:vf}),s.jsx("div",{className:"container mx-auto p-3 lg:p-6 max-w-4xl overflow-x-hidden",children:l==="idle"||l==="parsing"?s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"To qung co nhanh"}),s.jsx(sn,{children:"Nhp link bi vit Facebook hoc m t chin dch"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsx(Oo,{value:r,onChange:w=>a(w.target.value),placeholder:`V d: 
https://www.facebook.com/yourpage/posts/123456789

Hoc m t chi tit:
Tn: Spa lm p
Tui: 25-45 n
Ngn sch: 500k/ngy
S thch: lm p, spa`,rows:6,className:"font-mono text-sm",disabled:d}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Chn v tr targeting (ty chn)"}),s.jsx(hR,{accessToken:(e==null?void 0:e.adsToken)||"",adAccountId:(e==null?void 0:e.adAccountId)||"",selectedLocations:i,onLocationChange:j})]}),s.jsx(J,{onClick:x,disabled:d||!r.trim(),className:"w-full",size:"lg",children:d?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"ang x l..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Bt u"]})}),u&&s.jsx("div",{className:"p-3 bg-muted rounded-md text-sm",children:u})]})]}):s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{children:"Xc nhn thng tin"}),s.jsx(sn,{children:u})]}),s.jsxs(Re,{className:"space-y-4",children:[c.name&&s.jsxs("div",{children:[s.jsx("strong",{children:"Tn chin dch:"})," ",c.name]}),c.budget&&s.jsxs("div",{children:[s.jsx("strong",{children:"Ngn sch:"})," ",c.budget.toLocaleString("vi-VN")," VND/ngy"]}),c.age&&s.jsxs("div",{children:[s.jsx("strong",{children:" tui:"})," ",c.age.min," - ",c.age.max]}),c.gender&&s.jsxs("div",{children:[s.jsx("strong",{children:"Gii tnh:"})," ",c.gender==="male"?"Nam":c.gender==="female"?"N":"Tt c"]}),c.location&&c.location.length>0&&s.jsxs("div",{children:[s.jsx("strong",{children:"V tr:"})," ",c.location.map(w=>w.name).join(", ")]}),c.interests&&c.interests.length>0&&s.jsxs("div",{children:[s.jsx("strong",{children:"S thch:"})," ",c.interests.map(w=>w.name).join(", ")]}),c.postUrl&&s.jsxs("div",{children:[s.jsx("strong",{children:"Link bi vit:"})," ",s.jsx("a",{href:c.postUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:c.postUrl})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(J,{variant:"outline",onClick:_,disabled:d,className:"flex-1",children:"Hy"}),l==="confirming"&&s.jsx(J,{onClick:b,disabled:d,className:"flex-1",size:"lg",children:d?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"ang to..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Xc nhn & To"]})})]})]})]})})]})}const OYe=()=>{const[e,t]=g.useState(""),[n,r]=g.useState(!1),[a,i]=g.useState(null),o=async()=>{if(!e.trim()){ne.error("Vui lng nhp Ads Token");return}r(!0),i(null);try{const{data:c,error:u}=await wt.functions.invoke("verify-token-permissions",{body:{token:e.trim()}});if(u)throw u;if(c.success)i(c.data),c.data.canReplacePageToken?ne.success(" Token c  quyn  thay th Page Token!"):ne.error(" Token thiu mt s quyn cn thit");else throw new Error(c.error||"Verification failed")}catch(c){console.error("Verify error:",c),ne.error(c.message||"C li xy ra khi verify token")}finally{r(!1)}},l=c=>c===0?"Khng ht hn":new Date(c*1e3).toLocaleString("vi-VN");return s.jsx("div",{className:"container mx-auto py-8 max-w-4xl",children:s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsx(Be,{className:"text-2xl",children:"Phase 1: Verify Token Permissions"}),s.jsx(sn,{children:"Kim tra xem Ads Token c  quyn  thay th Page Token khng"})]}),s.jsxs(Re,{className:"space-y-6",children:[s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Facebook Ads Token"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"password",placeholder:"Nhp Ads Token ca bn...",value:e,onChange:c=>t(c.target.value),className:"font-mono text-sm"}),s.jsx(J,{onClick:o,disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"w-4 h-4 animate-spin mr-2"}),"ang kim tra..."]}):"Verify"})]})]})}),a&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Oe,{className:a.canReplacePageToken?"border-green-500 bg-green-50 dark:bg-green-950":"border-red-500 bg-red-50 dark:bg-red-950",children:s.jsx(Re,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[a.canReplacePageToken?s.jsx(Nn,{className:"w-8 h-8 text-green-600"}):s.jsx(ji,{className:"w-8 h-8 text-red-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:a.canReplacePageToken?" Token c th thay th Page Token":" Token thiu quyn cn thit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.canReplacePageToken?"Ads Token ny c  quyn  qun l pages v to campaigns":"Ads Token cn c thm quyn pages  thay th Page Token"})]})]})})}),s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsx(Be,{className:"text-base",children:"Thng tin Token"})}),s.jsxs(Re,{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Trng thi:"}),s.jsx(Ze,{variant:a.tokenValid?"default":"destructive",children:a.tokenValid?"Hp l":"Khng hp l"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"App ID:"}),s.jsx("span",{className:"font-mono",children:a.appId})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"User ID:"}),s.jsx("span",{className:"font-mono",children:a.userId})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Ht hn:"}),s.jsx("span",{children:l(a.expiresAt)})]})]})]}),s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsx(Be,{className:"text-base",children:"Kim tra quyn bt buc"})}),s.jsx(Re,{className:"space-y-3",children:a.permissionCheck.map(c=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[c.granted?s.jsx(Nn,{className:"w-5 h-5 text-green-600"}):s.jsx(ji,{className:"w-5 h-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:c.permission}),s.jsx("p",{className:"text-xs text-muted-foreground",children:c.description})]})]}),s.jsx(Ze,{variant:c.granted?"default":"destructive",children:c.granted?"":""})]},c.permission))})]}),s.jsxs(Oe,{children:[s.jsx(Fe,{children:s.jsxs(Be,{className:"text-base",children:["Tt c quyn (",a.allPermissions.length,")"]})}),s.jsx(Re,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:a.allPermissions.map(c=>s.jsx(Ze,{variant:"secondary",className:"text-xs",children:c},c))})})]}),s.jsx(Oe,{className:"border-blue-500 bg-blue-50 dark:bg-blue-950",children:s.jsx(Re,{className:"pt-6",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(is,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Khuyn ngh tip theo:"}),a.canReplacePageToken?s.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[s.jsx("li",{children:" Phase 1 hon thnh: Token c  quyn"}),s.jsx("li",{children:" Tip tc Phase 2: Test Creative Creation"}),s.jsx("li",{children:" Sau  Phase 3: Test Full Campaign Flow"}),s.jsx("li",{children:" Nu pass ht  Update UI ch dng 1 token"})]}):s.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[s.jsx("li",{children:" Token thiu quyn pages"}),s.jsx("li",{children:" Cn request li token vi y  quyn"}),s.jsx("li",{children:" Hoc tip tc dng 2 tokens ring bit"})]})]})]})})})]})]})]})})},T6="https://nocodata.proai.vn",P6="u_Xjxcxs5Wcian3t0mznhXh5H1Ad_eIstADtTyij",O6={FEATURE_FLAGS:"mbctnl9dbktdz9f",ROLE_FEATURE_FLAGS:"mskba16vzzcofe6",USER_ROLES:"mcd6xqgbq12msbj"},IYe=()=>{const[e,t]=g.useState(!1),[n,r]=g.useState(null),a=async()=>{t(!0);const i={features:[],roleAssignments:[],userRoles:[]};try{const o=[{key:"manual_create_ads",name:" To qung co th cng",description:"To qung co c bn",category:"manual",enabled:!0},{key:"manual_create_message",name:" To QC tin nhn",description:"To qung co tin nhn",category:"manual",enabled:!0},{key:"manual_audience",name:" To i tng",description:"To i tng qung co",category:"manual",enabled:!0},{key:"manual_advanced_ads",name:" ADS nng cao",description:"Qun l qung co nng cao",category:"manual",enabled:!0},{key:"manual_quick_ad",name:" Bi vit sn nhanh",description:"To qung co t bi vit nhanh",category:"manual",enabled:!0},{key:"report_ads",name:" Bo co ads",description:"Xem bo co qung co",category:"report",enabled:!0},{key:"report_sales",name:" Bo co sale",description:"Xem bo co bn hng",category:"report",enabled:!0},{key:"report_summary",name:" Bo co tng",description:"Xem bo co tng hp",category:"report",enabled:!0},{key:"ai_quick_post",name:" Quick Post - To QC t bi vit",description:"To qung co t ng t bi vit Facebook",category:"ai",enabled:!0},{key:"ai_creative_campaign",name:" Creative Campaign - To QC vi media",description:"To chin dch qung co t hnh nh/video",category:"ai",enabled:!0},{key:"ai_audience_creator",name:" Audience Creator - To i tng",description:"To i tng qung co t ng bng AI",category:"ai",enabled:!0},{key:"ai_clone_tool",name:" Clone Tool - Nhn bn",description:"Nhn bn v ti u chin dch qung co",category:"ai",enabled:!0},{key:"ai_report_analysis",name:" Report Analysis - Phn tch bo co",description:"Phn tch v  xut ti u t bo co",category:"ai",enabled:!0}];for(const h of o)try{const m=await fetch(`${T6}/api/v2/tables/${O6.FEATURE_FLAGS}/records`,{method:"POST",headers:{"xc-token":P6,"Content-Type":"application/json"},body:JSON.stringify(h)});if(m.ok)i.features.push({key:h.key,status:"created"});else{const p=await m.text();i.features.push({key:h.key,status:"failed",error:p})}}catch(m){i.features.push({key:h.key,status:"error",error:String(m)})}const l=["manual_create_ads","manual_create_message","manual_audience","manual_advanced_ads","manual_quick_ad"],c=["report_ads","report_sales","report_summary"],u=["ai_quick_post","ai_creative_campaign","ai_audience_creator","ai_clone_tool","ai_report_analysis"],d=[{role:"user",features:[...l,...c]},{role:"admin",features:[...l,...c,...u]},{role:"super_admin",features:[...l,...c,...u]}];for(const{role:h,features:m}of d)for(const p of m)try{(await fetch(`${T6}/api/v2/tables/${O6.ROLE_FEATURE_FLAGS}/records`,{method:"POST",headers:{"xc-token":P6,"Content-Type":"application/json"},body:JSON.stringify({role:h,feature_key:p,enabled:!0})})).ok&&i.roleAssignments.push({role:h,featureKey:p,status:"created"})}catch{i.roleAssignments.push({role:h,featureKey:p,status:"error"})}ne.success("  populate NocoDB features!"),r(i)}catch(o){ne.error(" Li: "+String(o))}finally{t(!1)}};return s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(Oe,{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Populate NocoDB Features"}),s.jsx("p",{className:"mb-4",children:"Click button  insert feature flags vo NocoDB"}),s.jsx(J,{onClick:a,disabled:e,children:e?"ang x l...":"Populate NocoDB"}),n&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h2",{className:"font-bold mb-2",children:"Kt qu:"}),s.jsx("pre",{className:"bg-secondary p-4 rounded overflow-auto",children:JSON.stringify(n,null,2)})]})]})})},cE="https://nocodata.proai.vn",uE="u_Xjxcxs5Wcian3t0mznhXh5H1Ad_eIstADtTyij",dE={FEATURE_FLAGS:"mbctnl9dbktdz9f",ROLE_FEATURE_FLAGS:"mskba16vzzcofe6"};function RYe(){var i,o,l,c,u,d,h;const[e,t]=g.useState(null),[n,r]=g.useState(!1),a=async()=>{var m,p,v;r(!0);try{const b=await(await fetch(`${cE}/api/v2/tables/${dE.FEATURE_FLAGS}/records`,{headers:{"xc-token":uE}})).json(),j=await(await fetch(`${cE}/api/v2/tables/${dE.ROLE_FEATURE_FLAGS}/records`,{headers:{"xc-token":uE}})).json(),N=await(await fetch(`${cE}/api/v2/tables/${dE.ROLE_FEATURE_FLAGS}/records?where=(role,eq,user)`,{headers:{"xc-token":uE}})).json();t({featureFlags:{total:((m=b.list)==null?void 0:m.length)||0,data:b.list||[]},roleFeatureFlags:{total:((p=j.list)==null?void 0:p.length)||0,data:j.list||[]},userRoleFeatures:{total:((v=N.list)==null?void 0:v.length)||0,data:N.list||[]}})}catch(x){console.error("Error:",x),t({error:String(x)})}finally{r(!1)}};return s.jsxs("div",{className:"container mx-auto p-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:" Kim tra d liu NocoDB"}),s.jsx(J,{onClick:a,disabled:n,children:n?"ang kim tra...":"Kim tra d liu"}),e&&s.jsxs(Oe,{className:"mt-6 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Kt qu:"}),e.error?s.jsxs("div",{className:"text-red-500",children:[" Li: ",e.error]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:[" Feature Flags (",(i=e.featureFlags)==null?void 0:i.total,")"]}),s.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto max-h-60",children:JSON.stringify((o=e.featureFlags)==null?void 0:o.data,null,2)})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:[" All Role Features (",(l=e.roleFeatureFlags)==null?void 0:l.total,")"]}),s.jsx("pre",{className:"text-xs bg-gray-100 p-4 rounded overflow-auto max-h-60",children:JSON.stringify((c=e.roleFeatureFlags)==null?void 0:c.data,null,2)})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:[" USER Role Features (",(u=e.userRoleFeatures)==null?void 0:u.total,")"]}),s.jsx("div",{className:"space-y-2",children:(h=(d=e.userRoleFeatures)==null?void 0:d.data)==null?void 0:h.map((m,p)=>s.jsxs("div",{className:"text-sm",children:[" ",m.feature_key,": ",s.jsx("span",{className:m.enabled?"text-green-600":"text-red-600",children:m.enabled?" Enabled":" Disabled"})]},p))})]})]})]})]})}const $Ye=()=>{var h,m;Mn();const[e,t]=g.useState(!1),[n,r]=g.useState(null),[a,i]=g.useState(null),[o,l]=g.useState(null),c=async()=>{t(!0);try{const{data:p,error:v}=await wt.functions.invoke("check-cron-status");if(v)throw v;r(p),ne.success(" kim tra trng thi cron jobs")}catch(p){console.error("Error checking cron status:",p),ne.error("Li khi kim tra cron jobs")}finally{t(!1)}},u=async()=>{t(!0);try{ne.info("ang test auto-automation-rules-cron...");const{data:p,error:v}=await wt.functions.invoke("auto-automation-rules-cron");if(v)throw v;i(p),ne.success(` Test thnh cng!  qut ${p.totalRules||0} quy tc, thc thi ${p.executedRules||0} quy tc`)}catch(p){console.error("Error testing auto rules:",p),ne.error("Li: "+p.message)}finally{t(!1)}},d=async()=>{t(!0);try{ne.info("ang test process-pending-reverts...");const{data:p,error:v}=await wt.functions.invoke("process-pending-reverts");if(v)throw v;l(p),ne.success(` Test thnh cng!  x l ${p.processed||0} reverts`)}catch(p){console.error("Error testing reverts:",p),ne.error("Li: "+p.message)}finally{t(!1)}};return s.jsx("div",{className:"container mx-auto p-6 space-y-6",children:s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(tu,{className:"w-6 h-6"}),"Kim tra Cron Jobs"]}),s.jsx(sn,{children:"Verify cron jobs ang hot ng v test th cng"})]}),s.jsxs(Re,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Trng thi Cron Jobs"}),s.jsxs(J,{variant:"outline",size:"sm",onClick:c,disabled:e,children:[s.jsx(Hs,{className:`w-4 h-4 mr-2 ${e?"animate-spin":""}`}),"Kim tra"]})]}),n&&s.jsx("div",{className:"grid gap-3",children:s.jsxs(Oe,{className:"border-2",children:[s.jsx(Fe,{className:"py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Be,{className:"text-sm",children:["Active Cron Jobs (",((h=n.cronJobs)==null?void 0:h.length)||0,")"]}),s.jsxs(Ze,{variant:n.exists?"default":"destructive",children:[n.exists?s.jsx(oS,{className:"w-3 h-3 mr-1"}):s.jsx(ji,{className:"w-3 h-3 mr-1"}),n.exists?"Active":"No Jobs Found"]})]})}),s.jsx(Re,{className:"py-2 space-y-2",children:(m=n.cronJobs)==null?void 0:m.map((p,v)=>s.jsxs("div",{className:"p-2 border rounded bg-muted/50 text-xs text-muted-foreground",children:[s.jsx("div",{className:"font-semibold text-foreground",children:p.jobname}),s.jsxs("div",{children:["ID: ",p.jobid]}),s.jsxs("div",{children:["Schedule: ",p.schedule]}),s.jsxs("div",{children:["Active: ",p.active?"Yes":"No"]})]},v))})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium",children:"Test Auto Rules Execution"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Chy th cng auto-automation-rules-cron"})]}),s.jsxs(J,{onClick:u,disabled:e,className:"gap-2",children:[s.jsx(ap,{className:"w-4 h-4"}),"Chy Test"]})]}),a&&s.jsx(Oe,{className:"bg-muted/50",children:s.jsxs(Re,{className:"py-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Tng quy tc:"}),s.jsx(Ze,{variant:"outline",children:a.totalRules||0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:" thc thi:"}),s.jsx(Ze,{children:a.executedRules||0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"B qua:"}),s.jsx(Ze,{variant:"secondary",children:a.skippedRules||0})]}),a.errors&&a.errors.length>0&&s.jsxs("div",{className:"pt-2 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[s.jsx(is,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Errors:"})]}),a.errors.map((p,v)=>s.jsxs("div",{className:"text-xs text-destructive/80",children:["Rule ",p.ruleId,": ",p.error]},v))]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium",children:"Test Pending Reverts"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Chy th cng process-pending-reverts"})]}),s.jsxs(J,{onClick:d,disabled:e,variant:"outline",className:"gap-2",children:[s.jsx(ap,{className:"w-4 h-4"}),"Chy Test"]})]}),o&&s.jsx(Oe,{className:"bg-muted/50",children:s.jsxs(Re,{className:"py-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:" x l:"}),s.jsx(Ze,{children:o.processed||0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Thnh cng:"}),s.jsx(Ze,{variant:"default",children:o.successful||0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Tht bi:"}),s.jsx(Ze,{variant:"destructive",children:o.failed||0})]})]})})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium",children:"Test Scheduled Reports"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Chy th cng process-scheduled-reports (Gi bo co)"})]}),s.jsxs(J,{onClick:async()=>{t(!0);try{ne.info("ang test process-scheduled-reports...");const{data:p,error:v}=await wt.functions.invoke("process-scheduled-reports");if(v)throw v;ne.success(` Test thnh cng! Kt qu: ${JSON.stringify(p.results)}`)}catch(p){console.error("Error testing reports:",p),ne.error("Li: "+p.message)}finally{t(!1)}},disabled:e,className:"gap-2",children:[s.jsx(ap,{className:"w-4 h-4"}),"Chy Test"]})]})}),s.jsx("div",{className:"space-y-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium",children:"Test Sync Ads Cron"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Chy th cng sync-ads-cron (Cp nht bo co Ads)"})]}),s.jsxs(J,{onClick:async()=>{t(!0);try{ne.info("ang test sync-ads-cron...");const{data:p,error:v}=await wt.functions.invoke("sync-ads-cron",{body:{limit:100}});if(v)throw v;console.log("Sync Ads Result:",p),ne.success(` Test thnh cng!  x l ${p.processed||0} records`)}catch(p){console.error("Error testing sync ads:",p),ne.error("Li: "+p.message)}finally{t(!1)}},disabled:e,className:"gap-2",children:[s.jsx(ap,{className:"w-4 h-4"}),"Chy Test"]})]})}),s.jsxs(Oe,{className:"bg-primary/5 border-primary/20",children:[s.jsx(Fe,{className:"py-3",children:s.jsxs(Be,{className:"text-sm flex items-center gap-2",children:[s.jsx(is,{className:"w-4 h-4"}),"Hng dn kim tra"]})}),s.jsxs(Re,{className:"py-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:" test cron job t ng:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground",children:[s.jsx("li",{children:'To 1 rule vi "T ng chy theo lch" ENABLED'}),s.jsx("li",{children:'Set "Tn sut kim tra" (v d: Mi 5 pht)'}),s.jsx("li",{children:"i 5 pht cho cron job chy t ng"}),s.jsx("li",{children:"Kim tra logs ca rule  xem kt qu"})]})]}),s.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[s.jsx("p",{className:"font-medium",children:"Test th cng nhanh:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[s.jsx("li",{children:'Click "Chy Test"  trn  chy ngay lp tc'}),s.jsx("li",{children:"Kim tra kt qu hin th"}),s.jsx("li",{children:"Verify trong NocoDB execution logs"})]})]})]})]})]})]})})},MYe=()=>{const[e,t]=g.useState(!1),[n,r]=g.useState([]),{toast:a}=Lo(),i=async()=>{t(!0),r([]);try{a({title:"ang to bng...",description:"ang gi API NocoDB  to bng thng bo"});const{data:o,error:l}=await wt.functions.invoke("create-notification-tables",{body:{}});if(l)throw l;r(o.results||[]);const c=o.results.filter(d=>d.success).length,u=o.results.filter(d=>!d.success).length;a({title:c>0?" Hon thnh!":" Li",description:` x l ${c} bng thnh cng${u>0?`, ${u} li`:""}`,variant:c>0?"default":"destructive"})}catch(o){console.error("Error creating tables:",o),a({title:"Li to bng",description:(o==null?void 0:o.message)||"Khng th to bng trong NocoDB",variant:"destructive"})}finally{t(!1)}};return s.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:s.jsxs(Oe,{children:[s.jsxs(Fe,{children:[s.jsxs(Be,{className:"flex items-center gap-2",children:[s.jsx(_x,{className:"w-6 h-6"}),"Ci t bng Thng bo (NocoDB)"]}),s.jsx(sn,{children:"T ng to 2 bng trong NocoDB  phc v tnh nng Bo co nh k"})]}),s.jsxs(Re,{className:"space-y-4",children:[s.jsxs(Ka,{children:[s.jsx(jx,{className:"h-4 w-4"}),s.jsx(xl,{children:"Thng tin"}),s.jsxs(Ga,{children:["H thng s to 2 bng sau trong NocoDB:",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"notification_configs"})," - Lu cu hnh bo co (lch, ch s...)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"notifications"})," - Lu lch s thng bo  gi"]})]})]})]}),s.jsx(J,{onClick:i,disabled:e,className:"w-full",size:"lg",children:e?s.jsxs(s.Fragment,{children:[s.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"ang to bng..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jx,{className:"mr-2 h-4 w-4"}),"To bng Notification"]})}),n.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Kt qu:"}),n.map((o,l)=>s.jsxs(Ka,{variant:o.success?"default":"destructive",className:o.success?"border-green-500 bg-green-50":"",children:[o.success?s.jsx(oS,{className:"h-4 w-4 text-green-600"}):s.jsx(ji,{className:"h-4 w-4"}),s.jsx(xl,{className:"text-sm font-medium",children:o.table}),s.jsx(Ga,{className:"text-xs",children:o.success?s.jsxs(s.Fragment,{children:[o.message,o.table_id&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsxs("span",{className:"font-mono text-xs text-muted-foreground",children:["Table ID: ",o.table_id]})]})]}):s.jsx("span",{className:"text-red-600",children:o.error})})]},l))]})]})]})})},DYe=new uz,LYe=()=>s.jsx(Gfe,{children:s.jsx(dz,{client:DYe,children:s.jsxs(fi,{children:[s.jsx(jue,{}),s.jsx(tde,{}),s.jsx(Bfe,{children:s.jsx(_ge,{children:s.jsx(kge,{children:s.jsxs(Pfe,{children:[s.jsx(wr,{path:"/auth/login",element:s.jsx(_Ye,{})}),s.jsx(wr,{path:"/auth/signup",element:s.jsx(SYe,{})}),s.jsx(wr,{path:"/auth/forgot-password",element:s.jsx(kYe,{})}),s.jsx(wr,{path:"/auth/reset-password",element:s.jsx(AYe,{})}),s.jsx(wr,{path:"/admin-activation",element:s.jsx(EYe,{})}),s.jsx(wr,{path:"/",element:s.jsx(mo,{children:s.jsx(kKe,{})})}),s.jsx(wr,{path:"/ads-report-auto",element:s.jsx(mo,{children:s.jsx(PZ,{})})}),s.jsx(wr,{path:"/create-quick-ad",element:s.jsx(mo,{children:s.jsx(PYe,{})})}),s.jsx(wr,{path:"/test-facebook-id",element:s.jsx(mo,{children:s.jsx(qGe,{})})}),s.jsx(wr,{path:"/feature-test",element:s.jsx(mo,{children:s.jsx(GGe,{})})}),s.jsx(wr,{path:"/verify-token-permissions",element:s.jsx(mo,{children:s.jsx(OYe,{})})}),s.jsx(wr,{path:"/populate-nocodb-features",element:s.jsx(mo,{children:s.jsx(IYe,{})})}),s.jsx(wr,{path:"/test-nocodb-data",element:s.jsx(mo,{children:s.jsx(RYe,{})})}),s.jsx(wr,{path:"/test-cron-jobs",element:s.jsx(mo,{children:s.jsx($Ye,{})})}),s.jsx(wr,{path:"/setup-notifications",element:s.jsx(mo,{children:s.jsx(MYe,{})})}),s.jsx(wr,{path:"/notification-settings",element:s.jsx(mo,{children:s.jsx(IZ,{})})}),s.jsxs(wr,{path:"/dashboard",element:s.jsx(mo,{children:s.jsx(FGe,{})}),children:[s.jsx(wr,{index:!0,element:s.jsx(f6,{})}),s.jsx(wr,{path:"subscription",element:s.jsx(f6,{})}),s.jsx(wr,{path:"packages",element:s.jsx(VGe,{})}),s.jsx(wr,{path:"payment",element:s.jsx(zGe,{})}),s.jsx(wr,{path:"billing",element:s.jsx(HGe,{})}),s.jsx(wr,{path:"usage",element:s.jsx(WGe,{})})]}),s.jsx(wr,{path:"/super-admin",element:s.jsx(Tge,{children:s.jsx(MGe,{})})}),s.jsx(wr,{path:"*",element:s.jsx(CKe,{})})]})})})})]})})}),FYe=new uz({defaultOptions:{queries:{retry:2,refetchOnWindowFocus:!1,staleTime:5*60*1e3}}});nz(document.getElementById("root")).render(s.jsx(g.StrictMode,{children:s.jsx(dz,{client:FYe,children:s.jsx(LYe,{})})}));export{It as N,lt as a,ht as g};
